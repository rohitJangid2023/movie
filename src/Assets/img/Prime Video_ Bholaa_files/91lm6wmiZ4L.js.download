(()=>{var e,t,s,a={"./node_modules/@amzn/dvui/dist/Collapsible.js":function(e,t,s){var a;"undefined"!=typeof self&&self,a=e=>(()=>{"use strict";var t={"./src/components/Collapsible/domUtils.ts":(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.measureRequiredHeight=t.getTransitionExitStyles=t.getTransitionEntryStyles=t.setStyle=t.STYLE_RESET=t.collapsedEndStyle=void 0;const a=s("./src/tokens/animation.ts"),n="translateY(0) scale(1)",i="translateY(15%) scale(0.99)",r={overflow:"hidden",opacity:"1",marginBottom:"",marginTop:"",transform:n};t.collapsedEndStyle={height:"0px",overflow:"hidden",opacity:"0",marginBottom:"0px",marginTop:"0px",transform:i};const o={overflow:"hidden",opacity:"0",marginBottom:"0px",marginTop:"0px",transform:i},l={overflow:"hidden",opacity:"1",marginBottom:"",marginTop:"",transform:n};t.STYLE_RESET={height:"",opacity:"",overflow:"",transition:"",transform:"",marginBottom:"",marginTop:""},t.setStyle=(e,t)=>{e&&Object.keys(t).forEach((s=>{"string"==typeof t[s]&&(e.style[s]=t[s])}))},t.getTransitionEntryStyles=({isCollapsed:e,transitionDuration:t,contentHeight:s,transitionTimingOffset:n})=>{const i=e?a.EasingFunction.exit:a.EasingFunction.entrance,l=e?"linear":"ease-out";return{...e?r:o,height:(e?s:0)+"px",transition:e?`height ${t}ms ${i} ${n}ms, margin ${t}ms ${i} ${n}ms, transform ${t}ms ${i}, opacity ${t}ms ${l}`:`height ${t}ms ${i}, transform ${t}ms ${i} ${n}ms, opacity ${t}ms ${l} ${n}ms`}},t.getTransitionExitStyles=({isCollapsed:e,contentHeight:s})=>({...e?t.collapsedEndStyle:l,height:(e?0:s)+"px"}),t.measureRequiredHeight=e=>{if(!e)return 0;const t=e.style.height;e.style.height="auto";const s=e.offsetHeight;return e.style.height=t,s}},"./src/tokens/animation.ts":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EasingFunction=t.TransitionDelay=t.TransitionDuration=void 0,t.TransitionDuration={100:100,200:200,300:300,500:500,600:600,800:800},t.TransitionDelay={100:100,200:200,250:250,300:300,400:400},t.EasingFunction={standard:"cubic-bezier(0.2, 0.45, 0, 1)",entrance:"cubic-bezier(0.25, 1, 0.5, 1)",exit:"cubic-bezier(0.32, 0, 0.67, 0)"}},react:t=>{t.exports=e}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}var n={};return(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.Collapsible=void 0;const t=a("react"),s=a("./src/tokens/animation.ts"),i=a("./src/components/Collapsible/domUtils.ts");var r;!function(e){e.initial="initial",e.transitioning="transitioning",e.collapsed="collapsed",e.visible="visible"}(r||(r={})),e.Collapsible=({children:e,isCollapsed:a,className:n,collapseDelay:o=0,revealDelay:l=0,transitionDurationToken:c})=>{const[d,u]=t.useState(r.initial),m=t.useRef(null),p=t.useRef(),g=t.useRef(),h=t.useRef(),v=t.useRef(a),b=t.useRef(),D=a?o:l,y=s.TransitionDuration[c]||s.TransitionDuration[300],f=.4*y;t.useEffect((()=>{switch(d){case r.initial:break;case r.transitioning:(0,i.setStyle)(m.current,(0,i.getTransitionExitStyles)({isCollapsed:a,contentHeight:b.current})),g.current=window.setTimeout((()=>{u(a?r.collapsed:r.visible)}),y+f);break;case r.visible:(0,i.setStyle)(m.current,i.STYLE_RESET)}const e=()=>{if(m.current){b.current=(0,i.measureRequiredHeight)(m.current);const e=(0,i.getTransitionEntryStyles)({isCollapsed:a,transitionDuration:y,transitionTimingOffset:f,contentHeight:b.current});(0,i.setStyle)(m.current,e),h.current=window.setTimeout((()=>{u(r.transitioning)}),10)}};return v.current!==a&&(clearTimeout(h.current),clearTimeout(p.current),clearTimeout(g.current),d===r.transitioning&&u(a?r.collapsed:r.visible),p.current=window.setTimeout(e,D)),v.current=a,()=>{clearTimeout(h.current),clearTimeout(p.current),clearTimeout(g.current)}}),[a,d]);const E=a&&v.current===a&&d===r.initial?i.collapsedEndStyle:void 0;return t.createElement("div",{ref:m,className:n,style:E},e)},e.Collapsible.displayName="Collapsible"})(),n})(),e.exports=a(s("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/AdsBadge.js":function(e,t,s){var a;s("./node_modules/@amzn/dvui/dist/Icons/AdsBadge.css"),"undefined"!=typeof self&&self,a=e=>(()=>{var t={"./node_modules/classnames/index.js":(e,t)=>{var s;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)&&s.length){var r=n.apply(null,s);r&&e.push(r)}else if("object"===i)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},"./src/components/Icons/Icons.module.scss":e=>{e.exports={icon:"_22qEau",AdsBadge:"_2-YULd"}},react:t=>{"use strict";t.exports=e}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.AdsBadge=void 0;const t=a("react"),s=a("./node_modules/classnames/index.js"),i=a("./src/components/Icons/Icons.module.scss");class r extends t.Component{constructor(){super(...arguments),this.displayName="IconAdsBadge"}render(){return t.createElement("svg",{className:s(i.icon,i.AdsBadge),viewBox:"0 0 40 20",height:"20",width:"40",role:"img",style:{height:this.props.height||"20",width:this.props.width||"40"},"aria-hidden":"true"},t.createElement("title",null,this.props.title||"Ads Badge"),t.createElement("svg",{width:"40",height:"20",viewBox:"0 0 40 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("title",null,this.props.title||"Ads Badge"),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 0C4.47715 0 0 4.47715 0 10C0 15.5228 4.47715 20 10 20H30C35.5228 20 40 15.5228 40 10C40 4.47715 35.5228 0 30 0H10ZM22.3116 15.2319L22.1295 14.5489C21.5021 15.1156 20.7584 15.3989 19.8983 15.3989C19.2608 15.3989 18.6992 15.2421 18.2135 14.9284C17.7278 14.6046 17.3483 14.1391 17.0751 13.532C16.812 12.9248 16.6805 12.2115 16.6805 11.3918C16.6805 10.1371 16.979 9.13531 17.576 8.38652C18.173 7.6276 18.9623 7.24814 19.9438 7.24814C20.7432 7.24814 21.4363 7.47582 22.0232 7.93117V3.99998H24.2393V15.2319H22.3116ZM20.6268 13.7293C21.1125 13.7293 21.578 13.5876 22.0232 13.3043V9.29722C21.5881 9.04424 21.0872 8.91776 20.5206 8.91776C19.9843 8.91776 19.5846 9.12014 19.3215 9.52489C19.0584 9.91953 18.9268 10.5216 18.9268 11.3311C18.9268 12.1406 19.0634 12.7427 19.3367 13.1373C19.62 13.532 20.05 13.7293 20.6268 13.7293ZM12.933 15.2319L12.7508 14.5489C12.4371 14.8322 12.0728 15.0599 11.658 15.2319C11.2532 15.3938 10.8586 15.4748 10.4741 15.4748C9.72527 15.4748 9.1232 15.2623 8.66785 14.8373C8.22262 14.4123 8 13.8457 8 13.1373C8 12.6516 8.12143 12.2266 8.36428 11.8624C8.60713 11.488 8.95623 11.1945 9.41158 10.982C9.86693 10.7695 10.4032 10.6633 11.0205 10.6633C11.5062 10.6633 12.0425 10.729 12.6294 10.8606V10.1017C12.6294 9.6362 12.5333 9.31745 12.341 9.14543C12.1487 8.97341 11.7946 8.8874 11.2785 8.8874C10.4488 8.8874 9.53301 9.04424 8.53124 9.35793V7.88563C8.90564 7.69337 9.37617 7.54159 9.94282 7.43028C10.5095 7.30886 11.0863 7.24814 11.6732 7.24814C12.7154 7.24814 13.4743 7.46064 13.9499 7.88563C14.4356 8.30051 14.6785 8.95823 14.6785 9.85881V15.2319H12.933ZM11.0964 13.9873C11.3493 13.9873 11.6074 13.9317 11.8705 13.8204C12.1437 13.709 12.3967 13.5573 12.6294 13.365V12.0445C12.1842 11.9737 11.7845 11.9382 11.4303 11.9382C10.55 11.9382 10.1098 12.2924 10.1098 13.0007C10.1098 13.3144 10.1958 13.5573 10.3678 13.7293C10.5398 13.9013 10.7827 13.9873 11.0964 13.9873ZM29.784 12.6213C29.9054 12.7326 29.9661 12.8894 29.9661 13.0918C29.9661 13.5977 29.6018 13.8507 28.8733 13.8507C28.0435 13.8507 27.1278 13.6939 26.126 13.3802V14.8525C26.9254 15.2674 27.8462 15.4748 28.8884 15.4748C29.8194 15.4748 30.5682 15.2471 31.1348 14.7918C31.7116 14.3263 32 13.7192 32 12.9704C32 12.4341 31.8634 11.999 31.5902 11.665C31.3271 11.3311 30.8819 11.0377 30.2545 10.7847L29.1009 10.3142C28.7265 10.1624 28.4786 10.0359 28.3572 9.93471C28.2459 9.8234 28.1902 9.68173 28.1902 9.50971C28.1902 9.2871 28.2864 9.1252 28.4786 9.02401C28.6709 8.92282 28.9745 8.87222 29.3893 8.87222C30.0572 8.87222 30.7756 8.98859 31.5446 9.22132V7.74903C30.8262 7.41511 30.042 7.24814 29.192 7.24814C28.2712 7.24814 27.5325 7.46064 26.976 7.88563C26.4296 8.30051 26.1563 8.85199 26.1563 9.54007C26.1563 10.0865 26.293 10.5368 26.5662 10.8909C26.8394 11.2451 27.2846 11.5436 27.9019 11.7865L29.0858 12.257C29.4399 12.3885 29.6727 12.51 29.784 12.6213Z",fill:"currentColor"})),"")}}e.AdsBadge=r,e.default=r})(),n})(),e.exports=a(s("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Email.js":function(e,t,s){var a;s("./node_modules/@amzn/dvui/dist/Icons/Email.css"),"undefined"!=typeof self&&self,a=e=>(()=>{var t={"./node_modules/classnames/index.js":(e,t)=>{var s;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)&&s.length){var r=n.apply(null,s);r&&e.push(r)}else if("object"===i)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},"./src/components/Icons/Icons.module.scss":e=>{e.exports={icon:"_22qEau",AdsBadge:"_2-YULd"}},react:t=>{"use strict";t.exports=e}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.Email=void 0;const t=a("react"),s=a("./node_modules/classnames/index.js"),i=a("./src/components/Icons/Icons.module.scss");class r extends t.Component{constructor(){super(...arguments),this.displayName="IconEmail"}render(){return t.createElement("svg",{className:s(i.icon,i.Email),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},t.createElement("title",null,this.props.title||"Email"),t.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},t.createElement("title",null,this.props.title||"Email"),t.createElement("g",{fill:"none",fillRule:"evenodd",strokeLinecap:"round",stroke:"currentColor",strokeWidth:"2"},t.createElement("path",{strokeLinejoin:"round",d:"M1 5h22v14H1z"}),t.createElement("path",{d:"M1 6l9.377 6.82c.896.652 2.349.652 3.244.002l9.444-6.862"}))),"")}}e.Email=r,e.default=r})(),n})(),e.exports=a(s("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Facebook.js":function(e,t,s){var a;s("./node_modules/@amzn/dvui/dist/Icons/Facebook.css"),"undefined"!=typeof self&&self,a=e=>(()=>{var t={"./node_modules/classnames/index.js":(e,t)=>{var s;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)&&s.length){var r=n.apply(null,s);r&&e.push(r)}else if("object"===i)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},"./src/components/Icons/Icons.module.scss":e=>{e.exports={icon:"_22qEau",AdsBadge:"_2-YULd"}},react:t=>{"use strict";t.exports=e}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.Facebook=void 0;const t=a("react"),s=a("./node_modules/classnames/index.js"),i=a("./src/components/Icons/Icons.module.scss");class r extends t.Component{constructor(){super(...arguments),this.displayName="IconFacebook"}render(){return t.createElement("svg",{className:s(i.icon,i.Facebook),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},t.createElement("title",null,this.props.title||"Facebook"),t.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},t.createElement("title",null,this.props.title||"Facebook"),t.createElement("path",{d:"M15.667 23v-8.25h2.55l.409-2.75h-2.96V9.677c0-.917.077-1.344 1.392-1.344h1.359V5.3c0-.038-1.233-.124-2.393-.124C13.605 5.175 12 6.651 12 9.364V12H9.25v2.75H12V23H2.991A1.99 1.99 0 0 1 1 21.009V2.99C1 1.891 1.89 1 2.991 1H21.01C22.109 1 23 1.89 23 2.991V21.01c0 1.1-.89 1.991-1.991 1.991h-5.342z",fill:"currentColor",fillRule:"evenodd"})),"")}}e.Facebook=r,e.default=r})(),n})(),e.exports=a(s("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/FullscreenEnter.js":function(e,t,s){var a;s("./node_modules/@amzn/dvui/dist/Icons/FullscreenEnter.css"),"undefined"!=typeof self&&self,a=e=>(()=>{var t={"./node_modules/classnames/index.js":(e,t)=>{var s;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)&&s.length){var r=n.apply(null,s);r&&e.push(r)}else if("object"===i)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},"./src/components/Icons/Icons.module.scss":e=>{e.exports={icon:"_22qEau",AdsBadge:"_2-YULd"}},react:t=>{"use strict";t.exports=e}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.FullscreenEnter=void 0;const t=a("react"),s=a("./node_modules/classnames/index.js"),i=a("./src/components/Icons/Icons.module.scss");class r extends t.Component{constructor(){super(...arguments),this.displayName="IconFullscreenEnter"}render(){return t.createElement("svg",{className:s(i.icon,i.FullscreenEnter),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},t.createElement("title",null,this.props.title||"Fullscreen Enter"),t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},t.createElement("title",null,this.props.title||"Fullscreen Enter"),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3.034 4.473v1.98a1.017 1.017 0 0 1-2.033 0V2.019C1 1.456 1.456 1 2.017 1L6.454 1a1.017 1.017 0 1 1 0 2.034H4.473l4.92 4.92A1.017 1.017 0 1 1 7.952 9.39L3.034 4.473Zm16.417-1.439h-1.905a1.017 1.017 0 1 1 0-2.033h4.437c.561 0 1.016.455 1.016 1.016L23 6.454a1.017 1.017 0 1 1-2.034 0v-2.06l-4.913 4.992a1.017 1.017 0 0 1-1.45-1.427l4.848-4.925ZM9.397 14.614c.394.4.39 1.044-.011 1.438l-4.991 4.914h2.059a1.017 1.017 0 1 1 0 2.033H2.018A1.017 1.017 0 0 1 1 21.983v-4.437a1.017 1.017 0 1 1 2.033 0v1.905l4.925-4.848a1.017 1.017 0 0 1 1.438.011Zm5.212-.005a1.017 1.017 0 0 1 1.438 0l4.919 4.918v-1.98a1.017 1.017 0 0 1 2.033 0v4.435c0 .562-.455 1.017-1.016 1.017L17.546 23a1.017 1.017 0 1 1 0-2.034h1.983l-4.92-4.92a1.017 1.017 0 0 1 0-1.437Z",clipRule:"evenodd"})),"")}}e.FullscreenEnter=r,e.default=r})(),n})(),e.exports=a(s("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/FullscreenExit.js":function(e,t,s){var a;s("./node_modules/@amzn/dvui/dist/Icons/FullscreenExit.css"),"undefined"!=typeof self&&self,a=e=>(()=>{var t={"./node_modules/classnames/index.js":(e,t)=>{var s;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)&&s.length){var r=n.apply(null,s);r&&e.push(r)}else if("object"===i)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},"./src/components/Icons/Icons.module.scss":e=>{e.exports={icon:"_22qEau",AdsBadge:"_2-YULd"}},react:t=>{"use strict";t.exports=e}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.FullscreenExit=void 0;const t=a("react"),s=a("./node_modules/classnames/index.js"),i=a("./src/components/Icons/Icons.module.scss");class r extends t.Component{constructor(){super(...arguments),this.displayName="IconFullscreenExit"}render(){return t.createElement("svg",{className:s(i.icon,i.FullscreenExit),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},t.createElement("title",null,this.props.title||"Fullscreen Exit"),t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},t.createElement("title",null,this.props.title||"Fullscreen Exit"),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M1.675.272A.923.923 0 1 0 .367 1.574L6.15 7.383H3.472a.923.923 0 0 0-.921.925c0 .51.412.925.92.925h4.901a.923.923 0 0 0 .921-.925V3.385a.923.923 0 0 0-.92-.925.923.923 0 0 0-.922.925v2.688L1.675.272Zm5.776 5.801v1.31H6.15l.344.345a.923.923 0 1 0 1.308-1.302l-.35-.353Z",clipRule:"evenodd"}),t.createElement("path",{fill:"currentColor",d:"M7.8 7.731a.923.923 0 0 0 .002-1.305l-.35-.353v1.31H6.15l.344.345a.923.923 0 0 0 1.305.003Z"}),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M23.638 1.569A.923.923 0 1 0 22.32.277l-5.673 5.79V3.386a.923.923 0 0 0-.921-.925.923.923 0 0 0-.921.925v4.923a.927.927 0 0 0 .92.925h4.901a.923.923 0 0 0 .921-.925.923.923 0 0 0-.92-.926h-2.684l5.695-5.813Zm-5.695 5.813h-1.296V6.068l-.356.363a.923.923 0 1 0 1.319 1.292l.333-.34Z",clipRule:"evenodd"}),t.createElement("path",{fill:"currentColor",d:"M16.305 7.736a.923.923 0 0 0 1.305-.013l.333-.34h-1.296V6.067l-.356.363a.923.923 0 0 0 .014 1.305Z"}),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.294 15.693a.923.923 0 0 0-.921-.926H3.472a.923.923 0 0 0-.921.926c0 .51.412.925.921.925h2.672L.274 22.42a.923.923 0 0 0 1.298 1.312l5.88-5.812v2.694c0 .51.412.925.92.925a.923.923 0 0 0 .922-.925v-4.922ZM7.452 17.92l.345-.341a.923.923 0 0 0-1.298-1.313l-.355.35h1.308v1.304Z",clipRule:"evenodd"}),t.createElement("path",{fill:"currentColor",d:"M7.797 17.58a.923.923 0 0 0-1.298-1.313l-.355.35h1.308v1.304l.345-.341Z"}),t.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m23.731 22.426-5.782-5.808h-1.304v1.307l5.778 5.803a.923.923 0 1 0 1.308-1.302Z",clipRule:"evenodd"}),t.createElement("path",{fill:"currentColor",d:"M15.724 14.767a.923.923 0 0 0-.92.925v4.923c0 .51.412.925.92.925a.923.923 0 0 0 .921-.925v-2.69l-.349-.35a.923.923 0 1 1 1.309-1.303l.344.346h2.676a.923.923 0 0 0 .921-.926.923.923 0 0 0-.921-.925h-4.9Z"}),t.createElement("path",{fill:"currentColor",d:"M17.605 16.272a.923.923 0 1 0-1.309 1.302l.35.351v-1.308h1.303l-.344-.345Z"})),"")}}e.FullscreenExit=r,e.default=r})(),n})(),e.exports=a(s("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Pinterest.js":function(e,t,s){var a;s("./node_modules/@amzn/dvui/dist/Icons/Pinterest.css"),"undefined"!=typeof self&&self,a=e=>(()=>{var t={"./node_modules/classnames/index.js":(e,t)=>{var s;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)&&s.length){var r=n.apply(null,s);r&&e.push(r)}else if("object"===i)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},"./src/components/Icons/Icons.module.scss":e=>{e.exports={icon:"_22qEau",AdsBadge:"_2-YULd"}},react:t=>{"use strict";t.exports=e}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.Pinterest=void 0;const t=a("react"),s=a("./node_modules/classnames/index.js"),i=a("./src/components/Icons/Icons.module.scss");class r extends t.Component{constructor(){super(...arguments),this.displayName="IconPinterest"}render(){return t.createElement("svg",{className:s(i.icon,i.Pinterest),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},t.createElement("title",null,this.props.title||"Pinterest"),t.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},t.createElement("title",null,this.props.title||"Pinterest"),t.createElement("path",{d:"M12 1C5.927 1 1 5.924 1 12c0 4.505 2.709 8.374 6.585 10.075-.03-.768-.006-1.69.191-2.526.212-.892 1.416-5.994 1.416-5.994s-.352-.702-.352-1.74c0-1.63.945-2.848 2.121-2.848 1.001 0 1.484.752 1.484 1.652 0 1.006-.641 2.51-.971 3.904-.275 1.166.585 2.117 1.736 2.117 2.084 0 3.488-2.676 3.488-5.847 0-2.411-1.623-4.216-4.577-4.216-3.337 0-5.416 2.489-5.416 5.268 0 .959.284 1.634.725 2.158.204.24.232.337.159.613-.053.202-.174.689-.225.882-.073.279-.298.379-.55.276-1.537-.627-2.253-2.31-2.253-4.203 0-3.125 2.636-6.871 7.862-6.871 4.2 0 6.964 3.04 6.964 6.3 0 4.316-2.4 7.54-5.935 7.54-1.188 0-2.305-.641-2.688-1.37 0 0-.639 2.533-.773 3.022-.234.85-.69 1.696-1.108 2.357.99.292 2.034.451 3.118.451C18.075 23 23 18.076 23 12S18.075 1 12 1",fill:"currentColor",fillRule:"evenodd"})),"")}}e.Pinterest=r,e.default=r})(),n})(),e.exports=a(s("./node_modules/react/index.js"))},"./node_modules/@amzn/dvui/dist/Icons/Twitter.js":function(e,t,s){var a;s("./node_modules/@amzn/dvui/dist/Icons/Twitter.css"),"undefined"!=typeof self&&self,a=e=>(()=>{var t={"./node_modules/classnames/index.js":(e,t)=>{var s;!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)&&s.length){var r=n.apply(null,s);r&&e.push(r)}else if("object"===i)for(var o in s)a.call(s,o)&&s[o]&&e.push(o)}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)}()},"./src/components/Icons/Icons.module.scss":e=>{e.exports={icon:"_22qEau",AdsBadge:"_2-YULd"}},react:t=>{"use strict";t.exports=e}},s={};function a(e){var n=s[e];if(void 0!==n)return n.exports;var i=s[e]={exports:{}};return t[e](i,i.exports,a),i.exports}var n={};return(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.Twitter=void 0;const t=a("react"),s=a("./node_modules/classnames/index.js"),i=a("./src/components/Icons/Icons.module.scss");class r extends t.Component{constructor(){super(...arguments),this.displayName="IconTwitter"}render(){return t.createElement("svg",{className:s(i.icon,i.Twitter),viewBox:"0 0 24 24",height:"24",width:"24",role:"img",style:{height:this.props.height||"var(--dvui-icon-height)",width:this.props.width||"var(--dvui-icon-width)"},"aria-hidden":"true"},t.createElement("title",null,this.props.title||"Twitter"),t.createElement("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"},t.createElement("title",null,this.props.title||"Twitter"),t.createElement("path",{d:"M23 5.105c-.81.355-1.68.596-2.592.705a4.491 4.491 0 0 0 1.984-2.481 8.997 8.997 0 0 1-2.865 1.086A4.531 4.531 0 0 0 16.234 3c-2.492 0-4.512 2.009-4.512 4.486 0 .35.038.693.116 1.02a12.837 12.837 0 0 1-9.3-4.684 4.448 4.448 0 0 0-.611 2.255c0 1.555.593 2.927 1.805 3.731-.74-.024-1.291-.225-2.247-.559v.056c0 2.172 1.758 3.984 3.822 4.396a3.945 3.945 0 0 1-1.886.076c.575 1.781 2.266 3.08 4.241 3.116a9.043 9.043 0 0 1-5.591 1.92c-.363 0-.717-.022-1.071-.064a12.842 12.842 0 0 0 6.921 2.015c8.298 0 12.839-6.833 12.839-12.76 0-.193-.003-.386-.013-.58A9.115 9.115 0 0 0 23 5.104",fill:"currentColor",fillRule:"evenodd"})),"")}}e.Twitter=r,e.default=r})(),n})(),e.exports=a(s("./node_modules/react/index.js"))},"./src/entrypoints/hydration/detail.tsx":(e,t,s)=>{"use strict";var a=s("./src/util/hydration/hydrateWidgets.tsx"),n=s("./src/util/csm/csm.tsx"),i=s("./node_modules/react/index.js"),r=s("./src/util/wrappers/ArgsContext.tsx"),o=s("./src/util/wrappers/LoggersContext.tsx"),l=s("./node_modules/react-redux/es/index.js"),c=s("./node_modules/redux/es/redux.js"),d=s("./node_modules/redux-thunk/es/index.js"),u=s("./src/widgets/DVWebNodeDetail/reducers/action.ts"),m=s("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),p=s("./src/widgets/DVWebNodeDetail/utils/reducer.ts"),g=s("./src/widgets/DVWebNodeDetail/actions/index.ts");const h={},v=(0,c.UY)({fragments:(0,p.V)((e=>e.refund&&e.refund.fragments),h,((e=h,t)=>{switch(t.type){case g.k.RefreshAtfActionBox:case g.k.RefreshBtfActionBoxes:case g.k.RefreshEpisode:return t.output&&t.output.refund&&{...e,...t.output.refund.fragments}||e;default:return e}})),refunding:(e=null,t)=>{switch(t.type){case g.k.TriggerRefund:return e||{...t.payload};case g.k.RefundCancelled:case g.k.RefundFailed:case g.k.RefreshAtfActionBox:case g.k.RefreshBtfActionBoxes:case g.k.RefreshEpisode:return null;default:return e}}}),b=(0,p.V)((e=>e.imdb),{}),D=(0,p.V)((e=>e.notification),{}),y=(0,p.V)((e=>e.seasons),{});var f=s("./src/widgets/DVWebNodeDetail/reducers/collections.ts");const E=(0,p.V)((e=>e.carousel),{}),w=(0,p.V)((e=>e.extras),{}),_=(0,p.V)((e=>e.bundleCarousel),{}),T=(0,p.V)((e=>e.buyboxTitleId),{}),C=(0,p.V)((e=>e.creative),{}),x=(0,p.V)((e=>e.self),{}),I=(0,p.V)((e=>e.restriction),{}),N=(0,p.V)((e=>e.trailer),{}),P={},k=(0,p.V)((e=>e.watchlist),P,((e=P,t)=>{switch(t.type){case g.k.WatchlistToggle:return t.output.watchlist[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...t.output.watchlist[t.payload.pageTitleId],failed:!1}}||e;case g.k.WatchlistToggleFailed:return e[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...e[t.payload.pageTitleId],failed:!0}}||e;case g.k.ClearWatchlistToggleFailure:return e[t.payload.pageTitleId]&&{...e,[t.payload.pageTitleId]:{...e[t.payload.pageTitleId],failed:null}}||e;default:return e}})),S=(0,p.V)((e=>e.hoverWatchlist),{}),V=(0,p.V)((e=>e.features),{}),W=(0,p.V)((e=>e.castAndCrew),{}),A=(0,p.V)((e=>e.containers),{}),R=(0,p.V)((e=>e.pageLink),{}),L=(0,c.UY)({crow:(0,p.V)((e=>e.banner&&e.banner.crow),{}),ui:(e=null,t)=>{switch(t.type){case g.k.CreateBanner:return t.payload;case g.k.ClearBanner:return null;default:return e}}}),B=(0,p.V)((e=>e.otherFormats),{}),M={playbackLinkData:void 0,capabilities:void 0},O={};var j=s("./src/widgets/DVWebNodeDetail/reducers/devices.ts");const F=(0,p.V)((e=>e.bottomBar),{}),H=(0,p.V)((e=>e.exploreTabContent),{}),U=(0,p.V)((e=>e.entitlementCue),{}),Z=(0,p.V)((e=>e.tapsExperimentToken),{}),z=(0,p.V)((e=>e.autoplayHero),{}),q={showCancellationWinback:!0},$={},G=(e=$,t)=>{switch(t.type){case g.k.STORE_MERGE:return t.payload.reviews?((e,t={})=>Object.keys(t).reduce(((e,s)=>{if(e[s]){const t=e[s];e[s]={...t}}else e[s]=t[s];return e}),{...e}))(e,t.payload.reviews):e;case g.k.CHANGE_PAGE:return t.payload.reviews||$;default:return e}},Q=(0,p.V)((e=>e.comingSoon),{}),Y=(0,p.V)((e=>e.metadata),{},void 0,((e,t)=>Object.keys(e).reduce(((t,s)=>{const a=t[s]||{};return t[s]={...a,...e[s]},t}),{...t}))),K={},X=e=>({...e,isEligible:void 0}),J=(0,p.V)((e=>e.reviewSubmission),K,((e=K,t)=>{switch(t.type){case g.k.FetchReviewEligibility:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:(s=e[t.payload.pageTitleId],a=t.output,{...s,isEligible:null==a||null===(n=a.eligibilityResponse)||void 0===n?void 0:n.isEligible})}:e;case g.k.ClearReviewEligibility:return e[t.payload.pageTitleId]?{...e,[t.payload.pageTitleId]:X(e[t.payload.pageTitleId])}:e;default:return e}var s,a,n})),ee=(0,p.V)((e=>e.widgets),{},void 0,((e,t)=>({...t,...Object.keys(e).reduce(((s,a)=>(s[a]={...t[a],...e[a]},s)),{})}))),te=(0,p.V)((e=>e.impressionAnalytics),{}),se=(0,p.V)((e=>e.termsText),{}),ae=(0,p.V)((e=>e.bottomMenu),{}),ne=(0,c.UY)({requestContext:(e=null)=>e,pageContext:(e=null)=>e,pageTitleId:(e="",t)=>{switch(t.type){case g.k.STORE_MERGE:return t.payload&&t.payload.pageTitleId||e;case g.k.CHANGE_PAGE:return t.payload.pageTitleId;default:return e}},features:V,player:(e=M,t)=>{switch(t.type){case g.k.PlaybackStart:return{...e,playbackLinkData:t.payload};case g.k.PlaybackClosed:case g.k.PlaybackFailed:return{...e,playbackLinkData:void 0};case g.k.SetPlayerCapabilities:return{...e,capabilities:t.payload.capabilities};default:return e}},playbackIntegration:(e=O,t)=>{switch(t.type){case g.k.TriggerUpsellApp:return{...e,isUpsellingApp:!0};case g.k.ClearUpsellApp:return{...e,isUpsellingApp:!1};default:return e}},widgets:ee,action:u.I6,bundleCarousel:_,buyboxTitleId:T,creative:C,detail:m.I6,imdb:b,notification:D,refund:v,restriction:I,self:x,trailer:N,watchlist:k,hoverWatchlist:S,seasons:y,collections:f.I6,carousel:E,extras:w,pageLink:R,purchase:(e=null,t)=>{switch(t.type){case g.k.TriggerPurchase:return e||{...t.payload,failed:!1};case g.k.CHANGE_PAGE:case g.k.PurchaseCancelled:case g.k.RefreshAtfActionBox:case g.k.RefreshBtfActionBoxes:case g.k.RefreshEpisode:return null;case g.k.PurchaseFailed:return t.payload.reload&&e?{...e,failed:!0}:null;default:return e}},exploreTabContent:H,reviews:G,castAndCrew:W,containers:A,otherFormats:B,banner:L,bottomBar:F,devices:j.I,autoplayHero:z,entitlementCue:U,winback:(e=q,t)=>t.type===g.k.UpdateShowCancellationWinback?{...e,showCancellationWinback:t.payload.showCancellationWinback}:e,tapsExperimentToken:Z,comingSoon:Q,metadata:Y,reviewSubmission:J,impressionAnalytics:te,termsText:se,bottomMenu:ae}),ie=ne;var re=s("./src/widgets/DVWebNodeDetail/utils/utils.ts");const oe=(e,t)=>s=>a=>n=>{e.count(`${re.EZ}_Action_${n.type.split("/").pop()}`,1,!1),t&&e.info("Action",n);const i=a(n);return t&&e.info("State",s.getState()),i};var le=s("./src/widgets/DVWebNodeDetail/actions/constants.ts");let ce;const de=(e,t,s)=>{const a=e.requestContext.isInternal;if(ce)s?ce.dispatch({type:le.k.CHANGE_PAGE,payload:e}):ce.dispatch({type:le.k.STORE_MERGE,payload:e});else{const s=[d.Z,oe(t,a)];a&&t.info("➡ Initial State",e);const n=a&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.qC;ce=(0,c.MT)(ie,e,n((0,c.md)(...s)))}return ce};var ue=s("./node_modules/@amzn/dvui/dist/DvuiContainer.js"),me=s("./node_modules/react-dom/index.js"),pe=s("./src/util/utils/retryComponent.ts"),ge=s("./src/util/utils/history.ts"),he=s("./src/util/utils/device.ts"),ve=s("./src/widgets/DVWebNodeDetail/selectors/purchase.ts"),be=s("./src/widgets/DVWebNodeDetail/selectors/detailFragment.ts"),De=s("./src/widgets/DVWebNodeDetail/data/getDetailPageInputs.ts"),ye=s("./src/widgets/DVWebNodeDetail/utils/wps.ts"),fe=s("./src/widgets/DVWebNodeDetail/utils/domainUtils.ts");const Ee=(e,t,s,a)=>{const n=(0,De.pV)({isElcano:t,titleID:e,atfWidgets:["BuyBox"]});return(0,ye.Qk)(n,(e=>({type:le.k.RefreshAtfActionBox,input:n,output:e,payload:{offerAsin:s,canonicalTitleId:a}})))},we=e=>(t,s)=>{const a=((e,t,s)=>({context:e,titleIDs:[t],fragments:["Action","Refund"],presentationScheme:(0,fe.V)(e.domain||"Fogg"),isElcano:s}))(s().requestContext,e,Boolean(s().features.isElcano));return(0,ye.Gy)(a,(e=>({type:le.k.RefreshEpisode,input:a,output:e})))(t,s)},_e=e=>(t,s)=>{const a=s(),{pageTitleId:n}=a,i=[Ee(a.pageTitleId,Boolean(a.features.isElcano))(t,s)];return(0,be.NE)(a)||i.push(e?we(e)(t,s):(e=>(t,s)=>{const a=(0,De.F_)({context:s().requestContext,titleID:e,isElcano:Boolean(s().features.isElcano)});return(0,ye.Qk)(a,(e=>({type:le.k.RefreshBtfActionBoxes,input:a,output:e})))(t,s)})(n)(t,s)),Promise.all(i)};var Te=s("./src/widgets/DVWebNodeDetail/actions/purchase.ts"),Ce=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),xe=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts");class Ie extends i.Component{constructor(e){super(e),this.state={error:void 0,info:void 0}}componentDidCatch(e,t){const{logger:s,name:a}=this.props,n=`${re.EZ}_ErrorBoundary_${a}`;s.fatal(n,e).count(n,1,!1),this.setState({error:e,info:t})}render(){const{error:e}=this.state,{requestContext:{isInternal:t}}=this.props;return e?t?i.createElement("div",null,i.createElement("div",null,"$",e.message),i.createElement("div",null,"$",e.stack)):null:this.props.children}}const Ne=(0,l.$j)((e=>({requestContext:(0,xe.Iz)(e)})))((0,Ce.n)(Ie));var Pe=s("./src/widgets/DVWebNodeDetail/actions/refund.ts"),ke=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),Se=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const Ve=(0,ke.P)([Se.bS.refunding,Se.bS.refund],((e,t)=>{if(!e||!t[e.titleId]||0===t[e.titleId].refundableOrders.length)return null;const{titleId:s}=e,{asin:a,csrfToken:n}=t[s].refundableOrders[0],i=/^[a-zA-Z0-9]{10}$/.test(a);return{asin:i?a:void 0,gti:i?void 0:a,csrfToken:n}}));function We(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ae=i.lazy((()=>(0,pe.k)((()=>s.e(8355).then(s.bind(s,"./src/widgets/DVWebNodeDetail/components/purchaseFlowWrapper/dvpaWrapper.tsx"))),"detail-purchase",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:PurchaseFlowWorkflow",1)})).then((({PurchaseFlowWorkflow:e})=>({default:e}))))),Re="mfa-purchase-root",Le=e=>{const t=(window.location.search||"").match(`${e}=([^&]+)`);return t?decodeURIComponent(t[1]):void 0};class Be extends i.Component{constructor(e){super(e),We(this,"el",void 0),We(this,"portalRoot",void 0),We(this,"state",void 0),We(this,"shouldInitialize",(()=>Object.keys(this.props.offerTokenToPurchaseAction).length>0||this.props.hasRefunds)),this.state={initialized:!1},this.portalRoot=null}componentDidMount(){const{triggerPurchase:e,offerTokenToPurchaseAction:t}=this.props;if(this.shouldInitialize()){this.initialize();const s=Le("continueToken"),a=Le("offerToken"),n=Le("gti");s&&a&&(t[a]||n)&&(setTimeout((()=>e(a,s,n)),300),window.location.href&&(0,ge.lO)(null,document.title,(e=>e.replace(/continueToken=[^&]+&?/,"").replace(/offerToken=[^&]+&?/,"").replace(/gti=[^&]+&?/,""))(window.location.href)))}}componentDidUpdate(){!this.state.initialized&&this.shouldInitialize()&&this.initialize()}componentWillUnmount(){this.portalRoot&&this.el&&this.portalRoot.removeChild(this.el)}getPurchaseElement(){let e=document.getElementById(Re);return e||(e=document.createElement("div"),e.setAttribute("id",Re),document.body.appendChild(e),e)}initialize(){this.portalRoot=this.getPurchaseElement(),this.el=document.createElement("div"),this.portalRoot.appendChild(this.el),this.setState({initialized:!0})}render(){const{purchasingDetails:e,refundingDetails:t,callbackCancel:s,resetAfterCancel:a,callbackFailure:n,failed:r,refreshAfterDone:o,callbackCSRF:l,callbackCancelRefund:c,callbackFailureRefund:d,callbackRefund:u,subPageType:m,titleId:p,capabilities:g,offerTokenToPurchaseAction:h,deviceId:v}=this.props,{initialized:b}=this.state,D={supportsWebPlayback:Boolean(g)&&g.supportsWebPlayback,supportsHDMovies:Boolean(g)&&g.supportsHDMovies,supportsUHD:!1};if(!b)return null;let y={action:void 0,actionContext:{callbacks:{callbackCancel:()=>{},callbackFailure:()=>{}}}};if(e){const{details:t,continueToken:i,refTag:c,gtiRedirect:d}=e,u=t&&t.offer.offerToken||e.offerToken;let g=t&&t.offer.csrfTokenWorkflow;if(!g){const e=Object.values(h)[0];g=e&&e.offer.csrfTokenWorkflow}const b=t&&t.gti||d,{deviceTypeId:f}=(0,he.dz)();y={action:"purchase",actionContext:{isVisible:!0,playerDetails:D,extraData:{subPageType:m,titleId:p,refTag:c,globalTitleIdentifier:b,deviceTypeId:f,...v&&{deviceId:v}},callbacks:{callbackCancel:s,callbackFailure:n,resetAfterCancel:a,refreshAfterDone:o,failed:r,callbackCSRF:l},offerContext:{offerToken:u,csrfToken:g},continueToken:i}}}else t&&(y={action:"refund",actionContext:{isVisible:!0,asin:t.asin,csrfToken:t.csrfToken,globalTitleIdentifier:t.gti,callbacks:{callbackCancel:c,callbackFailure:d,callbackRefundSuccess:u("Success"),callbackRefundFailure:u("Failure")}}});return me.createPortal(i.createElement(Ne,{name:"purchaseWorkflow"},i.createElement(i.Suspense,{fallback:i.createElement(i.Fragment,null)},i.createElement(Ae,y))),this.el)}}const Me=(e,t,s)=>(a,n,i=!1)=>{const r=i?t.error:t.info,o=[re.EZ,s,n].join("_"),{deviceTypeId:l}=(0,he.dz)();r(`${i?"TVOD failure in ":""}[${s}] - Callback ${n} triggered`).count(o,1,!1).count(`${o}_${l}`,1,!1),a({dispatch:e,logger:t})},Oe=(0,Ce.n)((0,l.$j)((e=>{var t;return{purchasingDetails:(0,ve.G)(e),refundingDetails:Ve(e),offerTokenToPurchaseAction:(0,ve.n)(e),hasRefunds:Object.keys(e.refund.fragments).length>0,subPageType:(0,be.S6)(e),deviceId:null===(t=e.requestContext)||void 0===t?void 0:t.deviceID,titleId:e.pageTitleId,capabilities:e.player.capabilities}}),((e,{logger:t})=>{const s=((e,t)=>Me(e,t,"Purchase"))(e,t),a=((e,t)=>Me(e,t,"Refund"))(e,t);return{callbackCancel:()=>s(Te.jF,"callbackCancel"),resetAfterCancel:()=>s(Te.jF,"resetAfterCancel"),callbackFailure:()=>s(Te.NT,"callbackFailure",!0),failed:()=>s(Te.NT,"failed",!0),refreshAfterDone:()=>s(e(Te.P)(_e),"refreshAfterDone"),callbackCSRF:()=>s(e(Te.MW)(_e),"callbackCSRF"),callbackCancelRefund:()=>a(Pe.dz,"callbackCancel"),callbackFailureRefund:()=>a(Pe.H8,"callbackFailure"),callbackRefund:t=>s=>a(e((0,Pe.C0)(t,s,_e)),`callbackRefund${t}`),triggerPurchase:(s,a,n)=>(0,Te.lQ)(e,t,s,a,void 0,n)}}))(Be));var je=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),Fe=s("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts");var He=s("./node_modules/@amzn/dv-marin-tracking-js-library/dist/index.js"),Ue=(s("./src/widgets/DVWebNodeDetail/utils/requestServiceData.ts"),s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts"),s("./src/widgets/DVWebNodeDetail/data/normalize.ts"));var Ze=s("./src/widgets/DVWebNodeDetail/utils/deviceUtils.ts");const ze="kDMa9F",qe="Qo+b2C",$e="aA5aoD",Ge="Ommk8B",Qe="mj4dZi",Ye="ljcPsM",Ke="hZnyxQ",Xe="YIo-cA";var Je=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),et=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),tt=s("./node_modules/classnames/index.js"),st=s.n(tt),at=s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),nt=s("./src/shared/imageUtils/imageUtils.ts"),it=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx");function rt(){return rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},rt.apply(this,arguments)}const ot=(0,it.eB)((({title:e,asin:t,cGti:s,isRetail:a,makeUrl:n,showLinkToDP:r=!1,titleLogo:o,providerLogo:l,hasDefaultTheme:c,titleArtClassName:d})=>{const u=lt(c,l,o,e,d)||e&&i.createElement("h1",{className:tt(et.Z.fullWidth,c?ze:qe),"data-automation-id":"title"},e);if(u){if(r){const e=a&&t||s,r=n&&e&&n((0,Je.K1)(e),{refTag:"atv_hover_title"});return i.createElement("a",{href:r,className:et.Z.enablePointerEvents},u)}return u}return null})),lt=(e,t,s,a,n)=>{const r={alt:a,src:s,baseValue:600,srcSizes:[{"max-phablet":300},{"min-phablet":600}],format:nt.GH.png};return s&&a&&i.createElement("div",{className:tt(et.Z.fullWidth)},i.createElement("div",{className:n},ct(t),i.createElement("h1",{className:tt(e?$e:Ge),"data-testid":"title-art"},i.createElement("div",{className:Qe},i.createElement(at.t,rt({className:Ye},r))))))},ct=e=>{const t={alt:"",src:e,baseValue:300,srcSizes:[{"max-phablet":200},{"min-phablet":300}],format:nt.GH.png};return e?i.createElement("div",{className:tt(et.Z.fullWidth,Ke)},i.createElement(at.t,rt({className:Xe},t))):null};var dt=s("./src/widgets/DVWebNodeDetail/selectors/shared.ts"),ut=s("./src/widgets/DVWebNodeDetail/selectors/component/actionBoxComponentSelectors.ts"),mt=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),pt=s("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),gt=s("./node_modules/reselect/es/index.js");var ht=s("./src/widgets/DVWebNodeDetail/selectors/metadataFragment.ts"),vt=s("./src/util/utils/dvstring/index.ts"),bt=s("./src/widgets/DVWebNodeDetail/selectors/reviews.ts"),Dt=s("./src/widgets/DVWebNodeDetail/selectors/notificationFragment.ts");const yt=(0,ke.P)([xe.vD,xe.T_,Se.mZ.headerDetail],((e,t,s)=>{if(s){const a=s.images&&{titleLogo:s.images.titleLogo,providerLogo:s.images.providerLogo};return{title:s.parentTitle||s.title,asin:s.asin,cGti:s.compactGti,makeUrl:e,isRetail:t,...a}}})),ft=((0,ke.P)([Se.mZ.headerDetail],(e=>{var t,s;if(e)return{title:e.parentTitle||e.title,titleLogo:null===(t=e.images)||void 0===t?void 0:t.titleLogo,providerLogoUrl:null===(s=e.images)||void 0===s?void 0:s.providerLogo}})),(0,ke.P)([dt.be,Se.mZ.headerDetail],((e,t)=>{if(t)return{...t,isTV:e}}))),Et=((0,ke.P)(be.A2,(e=>{const t=e&&(e.heroshot||e.fullBackground16x9);return Boolean(t)})),(0,ke.P)(Se.mZ.headerDetail,(e=>e&&{synopsis:e.synopsis}||void 0))),wt=(0,gt.wN)((_t=3,e=>{let t=null,s=null;return(...a)=>((null===t||a.some(((e,s)=>s<_t&&e!==t[s])))&&(s=e(...a)),t=a,s)}))([Se.bS.pageTitleId,Se.mZ.seasons,xe.T_,Se.bS.detail,Se.bS.self],((e,t,s,a,n)=>({seasons:t?t.map((e=>({titleId:e.seasonId,seasonLink:e.seasonLink,seasonSelectorIcon:e.seasonSelectorIcon,detail:a[e.seasonId],self:n[e.seasonId]}))):void 0,pageTitleId:e,isRetail:s})));var _t;const Tt=(0,ke.P)([dt.Ng,Se.mZ.headerDetail,ut.DG],((e,t,s)=>{const a=Boolean(t&&t.title),n=Boolean(s);return e?a||n:a})),Ct=(0,ke.P)([dt.Ng,Se.mZ.headerDetail,ut.DG],((e,t,s)=>{const a=!Boolean(t&&t.title),n=Boolean(s);return e&&a&&n})),xt=((0,ke.P)([mt.Hu,mt.Tr,xe.T_,bt.M,Se.bS.bottomBar,pt.MZ],((e,t,s,a,n,i)=>n&&{isMobile:e,isPurchaseRestricted:t,isRetail:s,showReviews:a,bottomBar:n,watchPartyAction:i}||void 0)),(0,ke.P)([mt.Hu,ht.yl],((e,t)=>t&&{isMobile:e,chartPosition:t}||void 0)),(0,ke.P)([pt.lO],(e=>{const t=null==e?void 0:e.find((e=>"CRITICAL"===e.severity)),s=null==t?void 0:t.message.string.replace(/{lineBreak}/g," | ");return s&&{message:(0,vt.bE)(s)}})),(0,ke.P)([pt.pL,Dt.E],((e,t)=>{var s;const a=null==t?void 0:t.find((e=>"ComingSoon"==(null==e?void 0:e.notificationType))),n=null==e||null===(s=e.highValueMessage)||void 0===s?void 0:s.dvMessage;return{message:(null==a?void 0:a.message)||(null==n?void 0:n.string)&&n||void 0}}))),It=(0,ke.P)(Se.mZ.headerDetail,(e=>(null==e?void 0:e.genres)||[])),Nt=(0,ke.P)(Se.mZ.metadata,(e=>(null==e?void 0:e.moods)||[])),Pt=(0,ke.P)(Se.bS.bottomBar,(e=>null==e?void 0:e.shareWidgetModel)),kt=(0,ke.P)(be.A2,(e=>(null==e?void 0:e.fullBackground16x9)||(null==e?void 0:e.heroshot)||"https://m.media-amazon.com/images/G/01/digital/video/web/Default_Background_Art_LTR.jpg"));var St=s("./node_modules/@amzn/dvui/dist/DropList.js");const Vt="klzoqL";var Wt=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),At=s("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),Rt=s("./node_modules/@amzn/dvui/dist/Icons/AdsBadge.js"),Lt=s.n(Rt),Bt=s("./node_modules/@amzn/dvui/dist/Icons/Unentitled.js"),Mt=s.n(Bt);const Ot=({asins:e,gti:t,compactGTI:s,pageTitleId:a})=>Boolean(e.includes(a)||a===t||a===s),jt=e=>{switch(e){case"FreeWithAds":return i.createElement(Lt(),null);case"Unentitled":return i.createElement(Mt(),null);default:return null}},Ft=(e,t)=>e.reduce(((e,s)=>{var a;if(null==s||null===(a=s.self)||void 0===a||!a.link)return e;const n=s.self,{asins:r,gti:o,compactGTI:l,sequenceNumber:c}=n;return e.push({text:i.createElement(Wt.H1,{stringID:"AVOD_DP_season_selector",replace:{seasonNumber:void 0!==c?c.toString():""}}),href:s.seasonLink,icon:jt(s.seasonSelectorIcon),isHighlighted:Ot({asins:r,gti:o,compactGTI:l,pageTitleId:t}),children:null}),e}),[]),Ht=({season:e})=>{const t=e.self&&e.self.sequenceNumber&&e.self.sequenceNumber.toString()||"";return i.createElement(ue.Marker,null,i.createElement(Wt.H1,{stringID:"AVOD_DP_season_selector",replace:{seasonNumber:t}}))},Ut=({seasons:e,pageTitleId:t=""})=>{var s,a,n,r,o;const{getString:l}=i.useContext(je.h);if(!e||0===e.length||(0,At.Z4)(null===(s=e[0])||void 0===s||null===(a=s.detail)||void 0===a?void 0:a.entityType))return null;if(1===e.length&&null!==(n=e[0])&&void 0!==n&&null!==(r=n.self)&&void 0!==r&&r.isLaunched)return i.createElement(Ht,{season:e[0]});const c=e.find((e=>e.self&&Ot({asins:e.self.asins,gti:e.self.gti,compactGTI:e.self.compactGTI,pageTitleId:t})));return i.createElement("div",{className:tt(Vt)},i.createElement(St.DropList,{links:Ft(e,t),customDropListID:"av-atf-season-selector",ariaLabel:c?l("DV_DP_ARIA_season_selector",{seasonNumber:`${null===(o=c.self)||void 0===o?void 0:o.sequenceNumber}`}):void 0}))};var Zt=s("./node_modules/@amzn/dvui/dist/CustomerRating.js"),zt=s("./src/widgets/DVWebNodeDetail/components/badges/age-rating.tsx"),qt=s("./src/widgets/DVWebNodeDetail/components/badges/subtitles.tsx"),$t=s("./node_modules/@amzn/dvui/dist/Badge.js");const Gt=({location:e})=>{const{getString:t}=i.useContext(je.h);return e&&i.createElement($t.Badge,{use:$t.badges.TEXT},i.createElement("span",{"data-automation-id":"location-badge","aria-label":t("DV_DP_ARIA_located",{location:e}),role:"text"},e))||null},Qt=({dateTimeBadge:e})=>{const{getString:t}=i.useContext(je.h);return e&&i.createElement($t.Badge,{use:$t.badges.TEXT},i.createElement("span",{"data-automation-id":"date-time-badge","aria-label":t("DV_DP_ARIA_scheduled",{dateTime:e}),role:"text"},e))||null};var Yt=s("./src/widgets/DVWebNodeDetail/components/badges/audioDescription.tsx");var Kt=s("./src/widgets/DVWebNodeDetail/components/stack/stack.tsx");const Xt=(0,ke.P)([xe.T_,Se.bS.pageTitleId,mt.Io,mt.nV,mt.hu,Se.mZ.comingSoon,Se.mZ.headerDetail],((e,t,s,a,n,i,r)=>r&&t&&{amazonRating:r.amazonRating,isRetail:e,pageTitleId:t,isCerberusChild:s,reviewsNotAllowed:i,isReviewsSubmissionEnabled:a,checkReviewEligibility:n}||void 0)),Jt=(0,ke.P)(Se.mZ.headerDetail,(e=>e&&{subtitles:e.subtitles,isClosedCaption:e.isClosedCaption}||void 0)),es=(0,ke.P)(Se.mZ.headerDetail,(e=>e&&e.releaseYear&&{releaseYear:e.releaseYear}||void 0)),ts=(0,ke.P)(Se.mZ.metadata,(e=>e&&e.episodeCount||void 0)),ss=(0,ke.P)(Se.mZ.headerDetail,(e=>e&&e.runtime&&{runtime:e.runtime}||void 0)),as=(0,ke.P)([Se.mZ.headerDetail,Se.mZ.metadata],((e,t)=>t&&t.maturityRating&&{ratingBadge:t.maturityRating}||e&&e.ratingBadge&&{ratingBadge:e.ratingBadge}||void 0)),ns=(0,ke.P)([Se.mZ.headerDetail],(e=>e&&e.pageDateTimeBadge&&{dateTimeBadge:e.pageDateTimeBadge}||void 0)),is=(0,ke.P)(Se.mZ.imdb,(e=>e&&{imdb:e}||void 0)),rs=(0,ke.P)(Se.mZ.headerDetail,(e=>e&&e.location&&{location:e.location}||void 0)),os=(0,ke.P)(Se.mZ.headerDetail,(e=>e&&e.isXRay&&{isXRay:e.isXRay}||void 0)),ls=(0,ke.P)(Se.mZ.headerDetail,(e=>e&&e.isHdr&&{isHdr:e.isHdr}||void 0)),cs=(0,ke.P)(Se.mZ.headerDetail,(e=>e&&e.isUhd&&{isUhd:e.isUhd}||void 0)),ds=(0,ke.P)(Se.mZ.headerDetail,(e=>e&&e.isAd&&{isAd:e.isAd}||void 0));function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},us.apply(this,arguments)}const ms=(0,l.$j)((e=>{var t;return{amazonRating:Xt(e),imdb:null===(t=is(e))||void 0===t?void 0:t.imdb,ratingBadge:as(e),episodeCount:ts(e),dateTimeBadge:ns(e),releaseYear:es(e),runtime:ss(e),subtitles:Jt(e),location:rs(e),xRay:os(e),hdr:ls(e),uhd:cs(e),ad:ds(e)}}))((({amazonRating:e,imdb:t,ratingBadge:s,episodeCount:a,dateTimeBadge:n,releaseYear:r,runtime:o,subtitles:l,location:c,xRay:d,hdr:u,uhd:m,ad:p})=>{var g;const{getString:h}=i.useContext(je.h),v=null==r?void 0:r.releaseYear,b=null==e?void 0:e.amazonRating;return i.createElement(Kt.E,{className:"dv-node-dp-badges"},(null==b?void 0:b.value)&&b.count&&i.createElement(Zt.CustomerRating,{rating:b.value,ariaLabel:h("DV_DP_ARIA_star_rating",{ratingValue:(D=b.value,y=10,Math.round(D*y)/y).toString(),customerCount:b.count.toString()}),countFormatted:b.countFormatted}),!(null==t||!t.score)&&(null==t?void 0:t.scoreFormatted)&&i.createElement(ue.Metadata,{variant:ue.TypeVariant.Secondary,"data-automation-id":"imdb-rating-badge","aria-label":h("DV_DP_ARIA_imdb_rating",{ratingValue:t.scoreFormatted}),dir:"ltr"},`IMDb ${t.scoreFormatted}`),i.createElement(Qt,n),i.createElement(Gt,c),!(null==o||!o.runtime)&&i.createElement(ue.Metadata,{variant:ue.TypeVariant.Secondary,"aria-label":(null==o?void 0:o.runtime)&&h("DV_DP_ARIA_runtime",{runtime:o.runtime}),"data-automation-id":"runtime-badge"},o.runtime),v&&i.createElement(ue.Metadata,{variant:ue.TypeVariant.Secondary,"aria-label":h("DV_DP_ARIA_release_year",{releaseYear:String(v)}),"data-automation-id":"release-year-badge"},v),a&&i.createElement(ue.Metadata,{variant:ue.TypeVariant.Secondary,"aria-label":a},a),i.createElement(Kt.E,{spacing:100},(null==d?void 0:d.isXRay)&&i.createElement($t.Badge,{testID:"x-ray-badge"},"X-Ray"),(null==u?void 0:u.isHdr)&&i.createElement($t.Badge,{testID:"hdr-badge"},"HDR"),(null==m?void 0:m.isUhd)&&i.createElement($t.Badge,{testID:"uhd-badge"},"UHD"),i.createElement(zt.i,us({},s,{notRatedString:h("DV_TW_amr_nr_text"),suitableForAriaLabel:(null==s||null===(g=s.ratingBadge)||void 0===g?void 0:g.displayText)&&h("DV_DP_ARIA_suitable_for",{ageGroup:s.ratingBadge.displayText})})),i.createElement(qt.B,l),i.createElement(Yt.w,p)));var D,y}));var ps=s("./src/widgets/DVWebNodeDetail/components/refund/refund.tsx"),gs=s("./node_modules/@amzn/dvui/dist/Text.js"),hs=s("./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx"),vs=s("./src/widgets/DVWebNodeDetail/selectors/player.ts"),bs=s("./src/shared/player/integration/playbackArea.tsx");const Ds="AudemR",ys="YDUWF2",fs="hBQ4ZY",Es="CvltKZ",ws="f146Qh";var _s=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),Ts=s("./node_modules/@amzn/dvui/dist/IconButton.js"),Cs=s("./node_modules/@amzn/dvui/dist/Icons/TrailerIcon.js"),xs=s.n(Cs),Is=s("./node_modules/@amzn/dvui/dist/Button.js"),Ns=s.n(Is);const Ps="trailer-button",ks=(0,it.eB)((({playbackData:e,isMShop:t,containerRef:s,isPrimaryButton:a=!0,hasDefaultTheme:n})=>{const{getString:r}=i.useContext(je.h);if(!e)return null;const o=e.refMarker||vs.KO,l={contentConfig:{asin:e.playbackID,trailer:!0,position:0,ref:o,videoType:e.videoMaterialType,useFullView:!0},playbackUrl:e.playbackURL,fallbackUrl:e.fallbackURL,signInUrl:e.signInURL,sequenceNumber:0,isBonus:!0},c=e.text.replace("{conditionalLineBreak}","");return i.createElement(bs.ET.Consumer,null,(({onPlay:d})=>{const u=e=>{d(l),e.preventDefault()};return n?i.createElement("div",{className:a?et.Z.fullWidthPhablet:ys},i.createElement(_s._,{refTag:o,className:"dv-dp-node-trailer"},i.createElement(hs.eP,{onClick:u,forceDoubleHeight:a,href:t?void 0:e.playbackURL,tooltipText:c,"aria-label":c,containerRef:s,isPrimaryButton:a},a&&i.createElement(gs.Text,{tag:"span",string:e.text}))),!a&&i.createElement(gs.Text,{tag:"span",string:e.text,className:fs})):a?i.createElement(Is.PrimaryButton,{onClick:u,role:"button","aria-label":c||"",href:t?void 0:e.playbackURL,icon:i.createElement(xs(),null),className:ws,testID:Ps},i.createElement(gs.Text,{tag:"span",string:e.text})):i.createElement(Ts.IconButton,{icon:i.createElement(xs(),null),onClick:u,href:t?void 0:e.playbackURL,ariaLabel:c||"",label:r("DV_WEB_TRAILER_LABEL"),showLabelOnTouchDevices:!0,testID:Ps})}))}));var Ss=s("./src/widgets/DVWebNodeDetail/utils/actionForm.tsx");const Vs=(0,ke.P)([Se.mZ.watchlist],(e=>{if(!e)return;const t=e.endpoint.query,{tag:s,titleID:a,token:n,titleType:i,returnUrl:r}=t,o={tag:s,titleID:a,token:n,titleType:i,returnUrl:r},l="season"===i,c=((e,t)=>{const s=((e,t)=>`atv_dp_wtls_${"Remove"===e?"rmv":"add"}_${t?"seas":"mov"}`)(e.tag,t);return(e.endpoint.partialURL||"").replace("atv_unknown",s)})(e,l);return{partialURL:c,query:o,isSeason:l,tag:e.tag,formatCode:e.formatCode,text:e.text,ajaxEnabled:e.ajaxEnabled,failed:Boolean(e.failed)}}));var Ws=s("./node_modules/@amzn/dvui/dist/Spinner.js");const As="unSqo6",Rs="SFem8L",Ls="Sbxwg-",Bs="_49OCoN";function Ms(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Os extends i.Component{constructor(...e){super(...e),Ms(this,"timer",null),Ms(this,"state",{showSpinner:!1})}componentDidMount(){this.ensureTimer(this.props)}componentWillUnmount(){this.destroyTimer()}componentDidUpdate(e){e.isLoading!==this.props.isLoading&&this.ensureTimer(this.props)}ensureTimer({isLoading:e,delay:t=350}){e?this.timer||(this.timer=setTimeout((()=>{this.timer=null,this.setState({showSpinner:!0})}),t)):this.destroyTimer()}destroyTimer(){clearTimeout(this.timer),this.timer=null,this.setState({showSpinner:!1})}render(){const{spinner:e=i.createElement(js,null),children:t}=this.props;return i.createElement(i.Fragment,null,this.state.showSpinner&&e,t&&i.createElement("span",{className:tt(Ls,{[Bs]:this.state.showSpinner})},t))}}const js=()=>i.createElement("div",{className:As},i.createElement("div",{className:Rs},i.createElement(Ws.Spinner,{fillHeight:!0})));var Fs=s("./src/shared/utils/modalTrigger/ModalTrigger.tsx");const Hs="TH876U",Us="VRxH5R",Zs="w0GYxv",zs="IWnlz7",qs="_3tNlEW";var $s=s("./src/shared/utils/events/index.ts"),Gs=s("./node_modules/@amzn/dvui/dist/Tooltip.js"),Qs=s("./node_modules/@amzn/dvui/dist/Icons/Add.js"),Ys=s.n(Qs),Ks=s("./node_modules/@amzn/dvui/dist/Icons/WatchlistOn.js"),Xs=s.n(Ks),Js=s("./node_modules/@amzn/dv-web-node-reftags/index.js"),ea=s("./src/shared/deviceProxy/PVClickstreamClient.ts"),ta=s("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),sa=s("./src/shared/utils/analytics/recordReftag.tsx"),aa=s("./node_modules/@amzn/dvui/dist/Icons/Tick.js"),na=s.n(aa),ia=s("./node_modules/@amzn/dvui/dist/Icons/Spinner.js"),ra=s.n(ia),oa=s("./src/shared/CS/utils/icons.ts");function la(){return la=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},la.apply(this,arguments)}let ca=function(e){return e.Add="Add",e.Remove="Remove",e.Disabled="Disabled",e.Pending="Pending",e}({});const da=({state:e,...t})=>i.createElement(Ts.IconButton,la({},t,{disabled:[ca.Pending,ca.Disabled].includes(e),icon:e===ca.Pending?i.createElement(ia.Spinner,{width:oa.rM,height:oa.$3}):e===ca.Remove?i.createElement(aa.Tick,null):i.createElement(Qs.Add,null),showLabelOnTouchDevices:!0}));function ua(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ma="Remove";class pa extends i.Component{constructor(...e){super(...e),ua(this,"context",void 0),ua(this,"state",{disabled:!1,isLoading:!1}),ua(this,"clickHandler",(e=>{var t,s;(0,$s.q)(e),this.setState({disabled:!0,isLoading:!0});const a=this.props.watchlist.query;var n,i;a.relatedRequestId=this.props.relatedRequestId,this.props.dispatch((n=a,i=this.props.pageTitleId,(0,ye.Hh)(n,(e=>e?{type:le.k.WatchlistToggle,input:n,output:(0,Ue.OS)(i,e),payload:{pageTitleId:i}}:{type:le.k.WatchlistToggleFailed,input:n,payload:{pageTitleId:i}}))));const r=null===(t=this.props.watchlist)||void 0===t?void 0:t.tag,o=null===(s=this.props.watchlist)||void 0===s?void 0:s.formatCode;if(r&&o){const e=r===ma,t=(0,Js.i)("atv_dp_{format}_wtl_{action}",{action:""+(e?"rmv":"add"),format:o}),s=e?ta.W0.RemoveFromWatchlist:ta.W0.AddToWatchlist;(0,sa.X)(t,this.context.pageType,this.context.subPageType,this.context.refTagTitleId,[s],ta.qB.PageTouch)}e.preventDefault()}))}componentDidUpdate(e){e!==this.props&&this.setState({disabled:!1,isLoading:!1})}render(){const{dispatch:e,watchlist:t,containerRef:s,hasDefaultTheme:a}=this.props;if(!t)return null;const{partialURL:n,query:r,tag:o,ajaxEnabled:l,isSeason:c,failed:d}=t,{getString:u}=this.context,m=o===ma,p=m?c?"DV_DP_WL_removeTv":"DV_DP_WL_removeMovie":c?"DV_DP_WL_addTv":"DV_DP_WL_addMovie",{returnUrl:g,titleID:h,token:v,titleType:b}=r,D={returnUrl:g,tag:o,titleID:h,token:v,titleType:b},y=u(m?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie").replace("{conditionalLineBreak}","");return i.createElement("span",{className:tt({[Hs]:a},"dv-dp-node-watchlist",et.Z.enablePointerEvents)},a?i.createElement(Ss.y,{action:n,method:"POST",hiddenInputs:D},i.createElement(Gs.Tooltip,{position:"top",size:"s",content:i.createElement(Wt.H1,{stringID:m?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie",replace:{conditionalLineBreak:""}}),className:qs,id:"dv-dp-node-watchlist-tooltip",containerRef:s},i.createElement(Is.Button,{disabled:this.state.disabled,className:Us,onClick:l?this.clickHandler:void 0,"data-ux-click":!0,type:"submit","data-added":m,"aria-label":y,testID:"watchlist-button"},i.createElement("span",{className:Zs},i.createElement(Os,{isLoading:this.state.isLoading},m?i.createElement(Xs(),null):i.createElement(Ys(),null)))))):i.createElement(Ss.y,{action:n,method:"POST",hiddenInputs:D},i.createElement(da,{state:this.state.isLoading?ca.Pending:m?ca.Remove:ca.Add,type:"submit",label:u("DV_WEB_WATCHLIST_LABEL"),ariaLabel:y,onClick:l?this.clickHandler:void 0,"data-added":m,"data-ux-click":!0,testID:"watchlist-button"})),i.createElement(Fs.i,{modalId:"dvui-close-overlay-watchlist-failed",isOpen:d,modalHeader:i.createElement(Wt.H1,{stringID:p}),modalContent:i.createElement(Wt.H1,{stringID:"AVOD_WL_error_msg"}),modalFooter:({closeModal:e})=>i.createElement(Is.Button,{className:et.Z.alwaysInline,onClick:()=>e()},i.createElement(Wt.H1,{stringID:"AVOD_DP_E_error_ok"})),onClose:()=>{return e((t=this.props.pageTitleId,e=>{e({type:le.k.ClearWatchlistToggleFailure,payload:{pageTitleId:t}})}));var t}}),a&&i.createElement("span",{className:zs},i.createElement(Wt.H1,{stringID:m?"DV_DP_WL_removeMovie":"DV_DP_WL_addMovie"})))}}ua(pa,"contextType",je.h);const ga=(0,l.$j)((e=>({watchlist:Vs(e),pageTitleId:e.pageTitleId,relatedRequestId:e.requestContext.requestID})))((0,it.eB)(pa));var ha=s("./node_modules/@amzn/dvui/dist/Link.js");const va="oJIiqQ",ba=({message:e,returnLink:t})=>e&&t?i.createElement("div",{className:tt(et.Z.fullWidthPhablet,"dv-dp-node-dma",va),"data-automation-id":"dma-button"},i.createElement(ha.Link,{href:t,ariaLabel:e,text:e})):null;var Da=s("./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.tsx");const ya="_7fXbid",fa="wpNj1m",Ea=({messages:e})=>e&&e.length?i.createElement("div",{className:ya},e.map(((e,t)=>i.createElement("div",{key:`secondary-offer-${t}`,className:fa},i.createElement(gs.Text,{string:e}))))):null;var wa=s("./src/widgets/DVWebNodeDetail/components/acquisition/acquisition.tsx"),_a=s("./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx"),Ta=s("./src/widgets/DVWebNodeDetail/components/acquisition/defaultMoreWaysToWatchModal.tsx"),Ca=s("./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.tsx"),xa=s("./src/shared/CS/components/Modal/Modal.tsx");const Ia=(0,_a.Y)((({shouldShowMoreWaysToWatch:e,moreWaysToWatch:t,titleId:s,toggleGiftCardModal:a})=>{const n=t&&t.metadata&&t.metadata.refMarker||(0,Js.i)("atv_dp_mpo");return e&&s?i.createElement("div",{className:`${et.Z.stretchHeight} ${et.Z.fullWidthPhablet}`},i.createElement(Fs.i,{size:"m",modalId:"dvui-close-overlay-atf-mwtw",modalContent:({closeModal:e})=>i.createElement(Ta.C,{closeModal:e,moreWaysToWatch:t,toggleGiftCardModal:a}),toggle:({openModalClickHandler:e})=>i.createElement(_s._,{refTag:n},i.createElement(Is.Button,{"data-ux-click":!0,onClick:e,name:"more-purchase-options",className:et.Z.fullWidth},i.createElement(Wt.H1,{stringID:"DV_MWTW_TITLE_MAIN"})))})):null})),Na=(0,it.QI)(Ia,(({shouldShowMoreWaysToWatch:e,moreWaysToWatch:t,titleId:s,toggleGiftCardModal:a})=>{const[n,r]=i.useState(!1),{getString:o}=i.useContext(je.h),l=t&&t.metadata&&t.metadata.refMarker||(0,Js.i)("atv_dp_mpo");return e&&s?i.createElement("div",{className:`${et.Z.stretchHeight} ${et.Z.fullWidthPhablet}`},i.createElement(_s._,{refTag:l},i.createElement(Is.Button,{"data-ux-click":!0,onClick:()=>r(!0),name:"more-purchase-options",className:et.Z.fullWidth},i.createElement(Wt.H1,{stringID:"DV_MWTW_TITLE_MAIN"}))),i.createElement(xa.u,{titleText:o("DV_MWTW_TITLE"),body:i.createElement(Ca.C,{closeModal:()=>r(!1),moreWaysToWatch:t,toggleGiftCardModal:a}),isVisible:n,onRequestClose:()=>r(!1),disableFooter:!0,size:"m",testID:"atf-more-purchase-options-modal"})):null}));var Pa=s("./src/util/utils/titleType.ts"),ka=s("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),Sa=s("./node_modules/@amzn/dvui/dist/PlayButton.js"),Va=s("./src/shared/SPA/SpaContext.tsx"),Wa=s("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts"),Aa=s("./src/shared/SPA/stores.ts"),Ra=s("./node_modules/@amzn/dvui/dist/Icons/PlayArrow.js"),La=s.n(Ra);const Ba=(0,_a.Y)((({playbackData:e,duration:t,isStartOver:s,isOfferClarityEnabled:a,isMShop:n})=>{const r=(0,Aa.ke)();if(!e.playbackActionData)return null;const o=e.playbackActionData,l=o.playbackID,c=e.self&&e.self.sequenceNumber,d={contentConfig:{asin:l,trailer:!1,position:o.resumeTime,ref:o.playerRefMarker,videoType:o.videoMaterialType,useFullView:!0,playbackEnvelope:(0,Wa.D)(o)},signInUrl:o.signInURL,playbackUrl:o.playbackURL,fallbackUrl:o.fallbackURL,sequenceNumber:c,isBonus:(0,Pa.Hv)(e.self&&e.self.titleType,c),subscriptionName:o.subscriptionName,triggerLocation:"ATF",refMarker:o.refMarker},u=a&&"IMDb TV"===o.subscriptionName;return i.createElement(bs.ET.Consumer,null,(({onPlay:e})=>{const a=Math.max((0,ka.fZ)(r,l,t),(0,ka._y)(o.progress));return i.createElement(i.Fragment,null,i.createElement("div",{className:`${et.Z.fullWidthPhablet} ${Ds} dv-dp-node-playback`},i.createElement(hs.n7,{href:n?void 0:o.playbackURL,onClick:t=>{e(d),t.preventDefault()},progress:a,forceDoubleHeight:!0,isStartOver:s,useFreeButton:u},i.createElement(gs.Text,{tag:"span",string:o.label}))))}))})),Ma=(0,_a.Y)((({playbackData:e,duration:t,isMShop:s,isPhablet:a})=>{if(!e.playbackActionData)return null;const n=e.playbackActionData,r=n.playbackID,o=(0,Aa.ke)(),l=e.self&&e.self.sequenceNumber,c={contentConfig:{asin:r,trailer:!1,position:n.resumeTime,ref:n.playerRefMarker,videoType:n.videoMaterialType,useFullView:!0,playbackEnvelope:(0,Wa.D)(n)},signInUrl:n.signInURL,playbackUrl:n.playbackURL,fallbackUrl:n.fallbackURL,sequenceNumber:l,isBonus:(0,Pa.Hv)(e.self&&e.self.titleType,l),subscriptionName:n.subscriptionName,triggerLocation:"ATF",refMarker:n.refMarker};return i.createElement(bs.ET.Consumer,null,(({onPlay:e})=>{const l=t=>{e(c),t.preventDefault()},d=Math.max((0,ka.fZ)(o,r,t),(0,ka._y)(n.progress));return i.createElement("div",{className:`${et.Z.fullWidthPhablet} ${et.Z.stretchHeight} dv-dp-node-playback`},a?i.createElement(Is.PrimaryButton,{onClick:l,role:"button","aria-live":"polite","aria-label":n.label,href:s?void 0:n.playbackURL,className:Es,icon:i.createElement(La(),null)},i.createElement(gs.Text,{tag:"span",string:n.label})):i.createElement(Sa.PlayButton,{onClick:l,href:s?void 0:n.playbackURL,ariaLabel:n.label,progressPercentage:d,label:n.label}))}))})),Oa=(0,Va.cG)((0,it.QI)(Ba,Ma));function ja(){return ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ja.apply(this,arguments)}Ma.displayName="Playback",Oa.displayName="ActionBoxPlayback";const Fa=(0,_a.Y)((({playbackDataList:e,isRetail:t,playerConfigData:s,duration:a,isOfferClarityEnabled:n,isMShop:r,isPhablet:o})=>e.length?i.createElement(i.Fragment,null,e.map(((e,l)=>{const c={duration:a,playbackData:e,playerConfigData:s,isRetail:t,isStartOver:1===l,isOfferClarityEnabled:n,isMShop:r,isPhablet:o};return i.createElement(Oa,ja({key:`action-box-playback-${l}`},c))}))):null));var Ha=s("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),Ua=s("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx");const Za="FyONI8",za=({preorder:e})=>{if(!e)return null;const{body:t,cancelOrderText:s,title:a,displayMessages:n}=e;return i.createElement("div",{className:tt(Za),"data-testid":"dp-accepted-preorder"},i.createElement("h3",null,a),i.createElement(gs.Text,{string:t,tag:"p"}),n.map(((e,t)=>i.createElement(gs.Text,{key:t,string:e,tag:"p"}))),i.createElement(gs.Text,{string:s,tag:"p"}))},qa="_0R5nxh",$a="FoKXdl",Ga="_4GfcF4",Qa="ojZ5iT",Ya="mdcwb5",Ka="VRvLAi";var Xa=s("./src/widgets/DVWebNodeDetail/utils/AdjustHeightForContent.tsx"),Ja=s("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.module.scss");const en=(0,l.$j)((e=>({purchase:e.purchase})))((({purchase:e})=>{const t=Boolean(e&&e.failed);return i.createElement(Fs.i,{modalId:"dvui-close-overlay-purchase-failed",isOpen:t,className:Ja.Z.purchaseFailedModal,modalContent:i.createElement(Wt.H1,{stringID:"AVOD_DP_E_error_text"}),modalFooter:({closeModal:e})=>i.createElement(Is.Button,{className:et.Z.alwaysInline,onClick:()=>{window.location.reload(),e()}},i.createElement(Wt.H1,{stringID:"AVOD_DP_E_error_ok"}))})}));var tn=s("./src/shared/SPA/UWPNotifier/index.ts"),sn=s("./src/shared/SPA/downloadButton/DownloadButton.tsx"),an=s("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.tsx"),nn=s("./src/shared/deeplink/index.ts"),rn=s("./src/widgets/DVWebNodeDetail/components/watchPartyLink/watchPartyLink.tsx");const on=({membershipAction:e})=>{if(!e)return null;const{endpoint:t,label:s}=e;return i.createElement("div",{className:`${et.Z.fullWidthPhablet}`},i.createElement(Is.PurchaseButton,{href:t,forceDoubleHeight:!0,shape:"rectangle","data-automation-id":"membership-action-link"},i.createElement(gs.Text,{string:s})))};var ln=s("./src/shared/CS/components/EntitlementMessage/EntitlementMessage.tsx");const cn="skkTV0",dn=e=>{const{message:t,className:s}=e;return t?i.createElement("div",{className:st()(s,cn)},i.createElement(gs.Text,{"data-testid":"info-message",string:t})):null};var un=s("./src/shared/CS/components/BuyBoxMessage/BuyBoxMessage.tsx"),mn=s("./node_modules/@amzn/dvui/dist/Icons/Share.js");const pn="IqUVN6",gn="zwYcRZ",hn="_9VoQra",vn="HAcBOh";var bn=s("./src/shared/utils/utils.ts"),Dn=s("./node_modules/@amzn/dvui/dist/Icons/Twitter.js"),yn=s.n(Dn),fn=s("./node_modules/@amzn/dvui/dist/Icons/Facebook.js"),En=s.n(fn),wn=s("./node_modules/@amzn/dvui/dist/Icons/Email.js"),_n=s.n(wn),Tn=s("./node_modules/@amzn/dvui/dist/Icons/Pinterest.js"),Cn=s.n(Tn);const xn=["Email","Facebook","Twitter","Pinterest"],In={Email:_n(),Facebook:En(),Twitter:yn(),Pinterest:Cn()},Nn=(e,t,s,a,n)=>i=>{i.preventDefault(),(0,sa.X)(e),window.open(t,s,(0,bn.R4)(a,n))},Pn=e=>{const t=e.shareIcons.networkMap,s=e=>{const{network:s,url:a,reftag:n,target:r,ariaText:o,width:l,height:c}=t[e],d=In[e],u=`share-widget-${e}`;return i.createElement(ha.Link,{id:u,"data-automation-id":u,"data-testid":u,ariaLabel:o,href:a,target:r,key:e,onClick:Nn(n,a,r,l,c),className:hn},i.createElement("div",{className:gn},i.createElement(d,null),i.createElement("p",{className:vn},s)))};return i.createElement("div",{className:pn},xn.filter((e=>Object.keys(t).includes(e))).map((e=>s(e))))},kn="w-heKg";function Sn(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Vn extends i.PureComponent{constructor(...e){super(...e),Sn(this,"state",{copied:!1,buttonString:this.props.copyLinkText}),Sn(this,"copyLink",(e=>{const t=document.createElement("textarea");t.value=e,t.readOnly=!0,t.setAttribute("display","none"),document.body.appendChild(t),t.select(),t.setSelectionRange(0,e.length),document.execCommand("copy"),t.remove()})),Sn(this,"onClickHandler",(e=>{this.state.copied||(0,sa.X)(this.props.reftag),this.setState({copied:!0,buttonString:this.props.linkCopiedText}),this.copyLink(this.props.url),e.stopPropagation()}))}render(){const{buttonString:e}=this.state,t=tt(kn,Boolean(this.props.className)?this.props.className:null);return i.createElement(Is.PrimaryButton,{className:t,onClick:this.onClickHandler,"data-automation-id":"copy-url-button","data-testid":"copy-url-button",textAlign:"center"},i.createElement(gs.Text,{string:e}))}}const Wn=Vn,An=({shareIcons:e,pageUrl:t,copyUrlReftag:s,copyLinkText:a,linkCopiedText:n})=>i.createElement("div",null,e&&i.createElement(Pn,{shareIcons:e}),i.createElement(Wn,{url:t,reftag:s,copyLinkText:a,linkCopiedText:n})),Rn=({shareModel:e})=>{const[t,s]=i.useState(!1);return e&&i.createElement(i.Fragment,null,i.createElement(_s._,{refTag:"atv_dp_share_open"},i.createElement(Ts.IconButton,{icon:i.createElement(mn.Share,null),ariaLabel:e.shareText,label:e.shareText,showLabelOnTouchDevices:!0,onClick:()=>s(!0),testID:"share-button"})),i.createElement(xa.u,{titleText:e.shareText,body:An(e),isVisible:t,onRequestClose:()=>s(!1),disableFooter:!0,size:"s",testID:"share-modal"}))||null};var Ln=s("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts");const Bn=({tvodWinners:e})=>{const t=e?(0,re.VF)((0,Ln.YD)(e).filter((e=>"PREORDER"===e.purchaseData.offerType&&!(0,bn.xb)(e.displayMessages))).map(((e,t)=>e.displayMessages.map(((e,s)=>i.createElement("div",{"data-testid":"preorder-messages",key:`${t},${s}`},i.createElement(gs.Text,{string:e}))))))):[];return(0,bn.xb)(t)?null:i.createElement(Kt.K,{spacing:200},t)};function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Mn.apply(this,arguments)}const On=e=>{const{downloads:t,downloadInfo:s,containerRef:a,deeplinkingProps:n,isPVWinApp:r,rectButton:o}=e;return i.createElement(i.Fragment,null,i.createElement(sn.C$,Mn({},n,{forceDoubleHeight:!1,containerRef:a,rectButton:o})))},jn=(0,Ce.n)((0,l.$j)((e=>({pageTitleId:e.pageTitleId,acceptedPreorderMessage:(0,pt.Li)(e),focusMessage:(0,ut.m7)(e),infoMessage:(0,ut.kx)(e),buyBoxMessage:(0,ut.wW)(e),playbackActions:(0,ut.DG)(e),downloadAction:(0,ut.bS)(e),trailerAction:(0,ut.QH)(e),purchaseAction:(0,ut.A$)(e),disneyAction:(0,ut.bn)(e),moreWaysToWatch:(0,ut.Uc)(e),secondaryOfferMessage:(0,ut.V0)(e),purchaseDetails:(0,ve.G)(e),isRefunding:Boolean(e.refund.refunding),isMShop:(0,mt.gK)(e),shareButton:Pt(e),requestContext:(0,xe.Iz)(e),downloadLaunchType:e.pageContext.downloadLaunchType,isMovie:(0,be.NE)(e),duration:(0,ut.Q$)(e),notificationActionsComingLeavingSoonMessages:(0,pt.As)(e),tapsExperimentToken:Se.bS.atfTapsExperimentToken(e),watchPartyAction:(0,pt.MZ)(e),membershipAction:(0,pt.eP)(e),viewRefMarker:(0,pt.SX)(e),isComingSoon:Se.mZ.comingSoon(e),metaData:ft(e),isPhablet:(0,mt.G_)(e),tvodWinners:(0,pt.VD)(e)})))((e=>{const{clickStreamPageType:t,clickStreamSubPageType:s,refTagTitleId:a}=(0,i.useContext)(je.h),n=(0,Aa.ke)(),{logger:r,notificationActionsComingLeavingSoonMessages:o,viewRefMarker:l,infoMessage:c,acceptedPreorderMessage:d,focusMessage:u,buyBoxMessage:m,playbackActions:p,downloadAction:g,trailerAction:h,purchaseAction:v,disneyAction:b,moreWaysToWatch:D,shareButton:y,secondaryOfferMessage:f,purchaseDetails:E,pageTitleId:w,duration:_,isRefunding:T,requestContext:C,downloadLaunchType:x,isMovie:I,tapsExperimentToken:N,watchPartyAction:P,membershipAction:k,isMShop:S,isComingSoon:V,metaData:W,containerRef:A,isPhablet:R,tvodWinners:L}=e,[B,M]=(0,i.useState)(!1);(0,i.useEffect)((()=>{o.length>0&&r.count("DVWebNode::Detail::AtfLeavingSoonMessages",1,!1),l&&(0,sa.X)(l,t,s,a)}),[]);const O=()=>M(!B),j=Boolean(E),F=j&&E.details&&E.details.offer.purchaseData.text||"",H=j||T,U="NONE"===x||"EMBEDDED"===x?void 0:e=>{e.preventDefault(),(0,nn.b)()[x]({url:g.downloadURL,fallbackUrl:g.fallbackURL})},Z="PVWinApp"===C.appName,z=()=>g.label.replace("{lineBreak}"," "),q={...g,status:tn.lh.IDLE,forceDoubleHeight:!0,onClick:U,downloadURL:S?void 0:g&&g.downloadURL},$={...g,isMovie:I,playbackTracks:null==W?void 0:W.playbackTracks,title:null==W?void 0:W.title};return i.createElement(i.Fragment,null,i.createElement("div",{className:qa},i.createElement("div",{className:tt({[Ga]:H},Ka)},i.createElement(Xa._,{className:"dv-node-dp-action-box"},i.createElement(Kt.K,{spacing:400},i.createElement(Kt.K,{spacing:200},i.createElement(ln.nI,{message:null==u?void 0:u.dvMessage,icon:null==u?void 0:u.icon}),i.createElement(ps.N,{titleId:w})),i.createElement(za,{preorder:d}),i.createElement(Kt.E,{className:$a},i.createElement(un.v,{message:null==m?void 0:m.dvMessage}),i.createElement(Kt.E,{spacing:600,className:tt(et.Z.fullWidthPhablet,Qa)},i.createElement(Kt.E,{className:tt(et.Z.fullWidthPhablet)},p&&i.createElement(Fa,Mn({},p,{duration:_,isMShop:S,isPhablet:R})),V&&!p&&h&&i.createElement(ks,Mn({},h,{isMShop:S,isPrimaryButton:!0})),i.createElement(wa.k,Mn({},v,{tvodButtonScope:Ha.b2.ACTION_BOX,forceDoubleHeight:!0,tapsExperimentToken:N})),i.createElement(on,{membershipAction:k}),D&&i.createElement(Na,Mn({},D,{toggleGiftCardModal:O})),R&&g&&i.createElement("span",{className:tt(et.Z.fullWidthPhablet,"dv-dp-node-download"),"data-testid":"dv-dp-node-download-phablet"},i.createElement(On,{downloads:n,downloadInfo:$,containerRef:A,deeplinkingProps:{...q,label:z()},isPVWinApp:Z,rectButton:!0}))),i.createElement(Kt.E,{spacing:300,className:Ya},(!V||p)&&h&&i.createElement(ks,Mn({},h,{isMShop:S,containerRef:A,isPrimaryButton:!1})),i.createElement(ga,{containerRef:A}),!R&&g&&i.createElement("span",{className:tt(et.Z.fullWidthPhablet,"dv-dp-node-download"),"data-testid":"dv-dp-node-download-desktop"},i.createElement(On,{downloads:n,downloadInfo:$,containerRef:A,deeplinkingProps:{...q,label:z()},isPVWinApp:Z,rectButton:!1,isAtf:!0})),i.createElement(rn.vY,{watchPartyAction:P,buttonOrLinkProps:{isButton:!0},withFTUETooltip:!0,containerRef:A}),i.createElement(Rn,{shareModel:y})))),i.createElement(dn,{message:null==c?void 0:c.dvMessage}),i.createElement(Bn,{tvodWinners:L}),i.createElement("div",null,i.createElement(Da.h,{placement:"ActionBox",toggleGiftCardModal:O}),i.createElement(Ea,f))))),H&&i.createElement(Ua.UQ,{text:F}),i.createElement(en,null),i.createElement(an.fs,{isOpen:B,onClose:O,requestContext:C.rawContext})),i.createElement(ba,b))}))),Fn="jz9Ysq",Hn="mX4wun",Un="_3+ITK5",Zn="oSG1hM",zn="_8wZVFJ",qn="FGS+Wo",$n="WdBmwW",Gn="_5tB6mN",Qn="RNNP92",Yn="Sxt8De",Kn="_2xTAcM",Xn="i2BTH-",Jn="_6K4bDF",ei="kIO70a",ti="F1c9-t",si="mvvARx",ai="_4HWjw2",ni="deuw2G",ii="_3DzSz5",ri="tXS-70",oi=({showLiveError:e})=>i.createElement(li,{stringID:e?"DV_DP_unavailable_live_page_message":"DV_DP_unavailable_page_message"}),li=({stringID:e})=>i.createElement("div",{className:ri},i.createElement("p",{className:tt(ii,et.Z.fullWidth)},i.createElement(Wt.H1,{stringID:e}))),ci="_5KLPzV",di="LrvNML",ui=({imagePath:e,imageLink:t,imageAlt:s,className:a})=>e&&t?i.createElement("div",{className:tt(ci,a),"data-automation-id":"top-banner-promo"},i.createElement("div",{className:di},i.createElement("a",{href:t.href,"aria-label":t.ariaLabel},i.createElement("img",{src:e,alt:s})))):null;var mi=s("./src/widgets/DVWebNodeDetail/utils/isType.ts");const pi=(0,ke.P)(Se.mZ.creative,(e=>e&&hi(e.atfTop)&&e.atfTop.image&&{imagePath:e.atfTop.image.path,imageLink:e.atfTop.image.link,imageAlt:e.atfTop.image.alt}||void 0)),gi=(0,ke.P)(Se.mZ.creative,(e=>e&&vi(e.atfBottom)&&{title:e.atfBottom.title,content:e.atfBottom.content,image:e.atfBottom.image}||void 0)),hi=e=>(0,mi.P)(e,"atv.wps#BannerPromoModel"),vi=e=>(0,mi.P)(e,"atv.wps#HeroQuickPromoModel"),bi="DYJcMu",Di="_0OWiRe",yi="ql9Jas",fi=({title:e,content:t,image:s,className:a})=>e||t?i.createElement("article",{className:a,"data-automation-id":"hero-quick-promo"},i.createElement(Kt.E,{padding:400,className:bi},s&&i.createElement(Ei,s),i.createElement("div",{className:Di},i.createElement(ue.Marker,{tag:"h2"},i.createElement(gs.Text,{string:e})),i.createElement(ue.Marker,{variant:ue.TypeVariant.Secondary},i.createElement(gs.Text,{string:t}))))):null,Ei=({path:e,alt:t,link:s})=>e?s?i.createElement("a",{href:s.href,className:yi,"aria-label":s.ariaLabel},i.createElement(wi,{path:e,alt:t})):i.createElement(wi,{path:e,alt:t}):null,wi=({path:e,alt:t})=>i.createElement("img",{src:e,alt:t});var _i=s("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx");const Ti="qAsnNk",Ci=e=>{const t={header:e.header,collectionType:e.collectionType,cardTitleIds:e.titleIds,totalEpisodeSize:e.totalCardSize,refTagPrefix:"atv_dp_bundle_",index:0};return t.cardTitleIds&&t.cardTitleIds.length>0?i.createElement("div",{className:Ti,"data-automation-id":"bundle-carousel"},i.createElement(_i.J,t)):null};var xi=s("./node_modules/@amzn/dvui/dist/Block.js");const Ii="isCrowBannerDismissed",Ni="true",Pi=({title:e,body:t})=>{const[s,a]=i.useState(!1);return i.useEffect((()=>{const e=window&&window.localStorage&&localStorage.getItem(Ii)===Ni||!1;a(!e)}),[]),s&&i.createElement(xi.MessageBlock,{heading:e.string,type:xi.MessageTypes.warning,dismissable:!0,onDismiss:()=>{localStorage.setItem(Ii,Ni)}},i.createElement(gs.Text,{string:t}))||null},ki=(0,ke.P)([Se.mZ.crowBanner],(e=>e&&{title:e.title,body:e.body}||void 0)),Si=(0,ke.P)([Se.mZ.restriction],(e=>e&&e.blockedPageModel&&{model:e&&e.blockedPageModel}||void 0)),Vi="vBL3y4",Wi="_0OdJtg",Ai="suGNBg",Ri="BAJBxG",Li="xyr8zp",Bi=({model:e})=>e?i.createElement("div",{className:Vi},i.createElement("div",{className:Wi},i.createElement("p",{className:Ai},i.createElement(gs.Text,{string:e.message})),i.createElement("p",null,i.createElement(gs.Text,{string:e.secondaryMessage})),i.createElement("div",{className:Ri},e.primaryActionText&&i.createElement(Is.PrimaryButton,{href:e.primaryActionLink},i.createElement(gs.Text,{string:e.primaryActionText})),i.createElement("span",{className:Li},i.createElement(gs.Text,{string:e.secondaryAction}))))):null;var Mi=s("./src/shared/Explore/shared/navigation.ts");const Oi="--dvui-spacing-300",ji="IOtsf6",Fi="nor9a3",Hi="rzrPLI",Ui=(0,it.eB)((({isRetail:e,children:t,hasDefaultTheme:s})=>{const[a,n]=i.useState(60);return i.useEffect((()=>{const e=document.getElementById(Mi.Au);if(void 0!==window.ResizeObserver){const t=new ResizeObserver((()=>{const t=parseInt(getComputedStyle(document.body).getPropertyValue(Oi)),s=e&&e.getBoundingClientRect()?e.getBoundingClientRect().height+t:0;n(s)}));return t.observe&&e&&t.observe(e),()=>{(null==t?void 0:t.disconnect)&&t.disconnect()}}}),[]),i.createElement("div",{className:e?s?Fi:Hi:ji,style:s?{}:{top:a}},t)})),Zi=(0,ke.P)(pt.tW,(e=>e&&e.length>0?{image:e[0].logo,link:e[0].channelLink}:void 0)),zi=(0,ke.P)(pt.ZM,(e=>e&&e.length>0?{image:e[0].image,link:e[0].channelLink}:void 0)),qi=(0,ke.P)(pt.pL,(e=>{var t;return{image:null==e||null===(t=e.buyBoxMessage)||void 0===t?void 0:t.imageUrl}})),$i=(0,ke.P)(Zi,zi,qi,((e,t,s)=>{var a;return null!==(a=null!=e?e:t)&&void 0!==a?a:s}));function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Gi.apply(this,arguments)}const Qi=(0,l.$j)((e=>({logo:$i(e)})))((({logo:e})=>{const{getString:t}=i.useContext(je.h);if(null==e||!e.image)return null;const s={src:e.image,baseValue:35,baseType:nt.rB.HEIGHT,format:nt.GH.png},a=i.createElement("img",Gi({},(0,nt.Ro)(s),{"data-testid":"channelLogo-image",alt:t("DV_DP_ALT_channel_logo")}));return i.createElement(i.Fragment,null,e.link?i.createElement("a",{"data-testid":"channelLogo-link",href:e.link},a):a)}));var Yi=s("./src/widgets/DVWebNodeDetail/actions/banner.ts");const Ki="rOcKdT",Xi=(0,l.$j)((e=>({banner:e.banner.ui})),(e=>({clearBanner:()=>setTimeout((()=>e((0,Yi.y)())),300)})))((({banner:e,clearBanner:t})=>{const{getString:s}=i.useContext(je.h);if(!e)return null;const{stringId:a,string:n,type:r,heading:o,headingStringId:l,dvStringAttrs:c,automationId:d,bodyDVString:u}=e,m=c||{},p=u||n&&(0,Fe.e6)(n,m),g=l?s(l):o||"",h=d||"banner";return i.createElement(xi.MessageBlock,{className:Ki,heading:g,type:r,dismissable:!0,onDismiss:t,testID:h},a&&i.createElement(Wt.H1,{stringID:a,dvStringAttrs:m}),(n||u)&&i.createElement(gs.Text,{string:p}))}));var Ji=s("./src/shared/player/index.tsx");let er=!1;const tr=(e,t=!0)=>(!er&&t&&(0,n.o5)(),er=!0,{type:le.k.PlaybackStart,payload:e}),sr=(e,t,s=!0,a=!0)=>(n,i)=>{s&&n({type:le.k.PlaybackClosed,payload:{content:e}});const r=i(),o=(0,vs.IR)(r);if(a&&e&&!e.trailer&&e.asin){const s=o&&o[e.asin]||e.asin;t(s)(n,i)}null!=e&&e.trailer||!(0,bt.G)(r)||n({type:le.k.ClearReviewEligibility,payload:{pageTitleId:r.pageTitleId}})},ar=(0,l.$j)((e=>({pageContext:e.pageContext,playerConfig:(0,vs.UH)(e),whisperCacheData:(0,vs.KQ)(e),playbackLinkData:(0,vs.vU)(e),autoplay:(0,vs.E5)(e),playerCapabilities:e.player.capabilities})),(e=>({setPlayerCapabilities:t=>e((e=>({type:le.k.SetPlayerCapabilities,payload:{capabilities:e}}))(t)),onPlayFailure:()=>{e({type:g.k.PlaybackFailed})},startPlayback:t=>e(tr(t,!1)),createError:(t,s)=>e((0,Yi.I)({type:xi.MessageTypes.error,stringId:t,headingStringId:s,automationId:"player-error-banner"})),onClosed:t=>{e(sr(t,_e,!0))},onAsinChanged:t=>{e(sr(t,_e,!1))}})))((0,r.s6)((({setPlayerCapabilities:e,startPlayback:t,createError:s,onClosed:a,onAsinChanged:r,avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d,playerConfig:u,playbackLinkData:m,whisperCacheData:p,...g})=>{const{autoplay:h,pageContext:v,playerCapabilities:b}=g,[D,y]=(0,i.useState)(!1);(0,i.useEffect)((()=>{h&&b&&!D&&(y(!0),setTimeout((()=>{(0,bs.XM)({onPlay:t,launchType:v.playbackLaunchType,trailerLaunchType:v.playbackTrailerLaunchType,playerConfigPageType:u.pageType,playerCapabilities:b})(h)})))}),[h,b]);const f=m?{...m,contentConfig:{...m.contentConfig,privacyConsent:{avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d}}}:void 0,E=p?{...p,privacyConsent:{avlString:o,gvlString:l,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d}}:void 0,w={...g,playerConfig:u,playbackLinkData:f,whisperCacheData:E,onAsinChanged:r,onClosed:a,liveIncompatibleCallback:()=>s("DV_WEB_LIVE_NOT_SUPPORTED_BODY"),onPlayerCapabilities:t=>{(0,n.SX)(),e(t)},onPlayerLoadErrorCallback:()=>s("DV_DP_PLAYER_TIMEOUT_BODY","DV_DP_PLAYER_TIMEOUT_HEADING")};return i.createElement(Ji.Sz,w)})));var nr=s("./node_modules/@amzn/dvui/dist/Modal.js"),ir=s("./node_modules/@amzn/dvui/dist/Icons/LogoPrimevideoApp.js"),rr=s.n(ir);const or="N3bC3Y",lr="_56Nckv",cr="AUjK5u",dr="rrAemW",ur="Ebqe8n",mr="dycXes",pr="_24h84l",gr="dvWebDownloadAppModalShown",hr="true",vr=i.forwardRef((({launchType:e,url:t,watchText:s,featuresText:a,proceedText:n,onUpsellAppDone:r},o)=>{const l=i.useRef(null),c=()=>{(0,nn.b)().hasOwnProperty(e)&&(0,nn.b)()[e]({url:t})},d=()=>{r&&r()};i.useImperativeHandle(o,(()=>({upsellApp(){var e;localStorage.getItem(gr)!==hr&&1?(localStorage.setItem(gr,hr),null===(e=l.current)||void 0===e||e.open()):(c(),d())}})));return i.createElement(nr.Modal,{modalId:"download-app-modal",size:"xs",className:or,onClose:d,ref:l},i.createElement("header",{className:lr},i.createElement("div",{className:cr},i.createElement(rr(),null)),i.createElement("h2",{className:dr},s)),i.createElement("div",{className:ur},i.createElement("p",{className:mr},a),i.createElement(sa.J,{refTag:(0,Js.i)("atv_dlapp_get_app")},i.createElement(Is.FreeButton,{className:pr,onClick:()=>{var e;null===(e=l.current)||void 0===e||e.close(),c()}},n))))}));function br(){return br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},br.apply(this,arguments)}const Dr=(0,l.$j)((e=>({playbackIntegration:e.playbackIntegration})),(e=>({clearUpsellApp:()=>e({type:g.k.ClearUpsellApp})})))((({playbackIntegration:e,clearUpsellApp:t})=>{const s=i.useRef(null);return i.useEffect((()=>{var t;e.downloadAppModal&&e.isUpsellingApp&&(null===(t=s.current)||void 0===t||t.upsellApp())}),[e.isUpsellingApp]),e.downloadAppModal?i.createElement(vr,br({},e.downloadAppModal,{onUpsellAppDone:t,ref:s})):null}));var yr=s("./src/util/utils/url.ts"),fr=s("./src/util/api/util.ts");const Er=e=>{return t={widgetArgs:(0,re.Dv)({})},s={retryable:!1,mutedStatusCodes:[fr.SU.Forbidden]},a=t=>{window&&e&&t instanceof fr.yM&&t.message.includes(`Status code: ${fr.SU.Forbidden}`)&&window.location.assign(e)},(e,n)=>(0,ye._E)(t,(e=>({type:le.k.GetDevices,input:t,output:(0,Ue.hV)(e)})),s,a)(e,n);var t,s,a};var wr=s("./src/util/utils/Optional.ts"),_r=s("./src/util/utils/marketplace.ts"),Tr=s("./src/util/utils/feedback.ts"),Cr=s("./node_modules/@amzn/dvui/dist/Icon.js");const xr="_5GvahL",Ir="NS0Rs-",Nr="kGLrFM",Pr="YrIQ4e",kr="wDonz0";var Sr=s("./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx");const Vr=({dropListId:e,dropListLinks:t,formUrl:s,formOnSubmitFn:a})=>i.createElement(i.Fragment,null,i.createElement("h4",{className:`${Nr}`},i.createElement(Wt.H1,{stringID:"DV_WEB_FEEDBACK_select_related_device"})),i.createElement("div",{className:`${Pr}`,"data-automation-id":"feedback-drop-list","data-testid":"feedback-drop-list"},i.createElement(Sr.x,{links:t,customDropListID:e})),i.createElement(Is.PrimeButton,{useIcon:Cr.IconType.EXTERNAL,onClick:()=>{a&&a(),window.open(s,"_blank",(0,bn.R4)(500,540))},className:`${kr}`,"data-automation-id":"feedback-submit-button","data-testid":"feedback-submit-button"},i.createElement(Wt.H1,{stringID:"DV_WEB_FEEDBACK_submit_button"}))),Wr=({isOpen:e=!1,link:t,linkOnClickFn:s,onCloseFn:a,header:n,children:r})=>i.createElement(Fs.i,{size:"xs",isOpen:e,toggle:()=>i.createElement(_s._,{refTag:"atv_dp_fb_open"},i.createElement("button",{"data-automation-id":"feedback-button","data-testid":"feedback-button",className:`${Ir}`,onClick:s},t)),onClose:a,modalHeader:i.createElement("strong",null,n),modalContent:r,className:`${xr}`});var Ar=s("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts");const Rr="TVOD",Lr="freewithads",Br=(0,ke.P)(pt.tW,(e=>(null==e?void 0:e.map((e=>e.benefitId||e.entitlementType)))||[])),Mr=(0,ke.P)(pt.ZM,(e=>(null==e?void 0:e.map((e=>e.benefitId||e.sType)))||[])),Or=(0,ke.P)(pt.AI,(e=>(0,Ln.c0)(e&&e.moreWaysToWatch).map((e=>(0,Ar.ok)(e)?e.benefitId||e.sType:(0,Ar.E2)(e)?Rr:void 0)).filter(Boolean))),jr=(0,ke.P)([Or,Mr,Br,pt.cD],((e,t,s,a)=>{const n=(0,bn.xb)(a)?[]:[Rr];return[...new Set([...t,...e,...s,...n].filter(Boolean))].toString()})),Fr=(0,ke.P)([jr],(e=>e.includes(Lr)?Lr:"UNKNOWN")),Hr="udxRA6",Ur="HFxiUK",Zr="R5YYC7",zr="GKcn7L",qr="WlzL0N";var $r=s("./node_modules/@amzn/dvui/dist/Icons/External.js"),Gr=s.n($r),Qr=s("./src/shared/CS/components/Text/Text.tsx"),Yr=s("./src/shared/CS/components/CallToActionButton/CallToActionButton.tsx");function Kr(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xr="fbModalOpen",Jr="feedback-device-list",eo=i.createElement(Wt.H1,{stringID:"DV_WEB_FEEDBACK_feedback"}),to=i.createElement(Wt.H1,{stringID:"DV_WEB_FEEDBACK__send_us_feedback"}),so={deviceTypeId:"A13Q6A55DBZB7M",name:"AVOD Website",text:i.createElement(Wt.H1,{stringID:"DV_WEB_FEEDBACK_no_device_website"})},ao={deviceTypeId:"",name:"Other Device",text:i.createElement(Wt.H1,{stringID:"DV_WEB_SETTINGS_HEAD_YOUR_DEVICES"})},no=(e,t=!0)=>{const s=wr.F.from(e);if(s.isEmpty()&&t)return[so,ao];const a=s.getOrElse([]).reduce(((e,t)=>{const s=t.childrenNames&&t.childrenNames[0]||t.name;return e[s]||(e[s]=t.deviceTypeId),e}),{}),n=Object.keys(a).sort(((e,t)=>e.localeCompare(t))).map((e=>({name:e,deviceTypeId:a[e],text:e})));return[so,...n]},io=(e,t,s)=>e.map(((e,a)=>({text:e.text,isHighlighted:t===a,href:`#${a}`,onClick:e=>{s(a),e.preventDefault()}})));class ro extends i.Component{constructor(...e){super(...e),Kr(this,"state",{isOpen:this.isModalOpenOnPageLoad(),selected:0}),Kr(this,"getDevicesList",(()=>{Boolean(this.props.context.customerID)&&!this.props.devices.deviceEntries&&this.props.getDevicesListWithRedirect(this.props.feedbackSignInUrl)}))}isModalOpenOnPageLoad(){const{context:{queryParameters:e}}=this.props;return Boolean(e&&e.fbModalOpen&&e.fbModalOpen[0])}linkClickHandler(){this.getDevicesList(),this.openModal()}selectDropListLink(e){this.setState({selected:e})}openModal(){this.setState({isOpen:!0})}closeModal(){this.setState({isOpen:!1})}componentDidMount(){this.state.isOpen&&this.getDevicesList()}render(){const{selected:e,isOpen:t}=this.state,{isMobile:s,isRetail:a,context:n,pageTitleId:r,logger:o,offerTypes:l,custPlayerType:c,devices:{deviceEntries:d}}=this.props,u=no(d,Boolean(n.customerID)),m=io(u,e,(e=>this.selectDropListLink(e))),p=u[e],g={...a?{ASIN:r}:{GTI:r},deviceName:p.name,deviceTypeId:p.deviceTypeId,currentTerritory:n.currentTerritory,recordTerritory:n.recordTerritory,language:n.locale,marketplace:n.marketplaceID,encryptedCustomerId:n.customerID,offerTypes:l,...Boolean(c)?{custPlayerType:c}:{},sessionId:n.sessionID,sourceUrl:`${(0,_r.cU)(n.marketplaceID)}${n.originalURI}`,returnUrl:(0,Je.P_)({isRetail:a,parameters:{},originalURI:n.originalURI},r,"atv_dp_send_feedback")},h=(0,Tr.O)(n.marketplaceID,g,o,s);return i.createElement(Wr,{isOpen:t,link:eo,linkOnClickFn:()=>this.linkClickHandler(),onCloseFn:()=>this.closeModal(),header:to},i.createElement(Vr,{dropListId:Jr,dropListLinks:m,formUrl:h,formOnSubmitFn:()=>{o.count("DVWeb::Detail::FeedbackFormSubmit",1,!0),this.closeModal()}}))}}const oo=(0,Ce.n)((0,l.$j)((e=>({devices:Se.bS.devices(e),isMobile:(0,mt.Hu)(e),pageTitleId:Se.bS.pageTitleId(e),context:Se.bS.context(e),isRetail:(0,xe.T_)(e),offerTypes:jr(e),custPlayerType:Fr(e)})),(e=>({getDevicesListWithRedirect:t=>{e(Er(t))}})))((0,it.QI)(ro,(({isMobile:e,isRetail:t,context:s,pageTitleId:a,logger:n,offerTypes:r,custPlayerType:o,devices:{deviceEntries:l},devices:c,feedbackSignInUrl:d,getDevicesListWithRedirect:u})=>{const m=s.queryParameters,p=Boolean(m&&m.fbModalOpen&&m.fbModalOpen[0]),[g,h]=i.useState(p),[v,b]=i.useState(0),D=()=>{Boolean(s.customerID)&&!c.deviceEntries&&u(d)};i.useEffect((()=>{g&&D()}),[]);const{getString:y}=i.useContext(je.h),f=no(l,Boolean(s.customerID)),E=io(f,v,(e=>b(e))),w=f[v],_={...t?{ASIN:a}:{GTI:a},deviceName:w.name,deviceTypeId:w.deviceTypeId,currentTerritory:s.currentTerritory,recordTerritory:s.recordTerritory,language:s.locale,marketplace:s.marketplaceID,encryptedCustomerId:s.customerID,offerTypes:r,...Boolean(o)?{custPlayerType:o}:{},sessionId:s.sessionID,sourceUrl:`${(0,_r.cU)(s.marketplaceID)}${s.originalURI}`,returnUrl:(0,Je.P_)({isRetail:t,parameters:{},originalURI:s.originalURI},a,"atv_dp_send_feedback")},T=(0,Tr.O)(s.marketplaceID,_,n,e),C=1==f.length?i.createElement(Is.Button,{className:zr,disabled:!0,testID:"feedback-device-button"},f[0].text):i.createElement("div",{className:Zr,"data-automation-id":"feedback-drop-list","data-testid":"feedback-drop-list"},i.createElement(Sr.x,{className:Hr,links:E,customDropListID:Jr})),x=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(Qr.Z.Body,null,i.createElement(Wt.H1,{stringID:"DV_WEB_FEEDBACK_select_related_device"})),C),i.createElement(Yr.z,{testID:"primary-action-button",className:Ur,isInverted:!0,onCallToActionButtonClick:()=>{n.count("DVWeb::Detail::FeedbackFormSubmit",1,!0),h(!1),window.open(T,"_blank",(0,bn.R4)(500,540))},label:y("DV_WEB_FEEDBACK_submit_button"),icon:i.createElement(Gr(),null)})),I={isVisible:g,titleText:y("DV_WEB_FEEDBACK__send_us_feedback"),body:x,onRequestClose:()=>h(!1),testID:"feedback-form-modal",disableFooter:!0};return i.createElement("div",null,i.createElement("h3",{className:qr},i.createElement(Wt.H1,{stringID:"DV_WEB_FEEDBACK_feedback"})),i.createElement(ha.Link,{onClick:()=>{D(),h(!0)},"data-automation-id":"feedback-link","data-testid":"feedback-link",ariaLabel:y("DV_WEB_FEEDBACK_feedback")},i.createElement(Qr.Z.MetaData,null,i.createElement(Wt.H1,{stringID:"DV_WEB_FEEDBACK__send_us_feedback"}))),i.createElement(xa.u,I))}))));var lo=s("./src/shared/DetailPage/queryParameters.ts");const co="SshCFd",uo="xFwfU8",mo="_2CX6cq",po="meNeTP",go="_3yYsM8",ho="ArFKcS",vo="v9eunJ";var bo=s("./node_modules/@amzn/dvui/dist/Container.js");const Do="60px",yo="download-banner-dismiss-icon",fo="DVWebNode::DetailPage::DownloadUpsell",Eo="dvWebDownloadAppUpsellBannerShown",wo="true",_o=(0,Ce.n)((({homePageUrl:e,downloadUrl:t,logger:s})=>{const[a,n]=i.useState(!1),[r,o]=i.useState(!1);i.useEffect((()=>{var t;window&&window.localStorage&&window.localStorage.getItem(Eo)===wo||!1||(null===(t=window.P)||void 0===t||t.when("mash").execute((t=>{t.canLaunchIntentURL({url:e,successCallback:e=>{e?s.count(`${fo}::ShowDownloadUpsellBanner::hidden`,1,!1):(setTimeout((()=>{n(!0),o(!0)}),1500),s.count(`${fo}::ShowDownloadUpsellBanner::shown`,1,!1))},failCallback:()=>{s.count(`${fo}::ShowDownloadUpsellBanner::hidden`,1,!1)}})})))}),[]);return i.createElement(i.Fragment,null,a&&i.createElement("div",{className:co,onClick:()=>{var e;null===(e=window.P)||void 0===e||e.when("mash").execute((e=>{s.count(`${fo}::LaunchDownloadURL`,1,!1),e.launchIntentURL({url:t})}))},"data-automation-id":"pv-app-download-page-link"},i.createElement("input",{type:"checkbox",checked:r,id:yo,className:uo,onClick:e=>{window&&window.localStorage&&window.localStorage.setItem(Eo,wo),s.count(`${fo}::ShowDownloadUpsellBanner::dismissed`,1,!1),o(!1),setTimeout((()=>{n(!1)}),300),e.stopPropagation()}}),i.createElement("div",{className:mo},i.createElement("label",{htmlFor:yo,onClick:e=>e.stopPropagation(),className:po},i.createElement(Cr.Icon,{use:Cr.IconType.SECOND_SCREEN_CLOSE})),i.createElement(bo.Container,null,i.createElement("div",{className:go},i.createElement("div",{className:ho},i.createElement(rr(),{height:Do,width:Do})),i.createElement(Wt.H1,{stringID:"DV_DP_download_upsell_banner",className:vo}))))))})),To=(0,ke.P)(Se.mZ.autoplayHero,(e=>{if(!e||0===Object.keys(e.mediaFiles).length)return;const{mediaFiles:t,draperTrackingEvents:s,textMap:a,isTrailerAutoplayEnabled:n}=e,i=void 0===n||n,r=Object.entries(t).map((([e,t])=>({bitrate:parseInt(e,10),file:t}))).filter((({bitrate:e})=>Boolean(e))).sort(((e,t)=>e.bitrate-t.bitrate));let o;if(window.navigator&&window.navigator.connection&&window.navigator.connection.downlink){const e=r.filter((({bitrate:e})=>e<1024*window.navigator.connection.downlink*.5));o=e.length>0?e[e.length-1].file:void 0}else o=r[Math.floor((r.length-1)/2)].file;return void 0===o?void 0:{mediaFile:o,draperTrackingEvents:s,textMap:a,isTrailerAutoplayEnabled:i}}));let Co=function(e){return e.SixteenByNine="16/9",e.ThreeByOne="3/1",e.TwoByThree="2/3",e.ThirtyTwoByFifteen="32/15",e.OneByOne="1/1",e.ThreeHundredFortyFiveByFiftySix="345/56",e}({});var xo=s("./src/shared/CS/components/LazyImage/LazyImage.tsx"),Io=s("./src/util/utils/hooks/useHasMounted.ts");const No="BNTHjF",Po="YMr7XB",ko="GBUIzn";let So=function(e){return e.Init="init",e.Play="play",e.Pause="pause",e.Stop="stop",e}({}),Vo=function(e){return e[e.Restart=0]="Restart",e[e.Resume=1]="Resume",e}({});const Wo=(e,t)=>`${e}->${t}`,Ao=new Set([Wo(So.Init,So.Play),Wo(So.Play,So.Stop),Wo(So.Play,So.Pause),Wo(So.Pause,So.Play),Wo(So.Play,So.Init),Wo(So.Stop,So.Init),Wo(So.Stop,So.Play)]);function Ro(e,t){const s=Wo(e,t);return Ao.has(s)?t:e}const Lo={muted:!0,activeUserInitiatedPlayer:null,activeSystemInitiatedPlayer:null,fullScreen:!1,updateContext:null},Bo=i.createContext(Lo);Bo.displayName="VideoContext";const Mo=({children:e,videoContext:t})=>{const[s,a]=i.useState({...t||Lo});return i.createElement(Bo.Provider,{value:{...s,updateContext:a}},e)},Oo="X5+4vU",jo="Wtn2lx",Fo="LiIxXt",Ho="_2uNM20";function Uo(e){var t,s;return e.isUserInitiated?null===(null===(t=e.videoContext)||void 0===t?void 0:t.activeUserInitiatedPlayer):null===(null===(s=e.videoContext)||void 0===s?void 0:s.activeSystemInitiatedPlayer)}function Zo(e,t){var s,a,n;return e.isUserInitiated?(null===(s=e.videoContext)||void 0===s?void 0:s.activeUserInitiatedPlayer)===t:(null===(a=e.videoContext)||void 0===a?void 0:a.activeSystemInitiatedPlayer)===t&&null===(null===(n=e.videoContext)||void 0===n?void 0:n.activeUserInitiatedPlayer)}function zo(e,t){var s,a,n,i;if(e.isUserInitiated&&(null===(s=e.videoContext)||void 0===s?void 0:s.activeUserInitiatedPlayer)===t)(null===(n=e.videoContext)||void 0===n?void 0:n.updateContext)&&(null===(i=e.videoContext)||void 0===i||i.updateContext({...e.videoContext,activeUserInitiatedPlayer:null}));else if((null===(a=e.videoContext)||void 0===a?void 0:a.activeSystemInitiatedPlayer)===t){var r,o;(null===(r=e.videoContext)||void 0===r?void 0:r.updateContext)&&(null===(o=e.videoContext)||void 0===o||o.updateContext({...e.videoContext,activeSystemInitiatedPlayer:null}))}}function qo(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $o=.1;class Go extends i.PureComponent{constructor(e){super(e),qo(this,"displayName","InternalDraperPlayer"),qo(this,"playHandler",void 0),qo(this,"stopHandler",void 0),qo(this,"updateHandler",void 0),qo(this,"errorHandler",void 0),qo(this,"waitingHandler",void 0),qo(this,"videoStarted",void 0),qo(this,"expectedReadyState",void 0),qo(this,"eventHandlers",void 0),qo(this,"wrappers",{}),qo(this,"fadeAudioIntervalHandle",void 0),qo(this,"fadeAudio",(e=>new Promise((t=>{var s;this.fadeAudioIntervalHandle&&clearInterval(this.fadeAudioIntervalHandle),null!==(s=this.wrappers.videoPlayer)&&void 0!==s&&s.muted&&(this.wrappers.videoPlayer.muted=!1,this.wrappers.videoPlayer.volume=0);const a=()=>{this.fadeAudioIntervalHandle&&(clearInterval(this.fadeAudioIntervalHandle),this.fadeAudioIntervalHandle=void 0),t()};this.fadeAudioIntervalHandle=setInterval((()=>{if(this.wrappers.videoPlayer){const{volume:t}=this.wrappers.videoPlayer,s=t>e?t>e+$o?t-$o:e:t<e-$o?t+$o:e;this.wrappers.videoPlayer.volume=s,s===e&&a()}else a()}),30)})))),qo(this,"fadeOutAudio",(()=>this.fadeAudio(0))),qo(this,"fadeInAudio",(()=>this.state.originalVolume&&this.fadeAudio(this.state.originalVolume))),qo(this,"setWrapperRef",(e=>{this.wrappers.videoWrapper=e})),qo(this,"setVideoPlayerRef",(e=>{this.wrappers.videoPlayer=e})),qo(this,"call",(e=>{this.eventHandlers[e]&&this.eventHandlers[e].forEach((e=>e()))})),this.state={hasError:!1,playing:!1,paused:!1},this.videoStarted=!1,this.eventHandlers=e.eventHandlers,this.expectedReadyState=4}componentDidMount(){var e;this.setState({originalVolume:null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.volume}),this.wrappers.videoPlayer&&(this.wrappers.videoPlayer.preload="auto",this.wrappers.videoPlayer.muted=this.props.videoContext.muted)}componentDidUpdate(e){const t=Zo(this.props,this),s=Zo(e,this);this.state.playing&&t!==s?t?setTimeout((()=>{this.state.playing&&Zo(this.props,this)&&this.resumeWhenPaused()}),1500):this.props.isUserInitiated?this.stop():this.pauseButKeepVisible():Uo(this.props)&&this.state.paused&&this.stop(),this.props.mediaFile!=e.mediaFile&&(this.videoStarted=!1);const{muted:a}=this.props.videoContext||{};a!=(e.videoContext&&e.videoContext.muted)&&(this.props.enableAudioFading?a?this.fadeOutAudio():this.fadeInAudio():this.wrappers.videoPlayer&&(this.wrappers.videoPlayer.muted=a))}componentWillUnmount(){this.removeEventListeners(),zo(this.props,this),this.removeVideoSource()}startPlayer(){var e,t,s,a,n,i,r;if(this.playHandler=()=>this.playAssumingReady(),this.stopHandler=()=>this.onPlaybackComplete(),this.updateHandler=()=>this.onTimeUpdate(),this.errorHandler=()=>this.onLoadError(),this.waitingHandler=()=>this.onWaiting(),this.addEventListeners(),!this.props.isUserInitiated&&!Uo(this.props))return;t=this.props,s=this,t.isUserInitiated?(null===(a=t.videoContext)||void 0===a?void 0:a.updateContext)&&(null===(n=t.videoContext)||void 0===n||n.updateContext({...t.videoContext,activeUserInitiatedPlayer:s})):(null===(i=t.videoContext)||void 0===i?void 0:i.updateContext)&&(null===(r=t.videoContext)||void 0===r||r.updateContext({...t.videoContext,activeSystemInitiatedPlayer:s}));const o=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.readyState;if(o&&o>=this.expectedReadyState){var l;if(!this.props.isUserInitiated)null===(l=this.wrappers.videoPlayer)||void 0===l||l.load();this.playHandler()}}async playAssumingReady(){var e;const t=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.readyState;if(t&&t>=this.expectedReadyState){var s;this.call("onInitialized"),await Promise.all(Array.from(this.eventHandlers.onBeforePlay).map((e=>e())));const e=null===(s=this.wrappers.videoPlayer)||void 0===s?void 0:s.play();if(void 0!==e)e.then((()=>{this.onPlayStart()})).catch((e=>{this.onPlayError(e.name,e)}));else try{var a;null===(a=this.wrappers.videoPlayer)||void 0===a||a.play(),this.onPlayStart()}catch(e){this.onPlayError(`${e}`,e)}}}pauseButKeepVisible(){var e;null===(e=this.wrappers.videoPlayer)||void 0===e||e.pause(),!this.state.paused&&this.call("onPause"),this.setState({paused:!0})}resumeWhenPaused(){var e;null===(e=this.wrappers.videoPlayer)||void 0===e||e.play(),this.state.paused&&this.call("onResume"),this.setState({paused:!1})}stop(e=!1){this.setState({playing:!1,paused:!1},(()=>{var t,s;this.call("onPlayStop"),null===(t=this.wrappers.videoPlayer)||void 0===t||t.pause(),this.removeEventListeners(),e?(s=this.props).videoContext&&s.videoContext.updateContext&&s.videoContext&&s.videoContext.updateContext({...s.videoContext,activeUserInitiatedPlayer:null,activeSystemInitiatedPlayer:null}):zo(this.props,this)}))}restartVideo(){this.time=0}set time(e){var t;void 0!==(null===(t=this.wrappers.videoPlayer)||void 0===t?void 0:t.currentTime)&&(this.wrappers.videoPlayer.currentTime=e)}updatePageScrolling(e){if(!document)return;const t=document.getElementsByTagName("body")&&document.getElementsByTagName("body")[0];t&&(t.style.overflow=e)}onLoadError(){var e;const t=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.error;this.eventHandlers.onLoadError.forEach((e=>e(t))),setTimeout((()=>{this.stop()}),4e3)}onPlaybackComplete(){return this.call("onPlayComplete"),this.expectedReadyState=2,this.stop()}onPlayError(e,t){this.eventHandlers.onPlayError&&this.eventHandlers.onPlayError.forEach((s=>s(e,t)))}onPlayStart(){this.videoStarted=!0,this.eventHandlers.onPlayStart&&this.eventHandlers.onPlayStart.forEach((e=>e(this.videoStarted))),this.setState({playing:!0,paused:!1},(()=>{this.call("onPlaybackStarted"),!this.props.isUserInitiated&&this.props.videoContext.activeUserInitiatedPlayer&&this.pauseButKeepVisible()}))}onTimeUpdate(){var e,t;const s=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.duration,a=null===(t=this.wrappers.videoPlayer)||void 0===t?void 0:t.currentTime;s&&a&&this.eventHandlers.onTimeUpdate&&this.eventHandlers.onTimeUpdate.forEach((e=>e(s,a)))}onWaiting(){this.call("onWaiting")}addEventListeners(){var e,t,s,a,n;this.playHandler&&(null===(e=this.wrappers.videoPlayer)||void 0===e||e.addEventListener("canplaythrough",this.playHandler)),this.stopHandler&&(null===(t=this.wrappers.videoPlayer)||void 0===t||t.addEventListener("ended",this.stopHandler)),this.updateHandler&&(null===(s=this.wrappers.videoPlayer)||void 0===s||s.addEventListener("timeupdate",this.updateHandler)),this.waitingHandler&&(null===(a=this.wrappers.videoPlayer)||void 0===a||a.addEventListener("waiting",this.waitingHandler)),this.errorHandler&&(null===(n=this.wrappers.videoPlayer)||void 0===n||n.addEventListener("error",this.errorHandler))}removeEventListeners(){var e,t,s,a,n;this.playHandler&&(null===(e=this.wrappers.videoPlayer)||void 0===e||e.removeEventListener("canplaythrough",this.playHandler)),this.stopHandler&&(null===(t=this.wrappers.videoPlayer)||void 0===t||t.removeEventListener("ended",this.stopHandler)),this.updateHandler&&(null===(s=this.wrappers.videoPlayer)||void 0===s||s.removeEventListener("timeupdate",this.updateHandler)),this.errorHandler&&(null===(a=this.wrappers.videoPlayer)||void 0===a||a.removeEventListener("error",this.errorHandler)),this.waitingHandler&&(null===(n=this.wrappers.videoPlayer)||void 0===n||n.removeEventListener("waiting",this.waitingHandler))}removeVideoSource(){const e=this.wrappers.videoPlayer;e&&e.pause(),e&&e.removeAttribute("src"),e&&e.load()}render(){const{mediaFile:e,videoContext:t,eventHandlers:s,className:a,videoClassName:n,enableFullscreen:r,link:o,accessibilityLabel:l,children:c}=this.props,d=o?"a":"div";if(this.state.hasError||!e||!t)return null;const u=this.state.playing||this.state.paused||t.fullScreen;return i.createElement(d,{className:tt(Oo,a,"tst-video-overlay-player-overlay","tst-preroll-player",{[Fo]:!u,[Ho]:u,[jo]:t.fullScreen&&r}),href:o,ref:this.setWrapperRef,onClick:e=>s.onClick.forEach((t=>t(e))),"aria-label":l||""},c,i.createElement("video",{className:tt("tst-video-overlay-player-html5",n),src:e,ref:this.setVideoPlayerRef}))}}const Qo=i.forwardRef((function(e,t){const{delay:s,canPlay:a,isAutoPlay:n,onPlayingStatusChange:r,playback:o,mediaFile:l,eventHandlers:c,link:d,children:u,isUserInitiated:m,enableFullscreen:p,enableAudioFading:g,className:h,videoClassName:v,accessibilityLabel:b}=e,D=i.useContext(Bo),{playerRef:y,play:f,stop:E}=(({delay:e=0,canPlay:t=!1,isAutoPlay:s=!1,onStateChange:a,onPlayingStatusChange:n,playback:r=Vo.Restart,reducer:o=Ro})=>{const l=i.useRef(),c=i.useRef(null),[d,u]=i.useReducer(o,So.Init);i.useEffect((()=>{a&&a(d)}),[d]);const m=c&&c.current;return i.useEffect((()=>{m&&m.eventHandlers&&m.eventHandlers.onPlayComplete.add((()=>{u(So.Stop)}))}),[m]),i.useEffect((()=>{let a=!1;switch(d){case So.Init:s&&(t?l.current=window.setTimeout((()=>{u(So.Play)}),e):clearTimeout(l.current));break;case So.Play:t?(a=!0,m&&m.startPlayer()):r===Vo.Resume?u(So.Pause):r===Vo.Restart&&(m&&m.stop(),m&&m.restartVideo());break;case So.Pause:a=!0,t?m&&m.startPlayer():m&&m.pauseButKeepVisible();break;case So.Stop:a=!1,m&&m.stop()}return n&&n(a),()=>{clearTimeout(l.current)}}),[t,e,d,r,m]),{playerRef:c,play:()=>{u(So.Play)},pause:()=>{u(So.Pause)},stop:()=>{u(So.Stop)}}})({delay:s,canPlay:a,isAutoPlay:n,onPlayingStatusChange:r,playback:o});if(i.useImperativeHandle(t,(()=>({play:f,stop:E}))),!y)return null;const w={ref:e=>y.current=e,mediaFile:l,link:d,eventHandlers:c,videoContext:D,isUserInitiated:m,enableFullscreen:p,enableAudioFading:g,className:h,videoClassName:v,accessibilityLabel:b,children:u};return i.createElement(Go,w)})),Yo="-Tvn13";var Ko=s("./node_modules/@amzn/dvui/dist/Icons/Muted.js"),Xo=s("./node_modules/@amzn/dvui/dist/Icons/Unmuted.js"),Jo=s("./node_modules/@amzn/dvui/dist/Icons/FullscreenExit.js"),el=s("./node_modules/@amzn/dvui/dist/Icons/FullscreenEnter.js");const tl=({className:e,disableUnmute:t,enableFullscreen:s,textMap:a,muteClassName:n,fullScreenClassName:r,onMuteToggle:o,onFullscreenToggle:l})=>{const c=i.useContext(Bo);if(!!t&&!s)return null;const d=c.muted?i.createElement(Ko.Muted,null):i.createElement(Xo.Unmuted,null),u=c.muted?a.unmute:a.mute,m=c.muted?"unmute":"mute",p=c.fullScreen?i.createElement(Jo.FullscreenExit,null):i.createElement(el.FullscreenEnter,null),g=c.fullScreen?a.exitFullscreen:a.enterFullscreen;return i.createElement("div",{className:tt(Yo,e)},i.createElement(Ts.IconButton,{className:n,icon:d,variant:Ts.IconButtonVariant.INVERTED,onClick:e=>{if(0!==e.button)return;e.preventDefault();const t=!c.muted;c.updateContext&&c.updateContext({...c,muted:t}),o&&o(t)},ariaLabel:u,testID:m}),s&&i.createElement(Ts.IconButton,{className:r,icon:p,variant:Ts.IconButtonVariant.INVERTED,onClick:e=>{var t;if(0===e.button)return t=!c.fullScreen,sl(t?"hidden":"visible"),c.updateContext&&c.updateContext({...c,fullScreen:t}),void(l&&l(t))},ariaLabel:g}))},sl=e=>{if(!document)return;const t=document.getElementsByTagName("body")&&document.getElementsByTagName("body")[0];t&&(t.style.overflow=e)};function al(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class nl{constructor(e={}){al(this,"onPause",void 0),al(this,"onResume",void 0),al(this,"onLoadError",void 0),al(this,"onPlayError",void 0),al(this,"onInitialized",void 0),al(this,"onPlayStart",void 0),al(this,"onPlaybackStarted",void 0),al(this,"onPlayComplete",void 0),al(this,"onTimeUpdate",void 0),al(this,"onWaiting",void 0),al(this,"onClick",void 0),al(this,"onPlayStop",void 0),al(this,"onBeforePlay",void 0),this.onPause=new Set,this.onResume=new Set,this.onLoadError=new Set,this.onPlayError=new Set,this.onInitialized=new Set,this.onPlayStart=new Set,this.onPlaybackStarted=new Set,this.onPlayComplete=new Set,this.onTimeUpdate=new Set,this.onWaiting=new Set,this.onClick=new Set,this.onPlayStop=new Set,this.onBeforePlay=new Set,e.onPause&&this.onPause.add(e.onPause),e.onResume&&this.onResume.add(e.onResume),e.onLoadError&&this.onLoadError.add(e.onLoadError),e.onPlayError&&this.onPlayError.add(e.onPlayError),e.onInitialized&&this.onInitialized.add(e.onInitialized),e.onPlayStart&&this.onPlayStart.add(e.onPlayStart),e.onPlaybackStarted&&this.onPlaybackStarted.add(e.onPlaybackStarted),e.onPlayComplete&&this.onPlayComplete.add(e.onPlayComplete),e.onTimeUpdate&&this.onTimeUpdate.add(e.onTimeUpdate),e.onWaiting&&this.onWaiting.add(e.onWaiting),e.onClick&&this.onClick.add(e.onClick),e.onPlayStop&&this.onPlayStop.add(e.onPlayStop),e.onBeforePlay&&this.onBeforePlay.add(e.onBeforePlay)}}const il=new Map,rl=e=>new Promise((t=>setTimeout(t,e))),ol=(e,t,s,a=!1)=>{window&&window.location.href.includes("draperDebug")&&window.console.log({eventLogged:t,trackingEventURL:s,videoURL:e,debounced:a})};var ll=s("./src/util/api/APIClient.ts");function cl(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class dl{constructor(e){cl(this,"firstQuartileReached",void 0),cl(this,"midpointReached",void 0),cl(this,"thirdQuartileReached",void 0),cl(this,"pageType",void 0),cl(this,"subPageType",void 0),cl(this,"widgetName",void 0),cl(this,"videoURL",void 0),cl(this,"refMarker",void 0),cl(this,"trackingEvents",void 0),cl(this,"logger",void 0),cl(this,"logRefTag",void 0),cl(this,"api",new ll.l),cl(this,"onPause",(()=>{this.fireEvent("pause")})),cl(this,"onResume",(()=>{this.fireEvent("resume")})),cl(this,"onLoadError",(e=>{(null==e?void 0:e.code)===MediaError.MEDIA_ERR_DECODE?this.fireEvent("error"):this.fireEvent("playbackBlocked"),(0,n.cL)(`DVWeb::DraperPlayer::loadError::${this.pageType}`,1,!1)})),cl(this,"onPlayError",((e,t)=>{"NotAllowedError"===e?((0,n.cL)(`DVWeb::DraperPlayer::NotAllowedError::${this.pageType}`,1,!1),this.fireEvent("playbackBlocked")):(this.logger.error(`Pre-Roll Player Failed to play: ${e}.`,t),this.fireEvent("error"))})),cl(this,"onInitialized",(()=>{(0,n.cL)(`DVWeb::DraperPlayer::BUFFER::INITIALISED::${this.pageType}`,1,!1)})),cl(this,"onPlayStart",(e=>{var t;!e&&this.fireEvent("defaultImpression"),this.logRefTag({refTag:null!==(t=this.refMarker)&&void 0!==t?t:"atv-unknown",actions:[ta.W0.PlayDraper]})})),cl(this,"onPlayComplete",(()=>{this.fireEvent("complete")})),cl(this,"onTimeUpdate",((e,t)=>{!this.thirdQuartileReached&&t>=.75*e?(this.thirdQuartileReached=!0,this.fireEvent("thirdQuartile")):!this.midpointReached&&t>=.5*e?(this.midpointReached=!0,this.fireEvent("midpoint")):!this.firstQuartileReached&&t>=.25*e&&(this.firstQuartileReached=!0,this.fireEvent("firstQuartile"))})),cl(this,"onWaiting",(()=>{(0,n.cL)(`DVWeb::DraperPlayer::BUFFER::REINITIALISING::${this.pageType}`,1,!1)})),cl(this,"onMute",(e=>{e?(this.fireEvent("mute"),this.logRefTag({refTag:(0,Js.i)("atv_trailer_auto_mute")})):(this.fireEvent("unmute"),this.logRefTag({refTag:(0,Js.i)("atv_trailer_auto_unmute")}))})),cl(this,"fireEvent",(e=>{(({videoURL:e,trackingEvents:t,eventName:s,debounceDuration:a=1e3,logger:n})=>{const i=t&&t[s];if(i&&!il.has(i)){ol(e,s,i,!1);const t=rl(a).then((()=>(il.delete(i),fetch(i)))).catch((e=>{il.delete(i);const t="dvWebClientDraperEventError";n.count(t,1,!1),n.warn(`[${t} - ${s}] Error firing Draper tracking event with eventUrl: `+i,e)}));return il.set(i,t),t.then((()=>{}))}i&&ol(e,s,i,!0),Promise.resolve()})({videoURL:this.videoURL,trackingEvents:this.trackingEvents,logger:this.logger,eventName:e})})),this.firstQuartileReached=!1,this.midpointReached=!1,this.thirdQuartileReached=!1,this.videoURL=e.videoURL,this.trackingEvents=e.trackingEvents,this.pageType=e.pageType,this.subPageType=e.subPageType,this.widgetName=e.widgetName,this.refMarker=e.refMarker,this.trackingEvents=e.trackingEvents,this.logger=e.logger,this.logRefTag=ul({pageType:this.pageType,subPageType:this.subPageType,titleId:e.titleId,isDCSAnalyticsCallEnabled:!0,clientVariant:e.clientVariant,clickstream:e.clickstream})}}const ul=e=>t=>{(0,sa.X)(t.refTag,e.pageType,e.subPageType,e.titleId,t.actions,t.hitType,e.clientVariant,e.clickstream)},ml=e=>{if(null!=e&&e.videoURL&&null!=e&&e.trackingEvents)return new dl(e)},pl=[360,480,720,1080,1440,1920];const gl=(0,Ce.n)((0,l.$j)((e=>({marketPlaceID:e.requestContext.marketplaceID,prerolls:To(e),isContentPlaying:Boolean(e.player.playbackLinkData),playbackData:(0,pt.a1)(e),fullScreenHero:kt(e),pageTitleId:Se.bS.pageTitleId(e)})))((({fullScreenHero:e,prerolls:t,onPlayingStatusChange:s,isContentPlaying:a,showSideVignette:n,pageTitleId:r,logger:o})=>{const l=function({prerolls:e,titleId:t,logger:s}){const{mediaFile:a,draperTrackingEvents:n}=e||{};return a&&n?{videoURL:a,trackingEvents:n,pageType:ta.c7.ATVDetail,widgetName:"ATF",refMarker:(0,Js.i)("atv_dp_drap_play"),titleId:t,isDCSAnalyticsCallEnabled:!0,clientVariant:ta.Nb.DetailPage,clickstream:(0,ea.U)(),logger:s}:void 0}({prerolls:t,titleId:r,logger:o}),c=(e=>{const t=i.useRef(null==e?void 0:e.videoURL),s=i.useRef(ml(e));return null!=e&&e.videoURL&&t.current!==(null==e?void 0:e.videoURL)&&(s.current=ml(e)),s.current})(l),d=c&&new nl(c),u=(0,Io.f)(),m=(null==t?void 0:t.isTrailerAutoplayEnabled)&&(null==t?void 0:t.mediaFile),p=m&&d&&{mediaFile:m,delay:2e3,canPlay:!a,isAutoPlay:!0,eventHandlers:d,onPlayingStatusChange:s};return i.createElement("div",{className:No,"data-automation-id":"hero-background"},i.createElement(xo.w,{alt:"",src:e,aspectRatio:Co.SixteenByNine,sizesOptions:{defaultSrcSize:1920,srcSizes:[{"max-tablet-lowest":450},{"max-laptop-lowest":900},{"max-desktop-lowest":1300},{"max-desktop-hd-lowest":1600},{"max-desktop-uhd-lowest":2400}]},srcSetWidths:pl,baseValue:720,debugID:r}),p&&u&&i.createElement(Mo,null,i.createElement(Qo,p,i.createElement(tl,{textMap:{enterFullscreen:"Enter full screen",exitFullscreen:"Exit full screen",mute:"Mute",unmute:"Unmute"}}))),i.createElement("div",{className:st()(Po,{[ko]:n})}))}))),hl="I0iH2G",vl="F8rBpx",bl=(0,l.$j)((e=>({genres:It(e),moods:Nt(e),isChildProfile:(0,mt.Io)(e)})))((({genres:e,moods:t,isChildProfile:s})=>{var a,n;if(!(null!==(a=e)&&void 0!==a&&a.length||null!==(n=t)&&void 0!==n&&n.length))return null;e=e.slice(0,t.length<2?4-t.length:2),t=t.slice(0,4-e.length);const r=(e=>{const[t,...s]=e;return[t,...s.reduce(((e,t,s)=>[...e,i.createElement("span",{key:s,className:vl,"data-testid":"genresMetadata-separator"},"·"),t]),[])]})([...e.map(((e,t)=>i.createElement(ue.Metadata,{key:`genre${t}`,variant:ue.TypeVariant.Secondary,"aria-label":e.text,"data-testid":"genre-texts"},e.searchLink&&!s?i.createElement(ha.Link,{text:e.text,href:e.searchLink}):e.text))),...t.map(((e,t)=>i.createElement(ue.Metadata,{key:`mood${t}`,variant:ue.TypeVariant.Secondary,"aria-label":e,"data-testid":"mood-texts"},e)))]);return i.createElement("div",{className:hl,"data-testid":"genresMetadata"},r)}));var Dl=s("./node_modules/@amzn/dvui/dist/Collapsible.js");const yl=["mousemove","mousedown","click","scroll","keydown"];var fl=s("./node_modules/@amzn/dvui/dist/Expander.js"),El=s("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx");function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},wl.apply(this,arguments)}const _l="DVWebNode-detail-btf-wrapper",Tl=new Set([Xr,lo.pN,lo.n9,lo.w5,lo.cg]),Cl=({children:e})=>i.createElement("div",{className:tt(zn,"av-dp-container",qn)},e),xl=({containerRef:e})=>i.createElement("div",{id:"dv-action-box-wrapper"},i.createElement("div",{id:"dv-action-box",className:et.Z.fullWidthMobile},i.createElement(jn,{containerRef:e}))),Il=(0,l.$j)((e=>{var t;return{hasCritical:Tt(e),renderOnlyGen4PlaybackInAtf:Ct(e),title:yt(e),synopsis:null===(t=Et(e))||void 0===t?void 0:t.synopsis,seasons:wt(e),bannerPromo:pi(e),heroQuickPromo:gi(e),bundleCarousel:Se.mZ.bundleCarousel(e),crowBanner:ki(e),blockedPage:Si(e),pageContext:e.pageContext,isRetail:(0,xe.T_)(e),pageTitleId:e.pageTitleId,isDownloadUpsellEnabled:(0,mt.HV)(e),downloadUpsellBannerUrls:Se.bS.pageContext(e).downloadUpsellBanner,highValueMessage:xt(e),isMobile:(0,mt.Hu)(e),isMShop:(0,mt.gK)(e)}}))((({hasCritical:e,renderOnlyGen4PlaybackInAtf:t,title:s,synopsis:a,seasons:n,bannerPromo:r,heroQuickPromo:o,bundleCarousel:l,crowBanner:c,blockedPage:d,pageContext:u,isRetail:m,pageTitleId:p,isDownloadUpsellEnabled:g,downloadUpsellBannerUrls:h,highValueMessage:v,isMobile:b,isMShop:D})=>{const[y,f]=i.useState(!1),E=(({timeout:e,onIdle:t,shouldListen:s,events:a=yl})=>{const[n,r]=(0,i.useState)(!1),o=(0,i.useCallback)((()=>{r(!0),t&&t()}),[t]);return(0,i.useEffect)((()=>{let t;const n=()=>{clearTimeout(t),t=setTimeout(o,e)},i=()=>{r(!1),n()};return s?a.forEach((e=>{window.addEventListener(e,i)})):a.forEach((e=>{window.removeEventListener(e,i)})),n(),()=>{clearTimeout(t),a.forEach((e=>{window.removeEventListener(e,i)}))}}),[e,o,s,a]),n})({timeout:3e3,shouldListen:y}),{subPageType:w}=u,_=i.useRef(null);if(i.useEffect((()=>{(0,yr.V)(Tl)}),[p]),d)return i.createElement(Cl,null,i.createElement("div",{className:"av-detail-section"},i.createElement(Bi,d)));if(!e)return i.createElement(Cl,null,i.createElement("div",{className:"av-detail-section"},i.createElement(oi,{showLiveError:"Event"===w}),i.createElement("style",null,`.${_l}.${_l}.${_l}{display:none;}`)));const T=!b&&E&&y;return i.createElement("div",{className:tt({[Fn]:m,[Hn]:!1,[Un]:D})},r&&b&&i.createElement(ui,wl({},r,{className:ti})),i.createElement(gl,{onPlayingStatusChange:f,showSideVignette:!T}),i.createElement("div",{className:Zn,ref:_},i.createElement(Ui,{isRetail:m},c&&i.createElement(Pi,c),i.createElement(Xi,null),g&&h&&i.createElement(_o,h)),i.createElement(Dl.Collapsible,{className:ni,isCollapsed:y},i.createElement(Qi,null)),r&&!b&&i.createElement(ui,wl({},r,{className:tt(ti,si,{[ai]:T})})),i.createElement(Cl,null,i.createElement(Kt.E,{className:"av-detail-section",spacing:600},i.createElement(Kt.K,{className:tt({[Jn]:T},Xn),spacing:400},t&&i.createElement(ue.Marker,null,i.createElement(Wt.H1,{stringID:"DV_DP_only_playback_available_in_gen4_message"})),!!v.message&&i.createElement(ue.Marker,null,i.createElement(gs.Text,{string:v.message}))),i.createElement(Kt.K,{className:$n,spacing:400},i.createElement(ot,wl({titleArtClassName:tt({[Kn]:T},Yn)},s)),i.createElement(Dl.Collapsible,{className:"dv-node-dp-seasons",isCollapsed:T},n&&i.createElement(Ut,n)),a&&i.createElement(Dl.Collapsible,{className:tt(Gn,"dv-dp-node-synopsis"),isCollapsed:T},i.createElement(fl.Expander,{className:Qn,uniqueId:"atf-synopsis",numOfLines:3},i.createElement(El.v,{string:a,dir:"auto"}))),i.createElement(Dl.Collapsible,{className:"dv-node-dp-badges",isCollapsed:T},i.createElement(ms,null)),i.createElement(Dl.Collapsible,{className:"dv-node-dp-genres",isCollapsed:T},i.createElement(bl,null)),i.createElement(xl,{containerRef:_})),o&&i.createElement(fi,wl({},o,{className:tt(ei,si,{[ai]:T})}))),l&&i.createElement(Ci,l)),[u.playbackLaunchType,u.playbackTrailerLaunchType].some((e=>["EMBEDDED","URL_EMBEDDED","MSHOP_ANDROID_EMBEDDED"].includes(e)))&&i.createElement(ar,null),i.createElement(Dr,null)))})),Nl=(0,l.$j)((e=>({pageContext:e.pageContext,config:(0,vs.UH)(e),playerCapabilities:e.player.capabilities,downloadAppModal:e.playbackIntegration.downloadAppModal,enableMarinTracking:Boolean(e.features.enableMarinTracking)})),(e=>({startPlayback:t=>e(tr(t)),triggerUpsellApp:()=>e({type:g.k.TriggerUpsellApp})})))((({startPlayback:e,pageContext:t,config:s,playerCapabilities:a,downloadAppModal:n,triggerUpsellApp:r,enableMarinTracking:o,children:l})=>i.createElement(je.h.Consumer,null,(()=>i.createElement(bs.cr,{playerConfigPageType:s.pageType,onPlay:e,launchType:t.playbackLaunchType,trailerLaunchType:t.playbackTrailerLaunchType,playerCapabilities:a,onDownloadAppRequired:n?r:void 0,enableMarinTracking:o,pageType:t.pageType,subPageType:t.subPageType||ta.wW.Unknown},l))))),Pl={name:"detail-atf",getProps:void 0,Component:(0,r.s6)((0,o.ty)((e=>{const{logger:t,context:s,state:a,isPageChange:n,strings:r,render:o,homeRegion:c}=e,d=de({...a,requestContext:s},t,n);i.useEffect((()=>{Boolean(a.features.enableMarinTracking)&&(0,He.sendClicksTrackingRequest)(s.recordTerritory)}),[]);const u=i.useMemo((()=>({getString:(0,Fe.qY)(r,t,s),...a.pageContext,clickStreamPageType:a.pageContext.pageType,clickStreamSubPageType:a.pageContext.subPageType||ta.wW.Unknown,clickstream:(0,ea.U)({context:s,homeRegion:c}),isRTL:Boolean(o&&o.isRTL),requestContext:s,isMobile:(0,Ze.t)(a.pageContext),isPhablet:(0,Ze.$)(a.pageContext),refTagTitleId:(0,je.N)(a.pageContext.pageTitleId,a.self&&a.self[a.pageTitleId]),isRetail:"Retail"==s.domain})),[r,t,s,a.pageContext,a.self,o]),m=i.useRef({detailPageTheme:it.wS.NextGen});return i.createElement(ue.DvuiContainer,null,i.createElement(je.h.Provider,{value:u},i.createElement(l.zt,{store:d},i.createElement(it.kw.Provider,{value:m.current},i.createElement(Nl,null,i.createElement(Oe,null),i.createElement(Il,null))))))})))};var kl=s("./src/util/utils/swiftDevice.ts");var Sl=s("./src/widgets/DVWebNodeDetail/components/tabs/btfTabs.module.scss"),Vl=s("./src/widgets/DVWebNodeDetail/components/collectionTabs/collectionTabs.tsx"),Wl=s("./src/util/utils/debounce.ts"),Al=s("./node_modules/@amzn/dvui/dist/Icons/Arrow.js"),Rl=s.n(Al);const Ll="_5j9-V+",Bl="WpAacf",Ml="gJx+-W",Ol="vKj17S",jl="H1HVMS";function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Fl.apply(this,arguments)}let Hl=function(e){return e.Backward="backward",e.Forward="forward",e}({});const Ul=({point:e=Hl.Forward,onClick:t,hide:s=!1,className:a,onMoveIn:n,onMoveOut:r,disabled:o=!1,testID:l,...c})=>i.createElement("button",Fl({onMouseEnter:()=>null==n?void 0:n(),onMouseLeave:()=>null==r?void 0:r(),onClick:e=>{e.preventDefault(),o||null==t||t(e)},className:tt(a,Bl,{[Ll]:s,[jl]:e===Hl.Backward,[Ol]:e===Hl.Forward})},c,{"data-testid":l}),i.createElement("div",{className:Ml},i.createElement(Rl(),null)));Ul.displayName="NavigationArrow";const Zl=Ul,zl=i.createContext({connected:!1,init:e=>{}}),ql=({children:e})=>{const[t,s]=i.useState(!1),[a,n]=i.useState();let r;return i.useEffect((()=>{const e=(0,Wl.D)((()=>s(!1)),500),t=()=>{s(!0),e()};return null==a||a.addEventListener("scroll",t,{passive:!0}),()=>null==a?void 0:a.removeEventListener("scroll",t)}),[a]),r=a?{connected:!!a,isScrolling:t,scrollContainer:a}:{connected:!1,init:e=>{e.current&&n(e.current)}},i.createElement(zl.Provider,{value:r},e)},$l="hj1e0s",Gl="_70Gje9",Ql="tHfREs",Yl="_3+3zj7",Kl="krHwZu";var Xl=s("./src/shared/Explore/utils/cssUtils.ts"),Jl=s("./src/util/utils/array.ts");function ec(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class tc{constructor(e,t,s,a){ec(this,"scrollContainerRef",void 0),ec(this,"cardsVisibilityThreshold",void 0),ec(this,"visibility",void 0),ec(this,"onVisibilityChange",void 0),ec(this,"obs",void 0),ec(this,"settledUpdate",void 0),ec(this,"isFirstUpdate",void 0),this.scrollContainerRef=e,this.cardsVisibilityThreshold=s,this.onVisibilityChange=a,this.visibility=new Map;for(let e=1;e<=t;e++)this.visibility.set(e,!1);this.isFirstUpdate=!0,this.settledUpdate=(0,Wl.D)(this.update.bind(this),200),this.setUpIntersectionObserver()}update(){const e=new Array;for(const[t,s]of this.visibility)s&&(0,Jl.y)(e,t);if(0===e.length)return;const[t]=e,s=e[e.length-1];this.onVisibilityChange({visible:new Map(this.visibility),min:t,max:s})}setUpIntersectionObserver(){this.obs=new IntersectionObserver((e=>{e.forEach((e=>{const{index:t}=e.target.dataset,s=parseInt(null!=t?t:"",10);if(isNaN(s))return;const a=e.isIntersecting&&e.intersectionRatio>=this.cardsVisibilityThreshold;this.visibility.set(s,a)})),Array.from(this.visibility.values()).every((e=>!1===e))||(this.isFirstUpdate?(this.isFirstUpdate=!1,this.update()):this.settledUpdate())}),{rootMargin:"100% 0px",threshold:this.cardsVisibilityThreshold}),this.onRenderedCardsChange()}onRenderedCardsChange(){this.obs.disconnect();this.scrollContainerRef.querySelectorAll("li[data-index]").forEach((e=>{this.obs.observe(e)}))}cleanup(){this.obs.disconnect()}}var sc=s("./src/shared/Explore/containers/PageContainer/index.tsx"),ac=s("./node_modules/fast-deep-equal/index.js");function nc(){return nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},nc.apply(this,arguments)}function ic({cards:e,cardsVisibilityThreshold:t=.8,render:s,className:a,overrideScrollContainerRef:n,performantRender:o},l){var c,d;const{isCarouselVisible:u,updateVisibility:m}=i.useContext(cc),{containerVisibility:p,enableVerticalPerformantRender:g,hasPageMounted:h}=i.useContext(sc.z1),{index:v}=i.useContext(iw),[b,D]=i.useState(!1),y=i.useCallback((()=>{const t=o?Math.min(e.length,Math.ceil(o.maxCardNum)):e.length,s=new Map;for(let a=1;a<=e.length;a++)s.set(a,a>=1&&a<=t);return{visible:s,min:1,max:t}}),[e.length,o]),[f,E]=i.useState(y());i.useEffect((()=>{let e;e=null===p.min||null===p.max?v<2:v>=p.min-2&&v<=p.max+2,D(e)}),[v,p.max,p.min]);const w=i.useCallback((()=>{if(!o)return{min:1,max:e.length};const t=Math.ceil(o.maxCardNum),s=Math.max(1,f.min-t-1);let a=Math.min(e.length,f.max+t+1);return h&&g&&(u||(a=b?Math.min(e.length,f.max+1):s)),{min:s,max:a}}),[o,f.min,f.max,e.length,h,u,b,g]),[_,T]=i.useState(w()),C=null!==(c=null===(d=(0,r.G4)().render)||void 0===d?void 0:d.isRTL)&&void 0!==c&&c,x=i.useRef(null),I=null!=n?n:x,N=i.useRef(null),P=i.useContext(zl);i.useEffect((()=>{!P.connected&&I.current&&P.init(I)}),[I,P]);const k=i.useMemo((()=>e=>{E(e)}),[]);i.useEffect((()=>{if(null!=I&&I.current&&m){var s;if(u)N.current=new tc(I.current,e.length,t,k);else null===(s=N.current)||void 0===s||s.cleanup();return()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.cleanup()}}}),[u]),i.useEffect((()=>{var e;null===(e=N.current)||void 0===e||e.onRenderedCardsChange()}),[e]),i.useEffect((()=>{if(m(f),o){const e=w();ac(e,_)||T(e)}}),[w]);const S=i.useRef(new Set);i.useEffect((()=>{if(!o)return;const e=new Set;for(let t=_.min;t<=_.max;t++)S.current.has(t)||(S.current.add(t),e.add(t));var t;e.size>0&&(null==o||null===(t=o.onFirstTimeCardRender)||void 0===t||t.call(o,e))}),[_]);const V=(e,t)=>{if(null==I||!I.current||!Number.isInteger(e))return;const s=Math.max(1,Math.min(t,e));return I.current.querySelector(`li[data-index="${s}"]`)||void 0},W=i.useCallback(((e,t)=>{e.scrollTo({left:t})}),[]);i.useImperativeHandle(l,(()=>({scrollToCard:t=>{const s=V(t,e.length);if(!s||!I.current)return!1;const a=(0,Xl.My)("--dv-carousel-column-margin"),{scrollLeft:n}=I.current,i=s.offsetLeft,r=s.getBoundingClientRect().width,o=I.current.clientWidth;let l;if(i>n){if(i+r<n+o)return!1;l=i-o+r+a}else l=i-a;return W(I.current,l),!0},scrollToCardFirstVisible:t=>{const s=V(t,e.length);if(!s||!I.current)return!1;const a=(0,Xl.My)("--dv-carousel-column-margin"),n=s.offsetLeft,i=s.getBoundingClientRect().width,r=I.current.clientWidth;let o;return o=C?n-r+i+a:n-a,W(I.current,o),!0},cardsRef:I})),[e.length,I]);const A=e.map(((e,t)=>{var n,r;const l=t+1,c=l>=_.min&&l<=_.max||l<(null!==(n=null==o?void 0:o.startIndexForVirtualisation)&&void 0!==n?n:0),d={"data-index":`${l}`};return c||(d["data-hidden"]="true"),i.createElement("li",nc({key:t,className:tt(Ql,a)},d),c&&s(e,null!==(r=f.visible.get(l))&&void 0!==r&&r,t))}));return i.createElement("ul",{className:Gl,ref:x,style:{}},A)}ic.displayName="CardContainer";const rc=i.forwardRef(ic);var oc=s("./src/util/utils/useInteractionObserver.tsx");function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},lc.apply(this,arguments)}const cc=i.createContext({default:!0,state:{visible:new Map,min:0,max:0},isCarouselVisible:!1,scrollToCard:e=>!1,updateCarouselVisibility:e=>!1,updateVisibility:e=>{}});cc.displayName="CarouselContext";const dc=({cards:e,carouselVisibilityThreshold:t=0,cardsVisibilityThreshold:s,className:a,renderContainer:n,renderCard:r,footer:o,header:l,customCarouselContainer:c,overrideScrollContainerRef:d,performantRender:u,testID:m,...p},g)=>{var h;const v=i.useRef(null),{updateCarouselVisibility:b}=i.useContext(cc),{pageWidth:D}=i.useContext(sc.z1);i.useEffect((()=>{var e,t;null==v||null===(e=v.current)||void 0===e||null===(t=e.scrollBy)||void 0===t||t.call(e,0,0)}),[D]);const y=i.useCallback((([{isIntersecting:e,intersectionRatio:s}])=>{b(e&&s>=t)}),[]);(0,oc.S)({enabled:!0,target:v,onIntersect:y,threshold:t});const f=tt($l,a),E=i.createElement(rc,{cards:e,render:r,cardsVisibilityThreshold:s,ref:g,overrideScrollContainerRef:d,performantRender:u}),w=null!=c?c:i.Fragment;return i.createElement(w,null,i.createElement("section",{"data-testid":m},l,i.createElement("div",lc({className:f,ref:v},p),null!==(h=null==n?void 0:n({carousel:E}))&&void 0!==h?h:E),o))};dc.displayName="Carousel";const uc=i.forwardRef(dc),mc="eSOPph",pc="yIoxDk",gc="uryRTT",hc="_3UoYy5",vc="I-rccJ";function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},bc.apply(this,arguments)}let Dc=function(e){return e[e.None=0]="None",e[e.Framed=1]="Framed",e[e.Regular=2]="Regular",e}({}),yc=function(e){return e[e.Default=0]="Default",e[e.FirstVisible=1]="FirstVisible",e}({});const fc=e=>e,Ec=i.memo(i.forwardRef((({navigation:e,isHalfSizedArrowFrame:t,cards:s,carouselVisibilityThreshold:a,cardsVisibilityThreshold:n,step:r,className:o,renderContainer:l,onNavigate:c,scrollType:d=yc.Default,wrapperClassName:u,...m},p)=>{var g;const h=i.useContext(cc),{getString:v,onContainerVisibilityChange:b,isHoverEnabled:D}=i.useContext(sc.z1),{actions:y,hasMoreItems:f,index:E}=i.useContext(iw),w=i.useRef(null),_=null!==(g=p)&&void 0!==g?g:w,T=i.useRef(),[C,x]=i.useState({visible:new Map,min:0,max:0}),[I,N]=i.useState(!1),[P,k]=i.useState(!1),[S,V]=i.useState(!1),W=i.useCallback((()=>k(!0)),[]),A=i.useCallback((()=>k(!1)),[]),[R,L]=i.useState(!1),B=i.useCallback((()=>L(!0)),[]),M=i.useCallback((()=>L(!1)),[]),[O,j]=i.useState(!1),F=tt(o,mc,{[gc]:e!==Dc.None,[hc]:e===Dc.Framed,[vc]:!0===t});i.useEffect((()=>{var e;const t=(0,Wl.D)((()=>{T.current=void 0}),25),s=null===(e=_.current)||void 0===e?void 0:e.cardsRef.current;return null==s||s.addEventListener("scroll",t,{passive:!0}),()=>{null==s||s.removeEventListener("scroll",t)}}),[_]),i.useEffect((()=>{h.default||(C.min=h.state.min,C.max=h.state.max);const e=C.max-C.min,t=s.length-2*e;C.min>=t&&f&&y&&y.onPaginateContainer&&y.onPaginateContainer()}),[C.min,C.max]);const H=i.useMemo((()=>({default:!1,state:C,isCarouselVisible:I,isCarouselHovered:P,isCarouselFocused:R,isHoveringNavArrows:S,scrollToCard:e=>{var t,s,a;return null!==(t=d===yc.FirstVisible?null===(s=_.current)||void 0===s?void 0:s.scrollToCardFirstVisible(e):null===(a=_.current)||void 0===a?void 0:a.scrollToCard(e))&&void 0!==t&&t},updateCarouselVisibility:e=>{N(e),b(E,e)},updateVisibility:e=>{ac(C,e)||x(e)}})),[C,I,P,R,S,d,_,b,E]);let U=r;const Z=null!=l?l:fc,z=i.useCallback((({carousel:t})=>{var a;if(!e)return Z(t);const n={state:C,scrollToCard:H.scrollToCard};h.default||(n.state=h.state,n.scrollToCard=h.scrollToCard),null!==(a=U)&&void 0!==a||(U=n.state.max-n.state.min+1);const r=e=>{var t;null!==(t=T.current)&&void 0!==t||(T.current=n.state.max);let a=T.current;a>=n.state.min&&a<=n.state.max?a=(e>0?n.state.max:n.state.min)+e:a+=e,T.current=Math.max(1,Math.min(s.length,a)),n.scrollToCard(T.current)};let o,l;U>1?(o=v("DV_WEB_ARIA_PREVIOUS_N_TITLES").replace("{steps}",`${U}`),l=v("DV_WEB_ARIA_NEXT_N_TITLES").replace("{steps}",`${U}`)):(o=v("DV_WEB_ARIA_PREVIOUS_TITLE"),l=v("DV_WEB_ARIA_NEXT_TITLE"));const d=P||R;return i.createElement(i.Fragment,null,i.createElement(Zl,{className:pc,point:Hl.Backward,onClick:()=>{const e=null==c?void 0:c(Hl.Backward,C);e?r(e):U&&r(-U),j(!0),setTimeout((()=>{j(!1)}),1e3)},hide:!d||n.state.visible.get(1)||!D,"aria-label":o,onMoveIn:()=>V(!0),onMoveOut:()=>V(!1),testID:"left-arrow",disabled:O}),Z(t),i.createElement(Zl,{className:pc,point:Hl.Forward,onClick:()=>{const e=null==c?void 0:c(Hl.Forward,C);e?r(e):U&&r(U),j(!0),setTimeout((()=>{j(!1)}),1e3)},hide:!d||n.state.visible.get(s.length)||!D,"aria-label":l,onMoveIn:()=>V(!0),onMoveOut:()=>V(!1),testID:"right-arrow",disabled:O}))}),[e,U,s.length,P,R,C,c,O]);return i.createElement(cc.Provider,{value:H},i.createElement("div",{onMouseEnter:W,onMouseLeave:A,onFocus:B,onBlur:M,className:u},i.createElement(uc,bc({},m,{className:F,cards:s,renderContainer:z,ref:_,carouselVisibilityThreshold:a,cardsVisibilityThreshold:n}))))})));Ec.displayName="NavigationCarousel";const wc=Ec;var _c=s("./node_modules/@amzn/dvui/dist/Icons/Cancel.js"),Tc=s.n(_c),Cc=s("./src/shared/CS/components/SecondaryButton/SecondaryButton.tsx");const xc=({hideThisAction:e,titleID:t,buttonStyle:s,textStyle:a,callback:n,isInDropdown:r})=>{const{actions:{onHideThis:o}}=i.useContext(iw),l=e=>{e.preventDefault(),o(e,t,n)},{tag:c,text:d,endpoint:{partialURL:u,query:m}={partialURL:"",query:{}}}=e,p=Object.keys(m).map((e=>i.createElement("input",{type:"hidden",name:e,defaultValue:m[e],key:e})));return i.createElement("form",{action:u,method:"POST"},p,r||"Hide"!==c?i.createElement("button",{type:"submit",className:s,onClick:l,"data-testid":"hide-this"},"Hide"===c&&i.createElement(Tc(),null),i.createElement(gs.Text,{className:a,string:d})):i.createElement(Cc.k,{onSecondaryButtonClick:l,label:d,labelClassName:a,className:s,isInverted:!1,isDisabled:!1,icon:i.createElement(Tc(),{width:oa.Nu,height:oa.W6}),smallIconVariant:!0,testID:"hide-this"}))};var Ic=s("./src/shared/Explore/components/DraperPlayer/videoContext.ts"),Nc=s("./src/shared/Explore/components/DraperPlayer/DraperPlayer.tsx"),Pc=s("./src/shared/Explore/components/DraperPlayer/types.ts");let kc=function(e){return e.Init="init",e.Play="play",e.Pause="pause",e.Stop="stop",e.Error="error",e}({});const Sc=(e,t)=>`${e}->${t}`,Vc=new Set([Sc(kc.Init,kc.Play),Sc(kc.Play,kc.Stop),Sc(kc.Play,kc.Pause),Sc(kc.Pause,kc.Play),Sc(kc.Play,kc.Init),Sc(kc.Stop,kc.Init),Sc(kc.Play,kc.Error),Sc(kc.Init,kc.Error),Sc(kc.Error,kc.Init)]);function Wc(e,t){return Vc.has(Sc(e,t))?t:e}const Ac="YJ1MaA",Rc="_1FUZFF";let Lc=function(e){return e[e.Restart=0]="Restart",e[e.Resume=1]="Resume",e}({});const Bc=({canPlay:e,prerolls:t,delay:s,playing:a,onStateChange:n,playback:r,className:o,placement:l,children:c,playerIsActive:d=!1,link:u,draperClassName:m,draperParentListeners:p,videoFadeOverlayClassname:g,noBottomCornerRadiusLink:h,refMarker:v,titleID:b})=>{const D=i.useContext(Ic.l),{clickstream:y,clickstreamPageContext:f}=i.useContext(sc.z1),E=i.useRef(null),w=i.useRef(),[_,T]=i.useReducer(Wc,kc.Init);i.useEffect((()=>{null==n||n(_)}),[_]),i.useEffect((()=>{var t;let n=!1;switch(_){case kc.Init:e?w.current=window.setTimeout((()=>T(kc.Play)),s):clearTimeout(w.current);break;case kc.Play:var i;if(e)n=!0,null===(i=E.current)||void 0===i||i.startPlayer();else r===Lc.Resume?T(kc.Pause):r===Lc.Restart&&E.current&&(E.current.stop(),E.current.restartVideo());break;case kc.Pause:var o,l;if(n=!0,e)null===(o=E.current)||void 0===o||o.startPlayer();else null===(l=E.current)||void 0===l||l.pauseButKeepVisible();break;case kc.Error:null===(t=E.current)||void 0===t||t.stop();case kc.Stop:}return null==a||a(n),()=>{clearTimeout(w.current)}}),[e,s,_,r,a]),i.useEffect((()=>{T(kc.Init)}),[t]);const C=i.useMemo((()=>({onPlayComplete(){T(kc.Stop)},...l!==Pc.H.ChartsContainer&&{onPlayStart(){T(kc.Play)}},onClick(e){var t;null==p||null===(t=p.onClick)||void 0===t||t.call(p,e)},onVideoError(){T(kc.Error)}})),[T,p,l]),x=st()(m,Ac,{[Rc]:h});return i.createElement("div",{className:o},i.createElement(Nc.Z,{className:x,prerolls:t,ref:E,placement:null!=l?l:Pc.H.Superhero,videoContext:D,playerIsActive:d,enableFullscreen:!1,parentListeners:C,useDefaultBackground:!1,link:u,clickstream:y,pageType:null==f?void 0:f.pageType,subPageType:null==f?void 0:f.subPageType,clientVariant:null==f?void 0:f.clientVariant,videoFadeOverlay:g,refMarker:v,titleID:b}),c)},Mc="km3sbT",Oc="_3HZFFn",jc="DXNI7M",Fc="_0Cq4rX",Hc="jcqbgX",Uc="-xjO1Z",Zc="uYmIm1";var zc=s("./src/shared/Explore/ClientImpressions/ImpressionTracker.tsx");const qc=[188,250,375,500],$c=[360,480,720,1080],Gc=[{"max-tablet-lowest":155},{"max-laptop-lowest":150},{"max-desktop-lowest":175},{"max-desktop-hd-lowest":175},{"max-desktop-uhd-lowest":245}],Qc=[{"max-tablet-lowest":260},{"max-laptop-lowest":260},{"max-desktop-lowest":390},{"max-desktop-hd-lowest":390},{"max-desktop-uhd-lowest":540}],Yc=({isCircle:e=!1,alternateText:t,fallbackTitle:s,imageUrl:a,className:n,imageWrapperClassName:r,imageClassName:o,url:l,deeplinkFallbackUrl:c,deeplinkType:d,backgroundTrailerConfig:u,hasProgress:m,parentElement:p,badge:g,cardOverlay:h,playButtonOverlay:v,onPackshotLinkKeyDown:b,linkAriaRole:D,noBottomCornerRadiusLink:y,refMarker:f,titleID:E,shouldLazyLoadImage:w})=>{var _;const[T,C]=i.useReducer((()=>!0),!1),{container:{containerType:x}}=i.useContext(iw),I=e=>{p&&zc.F.logManualImpression(p,"Charts"===x?"Highlight":"Select"),l&&!u&&d&&((0,nn.b)()[d]({url:l,fallbackUrl:c}),e.preventDefault())},N=i.createElement("div",{className:Uc},i.createElement("div",{className:Zc},i.createElement(gs.Text,{string:null!=s?s:"",className:Fc}))),P=a?i.createElement(xo.w,{alt:t,src:a,imageClassName:o,wrapperClassName:st()(r),aspectRatio:e?Co.OneByOne:Co.SixteenByNine,sizesOptions:{defaultSrcSize:e?245:540,srcSizes:e?Gc:Qc},srcSetWidths:e?qc:$c,baseValue:e?375:720,parentListeners:{onError:C},shouldLazyLoad:w,debugID:E}):i.createElement(i.Fragment,null);return i.createElement("div",{className:st()(Mc,n),"data-testid":"packshot"},l&&!u&&!v&&i.createElement("a",{href:l,className:st()(Oc,{[jc]:y}),onClick:I,onKeyDown:b,role:D},s),u&&i.createElement(Bc,{prerolls:u.prerolls,canPlay:u.canPlay,delay:u.delay,placement:u.placement,className:null!==(_=u.className)&&void 0!==_?_:"",draperClassName:st()({[Hc]:m&&u.canPlay}),draperParentListeners:{onClick:I},playback:Lc.Restart,playerIsActive:!0,link:l,noBottomCornerRadiusLink:y,refMarker:f,titleID:E}),a&&!T?P:N,g,h,v)},Kc="ngPjD-",Xc="iQ3mqd",Jc="PdTBRa",ed="XadxaR",td="O2fjyE",sd="wLYTNl",ad="QvLzEW",nd="VdW1kY",id="_1U2rMW",rd="ivxXre",od="hVkTbZ",ld="kT254+",cd="RPY2bm",dd="ec67mb",ud="Qky6bp",md="FG-9uo",pd="_0Xxh5H",gd="Fi9WuY",hd="omNIKl",vd="O+WH8U",bd="IUzlM1",Dd="ZdMG6X",yd="_3UuiDN",fd="_0dqiQi",Ed="UFroed";function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},wd.apply(this,arguments)}const _d=({uniqueId:e,className:t,buttonIcon:s,label:a,labelClassName:n,dropdownElements:r,dropdownOpen:o=!1,smallIconVariant:l=!1,isDefaultCheck:c=!1,onClick:d})=>{const u=c?{checked:o}:{defaultChecked:o};return i.createElement("aside",{className:st()(gd,t),"data-testid":"dropdown-button"},i.createElement("input",wd({type:"checkbox",autoComplete:"off",id:e,className:hd,onChange:d},u)),i.createElement("label",{htmlFor:e,className:st()(bd,{[Dd]:l})},i.createElement("span",{className:vd},s)),a&&i.createElement("label",{className:st()(yd,n)},a),i.createElement("ul",{className:fd},r.map(((e,t)=>i.createElement("li",{key:`dropdown-element-${t}`,className:Ed},e)))))},Td="VFWNV8";var Cd=s("./node_modules/@amzn/dvui/dist/Icons/Trailer.js"),xd=s.n(Cd),Id=s("./src/util/utils/refMarker.ts");const Nd=({trailer:e,onPlay:t,buttonStyle:s,textStyle:a,isInDropdown:n})=>{const{playbackURL:r,playbackID:o,videoMaterialType:l,refMarker:c,text:d,signInURL:u}=e,m=e=>{t({playbackUrl:r,contentConfig:{asin:o,videoType:l,trailer:!0,ref:c},signInUrl:u,refMarker:(0,Id.vA)(null!=c?c:"atv_unknown",l)}),e.preventDefault()},p=null==d?void 0:d.replace("{conditionalLineBreak}","");return i.createElement("form",{action:u||r,method:"GET"},n?i.createElement("button",{type:"submit",className:tt(Td,s),onClick:m,"data-testid":"trailer"},i.createElement(xd(),null),i.createElement(gs.Text,{className:a,string:p})):i.createElement(Cc.k,{onSecondaryButtonClick:m,label:p,labelClassName:a,className:s,isInverted:!1,isDisabled:!1,icon:i.createElement(xs(),{width:oa.Nu,height:oa.W6}),smallIconVariant:!0,testID:"trailer"}))};var Pd=s("./node_modules/@amzn/dvui/dist/Icons/Overflow.js"),kd=s.n(Pd),Sd=s("./node_modules/@amzn/dvui/dist/Icons/StartOver.js"),Vd=s.n(Sd),Wd=s("./node_modules/@amzn/dvui/dist/Icons/WishlistAdd.js"),Ad=s.n(Wd),Rd=s("./node_modules/@amzn/dvui/dist/Icons/RapidRecap.js"),Ld=s.n(Rd),Bd=s("./src/util/types/wps/shared.ts");const Md="m5ZWQf",Od="OAmKXk",jd="uIX1MD";var Fd=s("./node_modules/@amzn/dvui/dist/Icons/PlayButton.js");const Hd=({href:e,label:t,onPlayButtonClick:s,className:a,labelClassName:n})=>{const r=e?"a":"button";let o=i.createElement(r,{href:e,onClick:s,className:tt(a,Od),"data-testid":"play","aria-label":"string"==typeof t?t:null==t?void 0:t.string},i.createElement(Fd.PlayButton,{width:"100%",height:"100%"}));return t&&(o=i.createElement("label",{className:tt(n,jd)},o,i.createElement(gs.Text,{string:t}))),i.createElement("div",{className:tt(Md)},o)},Ud="AHkGl-",Zd="jXfKn7",zd="p6KLAQ",qd="Koh1N4";var $d=s("./node_modules/@amzn/dvui/dist/Spacer.js");const Gd="NyrD54",Qd="ROwEtB";function Yd(){return Yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Yd.apply(this,arguments)}let Kd=function(e){return e.WatchLive="LiveStreamWatchNow",e.FromEarliest="LiveStreamFromEarliest",e.FromBeginning="LiveStreamFromBeginning",e.FromBookmark="LiveStreamFromBookmark",e.RapidRecap="RapidRecap",e}({});const Xd=({playbackStatus:e})=>{const t=e===Kd.RapidRecap,s=e===Kd.FromBeginning||e===Kd.FromEarliest;return t?i.createElement(Ld(),null):s?i.createElement(Vd(),null):i.createElement(La(),null)},Jd=({playbackStatus:e,isCleanSlate:t,isPrimary:s,className:a,children:n,...r})=>{const o=i.createElement(Xd,{playbackStatus:e}),l=!t&&s?Is.PrimeButton:Is.Button;return i.createElement(l,Yd({forceDoubleHeight:!0},r,{icon:o,className:tt(a)}),i.createElement("span",null,n))},eu="_1EJvy-",tu="BRug1g",su="zH2exL";var au=s("./src/util/types/wps/containers.ts");const nu=({playbackContent:e,isMShop:t,triggerPlayback:s})=>e?i.createElement(Sa.PlayButton,{onClick:s,href:t?void 0:e.playbackUrl,ariaLabel:e.label?e.label:"",label:e.label,"data-testid":"play"}):null,iu=({playbackContent:e,isMShop:t,triggerPlayback:s})=>e?i.createElement("div",{className:`${eu} ${Gd} dv-shared-node-playback`},i.createElement(Jd,{href:t?void 0:e.playbackUrl,onClick:s,playbackStatus:e.playbackStatus,className:Qd,"data-testid":"square-play",isCleanSlate:!0},i.createElement(gs.Text,{tag:"span",string:e.label}))):null,ru=e=>{switch(e){case au.PO.FromEarliest:return Kd.FromEarliest;case au.PO.FromBeginning:return Kd.FromBeginning;case au.PO.FromBookmark:return Kd.FromBookmark;case au.PO.RapidRecap:return Kd.RapidRecap;default:return Kd.WatchLive}};function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ou.apply(this,arguments)}const lu=({playbackContentList:e,playerConfigData:t,isMShop:s,triggerPlaybackList:a})=>null!=e&&e.length&&null!=a&&a.length&&e.length==a.length?i.createElement(i.Fragment,null,e.map(((e,n)=>{const r={playbackContent:e,playerConfigData:t,isMShop:s};return n?i.createElement(iu,ou({key:`action-box-playback-${n}`},r,{triggerPlayback:a[n]})):i.createElement(nu,ou({key:"action-box-playback-0"},r,{triggerPlayback:a[n]}))}))):null,cu=({text:e,isLive:t})=>t&&e?i.createElement("div",{className:`${Ud} ${su} ${tu}`},i.createElement($t.Badge,{variant:$t.BadgeVariant.live,testID:"live-state-badge"},e)):null,du=({isOpen:e,onClose:t,eventTitle:s,liveState:a,playbackContentList:n,isMShop:r,playerConfigData:o,triggerLocation:l,onPlay:c,logger:d})=>{if(!e||!n)return null;const u=[];return n&&n.map((e=>{d&&e.refMarker&&((e,t,s,a)=>{(0,sa.X)(t,ta.c7.ATVModal,ta.wW.SSM,a,[ta.W0.PageNavigate],ta.qB.PopUp),s&&e.count(`DVWebNode::Live::Playback::${s}::Shown`,1,!1)})(d,e.refMarker,e.playbackStatus,e.contentConfig.asin);u.push((s=>{t(),c&&c(e),s.preventDefault(),d&&((e,t,s,a)=>{const n=s||"ATVUnknown";e.count(`DVWebNode::Live::Playback::${n}::Clicked`,1,!1),a&&e.count("DVWebNode::Live::Playback::SSM::Clicked",1,!1),t&&e.count(`DVWebNode::Live::Playback::${t}::Clicked`,1,!1)})(d,e.playbackStatus,l,!0)}))})),e&&n?i.createElement(xa.u,{isVisible:e,onRequestClose:t,size:"s",className:st()(Zd,qd),titleText:s,header:i.createElement("div",null,a&&i.createElement(cu,a),s&&i.createElement("h1",null,s)),body:i.createElement($d.Spacer,{alignItems:$d.spacerAlignItems.center,space:$d.spacerSpacing.m,className:st()(Zd,zd)},i.createElement(lu,{isMShop:r,playerConfigData:o,playbackContentList:n,triggerLocation:l,triggerPlaybackList:u})),disableFooter:!0,testID:"stream-selector-modal"}):null};function uu(){return uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},uu.apply(this,arguments)}const mu=i.createContext({});mu.displayName="SsmContext";const{Provider:pu}=mu,gu=({children:e})=>{const[t,s]=(0,i.useState)({isOpen:!1});(0,i.useEffect)((()=>{const{refMarkerPrefix:e,logger:s,triggerLocation:a,isOpen:n}=t;e&&s&&((e,t,s,a)=>{const n=s||"Unknown",i=`${e}_${n.toLowerCase()}_live_playmod${a?"_back":""}`;(0,sa.X)(i,ta.c7.ATVModal,ta.wW.SSM,void 0,void 0,ta.qB.PageTouch),t.count(`DVWebNode::Live::SSM::${n}::${a?"Closed":"Opened"}`,1,!1)})(e,s,a,!n)}),[t]);const a=(0,i.useMemo)((()=>({openSsm:e=>s({...e,isOpen:!0}),isSsmOpen:t.isOpen})),[t.isOpen]);return i.createElement(pu,{value:a},e,i.createElement(du,uu({},t,{onClose:()=>s({...t,isOpen:!1})})))},hu="rY7SY5",vu=({onClick:e})=>i.createElement("button",{onClick:e,tabIndex:-1,"aria-hidden":!0,className:hu,"data-testid":"invisible-play"}),bu=e=>!!e&&("EMBEDDED"!==e&&"NONE"!==e);let Du=function(e){return e[e.Circular=0]="Circular",e[e.Square=1]="Square",e[e.Secondary=2]="Secondary",e[e.Invisible=3]="Invisible",e}({});const yu=({playbackAction:e,playbackGroup:t,streamSelectorProps:s,titleId:a,label:n,className:r,labelClassName:l,buttonVariant:c=Du.Circular,secondaryButtonIcon:d,carouselRefTag:u="atv_unknown"})=>{var m,p;const{actions:{getEnrichments:g}}=i.useContext(iw),{openSsm:h}=i.useContext(mu),{isInResiliencyMode:v}=i.useContext(sc.z1),b=(0,o.L1)(),D="COLLAPSED"===(null==t||null===(m=t.groupMetadata)||void 0===m?void 0:m.behaviour)?null===(p=t.groupTreatments)||void 0===p?void 0:p.displayTreatments.label:n;return i.createElement(bs.ET.Consumer,null,(({onPlay:n,launchType:o})=>{const m="PVVideoPlayerClosed",p=()=>{a&&g([a],!0),window.removeEventListener(m,p)},y=a=>{var i,r;window.addEventListener(m,p);const l=null!==(i=e.titleID)&&void 0!==i?i:e.channelId;if(n&&"COLLAPSED"===(null==t||null===(r=t.groupMetadata)||void 0===r?void 0:r.behaviour)){const{deeplinkUrl:e,fallbackUrl:i}=null==t?void 0:t.groupMetadata;e&&bu(o)?(0,nn.b)()[o]({url:e,fallbackUrl:i}):((e,t)=>{var a,n;const i={playbackActions:e.playbackActions,defaultResumeTime:0,carouselRefTag:u,triggerLocation:null==s?void 0:s.triggerLocation},r={logger:b.logger,refMarkerPrefix:"atv_hm",triggerLocation:null==s?void 0:s.triggerLocation,eventTitle:null==s?void 0:s.eventTitle,liveState:{text:null==s||null===(a=s.liveInfo)||void 0===a?void 0:a.label,isLive:"LIVE"===(null==s||null===(n=s.liveInfo)||void 0===n?void 0:n.status)},playbackContentList:(o=i,o.playbackActions.map((e=>{var t,s;return{playbackUrl:e.fallbackUrl,fallbackUrl:e.appFallbackUrl,signInUrl:e.signInUrl,contentConfig:{asin:null!==(t=e.titleID)&&void 0!==t?t:e.channelId,videoType:e.videoMaterialType,trailer:!1,position:e.resumeTime||o.defaultResumeTime,ref:e.refMarker,playbackEnvelope:null!==(s=e.playbackExperienceMetadata)&&void 0!==s&&s.playbackEnvelope?{envelope:e.playbackExperienceMetadata.playbackEnvelope,correlationId:e.playbackExperienceMetadata.correlationId,expiration:e.playbackExperienceMetadata.expiryTime}:void 0,playbackExperiences:e.playbackExperiences},triggerLocation:o.triggerLocation,playbackStatus:ru(e.playbackStatus),label:e.label,refMarker:(0,Id.vA)(o.carouselRefTag,e.videoMaterialType,e.playbackStatus)}}))||[]),onPlay:t};var o;h(r)})(t,n),a.preventDefault()}else if(n&&e.fallbackUrl&&l){var c;const t=v?Bd.gz.LIVE:e.videoMaterialType;n({playbackUrl:e.fallbackUrl,fallbackUrl:e.appFallbackUrl,signInUrl:e.signInUrl,contentConfig:{asin:l,videoType:t,trailer:!1,position:e.resumeTime||0,ref:e.refMarker,playbackEnvelope:null!==(c=e.playbackExperienceMetadata)&&void 0!==c&&c.playbackEnvelope?{envelope:e.playbackExperienceMetadata.playbackEnvelope,correlationId:e.playbackExperienceMetadata.correlationId,expiration:e.playbackExperienceMetadata.expiryTime}:void 0,playbackExperiences:null==e?void 0:e.playbackExperiences},refMarker:(0,Id.vA)(u,e.videoMaterialType,e.playbackStatus)}),a.preventDefault()}},f=Boolean(e.channelId)&&"EMBEDDED"===o?void 0:e.fallbackUrl;switch(c){case Du.Circular:return i.createElement(Hd,{className:r,labelClassName:l,href:f,onPlayButtonClick:y,label:null!=D?D:e.label});case Du.Square:return i.createElement(Yr.z,{icon:i.createElement(La(),{width:"20px",height:"17px"}),isInverted:!0,label:null!=D?D:e.label,labelClassName:l,className:r,href:f,onCallToActionButtonClick:y,testID:"play"});case Du.Secondary:return i.createElement(Cc.k,{icon:d,label:null==e?void 0:e.label,labelClassName:l,smallIconVariant:!0,onSecondaryButtonClick:y,href:f});case Du.Invisible:return i.createElement(vu,{onClick:y})}}))};var fu=s("./node_modules/@amzn/dvui/dist/Icons/Delete.js"),Eu=s.n(fu);const wu="nBtA6v";var _u=s("./src/util/types/wps/mystuff-cs.ts"),Tu=s("./src/shared/CS/components/Modal/Modal.module.scss");const Cu=({text:e,icon:t,testId:s,modalProps:a,onDismiss:n,onPrimaryAction:r,requireModalConfirmation:o=!1,buttonTestId:l,buttonStyle:c,textStyle:d,isInDropdown:u})=>{const[m,p]=i.useState(!1),g=e=>{e.preventDefault(),o?p(!0):(r(e),null==n||n())},h=()=>{p(!1),null==n||n()},{modalTestId:v,modalStyle:b,modalText:D,modalTextWarning:y,modalTitle:f,modalPrimaryActionText:E,modalSecondaryActionText:w}=a||{};return i.createElement("div",{"data-testid":s},a&&i.createElement(xa.u,{testID:v,className:b,isVisible:m,titleText:f,primaryActionText:E,secondaryActionText:w,onPrimaryAction:e=>{e.preventDefault(),r(e),h()},onSecondaryAction:h,onRequestClose:h,body:i.createElement(Qr.Z.Body,{className:Tu.Z.bodyWrapper},i.createElement(gs.Text,{string:D,tag:"p"}),y&&i.createElement(gs.Text,{string:y,tag:"p"}))}),u?i.createElement("button",{type:"submit",className:c,onClick:g,"data-testid":l},t,i.createElement(gs.Text,{string:e,className:d})):i.createElement(Cc.k,{onSecondaryButtonClick:g,label:e,labelClassName:d,className:c,isInverted:!1,isDisabled:!1,icon:t,smallIconVariant:!0,testID:l}))},xu=({titleID:e,action:t,icon:s,buttonStyle:a,textStyle:n,testId:r,onDismiss:o,isInDropdown:l})=>{const{text:c,modalTitle:d,modalPrimaryActionText:u,modalSecondaryActionText:m,modalText:p,modalTextWarning:g}=t,{actions:{onLibraryAction:h}}=i.useContext(iw);return i.createElement(Cu,{requireModalConfirmation:t.state===_u.GI.HIDDEN||t.state===_u.GI.REMOVED,text:c,icon:s,buttonStyle:a,buttonTestId:"library-item-action-button",textStyle:n,testId:r,modalProps:{modalTitle:d,modalPrimaryActionText:u,modalSecondaryActionText:m,modalTextWarning:g,modalText:p,modalStyle:wu,modalTestId:"library-item-action-confirmation-modal"},onPrimaryAction:()=>{h(e,t)},onDismiss:o,isInDropdown:l})},Iu=(e,t,s,a,n,r)=>{let o;switch(t.state){case _u.GI.HIDDEN:case _u.GI.REMOVED:o=i.createElement(Eu(),!a&&{width:oa.Nu,height:oa.W6});break;case _u.GI.VISIBLE:o=i.createElement(Vd(),!a&&{width:oa.Nu,height:oa.W6})}return i.createElement(xu,{titleID:e,action:t,icon:o,buttonStyle:n,textStyle:s,isInDropdown:a,testId:`library-${t.state.toLowerCase()}-action`,onDismiss:r})};function Nu(){return Nu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Nu.apply(this,arguments)}const Pu=({playbackOrTitleArt:e,titleID:t,watchlistAction:s,trailer:a,hideThisAction:n,hideThisCallback:r,dropdownUniqueId:o,dropdownCallback:l,secondaryPlaybackActions:c,libraryItemActions:d,carouselRefTag:u,recordSeasonTooltipText:m})=>{const{actions:{onWatchlistToggle:p},isHideThisDisabled:g}=i.useContext(iw),{onPlay:h}=i.useContext(bs.ET),{getString:v}=i.useContext(sc.z1),b=null==d?void 0:d.softDeleteAction,D=null==d?void 0:d.restoreAction,y=null==d?void 0:d.permanentDeleteAction;const f="remove"===(null==s?void 0:s.tag.toLowerCase()),E=[],w=a&&h,_=!g&&"string"==typeof t&&n,T=b&&"string"==typeof t,C=D&&"string"==typeof t,x=y&&"string"==typeof t,I=1===[w,_,T,C,x].filter(Boolean).length,N={buttonStyle:I?void 0:ud,textStyle:I?pd:md,isInDropdown:!I};if(w){const e=i.createElement(Nd,Nu({trailer:a,onPlay:h},N));E.push(e)}if(_){const e=i.createElement(xc,Nu({hideThisAction:n,titleID:t,callback:r},N));E.push(e)}if(T){const e=Iu(t,b,N.textStyle,N.isInDropdown,N.buttonStyle);E.push(e)}if(C){const e=Iu(t,D,N.textStyle,N.isInDropdown,N.buttonStyle);E.push(e)}if(x){const e=Iu(t,y,N.textStyle,N.isInDropdown,N.buttonStyle);E.push(e)}const P=e=>{switch(e){case au.PO.FromEarliest:case au.PO.FromBeginning:case au.PO.FromBookmark:return i.createElement(Vd(),{height:oa.W6,width:oa.Nu});case au.PO.RapidRecap:return i.createElement(Ld(),{height:oa.W6,width:oa.Nu});default:return i.createElement(La(),{height:oa.W6,width:oa.Nu})}},k=f?void 0:m;return i.createElement("section",{className:ld},i.createElement("div",null,e),i.createElement("section",{className:cd},null==c?void 0:c.slice(0,2).map((e=>i.createElement(yu,{playbackAction:e,buttonVariant:Du.Secondary,secondaryButtonIcon:P(e.playbackStatus),labelClassName:pd,key:e.label}))),s&&i.createElement(Cc.k,{icon:f?i.createElement(na(),{height:oa.W6,width:oa.Nu}):i.createElement(Ad(),{height:oa.W6,width:oa.Nu}),isInverted:!1,onSecondaryButtonClick:function(e){"string"==typeof t&&p(e,t,u)},isDisabled:!1,label:k||v("DV_WEB_WATCHLIST_TOOLTIP"),labelClassName:pd,smallIconVariant:!0,testID:f?"watchlist-remove":"watchlist-add"}),I&&1==E.length&&E[0],!I&&E.length>1&&o&&i.createElement(_d,{className:dd,uniqueId:o,buttonIcon:i.createElement(kd(),{height:oa.W6,width:oa.Nu}),label:v("DV_WEB_OVERFLOW_MENU_TOOLTIP"),labelClassName:pd,dropdownElements:E,smallIconVariant:!0,onClick:l})))},ku="RmtlRt",Su="NgkdA8",Vu="oeG1vb",Wu="dL5AME",Au="Krg12D",Ru="EarBrV",Lu="YLGBUW",Bu="xfAyx4",Mu="BWkLNj";var Ou=s("./node_modules/@amzn/dvui/dist/AgeRating.js");const ju="Kwb7-Y",Fu="WZDhY+",Hu=i.memo((({full:e,half:t=!1,total:s=5,className:a})=>{const n=Math.max(Math.min(e,s),0),r=[];for(let e=0;e<s;e++)r.push(i.createElement("use",{key:e,href:"#full",x:24*e,className:e<n?Fu:ju}));return n<s&&t&&r.push(i.createElement("use",{key:"half",href:"#half",x:24*n,className:Fu})),i.createElement("svg",{className:a,viewBox:`0 0 ${24*s} 24`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("defs",null,i.createElement("symbol",{id:"full"},i.createElement("path",{d:"M1.2809 10.3315L6.02519 15.2548L4.81316 21.6846C4.65559 22.5206 5.54745 23.1589 6.28793 22.7402L11.9952 19.5132L17.8071 22.864C18.5354 23.2839 19.4253 22.6722 19.2942 21.8418L18.2102 14.9747L22.7218 10.2565C23.2775 9.67533 22.9548 8.7093 22.1614 8.57881L15.6881 7.51408L12.8897 1.57378C12.5241 0.797621 11.4149 0.812151 11.0697 1.59762L8.45025 7.55822L1.83786 8.65115C1.04318 8.7825 0.722003 9.75149 1.2809 10.3315Z"})),i.createElement("symbol",{id:"half"},i.createElement("path",{d:"M12 1.0001C11.6245 0.994797 11.2467 1.19602 11.0697 1.60111L8.45025 7.59652L1.83786 8.69583C1.04318 8.82795 0.722003 9.80259 1.2809 10.386L6.02519 15.338L4.81316 21.8054C4.65559 22.6462 5.54745 23.2883 6.28793 22.8672L11.9952 19.6213L12 19.6241V1.0001Z"}))),r)})),Uu="GrFd67",Zu="_5-C52A";var zu=s("./node_modules/@amzn/dvui/dist/StarRating.js");const qu=({customerReviews:e,className:t})=>{const s=(0,zu.sanitiseNumber)(e.value),a=Math.floor(s);return i.createElement("span",{className:tt(Uu,Zu,t),"data-testid":"star-rating",role:"img","aria-label":e.customerReviewsText.string},i.createElement(Hu,{full:a,half:s!==a}))};var $u=s("./src/shared/utils/maturityRatings/ratingMap.ts");const Gu=({locale:e,rating:t,title:s,className:a})=>{var n,o;const{context:l}=(0,r.G4)();if(!t)return null;const c=null===(n=$u.D[null==l?void 0:l.recordTerritory])||void 0===n||null===(o=n[t])||void 0===o?void 0:o.url;return c?i.createElement(Ou.AgeRating,{ariaLabel:s,logoUrl:c,className:a}):i.createElement(Ou.AgeRating,{ariaLabel:s,rating:t,locale:e,className:a})},Qu=e=>{const{message:t,className:s}=e;return i.createElement(ue.Marker,{className:s,"data-testid":"high-value-msg"},t)},Yu="XkwSbj";var Ku=s("./node_modules/@amzn/dvui/dist/TextBlock.js");const Xu=({synopsis:e,className:t})=>i.createElement(Ku.TextBlock,{testID:"synopsis",className:st()(Yu,t)},e),Ju=({stationTitle:e,nextBroadcastTitle:t,nextBroadcastStartTime:s,nextUpText:a})=>{const n=s&&new Date(s).toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hourCycle:"h12"}).toLocaleUpperCase();return i.createElement("section",{className:Lu},e&&i.createElement("span",null,e),i.createElement("span",{className:Bu},t&&i.createElement(i.Fragment,null,i.createElement("span",{className:Mu},"·"),i.createElement("span",null,a,t)),n&&i.createElement(i.Fragment,null,i.createElement("span",{className:Mu},"·"),i.createElement("span",null,n))))};function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},em.apply(this,arguments)}const tm=({customerReviews:e,releaseYear:t,runtime:s,contentMaturityRating:a,maturityRatingBadge:n,highValueMessage:r,synopsis:o,linearProps:l,dateTime:c})=>{var d;const{stationTitle:u,episodeTitle:m,currentBroadcastStartTime:p,nextBroadcastTitle:g,nextBroadcastStartTime:h,nextUpText:v}=null!=l?l:{},b={stationTitle:u,nextBroadcastTitle:g,nextBroadcastStartTime:h,nextUpText:v},D=p&&new Date(p).toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}).toLocaleUpperCase();return i.createElement(i.Fragment,null,m&&i.createElement("section",{className:ku},i.createElement(gs.Text,null,m)),i.createElement("section",{className:ku},e&&i.createElement(qu,{className:st()(Vu,Su),customerReviews:e}),D&&i.createElement(gs.Text,{className:Vu},D),c&&i.createElement(gs.Text,{className:Vu,testID:"date-time"},c),t&&i.createElement(gs.Text,{className:Vu,testID:"release-year"},t),s&&i.createElement(gs.Text,{className:Vu,testID:"runtime"},s),n?i.createElement(Ou.AgeRating,{rating:n.displayText,locale:null===(d=n.countryCode)||void 0===d?void 0:d.toLowerCase(),logoUrl:n.logoUrl,title:n.description,ariaLabel:n.description,className:Wu}):a&&i.createElement(Gu,em({},a,{className:Wu}))),(null==r?void 0:r.message)&&i.createElement(Qu,{className:Au,message:r.message}),o&&i.createElement(Xu,{className:Ru,synopsis:o}),(u||g||h)&&i.createElement(Ju,b))},sm="_4bPlFR";let am=function(e){return e.Mega="h2",e.Super="h2",e.Header="h3",e.SubHeader="h4",e}({});const nm=e=>{const{title:t,titleLogoOptions:s,headingClassName:a,headingLevel:n,baseValue:r,providerLogoOptions:o,titleID:l}=e,c=`${null!=n?n:am.Header}`,d=s?i.createElement(xo.w,{alt:t,src:s.url,wrapperClassName:s.wrapperClassName,imageClassName:s.imageClassName,baseValue:r||500,autoCrop:!0,shouldLazyLoad:s.shouldLazyLoadImage,debugID:l}):t;return i.createElement(i.Fragment,null,o&&i.createElement(xo.w,{alt:o.alt,src:o.url,wrapperClassName:o.wrapperClassName,imageClassName:o.imageClassName,baseValue:500,autoCrop:!0,shouldLazyLoad:o.shouldLazyLoadImage,debugID:l}),i.createElement(c,{className:st()(sm,a),"data-testid":"title-art"},e.url?i.createElement("a",{href:e.url,tabIndex:-1,"aria-hidden":!0},d):d))},im=({className:e,titleID:t,focusMessage:s,playbackAction:a,secondaryPlaybackActions:n,playbackGroup:r,streamSelectorProps:l,watchlistAction:c,trailer:d,hideThisAction:u,hideThisCallback:m,providerLogo:p,displayTitle:g,customerReviews:h,releaseYear:v,runtime:b,contentMaturityRating:D,maturityRatingBadge:y,highValueMessage:f,synopsis:E,linearProps:w,callToActionButtonLabel:_,callToActionButtonLink:T,dateTime:C,carouselRefTag:x,libraryItemActions:I,isTouchEnabledWindowsDevice:N,recordSeasonTooltipText:P})=>{var k;const[S,V]=i.useState(!1),{logger:W}=(0,o.L1)();i.useEffect((()=>{const e=N?"TouchEnabled":"NonTouchEnabled";W.count(`DVWeb::StandardMiniDetails::Invocation::${e}`,1,!1)}),[]);const A=a?i.createElement(yu,{className:sd,labelClassName:td,playbackAction:a,playbackGroup:r,streamSelectorProps:l,label:a.label,titleId:t,carouselRefTag:x}):void 0,R=g?i.createElement(nm,{title:g,headingLevel:am.SubHeader,headingClassName:id,providerLogoOptions:p?{url:p.url,alt:p.alternateText,wrapperClassName:st()(ad,{[nd]:!A}),shouldLazyLoadImage:!1}:void 0,titleID:t}):void 0,L=null!=A?A:R,B=`actn-drpdn-${t}`;return i.createElement("article",{className:st()(Kc,e),"data-testid":"standard-mini-details"},i.createElement(ln.nI,{className:Jc,labelClassName:ed,message:null==s?void 0:s.message,icon:null==s?void 0:s.icon}),!a&&_&&T&&i.createElement(Yr.z,{className:rd,labelClassName:od,href:T,label:_,textAlign:"start",isInverted:!0,testID:"promotion"}),i.createElement(Pu,{playbackOrTitleArt:L,secondaryPlaybackActions:"COLLAPSED"!==(null==r||null===(k=r.groupMetadata)||void 0===k?void 0:k.behaviour)?n:void 0,titleID:t,watchlistAction:c,recordSeasonTooltipText:P,trailer:d,hideThisAction:u,hideThisCallback:m,dropdownCallback:e=>V(e.target.checked),dropdownUniqueId:B,libraryItemActions:I,carouselRefTag:x}),A&&R,i.createElement(tm,{customerReviews:h,releaseYear:v,runtime:b,contentMaturityRating:D,maturityRatingBadge:y,highValueMessage:f,synopsis:E,linearProps:w,dateTime:C}),S&&i.createElement("label",{"data-testid":`${B}-overlay`,className:Xc,htmlFor:B,"aria-hidden":"true"}))},rm="Z9dd1d",om="_6Ee48g",lm="_9DLJTq",cm="adbzBM",dm="CPzlyj",um="pmtwKl",mm="l3Byg9",pm="yLrUM0",gm="EltWag",hm="_0H0fS+",vm="Zwe5a0",bm="yO1YXp",Dm="frgzFh",ym="aIGd1S",fm="rNCyT6",Em="XGQ6I8",wm="_7apyuU",_m="E8zf-P",Tm="SCwdFt",Cm="apGNVX",xm="YpimTj",Im="OLpbif",Nm=i.createContext({});Nm.displayName="MiniDetailsContext";var Pm=s("./src/util/utils/domUtils.ts");const km=(e,t)=>{const s=Date.now(),a=Math.max(t-e,1),n=s-e;if(n<0)return;return{percentage:Math.min(n/a*100,100),isLive:!0}},Sm=(e,t=0)=>{if(!e)return;const s=Date.now(),a=e&&e.schedule.sort(((e,t)=>e.start-t.start))||[],n=a.findIndex((e=>e.start<s&&e.end>s));return n>-1?a[n+t]:void 0},Vm=(e,t)=>{var s,a;return null!==(s=null==e?void 0:e.metadata.seriesTitle)&&void 0!==s?s:null===(a=t.station)||void 0===a?void 0:a.name},Wm="j5ZgN-",Am="r0m8Kk",Rm="zhBx7Q",Lm="zWk6SW",Bm="syyFPX",Mm="IcdAu8",Om="gJwnOo",jm="_0rmWBt",Fm="GzqpBB",Hm="Yh+jMe",Um="_7pXMwt",Zm="umDKqv",zm="YxFjm6",qm="s2b6VW",$m="K11N8U",Gm=({className:e,percentage:t,isLive:s})=>t>0?i.createElement("span",{className:st()(zm,e),"data-testid":"progress-bar"},i.createElement("span",{"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t,className:st()(qm,{[$m]:s}),style:{width:`${t}%`}})):null,Qm=({className:e,broadcast:t,nextBroadcastCallback:s})=>{var a;const n=null===(a=km(t.start,t.end))||void 0===a?void 0:a.percentage,[r,o]=i.useState(n);i.useEffect((()=>{const e=setTimeout((()=>{l()}),1e4);return()=>clearTimeout(e)}),[r]),i.useEffect((()=>{l()}),[t]);const l=()=>{var e;const a=null===(e=km(t.start,t.end))||void 0===e?void 0:e.percentage;a&&(a>=100?s():o(a))};return r&&r>0?i.createElement(Gm,{className:e,percentage:r,isLive:!0}):null};function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ym.apply(this,arguments)}const Km=({title:e,dateTime:t,progress:s,linearProgress:a,hovered:n=!1,isSuperCarousel:r=!1,playable:o=!1})=>{var l,c;if(!(e||t||o||s||a))return null;const d=i.createElement(Cr.Icon,{className:st()(Hm),use:Cr.IconType.PLAY_ARROW}),u=i.createElement("p",{className:st()(Mm)},o&&d,i.createElement("span",{className:t||o?Um:Zm},e)),m=i.createElement("div",{className:st()({[Fm]:n})},o&&!e&&d,e&&u,t&&i.createElement("p",{className:Om},t)),p=s||a,g=!p&&n,h=i.createElement("div",{className:st()(Rm,{[jm]:p,[Fm]:g,[Lm]:r})});return i.createElement(i.Fragment,null,i.createElement("div",{className:st()(Wm,{[Am]:p,[jm]:p}),"data-testid":"card-overlay"},m,s&&!a&&i.createElement(Gm,{className:Bm,isLive:null!==(l=s.isLive)&&void 0!==l&&l,percentage:null!==(c=s.percentage)&&void 0!==c?c:0}),a&&!s&&i.createElement(Qm,Ym({className:Bm},a))),h)};var Xm=s("./src/util/types/wps/storefront.ts");const Jm="vUebBe",ep=({colour:e,label:t,className:s,testID:a})=>{const n=e?tp[e]:$t.BadgeVariant.default;return i.createElement(i.Fragment,null,t&&i.createElement($t.Badge,{className:st()(Jm,s),variant:n,testID:null!=a?a:"status-badge"},t))},tp={[Xm.T.LINEAR]:$t.BadgeVariant.linear,[Xm.T.AVAILABILITY]:$t.BadgeVariant.availability,[Xm.T.LIVE]:$t.BadgeVariant.live},sp=({liveInfo:e,className:t,testID:s})=>{if(!e)return null;const a="LIVE"===e.status?Xm.T.LIVE:Xm.T.AVAILABILITY;return i.createElement(ep,{colour:a,label:e.label,className:t,testID:s})};function ap(e){var t;return(null==e||null===(t=e.degradations)||void 0===t?void 0:t.includes(au.l4.Playback))||null==e}function np(e,t){return ip(null==e?void 0:e.playbackActions,t)}function ip(e,t){var s;return ap(t)?null==e?void 0:e[0]:null==t||null===(s=t.playbackActions)||void 0===s?void 0:s[0]}function rp(e){var t;return ap(e)?void 0:{playbackActions:null!==(t=null==e?void 0:e.playbackActions)&&void 0!==t?t:[],groupTreatments:null==e?void 0:e.playbackGroupTreatments,groupMetadata:null==e?void 0:e.playbackGroupMetadata}}let op=function(e){return e[e.PHONE=10]="PHONE",e[e.TABLET=20]="TABLET",e[e.LAPTOP=30]="LAPTOP",e[e.DESKTOP=40]="DESKTOP",e[e.DESKTOP_HD=50]="DESKTOP_HD",e[e.DESKTOP_UHD=60]="DESKTOP_UHD",e}({});class lp{static is(e){return cp()===e}static isAtleast(e){return cp()>=e}static isAtmost(e){return cp()<=e}static isSmallerThan(e){return cp()<e}static isLargerThan(e){return cp()>e}}function cp(){const e=(0,Xl.pm)("--dv-current-target-screen");return e?parseInt(e):0}const dp="lzHv2t",up="UUey8g",mp=({message:e,className:t,onUndo:s,undoText:a})=>i.createElement("section",{className:tt(wm,t),"data-testid":"title-removed-overlay"},i.createElement("div",{className:_m},i.createElement(gs.Text,{string:e,testID:"title-removed-overlay-message"}),a&&s&&i.createElement("button",{type:"submit",onClick:s,className:dp,"data-testid":"removed-card-undo-button"},i.createElement(gs.Text,{string:a,className:up})))),pp=(e,t,s,a)=>{let n=!1;switch(t){case"StandardHero":n=a>=2;break;case"Cover":case"Nodes":case"StandardCarousel":case"Charts":case"SuperCarousel":n=a>=5;break;case"Grid":n=a>=15}return(e=>["Storefront","Search","Genre","Browse","Categories"].includes(e))(e)&&(s>=3||n)};function gp(){return gp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},gp.apply(this,arguments)}const hp=(e,t,s)=>{var a;const n=Boolean(null===(a=t.link)||void 0===a?void 0:a.deeplinkFallbackUrl);return["ScheduleCard","BonusContentCard"].includes(s)&&n&&bu(e.launchType)?e.launchType:void 0},vp=(0,r.s6)((({index:e,card:t,wrapperClassName:s,enrichment:a,isCircle:n=!1,context:r,renderGlanceSpaceIfNoGlanceMessage:l,onWrapperElementChange:c,render:d})=>{var u,m,p,g,h,v,b,D,y,f,E,w,_,T,C;const{container:{impressionData:x,containerType:I},consumingWidgetType:N,removedItemsMap:P,index:k}=i.useContext(iw),{logger:S}=(0,o.L1)(),[V,W]=i.useState(),A=e=>{var t;const s=null===(t=e.hideThisAction)||void 0===t?void 0:t.tag;e.success&&"Unhide"===s?(W(e.message),q(!1)):e.success&&"Hide"===s&&W(void 0)},R=i.useRef(null),{isHoverEnabled:L,contingencies:B,theme:M,isTouchEnabledWindowsDevice:O}=i.useContext(sc.z1),{connected:j,cardIndexWithMiniDetails:F,actions:H}=i.useContext(Nm),U=F===e,Z=!Boolean(null==B?void 0:B.disableHover)&&!(!L||null==t||null===(u=t.hoverInfo)||void 0===u||!u.canHover||V||!lp.isAtleast(op.TABLET)),[z,q]=i.useState(!1),[$,G]=i.useState(!1);i.useEffect((()=>{if(U&&$&&!(0,Pm.sT)(null==R?void 0:R.current)&&R.current){var e;null===(e=(0,Pm.GO)(R.current)[0])||void 0===e||e.focus()}}),[U,$]);const Q=z||$,Y=null!=U?U:Q,[K,X]=i.useState(!1),[J,ee]=i.useState("default"),te=i.useRef(),se=void 0!==t.titleID?null==P?void 0:P[t.titleID]:void 0,ae=void 0!==se,ne=i.useCallback((()=>{setTimeout((()=>{if(!(0,Pm.sT)(null==R?void 0:R.current)){var e;G(!1);(null===(e=document)||void 0===e?void 0:e.activeElement).blur()}q(!0)}),0)}),[]),ie=i.useCallback((()=>{q(!1)}),[]),re=i.useCallback((e=>{["Enter"," "].includes(e.key)&&(U||(e.preventDefault(),G(!0)))}),[U]),oe=(0,Wl.D)((()=>{(0,Pm.sT)(null==R?void 0:R.current)||G(!1)}),100),le=i.useCallback((s=>{const a=null==R?void 0:R.current;a||s===a?a&&!s&&zc.F.unobserve(a):x&&Pe&&Te&&Ce&&s&&zc.F.observe(s,{collectionImpressionData:x,titleID:_e,imageURL:Pe,refMarker:Ce,widgetType:Te,carouselPosition:k,itemPosition:e,itemAnalytics:t.itemAnalytics},r),R.current=s,null==c||c(s)}),[]);i.useEffect((()=>{if(j){if("undefined"!=typeof window&&!Y){var t;const e=null==R||null===(t=R.current)||void 0===t?void 0:t.getBoundingClientRect(),s=parseFloat((0,Xl.pm)("--dv-carousel-column-margin")),a=parseFloat((0,Xl.pm)("--dv-carousel-column-gap"));if(e&&s&&a){ee("default");let t=s+a,n=s+a;0;const i=e.left<=t,r=window.innerWidth-e.right<=n;i&&ee("left"),r&&ee("right")}}if(Q&&!U){H.hoverCallback(e);const t=null==R?void 0:R.current;t&&(te.current=window.setTimeout((()=>{zc.F.logManualImpression(t,"Highlight")}),300))}else!Q&&U&&(clearTimeout(te.current),H.hoverCallback(null))}}),[Q]);const ce=i.useRef(),[de,ue]=i.useState(!1),me=null==a?void 0:a.prerolls,{isTrailerAutoplayEnabled:pe}=i.useContext(iw);i.useEffect((()=>{Y?ce.current=window.setTimeout((()=>ue(!0)),1600):(clearTimeout(ce.current),ue(!1))}),[Y]);const ge=pe&&(Z||U)&&Y&&me?{prerolls:me,canPlay:de,delay:1600,placement:Pc.H.StandardMiniDetails,className:dm}:void 0,he=i.useRef();i.useEffect((()=>{clearTimeout(he.current),Y&&!K?X(!0):!Y&&K&&(he.current=window.setTimeout((()=>X(!1)),100))}),[Y]);const ve=n?xm:rm,[be,De]=i.useState(!1);i.useEffect((()=>{De(Boolean(t.progress&&!a))}),[]);const ye=Boolean(t.station)?null==t||null===(m=t.playbackActions)||void 0===m?void 0:m[0]:np(t,a);let fe=rp(a);null!=B&&B.isHoverSsmOn||"COLLAPSED"!==(null==fe||null===(p=fe.groupMetadata)||void 0===p?void 0:p.behaviour)||(fe.groupMetadata.behaviour="EXPANDED");const{images:Ee,hideThisAction:we,titleID:_e,widgetType:Te,refMarker:Ce,title:xe,liveInfo:Ie,entityType:Ne}=t;let Pe=null==Ee||null===(g=Ee.cover)||void 0===g?void 0:g.url,ke=t.displayTitle,Se=null==Ee||null===(h=Ee.cover)||void 0===h?void 0:h.alternateText;const Ve=i.useContext(bs.ET),We=pp(N,I,k,e),Ae=hp(Ve,t);let{synopsis:Re,releaseYear:Le,contentMaturityRating:Be,maturityRatingBadge:Me}=t;const Oe=null!==(v=null==a?void 0:a.entitlementCues)&&void 0!==v?v:t.entitlementCues;let je,Fe,He;ye&&bp(Te)&&(He=i.createElement(yu,{playbackAction:ye,titleId:_e,carouselRefTag:t.refMarker,buttonVariant:Du.Invisible}));const Ue=null!==(b=null==a?void 0:a.progress)&&void 0!==b?b:t.progress,Ze=Boolean((null==Ue?void 0:Ue.percentage)&&Ue.percentage>0),ze=Boolean(Y||be),qe=Ze&&ze?Ue:void 0;Fe=i.createElement(Km,{progress:qe,hovered:Y});const[$e,Ge]=i.useState(Sm(t.station)),Qe=Sm(t.station,1),Ye=((e,t,s)=>{var a,n,i;return{displayTitle:Vm(t,e),stationTitle:null===(a=e.station)||void 0===a?void 0:a.name,episodeTitle:null==t?void 0:t.metadata.title,currentBroadcastStartTime:null==t?void 0:t.start,nextBroadcastTitle:null!==(n=null==s?void 0:s.metadata.seriesTitle)&&void 0!==n?n:null==s?void 0:s.metadata.title,nextBroadcastStartTime:null==s?void 0:s.start,nextUpText:null==e||null===(i=e.station)||void 0===i?void 0:i.strings.nextUp}})(t,$e,Qe);let Ke,Xe,Je,et;if($e){var tt,at,nt,it,rt,ot,lt;Ke={broadcast:$e,nextBroadcastCallback:()=>{Ge(Sm(t.station))}},Pe=null===(tt=$e.metadata.image)||void 0===tt?void 0:tt.url,ke=Ye.displayTitle,Se=null===(at=$e.metadata.image)||void 0===at?void 0:at.alternateText,Xe=null===(nt=t.promotedAcquisitionGroup)||void 0===nt?void 0:nt.label,Je=null===(it=t.link)||void 0===it?void 0:it.url,({synopsis:Re,releaseYear:Le,contentMaturityRating:Be}=$e.metadata),je=i.createElement(ep,{colour:null===(rt=$e.metadata.linearBadge)||void 0===rt?void 0:rt.colour,label:null===(ot=$e.metadata.linearBadge)||void 0===ot?void 0:ot.label,className:Im}),Fe=i.createElement(Km,{title:null===(lt=t.station)||void 0===lt?void 0:lt.name,playable:void 0!==ye,hovered:Y,linearProgress:Ke})}if((0,Pa.g2)(Ne)){var ct,dt;const e=Ne==Pa.Ze?null==Ie?void 0:Ie.timeBadge:void 0;Fe=i.createElement(Km,{title:xe,dateTime:e,hovered:Y}),je=i.createElement(sp,{liveInfo:Ie,className:Im}),et=null==a?void 0:a.playbackActions.slice(1),Xe=null==a||null===(ct=a.promotedAcquisitionGroup)||void 0===ct?void 0:ct.label,Je=null==a||null===(dt=a.promotedAcquisitionGroup)||void 0===dt?void 0:dt.url}const ut={eventTitle:ke,triggerLocation:"Hover",liveInfo:Ie};return i.useEffect((()=>{if(!Pe){const e=t.station?`station: ${t.channelId}`:`title ${_e}`;S.count("MissingImageCard",1,!1),S.warn(`Missing cover image in Card for ${e}`)}}),[]),i.createElement("article",gp({className:st()(ve,s,{[cm]:Y,[gm]:K})},Z&&{onMouseOver:ne,onMouseLeave:ie,onBlur:oe},{ref:le,"data-card-title":t.title,"data-card-entity-type":t.entityType,"data-card-position":e,"data-testid":"card"}),V&&we&&_e&&i.createElement("section",{className:wm},i.createElement("div",{className:_m},i.createElement(gs.Text,{string:V}),i.createElement(xc,{hideThisAction:we,titleID:_e,buttonStyle:Tm,textStyle:Cm,isInDropdown:!1,callback:A}))),ae&&se.removedOverlayMessage&&i.createElement(mp,{message:se.removedOverlayMessage,undoText:se.undoMessage,onUndo:se.undo}),i.createElement("section",{className:st()(hm,{[vm]:!n})},!ae&&!V&&i.createElement(i.Fragment,null,i.createElement(Yc,{className:st()(om,{[bm]:"left"===J,[Dm]:"right"===J}),imageClassName:um,imageWrapperClassName:lm,isCircle:n,imageUrl:Pe,alternateText:Se,fallbackTitle:ke,url:null==t||null===(D=t.link)||void 0===D?void 0:D.url,deeplinkFallbackUrl:null===(y=t.link)||void 0===y?void 0:y.deeplinkFallbackUrl,deeplinkType:Ae,parentElement:R.current,backgroundTrailerConfig:ge,hasProgress:Ze,badge:je,cardOverlay:Fe,playButtonOverlay:He,linkAriaRole:U?"link":"button",onPackshotLinkKeyDown:re,noBottomCornerRadiusLink:U,refMarker:t.refMarker,titleID:null!==(f=t.titleID)&&void 0!==f?f:null===(E=t.station)||void 0===E?void 0:E.id,shouldLazyLoadImage:We}),Y&&i.createElement(im,{className:st()(mm,{[fm]:"left"===J,[Em]:"right"===J,[ym]:"default"===J}),titleID:null==t?void 0:t.titleID,playbackAction:ye,secondaryPlaybackActions:et,playbackGroup:fe,streamSelectorProps:ut,providerLogo:null==Ee?void 0:Ee.providerLogo,displayTitle:ke,watchlistAction:null==a?void 0:a.watchlistAction,trailer:null==a?void 0:a.trailer,hideThisAction:null==t?void 0:t.hideThisAction,customerReviews:null==t?void 0:t.customerReviews,releaseYear:Le,runtime:null==t?void 0:t.runtime,dateTime:null==Ie?void 0:Ie.timeBadge,contentMaturityRating:Be,maturityRatingBadge:Me,synopsis:Re,entitlementType:null==Oe?void 0:Oe.entitlementType,focusMessage:null==Oe?void 0:Oe.focusMessage,highValueMessage:null==Oe?void 0:Oe.highValueMessage,hideThisCallback:A,linearProps:Ye,callToActionButtonLabel:Xe,callToActionButtonLink:Je,carouselRefTag:t.refMarker,libraryItemActions:null==t?void 0:t.libraryItemActions,isTouchEnabledWindowsDevice:O,recordSeasonTooltipText:null==a||null===(w=a.recordSeason)||void 0===w||null===(_=w.watchlistAddon)||void 0===_?void 0:_.tooltipText}))),!ae&&!V&&i.createElement(ln.nI,{message:null==Oe||null===(T=Oe.glanceMessage)||void 0===T?void 0:T.message,icon:null==Oe||null===(C=Oe.glanceMessage)||void 0===C?void 0:C.icon,className:pm,hideIcon:"Store"===M,takeUpSpaceIfEmpty:l}))})),bp=e=>"LiveLinearCard"===e,Dp="c3svnh",yp="+OSZzQ",fp="Xa7aAK",Ep="YxKE01",wp="LLws87",_p="EPBbt1",Tp=({children:e})=>{const{isTouchDevice:t}=i.useContext(sc.z1),{isCarouselHovered:s,isCarouselFocused:a,isHoveringNavArrows:n,state:r,scrollToCard:o}=i.useContext(cc),l=i.useContext(zl),[c,d]=i.useState(null),{isSsmOpen:u}=i.useContext(mu),[m,p]=i.useState(!t),g=i.useRef(),[h,v]=i.useState(!1),b=i.useRef();i.useEffect((()=>{clearTimeout(b.current),null===c?h&&(b.current=window.setTimeout((()=>v(!1)),100)):v(!0)}),[c]);const[D,y]=i.useState(!1);i.useEffect((()=>{const e=l.connected&&l.isScrolling;y(!!((s||a||e)&&!(n&&!e)))}),[s,a,l.connected&&l.isScrolling,n]),i.useEffect((()=>{D||u||d(null)}),[D,u]),i.useEffect((()=>{let e;e=!t&&!D,m!==e&&(clearTimeout(g.current),e?o(r.min):p(!1))}),[D]);const f=e=>{u||d(e)};i.useEffect((()=>{u||d(null)}),[u]);const E=i.useMemo((()=>({connected:!0,cardIndexWithMiniDetails:c,actions:{hoverCallback:f}})),[c,u]);return i.createElement("div",{className:tt({[wp]:h})},i.createElement(Nm.Provider,{value:E},e))},Cp="CUqrUf",xp="whIpcm",Ip="fAKy1i",Np="o86fri",Pp="wtkZWr",kp="u-vmzo",Sp=({title:e,facetText:t,offerType:s,entitlementType:a,children:n,className:r})=>{const o=e.trim();if(!o)return null;let l;if("SVOD"===s)l=i.createElement("div",{className:xp},t&&i.createElement(gs.Text,{testID:"svod-facet-text",string:t,tag:"span",className:st()(Pp,Ip,kp)}),i.createElement(gs.Text,{testID:"carousel-title",tag:"span",string:o}));else{const e="NotEntitled"===a;l=i.createElement("div",{className:xp},t&&i.createElement(i.Fragment,null,i.createElement(gs.Text,{testID:"facet-text",string:t,tag:"span",className:st()(Ip,{[Np]:e})}),i.createElement(gs.Text,{string:":",tag:"span",className:st()(kp,{[Np]:e})})),i.createElement(gs.Text,{testID:"carousel-title",string:o,tag:"span",className:st()({[Np]:e})}))}return i.createElement(Qr.Z.Super,{className:st()(Cp,r)},l,n)};var Vp=s("./node_modules/@amzn/dvui/dist/Icons/LinkArrow.js"),Wp=s.n(Vp);const Ap="KJx9ci",Rp="GnSDwP",Lp=e=>i.createElement("a",{href:e.url,"aria-label":null==e?void 0:e.label,className:tt(Ap,null==e?void 0:e.className),"data-testid":"see-more"},i.createElement("span",{className:Rp},null==e?void 0:e.label),i.createElement(Wp(),null)),Bp=e=>{var t;const s=null!==(t=e.text)&&void 0!==t?t:e.title;if(s){const t=null==e?void 0:e.entitlementCues,a=null==t?void 0:t.entitledCarousel,n=null==t?void 0:t.offerType,r=e.seeMoreLink,o=null==e?void 0:e.facetText;return i.createElement("section",{className:Dp,"data-entitled":"Entitled"===a},i.createElement(Sp,{title:s,facetText:o,entitlementType:a,offerType:n},(null==r?void 0:r.url)&&i.createElement(Lp,{url:r.url,label:null==r?void 0:r.label,className:"NotEntitled"===a&&"SVOD"!==n?fp:void 0})))}return null},Mp=1.5,Op=2,jp=3,Fp=4,Hp=5,Up=({entities:e,actions:t,enrichments:s,header:a,otherWrapperClassName:n})=>{const{isTouchDevice:r,pageWidth:o,hasPageMounted:l}=i.useContext(sc.z1),c=i.useRef(Object.values(e).some((e=>{var t,s;return!(null===(t=e.entitlementCues)||void 0===t||null===(s=t.glanceMessage)||void 0===s||!s.message)}))),d=i.useCallback((()=>{let e=Hp;return lp.is(op.PHONE)?e=Mp:window.innerWidth<=680?e=Op:lp.is(op.TABLET)?e=jp:lp.is(op.LAPTOP)&&(e=Fp),e}),[]),[u,m]=i.useState(l?d():Hp);i.useEffect((()=>{m(d())}),[]),i.useEffect((()=>{m(d())}),[o]);const p=i.useCallback((s=>{if(r)return;const a=e.filter(((e,t)=>s.has(t+1)));if(a.length>0){const e=a.filter((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID})).map((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID}));t.getEnrichments(e)}}),[r,e,t]),g=i.useCallback(((e,t,a)=>{var n,r;return i.createElement(vp,{card:e,isVisible:t,enrichment:null==s?void 0:s[null!==(n=null!==(r=e.entityID)&&void 0!==r?r:e.titleID)&&void 0!==n?n:""],index:a,renderGlanceSpaceIfNoGlanceMessage:c.current})}),[s]);return i.createElement(ql,null,i.createElement(wc,{className:Ep,wrapperClassName:tt(yp,n),navigation:Dc.Framed,cards:e,cardsVisibilityThreshold:.3,customCarouselContainer:Tp,header:a,renderCard:g,performantRender:{maxCardNum:u,onFirstTimeCardRender:p},testID:"standard-carousel"}))},Zp=()=>i.createElement(iw.Consumer,null,(({container:e,actions:t,enrichments:s})=>i.createElement(Up,{entities:e.entities,actions:t,header:Bp(e),enrichments:s})));Zp.displayName="StandardCarousel";const zp=Zp,qp="bv3JXH",$p="hLPm0W",Gp="gUb7Qp",Qp="C81Ge2",Yp="LSqtDy",Kp="_3gHUdf",Xp="wrUgu5",Jp="bwragx",eg="bNPVex",tg="NAHZF5",sg="_2eO272",ag="zDj22O",ng="ql6HCx",ig="aoQ9tU",rg="DYBas-",og="Zgte-n",lg="hj9oUW",cg="Dh0fsf",dg="AIBqlu",ug="buzKCX",mg="Ozxx6Y",pg="_8qiQr1",gg="YQI101",hg="R1vcpH",vg="xcP7NY",bg="yCgBRs",Dg="JBK4DO",yg="K8HVp6",fg="G3NyeE",Eg="_2Mrhyf";var wg=s("./node_modules/@amzn/dvui/dist/Icons/Info.js");const _g="y3gsEM",Tg="gPlQH3",Cg="kb934y",xg="QYsdaS",Ig=({titleId:e,playbackAction:t,playbackGroup:s,streamSelectorProps:a,promotedAcquisitionGroup:n,link:r,isInverted:o=!1,withTransparentIcons:l=!1,useCircularPlayButton:c=!0,className:d,carouselRefTag:u})=>{const{getString:m}=i.useContext(sc.z1),{container:p}=i.useContext(iw),g=m("DV_WEB_MORE_DETAILS"),h=null==r?void 0:r.url,v="StandardHero"===p.containerType||"SuperCarousel"===p.containerType||"TentpoleHero"===p.containerType||"Charts"===p.containerType,b=null==n?void 0:n.label,D=v&&b?g:b,y=!D&&e;return i.createElement("div",{className:tt(_g,d)},t&&i.createElement("div",{className:Tg},i.createElement(yu,{buttonVariant:c?Du.Circular:Du.Square,playbackAction:t,playbackGroup:s,streamSelectorProps:a,label:t.label,titleId:e,carouselRefTag:u})),!t&&D&&h&&i.createElement(Yr.z,{label:D,isInverted:!0,href:h,className:xg,testID:"promotion"}),e&&i.createElement(Ng,{titleId:e,isInverted:o,withTransparentIcons:l,carouselRefTag:u}),h&&(!e&&g?i.createElement(Yr.z,{label:g,href:h,isInverted:!0,testID:"details"}):y&&i.createElement(Cc.k,{icon:i.createElement(wg.Info,null),href:h,isInverted:o,isTransparentBackground:l,label:m("DV_WEB_DETAILS_TOOLTIP"),testID:"details"})))},Ng=e=>{const{actions:t,enrichments:s}=i.useContext(iw),{getString:a}=i.useContext(sc.z1),n=e.titleId;if(n){var r;const d=null===(r=s[n])||void 0===r?void 0:r.watchlistAction;if(d){var o,l,c;const r="Remove"===d.tag,u=s=>{t.onWatchlistToggle(s,n,e.carouselRefTag)},m=r||null===(o=s[n])||void 0===o||null===(l=o.recordSeason)||void 0===l||null===(c=l.watchlistAddon)||void 0===c?void 0:c.tooltipText;return i.createElement(Cc.k,{icon:r?i.createElement(aa.Tick,null):i.createElement(Qs.Add,null),className:Cg,isInverted:e.isInverted,isTransparentBackground:e.withTransparentIcons,onSecondaryButtonClick:u,isDisabled:!n,ariaLabel:"string"==typeof d.text?d.text:d.text.string,label:m||a("DV_WEB_WATCHLIST_TOOLTIP"),testID:r?"watchlist-remove":"watchlist-add"})}}return null};function Pg(){return Pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Pg.apply(this,arguments)}const kg=({displayTitle:e,playbackAction:t,playbackGroup:s,promotedAcquisitionGroup:a,link:n,highValueMessage:r,focusMessage:o,contentMaturityRating:l,maturityRatingBadge:c,titleID:d,isCardActive:u,images:m,liveEventMetadata:p,enrichmentAttempted:g,carouselRefTag:h,shouldLazyLoadImage:v})=>{var b;const{providerLogo:D,titleLogo:y}=m||{},{isInResiliencyMode:f}=i.useContext(sc.z1),{container:{entities:E}}=i.useContext(iw),w=!E.some((e=>e.titleID))||f,_=g||w,T={eventTitle:e,triggerLocation:"StandardHero",liveInfo:p},C=i.createElement("div",{className:tt(vg)},i.createElement("div",{className:gg},o&&i.createElement(ln.nI,{icon:o.icon,message:o.message}),c?i.createElement(Ou.AgeRating,{rating:c.displayText,locale:null===(b=c.countryCode)||void 0===b?void 0:b.toLowerCase(),logoUrl:c.logoUrl,title:c.description,ariaLabel:c.description,className:hg}):l&&i.createElement(Gu,Pg({},l,{className:hg}))),i.createElement(Ig,{className:tt(bg,{[fg]:_}),playbackAction:t,playbackGroup:s,streamSelectorProps:T,link:n,titleId:d,promotedAcquisitionGroup:a,carouselRefTag:h})),x=void 0!==(null==y?void 0:y.url);return i.createElement("section",{className:tt(rg,{[yg]:u}),"data-testid":"title-details"},(null==r?void 0:r.message)&&i.createElement(Qu,{message:r.message,className:tt(ug)}),p&&("UPCOMING"===p.status?i.createElement(Qr.Z.Marker,{className:tt(mg)},p.timeBadge):i.createElement(sp,{liveInfo:p,className:tt(pg)})),e&&i.createElement(nm,{title:e,headingLevel:am.Mega,headingClassName:tt(Dg,{[cg]:x,[og]:!x,[lg]:!x&&p}),titleLogoOptions:y?{url:y.url,imageClassName:Eg,shouldLazyLoadImage:v}:void 0,providerLogoOptions:D?{url:D.url,alt:D.alternateText,wrapperClassName:tt(Dg,dg),shouldLazyLoadImage:v}:void 0,url:null==n?void 0:n.url,titleID:d}),C)},Sg=[1440,2160,2880,3840],Vg=[720,1080,1440,1920],Wg=({images:e,displayTitle:t,isVisibleInCarousel:s,size:a,link:n,titleID:r,entitlementCues:l,index:c,refMarker:d,widgetType:u,context:m,liveInfo:p,contentMaturityRating:g,maturityRatingBadge:h,playbackActions:v,itemAnalytics:b,shouldAutoRotate:D,setAutoRotateActive:y})=>{var f,E;const w=i.useRef(null),_=i.useRef(),[T,C]=i.useState(!1),[x,I]=i.useState(kc.Init),{container:{impressionData:N,containerType:P},enrichments:k,enrichmentAttempted:S,isTrailerAutoplayEnabled:V,index:W,consumingWidgetType:A}=i.useContext(iw),{logger:R}=(0,o.L1)(),L=pp(A,P,W,c),B=k[null!=r?r:""],{prerolls:M,promotedAcquisitionGroup:O}=null!=B?B:{},j=ip(v,B),F=rp(B),H=B?B.entitlementCues:l,{isCarouselVisible:U}=i.useContext(cc),{isPageVisible:Z,pageWidth:z,isTouchDevice:q,isDesktopDeviceVariant:$,shouldUseReducedMotion:G,isPlayerVisible:Q}=i.useContext(sc.z1),[Y,K]=i.useState(!1),[X,J]=i.useState(!0),{isSsmOpen:ee}=i.useContext(mu);i.useEffect((()=>{K(s&&U&&Z)}),[s,U,Z]);const te=null==e||null===(f=e.hero)||void 0===f?void 0:f.url,se=i.useCallback((e=>{const t=null==w?void 0:w.current;t||e===t?t&&!e&&zc.F.unobserve(t):N&&te&&u&&d&&e&&zc.F.observe(e,{collectionImpressionData:N,titleID:r,imageURL:te,refMarker:d,widgetType:u,carouselPosition:W,itemPosition:c,itemAnalytics:b},m),w.current=e}),[]),{state:ae,scrollToCard:ne}=i.useContext(cc),ie=()=>{const e=c+1+1;e>a?(y(!1),ne(1)):ne(e)};i.useEffect((()=>{0}),[z]),i.useEffect((()=>{J(lp.isAtleast(q?op.DESKTOP:op.LAPTOP))}),[z,q]);const re=M&&X&&V;i.useEffect((()=>{if(!(G||Q||ee)&&D){if(Y){var e,t;const s=null!==(e=null===(t=w.current)||void 0===t?void 0:t.matches(":hover"))&&void 0!==e&&e;if(re){if(!T)if([kc.Stop,kc.Error].includes(x)){const e=x===kc.Error?3e3:s?5e3:1e3;_.current=window.setTimeout((()=>{ie()}),e)}else x===kc.Init&&clearTimeout(_.current)}else _.current=window.setTimeout((()=>ie()),5e3)}else clearTimeout(_.current);return()=>clearTimeout(_.current)}}),[Y,T,G,x,ee,D]),i.useEffect((()=>{(G||Q)&&clearTimeout(_.current),y(!G&&!Q)}),[G,Q]),i.useEffect((()=>{te||(R.count("MissingImageStandardHeroCard",1,!1),R.warn(`Missing hero image in StandardHeroCard for title ${r}`))}),[]);const oe=()=>{null!=w&&w.current&&zc.F.logManualImpression(null==w?void 0:w.current,"Select")};return i.createElement("article",{ref:se,className:tt($p,{[Kp]:!s,[Yp]:re&&T,[Gp]:!$,[ag]:q,[ng]:!q}),"data-testid":"standard-hero-card"},i.createElement("div",{className:tt(ig,qp)},te&&i.createElement(i.Fragment,null,i.createElement(xo.w,{alt:null==e||null===(E=e.hero)||void 0===E?void 0:E.alternateText,src:te,imageClassName:eg,wrapperClassName:Qp,aspectRatio:$?Co.ThreeByOne:Co.SixteenByNine,sizesOptions:{defaultSrcSize:$?815:2260,srcSizes:[{"max-tablet-lowest":400},{"max-laptop-lowest":815},{"max-desktop-lowest":1300},{"max-desktop-hd-lowest":1650},{"max-desktop-uhd-lowest":2260}]},srcSetWidths:$?Sg:Vg,baseValue:$?2880:1440,shouldLazyLoad:L,debugID:r}),i.createElement("div",{className:tt({[tg]:$})})),i.createElement("a",{href:null==n?void 0:n.url,className:sg,"data-testid":"image-link",onClick:oe,"aria-label":t},t),$&&i.createElement(kg,{displayTitle:t,link:n,titleID:r,playbackAction:j,playbackGroup:F,highValueMessage:null==H?void 0:H.highValueMessage,focusMessage:null==H?void 0:H.focusMessage,contentMaturityRating:g,maturityRatingBadge:h,images:e,isCardActive:Y,promotedAcquisitionGroup:O,liveEventMetadata:p,enrichmentAttempted:S,carouselRefTag:d,shouldLazyLoadImage:L}),re&&Y&&!Q&&i.createElement(Bc,{key:r,canPlay:!0,delay:2e3,placement:Pc.H.StandardHero,playback:Lc.Restart,prerolls:M,onStateChange:I,playing:C,className:Xp,playerIsActive:!1,link:T?null==n?void 0:n.url:void 0,draperParentListeners:{onClick:oe},videoFadeOverlayClassname:Jp,refMarker:d,titleID:r})))};Wg.displayName="StandardHeroCard";const Ag=(0,r.s6)(Wg),Rg="jVpjZD",Lg="cIbiJK",Bg="Dz+gPK";function Mg(){return Mg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Mg.apply(this,arguments)}const Og=({index:e,isActive:t,handleNavigation:s})=>{const a=i.useCallback((()=>s(e)),[e,s]);return i.createElement("li",Mg({"aria-hidden":!0,className:tt(Lg,{[Bg]:t}),onClick:a},t&&{"data-testid":"active-dot"}))},jg=({size:e,handleNavigation:t,activeIndex:s,className:a})=>{const n=[];for(let a=1;a<=e;++a)n.push(i.createElement(Og,{key:a,index:a,isActive:s===a,handleNavigation:t}));return i.createElement("ul",{className:tt(Rg,a),"data-testid":"navigation-slider","aria-hidden":!0},n)},Fg="qYc0AS",Hg="PkqXx3";function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Ug.apply(this,arguments)}const Zg=({size:e})=>{const{state:t,scrollToCard:s}=i.useContext(cc);return i.createElement(jg,{size:e,handleNavigation:s,activeIndex:t.min,className:Fg})},zg=()=>{const{actions:e,container:t}=i.useContext(iw),[s,a]=i.useState(!0),n=t.entities,r=n.length>0;i.useEffect((()=>{const t=n.filter((e=>e.titleID)).map((e=>e.titleID));e.getEnrichments(t)}),[r]);const o=i.useCallback(((e,t,r)=>i.createElement(Ag,Ug({shouldAutoRotate:s,setAutoRotateActive:a,isVisibleInCarousel:t,index:r},e,{size:n.length}))),[s]);return i.createElement(wc,{cards:n,navigation:Dc.Regular,className:Yl,wrapperClassName:Hg,renderCard:o,carouselVisibilityThreshold:.7,footer:n.length>1&&i.createElement(Zg,{size:n.length}),testID:"standard-hero"})};zg.displayName="StandardHero";const qg=zg,$g="WKVLn6",Gg="w93mn5",Qg="Tspi18",Yg="_76wgdZ",Kg="ZJ+MZQ",Xg="LKIkHM",Jg="xzH5Px",eh="wcr54O",th="sIyVVJ",sh="JAd8bO",ah="t4tVxF",nh="_0sEABY",ih="anunnx",rh="CPHis2",oh="_2CfE4M",lh="ECbJrQ",ch="Z0msKX",dh="_5Weo1T",uh="hkAVQf",mh="+a4baI",ph="VZKXTg",gh="cVuct3",hh=[1080,2160,2880,3840],vh=[1e3,1125,1500,2e3],bh=({url:e,ariaLabel:t,shouldBeVisible:s,shouldLazyLoadImage:a,titleID:n})=>{const{isDesktopDeviceVariant:r,isTabletDeviceVariant:o}=i.useContext(sc.z1),l=!r&&!o;return i.createElement("div",{className:st()(rh,s?uh:dh,{[oh]:o,[lh]:l}),"data-testid":"tentpole-hero-image"},i.createElement(xo.w,{alt:t,src:e,aspectRatio:r?Co.SixteenByNine:Co.TwoByThree,sizesOptions:{defaultSrcSize:r?2400:880,srcSizes:[{"max-tablet-lowest":450},{"max-laptop-lowest":880},{"max-desktop-lowest":1400},{"max-desktop-hd-lowest":1800},{"max-desktop-uhd-lowest":2400}]},srcSetWidths:r?hh:vh,baseValue:r?2880:1500,imageClassName:ch,shouldLazyLoad:a,debugID:n}),i.createElement("div",{className:r?mh:o?gh:ph}))},Dh="FmypN+",yh="zLJeeH",fh="_4dHokH",Eh="vQLwG0",wh="PtNZ1f",_h="INNVnS",Th="LQhFNd",Ch="ricmob",xh="zsirBJ",Ih="JEptkj",Nh="Rld4qj",Ph="hd+LCp",kh="jrYMAX",Sh="PfW69h",Vh="gzWYBG",Wh="JWMhG0",Ah="BJGaIn",Rh="fDle0A",Lh="_5GvTVc",Bh="-a84F4",Mh="N+2-zX",Oh="obgSGX",jh="Z01qGr",Fh="pXqVOQ",Hh=e=>{var t,s,a,n;const{isDesktopDeviceVariant:o,isTabletDeviceVariant:l}=i.useContext(sc.z1),{containerItem:c,highValueMessage:d,trailerState:u,detailPageLink:m}=e,p=null===(t=c.images)||void 0===t?void 0:t.titleLogo,g=null===(s=c.images)||void 0===s?void 0:s.providerLogo,h=u===kc.Play,v=null!==(a=null===(n=(0,r.G4)().render)||void 0===n?void 0:n.isRTL)&&void 0!==a&&a;return i.createElement("div",{className:tt(fh,{[Eh]:h})},i.createElement("div",{className:tt(wh,{[_h]:h})},(null==d?void 0:d.message)&&i.createElement(Qu,{message:d.message})),i.createElement("div",{className:Th},i.createElement(sp,{liveInfo:e.containerItem.liveInfo,className:Ch})),c.displayTitle&&i.createElement(nm,{title:c.displayTitle,baseValue:1e3,headingLevel:am.Mega,headingClassName:tt(Nh,{[Ph]:null==p?void 0:p.url,[Sh]:!(null!=p&&p.url),[Vh]:h}),titleLogoOptions:p?{url:p.url,shouldLazyLoadImage:e.shouldLazyLoadImage}:void 0,providerLogoOptions:g?{url:g.url,wrapperClassName:tt(kh,{[Vh]:h}),alt:g.alternateText,shouldLazyLoadImage:e.shouldLazyLoadImage}:void 0,url:m,titleID:c.titleID}),(o||l)&&c.synopsis&&i.createElement(Xu,{synopsis:c.synopsis,className:tt(xh,{[Ih]:h&&!v})}))},Uh=e=>{var t;const{isDesktopDeviceVariant:s,isTouchDevice:a}=i.useContext(sc.z1),{enrichmentAttempted:n}=i.useContext(iw),r={eventTitle:e.containerItem.displayTitle,triggerLocation:"TentpoleHero",liveInfo:e.containerItem.liveInfo};return i.createElement("div",{className:tt(Dh,{[jh]:e.isContainerActive}),"data-testid":"title-details"},i.createElement("div",{className:tt(yh,{[Oh]:e.trailerState===kc.Play})},i.createElement(Hh,e),i.createElement("div",{className:tt(Wh,{[Ah]:e.trailerState===kc.Play})},i.createElement("div",{className:tt(Rh)},i.createElement("div",{className:Bh},i.createElement(ln.nI,e.focusMessage),e.containerItem.maturityRatingBadge?i.createElement(Ou.AgeRating,{rating:e.containerItem.maturityRatingBadge.displayText,locale:null===(t=e.containerItem.maturityRatingBadge.countryCode)||void 0===t?void 0:t.toLowerCase(),logoUrl:e.containerItem.maturityRatingBadge.logoUrl,title:e.containerItem.maturityRatingBadge.description,ariaLabel:e.containerItem.maturityRatingBadge.description}):e.containerItem.contentMaturityRating&&i.createElement(Gu,e.containerItem.contentMaturityRating)),i.createElement(Ig,{playbackAction:e.playbackAction,playbackGroup:e.playbackGroup,titleId:e.containerItem.titleID,streamSelectorProps:r,link:e.containerItem.link,promotedAcquisitionGroup:e.promotedAcquisitionGroup,withTransparentIcons:!s||a,useCircularPlayButton:s&&!a,className:tt(Lh,{[Mh]:!s||a,[Fh]:n}),carouselRefTag:e.containerItem.refMarker})))))},Zh=["StandardCarousel","SuperCarousel","Nodes"],zh=()=>{var e,t,s,a,n;const{pageWidth:r,isDesktopDeviceVariant:l,isTabletDeviceVariant:c,isPageVisible:d,isPlayerVisible:u}=i.useContext(sc.z1),{actions:m,container:p,enrichments:g,isTrailerAutoplayEnabled:h,nextContainer:v,consumingWidgetType:b,index:D}=i.useContext(iw),{logger:y}=(0,o.L1)(),[f,E]=i.useState(!1),[w,_]=i.useState(!1),[T,C]=i.useState(!1),[x,I]=i.useState(void 0),N=i.useRef(null),P=i.useRef(!1),k=null===(e=p.entities)||void 0===e?void 0:e[0],S=(null==k?void 0:k.titleID)||"",V=null==g?void 0:g[S],W=null==V?void 0:V.prerolls;i.useEffect((()=>{const e=p.entities.filter((e=>e.titleID)).map((e=>e.titleID));m.getEnrichments(e)}),[]),i.useEffect((()=>{P.current=lp.isSmallerThan(op.LAPTOP)}),[r]),i.useEffect((()=>{E(w&&d)}),[w,d]);const A=i.useCallback((([{isIntersecting:e,intersectionRatio:t}])=>{_(e&&t>=.7)}),[]);(0,oc.S)({enabled:!0,target:N,onIntersect:A,threshold:.7});const R=!l&&!c,L=T?sh:ah,B=Zh.includes((null==v?void 0:v.containerType)||""),M=B?Kg:Gg,O=B?Jg:Xg,j=!x||[kc.Init,kc.Stop,kc.Pause,kc.Error].includes(x),F=null!==(t=null==V?void 0:V.entitlementCues)&&void 0!==t?t:k.entitlementCues,H=null==k||null===(s=k.images)||void 0===s||null===(a=s.hero)||void 0===a?void 0:a.url,U=null==k||null===(n=k.link)||void 0===n?void 0:n.url;i.useEffect((()=>{H||(y.count("MissingImageTentpoleHero",1,!1),y.warn(`Missing hero image in TentpoleHero for title ${S}`))}),[]);const Z=pp(b,p.containerType,D,-1);return i.createElement("section",{"data-testid":"tentpole-hero",className:tt($g),ref:N},i.createElement("div",{className:tt(M,{[Yg]:c,[Qg]:R}),"data-testid":"tentpole-hero-content"},H&&i.createElement(bh,{url:H,ariaLabel:null==k?void 0:k.title,shouldBeVisible:j,shouldLazyLoadImage:Z,titleID:S}),!T&&i.createElement("a",{href:U,className:tt(O,{[Yg]:c,[Qg]:R}),"data-testid":"image-link"},k.displayTitle),l&&i.createElement(i.Fragment,null,W&&!P.current&&h&&f&&!u&&i.createElement(Bc,{key:S,className:tt(eh,L),canPlay:!0,delay:2e3,playback:Lc.Restart,playing:C,prerolls:W,onStateChange:I,placement:Pc.H.TentpoleHero,link:T?U:void 0,playerIsActive:!1,refMarker:k.refMarker,titleID:k.titleID}),i.createElement("div",{className:tt(th,L)})),i.createElement("div",{className:tt(ih,nh)},i.createElement(Uh,{containerItem:k,isContainerActive:f,playbackAction:np(k,V),playbackGroup:rp(V),highValueMessage:null==F?void 0:F.highValueMessage,focusMessage:null==F?void 0:F.focusMessage,promotedAcquisitionGroup:null==V?void 0:V.promotedAcquisitionGroup,trailerState:x,detailPageLink:U,shouldLazyLoadImage:Z}))))},qh="GpKcvg",$h="NAtV-m",Gh="Zsox55",Qh="_4HpUvK",Yh="EpXO-Z";let Kh=function(e){return e[e.Show=0]="Show",e[e.TrailerPlaying=1]="TrailerPlaying",e[e.TrailerFinished=2]="TrailerFinished",e[e.Hidden=3]="Hidden",e[e.Error=4]="Error",e}({});const Xh=(e,t)=>`${e}->${t}`,Jh=new Set([Xh(Kh.Show,Kh.TrailerPlaying),Xh(Kh.TrailerPlaying,Kh.TrailerFinished),Xh(Kh.TrailerFinished,Kh.Hidden),Xh(Kh.Hidden,Kh.Show),Xh(Kh.Show,Kh.Hidden),Xh(Kh.TrailerPlaying,Kh.Hidden),Xh(Kh.Show,Kh.Error),Xh(Kh.TrailerPlaying,Kh.Error),Xh(Kh.Error,Kh.Hidden)]);function ev(e,t){return Jh.has(Xh(e,t))?t:e}const tv=[720,1080,1440,1920],sv=({imageUrl:e,ariaLabel:t,state:s,shouldLazyLoadImage:a,titleID:n})=>{const r=[Kh.Show,Kh.TrailerFinished,Kh.Error].includes(s)?Yh:Qh,o=st()(qh,r);return i.createElement("div",{className:o,"data-testid":"backgroundImage"},i.createElement(xo.w,{alt:t,src:e,imageClassName:$h,aspectRatio:Co.SixteenByNine,sizesOptions:{defaultSrcSize:2400,srcSizes:[{"max-tablet-lowest":450},{"max-laptop-lowest":880},{"max-desktop-lowest":1400},{"max-desktop-hd-lowest":1800},{"max-desktop-uhd-lowest":2400}]},srcSetWidths:tv,baseValue:1440,shouldLazyLoad:a,debugID:n}),i.createElement("div",{className:Gh}))},av="RXvOVk",nv="lLEXNv",iv="_1Tpx9J",rv="TCZGs+",ov="_0qE1LZ",lv="xDJxMc",cv="hA8YWI",dv="RvRXeD",uv="_72MAz3",mv="_0bg6nq",pv="-VYF0N",gv="_1DUh6D",hv="cimRsP",vv="_5dRcc7",bv="Ms1fHj",Dv="_20+xJa",yv="_9qBKft",fv="nTe-n3",Ev="jvC8FO",wv="WQExo4",_v="mLMMa3";function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Tv.apply(this,arguments)}const Cv=e=>{var t,s,a,n;const{containerItem:r,highValueMessage:o}=e,l=null===(t=r.images)||void 0===t?void 0:t.titleLogo,c=null===(s=r.images)||void 0===s?void 0:s.providerLogo,d=e.state===Kh.TrailerPlaying||e.state===Kh.Hidden,u=r.categorizedGenres,m=u?[u.primaryGenre,...u.secondaryGenres||[]]:void 0;return i.createElement("div",{className:tt(av,vv,e.state===Kh.Hidden?Dv:yv)},i.createElement("div",{className:tt(ov,{[wv]:d})},(null==o?void 0:o.message)&&i.createElement(Qu,{message:o.message})),r.displayTitle&&i.createElement(nm,{title:r.displayTitle,baseValue:1e3,headingLevel:am.Mega,headingClassName:tt(uv,{[lv]:null==l?void 0:l.url,[dv]:!(null!=l&&l.url),[fv]:d,[Ev]:e.state===Kh.TrailerFinished}),titleLogoOptions:l?{url:l.url,shouldLazyLoadImage:e.shouldLazyLoadImage}:void 0,providerLogoOptions:c?{url:c.url,wrapperClassName:tt(cv,{[fv]:d,[Ev]:e.state===Kh.TrailerFinished}),alt:c.alternateText,shouldLazyLoadImage:e.shouldLazyLoadImage}:void 0,url:null===(a=r.link)||void 0===a?void 0:a.url,titleID:r.titleID}),i.createElement("span",{className:tt(mv,{[_v]:d})},r.customerReviews&&i.createElement(qu,{customerReviews:r.customerReviews}),r.maturityRatingBadge?i.createElement(Ou.AgeRating,{rating:r.maturityRatingBadge.displayText,locale:null===(n=r.maturityRatingBadge.countryCode)||void 0===n?void 0:n.toLowerCase(),logoUrl:r.maturityRatingBadge.logoUrl,title:r.maturityRatingBadge.description,ariaLabel:r.maturityRatingBadge.description,className:rv}):r.contentMaturityRating&&i.createElement(Gu,Tv({},r.contentMaturityRating,{className:rv})),m&&i.createElement("ol",{className:pv},m.slice(0,3).map((e=>i.createElement("li",{key:e},e))))),r.synopsis&&i.createElement(Xu,{synopsis:r.synopsis,className:tt(gv,{[_v]:d})}))},xv=e=>i.createElement("div",{className:nv,"data-testid":"title-details"},i.createElement(Cv,e),i.createElement("div",{className:tt(hv)},i.createElement("div",{className:tt(bv,e.state===Kh.Hidden?Dv:yv)},i.createElement(ln.nI,Tv({className:iv},e.focusMessage)),i.createElement(Ig,{playbackAction:e.playbackAction,titleId:e.containerItem.titleID,link:e.containerItem.link,promotedAcquisitionGroup:e.promotedAcquisitionGroup,carouselRefTag:e.containerItem.refMarker})))),Iv="OhPFdi",Nv="ervlKf",Pv="_8b1OaE",kv="wJ8-iy",Sv="NSnTtP",Vv="HDvWa4",Wv="dhiDpf",Av="q2Vjv3",Rv="hEaNw+",Lv="JyV6ce",Bv="Yq5lwT",Mv="UHv3jW",Ov="ZMRR6G",jv="_0s-2BE",Fv={numberWrapper:"ZkG5T5",svgNumber0:"ukoo6j",svgNumber1:"Gl+vBx",svgNumber2:"fGf4ej",svgNumber3:"aIIX2v",svgNumber4:"+WkHxJ",svgNumber5:"DZG0Bd",svgNumber6:"M3TwRJ",svgNumber7:"YO2sFH",svgNumber8:"perE98",svgNumber9:"uTXXpm",unselected:"wd1fAu",selected:"mG+ov4",nonDesktopNumber:"_6AsT3F",card:"DQJcsT",wrapper:"jG2zso",packshotWrapper:"aC2GcO"},Hv=e=>{const{isDesktopDeviceVariant:t}=i.useContext(sc.z1);return i.createElement("article",{className:Fv.card},i.createElement("button",{className:Fv.wrapper,onClick:t=>e.onClick(t,e.index)},i.createElement("div",{className:st()(Fv.numberWrapper)},i.createElement("span",{className:st()(Fv[`svgNumber${e.index}`],e.isSelected?Fv.selected:Fv.unselected,{[Fv.nonDesktopNumber]:!t})})),i.createElement("span",{className:Fv.packshotWrapper},i.createElement(vp,{card:e,isVisible:!0,isCircle:!1,index:e.index,onWrapperElementChange:e.onWrapperElementChange}))))},Uv="_9WNtgt",Zv="UIMET9",zv="_4RAjpL",qv="Cd0vqs",$v="P20r-D",Gv="rHLkWy",Qv=({title:e,offerType:t,icon:s})=>{const a=(e=>{if(!e)return Gv;switch(e){case"SVOD":return qv;case"TVOD":case"Subscription":return $v;default:return Gv}})(t);return i.createElement("div",{className:Uv},i.createElement(gs.Text,{string:e,className:tt(zv,a),testID:"offer-type-header-title"}),s&&i.createElement("span",{className:tt(Zv,a)},s))};var Yv=s("./node_modules/@amzn/dvui/dist/Icons/Top10.js"),Kv=s.n(Yv);function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Xv.apply(this,arguments)}const Jv=()=>{var e,t,s,a,n,r,l,c;const[d,u]=i.useState(0),[m,p]=i.useState(!1),[g,h]=i.useReducer(ev,Kh.Show),[v,b]=i.useState(!1),[D,y]=i.useState(null),[f,E]=i.useState(kc.Init),w=i.useRef(),_=i.useRef(),T=i.useRef(null),C=i.useRef(null),x=i.useRef(!1),I=i.useRef(!1),{actions:N,container:P,enrichments:k,isTrailerAutoplayEnabled:S}=i.useContext(iw),{isPageVisible:V,pageWidth:W,theme:A,shouldUseReducedMotion:R,isDesktopDeviceVariant:L,isPlayerVisible:B}=i.useContext(sc.z1),{logger:M}=(0,o.L1)(),[O,j]=i.useState(!0);i.useEffect((()=>{j(v&&V)}),[v,V]);const F=P.entities[d].titleID||"",H=null==k?void 0:k[F],U=null==H?void 0:H.prerolls,Z=null===(e=P.entities)||void 0===e?void 0:e[d],z=null==P||null===(t=P.entities)||void 0===t?void 0:t.length,q=(e,t)=>{!x.current&&L&&(e.preventDefault(),t!==d&&(clearTimeout(w.current),$(t)))},$=e=>{h(Kh.Hidden),_.current=window.setTimeout((()=>{u(e),h(Kh.Show)}),300)},G=i.useCallback((()=>{d===z-1?(clearTimeout(w.current),p(!1),$(0)):$(d+1)}),[d]),Q=i.useCallback((e=>{e&&g===Kh.Show?h(Kh.TrailerPlaying):!e&&g===Kh.TrailerPlaying&&O?h(Kh.TrailerFinished):f===kc.Error&&h(Kh.Error)}),[g,f,O]);i.useEffect((()=>{h(B?Kh.Hidden:Kh.Show)}),[B]),i.useEffect((()=>{I.current=lp.isLargerThan(op.DESKTOP_HD),x.current=lp.isSmallerThan(op.LAPTOP)}),[W]),i.useEffect((()=>{[Kh.TrailerFinished,Kh.Error].includes(g)&&m&&(w.current=window.setTimeout((()=>{G()}),g===Kh.Error?3e3:1e3))}),[g]),i.useEffect((()=>{m&&k&&Object.keys(k).length&&O?U||(w.current=window.setTimeout((()=>{G()}),5e3)):clearTimeout(w.current)}),[d,U,m,O]),i.useEffect((()=>{const e=null==P?void 0:P.entities.filter((e=>e.titleID)).map((e=>e.titleID));e.length&&(N.getEnrichments(e),p(!0))}),[]),i.useEffect((()=>{(R||B)&&clearTimeout(w.current),p(!R&&!B)}),[R,B]);const Y=i.useCallback((([{isIntersecting:e,intersectionRatio:t}])=>{b(e&&t>=.7)}),[]);(0,oc.S)({enabled:!0,target:T,onIntersect:Y,threshold:.7}),i.useEffect((()=>{O||g!==Kh.TrailerPlaying&&g!==Kh.TrailerFinished?h(Kh.Show):h(Kh.Hidden)}),[O]);i.useEffect((()=>{var e;const t=d,s=lp.isLargerThan(op.DESKTOP_HD)?4:3,a=Math.floor(t/s)*s+1;null===(e=C.current)||void 0===e||e.scrollToCardFirstVisible(a)}),[d]);const K=i.useCallback(((e,t,s)=>i.createElement(Hv,Xv({index:s,isSelected:d===s,onClick:q,onWrapperElementChange:y,isVisible:t},e))),[d]),X=()=>{D&&zc.F.logManualImpression(D,"Select")},J=g===Kh.TrailerPlaying,ee=J?Rv:Lv,{index:te,consumingWidgetType:se,container:{containerType:ae}}=i.useContext(iw),{containerVisibility:ne}=i.useContext(sc.z1),ie=((null==ne?void 0:ne.min)||0)-2<te&&te<((null==ne?void 0:ne.max)||0)+2,re=pp(se,ae,te,-1),oe=null!==(s=null==H?void 0:H.entitlementCues)&&void 0!==s?s:Z.entitlementCues,le=null==Z||null===(a=Z.images)||void 0===a||null===(n=a.hero)||void 0===n?void 0:n.url;return i.useEffect((()=>{le||(M.count("MissingImageChartsBackgroundImage",1,!1),M.warn(`Missing hero image in ChartsBackgroundImage for title ${null==Z?void 0:Z.titleID}`))}),[]),i.createElement("section",{"data-testid":"charts-container",className:Iv},P&&P.title&&i.createElement(Qv,{title:P.title,offerType:null===(r=P.entitlementCues)||void 0===r?void 0:r.offerType,icon:i.createElement(Kv(),null)}),i.createElement("div",{className:tt(Sv,{[Vv]:L}),ref:T,"data-testid":"charts-content"},L&&i.createElement(i.Fragment,null,le&&i.createElement(sv,{imageUrl:le,ariaLabel:null==Z?void 0:Z.title,state:g,shouldLazyLoadImage:re,titleID:null==Z?void 0:Z.titleID}),!J&&i.createElement("a",{href:null==Z||null===(l=Z.link)||void 0===l?void 0:l.url,className:jv,"data-testid":"image-link",onClick:X},null==Z?void 0:Z.displayTitle),U&&g!==Kh.TrailerFinished&&!x.current&&S&&O&&!B&&i.createElement(Bc,{key:F,className:tt(Wv,ee),canPlay:!0,delay:2e3,playback:Lc.Restart,prerolls:U,playing:Q,placement:Pc.H.ChartsContainer,playerIsActive:!1,link:J?null==Z||null===(c=Z.link)||void 0===c?void 0:c.url:void 0,draperParentListeners:{onClick:X},refMarker:null==Z?void 0:Z.refMarker,titleID:null==Z?void 0:Z.titleID,onStateChange:E}),"Store"===A&&ie&&i.createElement("div",{className:Ov,"data-testid":"charts-store-glow"})),i.createElement("div",{className:tt(Av,ee)}),i.createElement("div",{className:tt({[Nv]:L})},L&&i.createElement("div",{className:tt(kv,Pv),"data-testid":"charts-grid"},i.createElement(xv,{containerItem:Z,playbackAction:np(Z,H),highValueMessage:null==oe?void 0:oe.highValueMessage,focusMessage:null==oe?void 0:oe.focusMessage,promotedAcquisitionGroup:null==H?void 0:H.promotedAcquisitionGroup,state:g,shouldLazyLoadImage:re})),i.createElement(wc,{cards:P.entities,wrapperClassName:Bv,navigation:Dc.Framed,className:Mv,renderCard:K,onNavigate:(e,t)=>{p(!1);const s=t.min;if(e===Hl.Forward)return 1;const a=I.current?4:3;return I.current||8!==s?I.current&&7===s?-2:-a:-1},ref:C,scrollType:yc.FirstVisible,testID:"charts-carousel"}))))},eb="2 / 3",tb="16 / 9",sb="data-active-card",ab="z6Be-S",nb="_9ZO7CZ",ib="NRrJ0c",rb="KRgchP",ob="rP-Fu8",lb="UcQ6j5",cb="_75e8mi",db="d8MkGP",ub="btKtrY",mb="YK5FqF",pb="RGWdWq";function gb(){return gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},gb.apply(this,arguments)}const hb=[720,1080,1440,1920],vb=({imageUrl:e,children:t,titleID:s,...a})=>{const[n,r]=i.useState(void 0),o=i.useMemo((()=>{const e={};return n&&(e.backgroundImage=`url(${n})`),e}),[n]);return i.createElement("div",gb({style:o},a,{"data-testid":"expanded-background-art"}),e&&i.createElement(xo.w,{src:e,wrapperClassName:mb,aspectRatio:Co.SixteenByNine,parentListeners:{onLoad:e=>r(e)},sizesOptions:{defaultSrcSize:1150,srcSizes:[{"max-tablet-lowest":550},{"max-laptop-lowest":700},{"max-desktop-lowest":830},{"max-desktop-hd-lowest":830},{"max-desktop-uhd-lowest":1150}]},srcSetWidths:hb,baseValue:1440,shouldLazyLoad:!1,debugID:s}),t)},bb="Yo4IxL",Db="fNAExp",yb="gdaliH",fb="_4SWWvD",Eb="tnjXrr",wb="h-x9gl",_b="a6K0J3";function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Tb.apply(this,arguments)}const Cb=({entitlement:e,meta:t})=>{var s;return i.createElement("footer",{className:bb},e&&i.createElement(ln.nI,{message:e.message,icon:e.icon,className:wb,labelClassName:_b}),t.customerReviews&&i.createElement(qu,{customerReviews:t.customerReviews}),i.createElement("div",{className:Db},t.liveInfo&&i.createElement(i.Fragment,null,i.createElement(sp,{liveInfo:t.liveInfo,testID:"meta-liveliness",className:yb}),i.createElement(Qr.Z.MetaDataBadge,{className:fb,"data-testid":"meta-date-time"},t.liveInfo.timeBadge)),t.maturityRatingBadge?i.createElement(Ou.AgeRating,{rating:t.maturityRatingBadge.displayText,locale:null===(s=t.maturityRatingBadge.countryCode)||void 0===s?void 0:s.toLowerCase(),logoUrl:t.maturityRatingBadge.logoUrl,title:t.maturityRatingBadge.description,ariaLabel:t.maturityRatingBadge.description,className:Eb}):t.contentMaturityRating&&i.createElement(Gu,Tb({},t.contentMaturityRating,{className:Eb}))))},xb="zDUKPq",Ib="SjBBuH",Nb="tmvccl",Pb="K0VLBB",kb=({title:e,link:t,titleId:s,titleLogoUrl:a,entitlement:n,playback:r,playbackGroup:o,promotedAcquisitionGroup:l,meta:c,carouselRefTag:d,shouldLazyLoadImage:u})=>{const m=e?i.createElement(nm,{title:e,titleLogoOptions:a?{url:a,imageClassName:Pb,shouldLazyLoadImage:u}:void 0,headingClassName:Nb,url:null==t?void 0:t.url,titleID:s}):null,p={eventTitle:e,triggerLocation:"SuperCarousel",liveInfo:c.liveInfo};return i.createElement("section",{className:tt(ub),"data-testid":"card-controls"},m,i.createElement("span",null,i.createElement(Ig,{titleId:s,link:t,playbackAction:r,playbackGroup:o,promotedAcquisitionGroup:l,className:r?xb:Ib,isInverted:!0,streamSelectorProps:p,carouselRefTag:d})),i.createElement(Cb,{entitlement:n,meta:c}))};var Sb=s("./node_modules/@amzn/dvui/dist/Icons/Smile.js");const Vb="-KE+LZ",Wb="RC5WUV",Ab="AAcaWn",Rb="GdzN4h",Lb="+imlHX",Bb=[375,500,750,900],Mb=({className:e,image:t,title:s,link:a,defaultCursor:n,onClick:r,liveEventMetadata:o,shouldLazyLoadImage:l,titleID:c})=>{const[d,u]=i.useReducer((()=>!1),!0),m=t=>{const o=null==a?void 0:a.url;return o?i.createElement("a",{className:st()(Vb,e,{[Ab]:n}),href:o,"aria-label":s,onClick:r},t):i.createElement("div",{className:st()(Vb,e)},t)};let p,g;return o&&(p=i.createElement(Km,{dateTime:o.timeBadge,isSuperCarousel:!0}),g=i.createElement(sp,{liveInfo:o,className:Lb})),m(t?i.createElement("div",{className:Wb},i.createElement(xo.w,{src:t,alt:s,aspectRatio:Co.TwoByThree,imageClassName:Rb,parentListeners:{onError:u},sizesOptions:{defaultSrcSize:430,srcSizes:[{"max-tablet-lowest":200},{"max-laptop-lowest":260},{"max-desktop-lowest":310},{"max-desktop-hd-lowest":310},{"max-desktop-uhd-lowest":430}]},srcSetWidths:Bb,baseValue:750,shouldLazyLoad:l,debugID:c}),p,g):s||!d?i.createElement("div",null,i.createElement(Qr.Z.SubHeader,null,s),p,g):i.createElement(Sb.Smile,null))},Ob=Zb(tb),jb=Zb(eb),Fb={element:void 0,prevElement:void 0,elementIndex:-1,prevElementIndex:-1};function Hb(e,t){return{prevElement:e.element,prevElementIndex:e.elementIndex,element:t?t.element:void 0,elementIndex:t?t.index:-1}}function Ub(e,t,s){if(e.element!==e.prevElement&&e.element){const{cardStartCoordinate:a,height:n}=function(e,t,s){const{height:a,left:n,right:i}=e.getBoundingClientRect(),{left:r,right:o}=t.getBoundingClientRect();if(s)return{cardStartCoordinate:window.innerWidth-i-(window.innerWidth-o),height:a};return{cardStartCoordinate:n-r,height:a}}(e.element,t,s),i=!!e.prevElement&&e.prevElementIndex<e.elementIndex,r=n*jb,o=n*Ob,l=t.clientWidth,c=o-r,d=i?a-c:a;let u=0;const m=(0,Xl.My)("--dv-carousel-column-margin");return d<m?u=d-m:d+o+m>l&&(u=d+o+m-l),s?-u:u}}function Zb(e){const t=e.split("/");return t[0]&&t[1]?parseInt(t[0])/parseInt(t[1]):0}const zb=i.createContext({});zb.displayName="ScrollAnimationContext";const qb=(0,r.s6)((e=>{const t=i.useRef(),s=i.useRef(),a=i.useRef(),[n,r]=i.useReducer(Hb,Fb),{isSsmOpen:o}=i.useContext(mu),l=e=>{clearTimeout(t.current),t.current=window.setTimeout((()=>{r(e)}),250)},[c,d]=i.useState(void 0),u=i.useContext(zl),{isCarouselHovered:m,isHoveringNavArrows:p,isCarouselFocused:g}=i.useContext(cc),h=i.useCallback((e=>{u.connected&&u.scrollContainer.scrollBy({left:e})}),[u.connected&&u.scrollContainer]),v=i.useCallback((e=>{u.connected&&u.scrollContainer.scrollTo({left:e})}),[u.connected&&u.scrollContainer]),b=i.useCallback((()=>{if(function(e){if(e.prevElement){const t=e.prevElement;t&&t.removeAttribute(sb)}if(e.element){const t=e.element;t&&t.setAttribute(sb,"true")}}(n),clearTimeout(s.current),u.connected){var t,a;const i=null!==(t=null===(a=e.render)||void 0===a?void 0:a.isRTL)&&void 0!==t&&t,r=Ub(n,u.scrollContainer,i);r&&(s.current=window.setTimeout((()=>{h(r)}),i?300:0))}}),[n]),D=i.useCallback((()=>{clearTimeout(a.current)}),[]),y=i.useCallback((()=>{var i,r;clearTimeout(t.current),clearTimeout(s.current);const o=null!==(i=null===(r=e.render)||void 0===r?void 0:r.isRTL)&&void 0!==i&&i,u=function(e,t,s){let a,n;if(t?(a=t.element,n=t.index):(a=e.element,n=e.elementIndex),!a)return null;const{height:i}=a.getBoundingClientRect(),r=i*jb,o=(0,Xl.My)("--dv-supercarousel-card-number"),l=(r*o+(0,Xl.My)("--dv-carousel-column-gap")*o)*Math.floor(n/o);return s?-l:l}(n,c,o);"number"==typeof u&&(v(u),o&&(a.current=window.setTimeout((()=>{v(u)}),550))),l(void 0),d(void 0)}),[n,c]),f=i.useCallback((()=>{c&&(l(c),d(void 0))}),[c]);i.useEffect((()=>{b()}),[n.element]),i.useEffect((()=>{o||(!1===m||!0===p?y():D())}),[m,p,o]),i.useEffect((()=>{u.connected&&u.isScrolling||f()}),[u.connected&&u.isScrolling]);const E=i.useCallback(((e,t)=>{u.connected&&u.isScrolling?d({element:e.closest("li"),index:t}):l({element:e.closest("li"),index:t})}),[u.connected&&u.isScrolling]),w=i.useMemo((()=>({openElementIndex:n.elementIndex,actions:{onMouseEnter:E}})),[n.elementIndex,E]);return i.createElement("div",{className:tt({[rb]:m||g})},i.createElement(zb.Provider,{value:w},e.children))}));function $b(){return $b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},$b.apply(this,arguments)}const Gb=i.memo((({contentMaturityRating:e,customerReviews:t,entitlementCues:s,hasSubtitles:a,images:n,releaseYear:r,link:l,displayTitle:c,isVisibleInCarousel:d,isOnlyPoster:u,titleID:m,refMarker:p,widgetType:g,index:h,context:v,liveInfo:b,playbackActions:D,itemAnalytics:y,maturityRatingBadge:f})=>{var E,w,_;const[T,C]=i.useState(!1),[x,I]=i.useState(!1),N=i.useRef(null),[P,k]=i.useState(!1),S=i.useRef(),[V,W]=i.useState(!1),{enrichments:A,isTrailerAutoplayEnabled:R,container:{impressionData:L,containerType:B},index:M,consumingWidgetType:O}=i.useContext(iw),{openElementIndex:j,actions:F}=i.useContext(zb),{logger:H}=(0,o.L1)(),U=pp(O,B,M,h),Z=i.useCallback((e=>{const t=null==N?void 0:N.current;if(t||e===t)t&&!e&&zc.F.unobserve(t);else{var s;const t=null==n||null===(s=n.poster2x3)||void 0===s?void 0:s.url;L&&t&&g&&p&&e&&zc.F.observe(e,{collectionImpressionData:L,titleID:m,imageURL:t,refMarker:p,widgetType:g,carouselPosition:M,itemPosition:h,itemAnalytics:y},v)}N.current=e}),[]);i.useEffect((()=>()=>{window.clearTimeout(S.current)}),[]),i.useEffect((()=>{P?(window.clearTimeout(S.current),W(!0)):j!==h&&(window.clearTimeout(S.current),S.current=window.setTimeout((()=>{W(!1)}),2e3))}),[P,j,h]),i.useEffect((()=>{j===h&&null!=N&&N.current&&zc.F.logManualImpression(null==N?void 0:N.current,"Highlight")}),[j,h]),i.useEffect((()=>{if(u)return;P&&d?(N.current&&F.onMouseEnter(N.current,h),C(!0)):C(!1)}),[P,d]);const z=i.useCallback((()=>{k(!0)}),[]),q=i.useCallback((()=>{k(!1)}),[]),$=()=>{null!=N&&N.current&&zc.F.logManualImpression(null==N?void 0:N.current,"Select")},G=null==A?void 0:A[null!=m?m:""];let Q;null!=G&&G.prerolls&&R&&(Q=i.createElement(Bc,{className:db,canPlay:T,prerolls:null==G?void 0:G.prerolls,delay:2e3,playback:Lc.Restart,playerIsActive:!0,link:x?null==l?void 0:l.url:void 0,playing:I,draperParentListeners:{onClick:$},refMarker:p,titleID:m}));const Y=ip(D,G),K=rp(G),X=G?G.entitlementCues:s,J=i.useMemo((()=>({contentMaturityRating:e,customerReviews:t,releaseYear:r,hasSubtitles:a,liveInfo:b,maturityRatingBadge:f})),[]),ee=null==n||null===(E=n.poster2x3)||void 0===E?void 0:E.url;i.useEffect((()=>{ee||(H.count("MissingImageSuperCarouselCard",1,!1),H.warn(`Missing poster2x3 image in SuperCarouselCard for title ${m}`))}),[]);const te={className:lb,image:ee,title:c,link:!u&&V?void 0:l,liveEventMetadata:b,onClick:$,shouldLazyLoadImage:U,titleID:m};return i.createElement("article",{className:tt(ab,ib),"data-testid":"super-carousel-card",onMouseEnter:z,onMouseLeave:q,ref:Z},u?i.createElement(Mb,te):i.createElement(vb,{className:cb,imageUrl:null==n||null===(w=n.hero)||void 0===w?void 0:w.url,titleID:m},V&&i.createElement(i.Fragment,null,Q,(null==l?void 0:l.url)&&!x&&i.createElement("a",{href:null==l?void 0:l.url,className:tt(pb),onClick:$,"data-testid":"image-link"},c),i.createElement(kb,{title:c,titleId:m,link:l,titleLogoUrl:null==n||null===(_=n.titleLogo)||void 0===_?void 0:_.url,entitlement:null==X?void 0:X.focusMessage,playback:Y,playbackGroup:K,promotedAcquisitionGroup:null==G?void 0:G.promotedAcquisitionGroup,meta:J,carouselRefTag:p,shouldLazyLoadImage:U})),i.createElement(Mb,$b({},te,{defaultCursor:!0}))))})),Qb=(0,r.s6)(Gb);function Yb(){return Yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Yb.apply(this,arguments)}const Kb=2,Xb=2,Jb=3,eD=4,tD=5,sD=()=>{const{actions:e,container:t}=i.useContext(iw),s=t.entities,{isHoverEnabled:a,pageWidth:n,hasPageMounted:r,contingencies:o}=i.useContext(sc.z1),[l,c]=i.useState(!0),d=i.useCallback((()=>{let e=tD;return lp.is(op.PHONE)?e=Kb:window.innerWidth<=680?e=Xb:lp.is(op.TABLET)?e=Jb:lp.is(op.LAPTOP)&&(e=eD),e}),[]),[u,m]=i.useState(r?d():tD);i.useEffect((()=>{m(d())}),[]),i.useEffect((()=>{c(!a||lp.isSmallerThan(op.LAPTOP)||Boolean(null==o?void 0:o.disableHover)||Boolean(null==t?void 0:t.notExpandable)),m(d())}),[a,n]);const p=i.useCallback(((e,t,s)=>i.createElement(Qb,Yb({isVisibleInCarousel:t},e,{canPlay:t,index:s,isOnlyPoster:l}))),[l]),g=i.useCallback((t=>{if(!a)return;const n=s.filter(((e,s)=>t.has(s+1)));if(n.length>0){const t=n.filter((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID})).map((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID}));e.getEnrichments(t)}}),[s,e]),h=null==t?void 0:t.entitlementCues;return i.createElement(ql,null,i.createElement(wc,{cards:s,wrapperClassName:nb,navigation:Dc.Framed,isHalfSizedArrowFrame:!0,className:ob,header:t.title&&i.createElement(Sp,{title:t.title,entitlementType:null==h?void 0:h.entitledCarousel,facetText:t.facetText,offerType:null==h?void 0:h.offerType}),renderCard:p,cardsVisibilityThreshold:.3,customCarouselContainer:qb,performantRender:{maxCardNum:u,onFirstTimeCardRender:g},testID:"super-carousel"}))},aD="d+y-VB",nD="PFB4Sx",iD="mS+1wI",rD="uAuoES",oD="_08tkIy",lD=[1080,2160,2880,3840],cD=[{"max-tablet-lowest":450},{"max-laptop-lowest":880},{"max-desktop-lowest":1400},{"max-desktop-hd-lowest":1800},{"max-desktop-uhd-lowest":2400}],dD=({backgroundImage:e,title:t,entitledCarousel:s,theme:a,shouldLazyLoadImage:n})=>{const r="NotEntitled"===s,o="Store"===a;return i.createElement("div",{className:aD,"data-testid":"cover-background-root"},r&&!o&&i.createElement("div",{className:oD,"data-testid":"cover-mobile-gradient"}),(null==e?void 0:e.url)&&i.createElement(xo.w,{alt:t,src:e.url,imageClassName:nD,aspectRatio:Co.ThirtyTwoByFifteen,sizesOptions:{defaultSrcSize:2400,srcSizes:cD},srcSetWidths:lD,baseValue:2880,shouldLazyLoad:n,debugID:t}),i.createElement("div",{className:iD,"data-testid":"cover-bottom-gradient"}),r&&!o&&i.createElement("div",{className:rD,"data-testid":"cover-bottom-start-gradient"}))},uD="_0rM3o9",mD="VrD8pe",pD="bA1o9y",gD="uoTA0G",hD="g73j2s",vD="H0BsV3",bD="JNvLP2",DD="_1sT8of",yD="Q4fi+w",fD="S8BxNl",ED=[690,1035,1380,2070],wD=({title:e,description:t,shouldHideTitleOnSmallerDevices:s})=>i.createElement("div",{className:gD},e&&i.createElement("h2",{className:tt(hD,{[vD]:s})},e),t&&i.createElement("p",{className:bD},t)),_D=({url:e,label:t,otherClassName:s})=>i.createElement("div",{className:s},i.createElement(Yr.z,{href:e,label:t,isInverted:!0,testID:"action"})),TD=({entities:e,title:t,description:s,logoImage:a,action:n,baseContainerActions:r,enrichments:o,shouldLazyLoadImage:l})=>i.createElement("div",{className:uD,"data-testid":"cover-content-root"},i.createElement("div",{className:mD},(null==a?void 0:a.url)&&i.createElement(xo.w,{alt:a.alternateText,src:a.url,wrapperClassName:pD,aspectRatio:Co.ThreeHundredFortyFiveByFiftySix,sizesOptions:{defaultSrcSize:920,srcSizes:[{"max-tablet-lowest":350},{"max-laptop-lowest":380},{"max-desktop-lowest":560},{"max-desktop-hd-lowest":650},{"max-desktop-uhd-lowest":920}]},srcSetWidths:ED,baseValue:1380,shouldLazyLoad:l,debugID:t}),(t||s)&&i.createElement(wD,{title:t,description:s,shouldHideTitleOnSmallerDevices:Boolean(t&&s&&(null==a?void 0:a.url))}),(null==n?void 0:n.url)&&(null==n?void 0:n.label)&&i.createElement(_D,{url:n.url,label:n.label,otherClassName:DD})),i.createElement(Up,{entities:e,actions:r,enrichments:o,otherWrapperClassName:fD}),(null==n?void 0:n.url)&&(null==n?void 0:n.label)&&i.createElement(_D,{url:n.url,label:n.label,otherClassName:yD})),CD="boWXU+",xD="vVQ5BU",ID="PEOk1j",ND=()=>{const{container:e,actions:t,enrichments:s,consumingWidgetType:a,index:n}=i.useContext(iw),{theme:r,containerVisibility:o}=i.useContext(sc.z1),{entities:l,entitlementCues:c,backgroundImage:d,title:u,description:m,logoImage:p,action:g,containerType:h}=e,v=null==c?void 0:c.entitledCarousel,b="Store"===r,D=((null==o?void 0:o.min)||0)-2<n&&n<((null==o?void 0:o.max)||0)+2,y=pp(a,h,n,-1);return i.createElement("section",{className:tt(xD,CD),"data-testid":"cover-container"},i.createElement(dD,{backgroundImage:d,title:u,entitledCarousel:v,theme:r,shouldLazyLoadImage:y}),i.createElement(TD,{title:u,description:m,logoImage:p,action:g,entities:l,baseContainerActions:t,enrichments:s,shouldLazyLoadImage:y}),b&&D&&i.createElement("div",{className:ID,"data-testid":"cover-page-store-glow"}))},PD="_8feUpB",kD="oMPh6r",SD="O80U9r",VD="qLBcsq",WD="v27j9y",AD="glGxL6",RD="+pD1ii",LD="_845O7N",BD="oXTJJt",MD=1.5,OD=2,jD=3,FD=4,HD=5,UD=()=>{const{pageWidth:e,hasPageMounted:t}=i.useContext(sc.z1),{container:s,consumingWidgetType:a}=i.useContext(iw),{title:n,entities:r,firstEntityGroupSize:o,unentitledText:l,seeMoreLink:c}=s,d=i.useRef(null),u=i.useRef(Object.values(r).some((e=>{var t,s;return!(null===(t=e.entitlementCues)||void 0===t||null===(s=t.glanceMessage)||void 0===s||!s.message)}))),m="MyStuff"===a,p=(null!=o?o:0)-1,g=null!=o?o:0,h=g>0,v=null==s?void 0:s.entitlementCues,b=null==v?void 0:v.offerType,D={"--first-unentitled-card-index":g},y=i.useCallback((()=>{let e=HD;return lp.is(op.PHONE)?e=MD:window.innerWidth<=680?e=OD:lp.is(op.TABLET)?e=jD:lp.is(op.LAPTOP)&&(e=FD),e}),[]),[f,E]=i.useState(t?y():HD);i.useEffect((()=>{E(y())}),[]),i.useEffect((()=>{E(y())}),[e]);return i.createElement(wc,{className:Kl,navigation:Dc.Framed,cards:r,renderContainer:e=>i.createElement("div",{className:BD,ref:d,style:{}},i.createElement("div",{className:PD,style:D},i.createElement("section",{className:SD},n&&h&&i.createElement("div",{"data-testid":"carousel-header",className:tt({[RD]:!m,[WD]:m})},i.createElement(Sp,{title:n,className:LD,offerType:b},m&&c&&i.createElement(Lp,{url:c.url,label:c.label}))),!m&&l&&i.createElement("div",{"data-testid":"carousel-upsell-header",className:VD},i.createElement(Sp,{title:l,entitlementType:"NotEntitled",offerType:b},c&&i.createElement(Lp,{url:c.url,label:c.label,className:AD})))),e)),renderCard:(e,t,s)=>{const a=s<g;return i.createElement(vp,{card:e,isVisible:t,isCircle:a,index:s,wrapperClassName:tt({[kD]:!m&&s===p}),renderGlanceSpaceIfNoGlanceMessage:u.current})},overrideScrollContainerRef:d,cardsVisibilityThreshold:1,testID:"nodes-carousel",performantRender:{maxCardNum:f,startIndexForVirtualisation:g+1}})};UD.displayName="Nodes";const ZD=UD,zD="xMo82q",qD="_20Qx4g",$D="Qpmg1P",GD="_9pxNG4",QD="vDmXS1",YD="wH7mLc",KD="xkvvgo",XD="Io0kUZ",JD="mMpZEW",ey=(0,o.ty)((({titleID:e,text:t,dismissModal:s,buttonStyle:a,textStyle:n,testID:r="watchlist-toggle-dropdown-action",logger:o})=>{const{actions:{onWatchlistToggle:l}}=i.useContext(iw);return i.createElement(Cu,{testId:r,requireModalConfirmation:!1,text:t,icon:i.createElement(Eu(),null),buttonStyle:a,buttonTestId:"watchlist-toggle",textStyle:n,isInDropdown:!0,onPrimaryAction:t=>{l(t,e,void 0).then((()=>{s()})).catch((e=>{o.error("Failed to toggle watchlist",e)}))}})})),ty="vWki92",sy="QLcL+3",ay="wBtWAb",ny="yMBuvX",iy="BkVXA+",ry="Ve1A8x",oy=(0,o.ty)((({disabled:e,rootElement:t,card:s,logger:a})=>{const{consumingWidgetType:n}=i.useContext(iw),[r,o]=i.useState(!1),l=i.useCallback((e=>{null==e||e.preventDefault(),o(!0)}),[]),c=i.useCallback((e=>{null==e||e.preventDefault(),o(!1)}),[]),{overflowActions:d,overflowMenuHeader:u}=ly({card:s,dismissModal:c,consumingWidgetType:n,logger:a});return 0===d.length?null:i.createElement("div",{"data-testid":"actions-overflow-menu",className:ty},i.createElement(Ns(),{testID:"actions-menu-button",className:sy,icon:i.createElement(kd(),{height:oa.$3,width:oa.rM}),onClick:l,disabled:e}),!e&&r&&i.createElement(xa.u,{className:ay,testID:"actions-menu-modal",isVisible:r,onRequestClose:c,disableFooter:!0,titleText:u,body:i.createElement("ul",{className:ny},d.filter((e=>null!==e)).map(((e,t)=>i.createElement("li",{key:`action-${t}`,"data-testid":`action-menu-item-${t}`,className:"action-menu-item"},e)))),rootElement:t}))})),ly=({card:{titleID:e,overflowMenu:t},consumingWidgetType:s,dismissModal:a,logger:n})=>"MyStuff"!==s||"string"!=typeof e||void 0===t?{overflowActions:[],overflowMenuHeader:void 0}:{overflowMenuHeader:t.title,overflowActions:t.items.map((t=>{switch(t.itemType){case au.Np.LibraryAction:return Iu(e,t.action,ry,!0,iy,a);case au.Np.WatchlistAction:const s=t;return i.createElement(ey,{titleID:e,text:s.text,dismissModal:a,buttonStyle:iy,textStyle:ry});default:return n.error(`Unhandled menu item type '${t.itemType}'`),null}}))},cy=(0,r.s6)((({card:e,enrichment:t,index:s,context:a,modalRootElement:n})=>{var r,l,c,d,u,m,p;const g=i.useRef(null),{consumingWidgetType:h,container:{impressionData:v,containerType:b},index:D,removedItemsMap:y}=i.useContext(iw),{logger:f}=(0,o.L1)(),E=pp(h,b,D,s),{images:w,displayTitle:_,displayTitle:T,widgetType:C,refMarker:x,titleID:I}=e,N=void 0!==e.titleID?null==y?void 0:y[e.titleID]:void 0,P=void 0!==N,k=null==N?void 0:N.removedOverlayMessage,S=null!==(r=null==N?void 0:N.canUndoRemoval)&&void 0!==r&&r,V=null==w||null===(l=w.cover)||void 0===l?void 0:l.url;i.useEffect((()=>{V||(f.count("MissingImageRanOverCard",1,!1),f.warn(`Missing cover image in RanOverCard for title ${I}`))}),[]);const W=null!==(c=null==t?void 0:t.entitlementCues)&&void 0!==c?c:e.entitlementCues,A=i.useCallback((t=>{const n=null==g?void 0:g.current;n||t===n?n&&!t&&zc.F.unobserve(n):v&&V&&C&&x&&t&&zc.F.observe(t,{collectionImpressionData:v,titleID:I,imageURL:V,refMarker:x,widgetType:C,carouselPosition:D,itemPosition:s,itemAnalytics:e.itemAnalytics},a),g.current=t}),[]);return i.createElement(i.Fragment,null,i.createElement("a",{ref:A,href:null==e||null===(d=e.link)||void 0===d?void 0:d.url,"aria-label":T,"data-testid":"flat-card","data-card-position":s,"data-card-title":e.title,"data-card-entity-type":e.entityType,onClick:e=>{zc.F.logManualImpression(e.currentTarget,"Select")}},i.createElement("div",{"data-testid":"ran-over-card-container",className:zD},i.createElement("div",{className:$D},!P&&i.createElement(Yc,{className:st()(qD),imageClassName:GD,imageUrl:V,alternateText:null==w||null===(u=w.cover)||void 0===u?void 0:u.alternateText,fallbackTitle:_,parentElement:g.current,refMarker:e.refMarker,titleID:e.titleID,shouldLazyLoadImage:E}),P&&k&&i.createElement(mp,{message:k,className:JD})),i.createElement("div",{className:st()(QD,{[XD]:P})},i.createElement(Qr.Z.Header,{className:YD},T),i.createElement("div",{className:KD},i.createElement(Qr.Z.Body,null,null==e?void 0:e.releaseYear),i.createElement(Qr.Z.Body,null,null==e?void 0:e.runtime)),W&&i.createElement(ln.nI,{icon:null===(m=W.glanceMessage)||void 0===m?void 0:m.icon,message:null===(p=W.glanceMessage)||void 0===p?void 0:p.message})),i.createElement(oy,{card:e,disabled:P&&!S,rootElement:n}))))})),dy="bUIMWe",uy="IouS5j",my="evYCfE",py="_9qXVlg",gy="gg1gAB",hy="zw56GT",vy="YSJgrZ",by="D6IcFw",Dy="rnNSvV",yy="kwztA9";function fy(e){switch(e){case"Bottom_Left":return st()(vy,Dy);case"Bottom_Right":return st()(vy,yy);case"Bottom_Center":return st()(vy,by);case"Top_Left":return st()(hy,Dy);case"Top_Right":return st()(hy,yy);case"Top_Center":return st()(hy,by);case"Center_Left":return st()(gy,Dy);case"Center_Right":return st()(gy,yy);default:return st()(gy,by)}}const Ey=({card:e,index:t})=>{var s,a,n;const{container:r,consumingWidgetType:o,index:l}=i.useContext(iw),c=pp(o,r.containerType,l,t),{images:d}=e,u=null==d||null===(s=d.cover)||void 0===s?void 0:s.url,m=e.displayTitle,p=null==d||null===(a=d.cover)||void 0===a?void 0:a.alternateText,g=null!=r&&r.title?"h3":"h2";return i.createElement(g,{"aria-label":m,className:dy,"data-testid":"genre-card"},i.createElement("a",{"data-card-position":t,href:null==e||null===(n=e.link)||void 0===n?void 0:n.url,"aria-label":m},i.createElement(Yc,{imageWrapperClassName:uy,imageClassName:my,imageUrl:u,alternateText:p,refMarker:e.refMarker,titleID:e.titleID,shouldLazyLoadImage:c}),m&&i.createElement("span",{className:st()(py,fy(null==e?void 0:e.overlayTextPosition))},i.createElement("span",null,m))))},wy="OKS56b",_y="K0Kf63",Ty="_9kJogN",Cy="AcFiK7",xy="_0B0vPr",Iy="NwPFrz",Ny=({children:e})=>{const[t,s]=i.useState(null),{isSsmOpen:a}=i.useContext(mu),n=e=>{a||s(e)};i.useEffect((()=>{a||s(null)}),[a]);const r=i.useMemo((()=>({connected:!0,cardIndexWithMiniDetails:t,actions:{hoverCallback:n}})),[t,a]);return i.createElement("div",{"data-testid":"grid-mini-details-controller"},i.createElement(Nm.Provider,{value:r},e))};var Py=s("./src/util/utils/math.ts");const ky={init:!1,actualRowHeights:new Map,compoundedHeight:[]};function Sy(e,t){const{entitiesLength:s,commonRowHeight:a,cardsPerRow:n,logger:i}=t.context,r=Math.ceil(s/n);if("INIT"===t.action){const e=[];for(let t=0;t<r;t++){var o;const s=null!==(o=e[t-1])&&void 0!==o?o:0;e[t]=a+s}return{...ky,init:!0,compoundedHeight:e}}if(!e.init)return i.error(`[Grid container] heightsReducer(): Should not call ${t.action} before INIT`),e;const l=[...e.compoundedHeight];if(r>l.length)for(let e=l.length;e<r;e++){var c;const t=null!==(c=l[e-1])&&void 0!==c?c:0;l[e]=a+t}if("SET"==t.action){const{rowIndex:s,height:n}=t.data;if(e.actualRowHeights=new Map(e.actualRowHeights.set(s,n)),n!==a)for(let t=s;t<r;t++){var d,u;const s=null!==(d=l[t-1])&&void 0!==d?d:0,n=null!==(u=e.actualRowHeights.get(t))&&void 0!==u?u:a;l[t]=s+n}}return e.compoundedHeight=l,e}const Vy=40,Wy=20;function Ay(e,t,s,a){var n,r,l;const{logger:c}=(0,o.L1)(),{isDesktopDeviceVariant:d,pageWidth:u}=i.useContext(sc.z1),m=d?Vy:Wy,[p,g]=i.useState(s>m),[h,v]=i.useReducer(Sy,ky),[b,D]=i.useState(0),[y,f]=i.useState(m),E=i.useRef(0),w=i.useCallback((e=>{e=Math.max(0,e);const t=s-y;e>t&&(e=Math.ceil(t/a)*a),e!==b&&D(e)}),[a,y,s,b]),_=i.useRef(0),T=i.useCallback((()=>{if(!p)return;if("undefined"==typeof window)return;if(_.current===u)return;_.current=u;const t=(0,Xl.My)("--dv-carousel-column-gap"),n=window.innerHeight,i=[],r=Math.ceil(y/a);for(let s=0;s<r;s++){const n=(l=s*a,d=void 0,null!==(d=null==(o=e)?void 0:o.children[l])&&void 0!==d?d:null);n&&i.push(n.offsetHeight+t)}var o,l,d;const m=Py.m.mostRepeated(i);if(null===m)return;const g=Math.ceil(n/m)*a;E.current=m,f(2*g),v({action:"INIT",context:{entitiesLength:s,commonRowHeight:m,cardsPerRow:a,logger:c}})}),[e,y,a,p,s,c,u]),C=i.useCallback((()=>{if(!p)return;if(!t)return;if("undefined"==typeof window)return;const e=window.scrollY,n=e-(0,Pm.q7)(t,e)-.5*window.innerHeight,i=Object.entries(h.compoundedHeight).find((([e,t])=>t>n));if(i){const[e,t]=i;w(parseInt(e)*a)}else w(s-1)}),[a,p,s,h.compoundedHeight,w,t]),x=i.useCallback((()=>{if(!p)return;const t=Math.floor(b/a),n=Math.min(b+y-1,s-1),i=Math.floor(n/a);for(let n=t;n<=i;n++){const t=n*a;if(h.actualRowHeights.has(n))continue;const i=(o=t,null==(r=e)?void 0:r.querySelector(`[data-card-position="${o}"]`)),l=(0,Xl.My)("--dv-carousel-column-gap");i&&v({action:"SET",data:{rowIndex:n,height:i.offsetHeight+l},context:{entitiesLength:s,commonRowHeight:E.current,cardsPerRow:a,logger:c}})}var r,o}),[e,y,a,p,s,h.actualRowHeights,c,b]);if(i.useEffect((()=>{T()}),[]),i.useEffect((()=>{T()}),[u]),i.useEffect((()=>{const e=(0,Wl.D)(C,10);var t;return p&&(T(),t=e,window.addEventListener("scroll",t)),()=>function(e){window.removeEventListener("scroll",e)}(e)}),[p,C]),i.useEffect((()=>{p||g(s>m)}),[s]),i.useEffect((()=>{x()}),[b,y]),i.useEffect((()=>{p&&h.init&&v({action:"NEW_ENTITIES",context:{entitiesLength:s,commonRowHeight:E.current,cardsPerRow:a,logger:c}})}),[s]),!p)return{firstCardIndex:0,lastCardIndex:s-1,topSpacing:0,bottomSpacing:0};const I=b,N=Math.floor(I/a)-1,P=null!==(n=h.compoundedHeight[N])&&void 0!==n?n:0,k=Math.min(b+y-1,s-1),S=Math.floor(k/a),V=h.compoundedHeight.length-1;return{firstCardIndex:I,lastCardIndex:k,topSpacing:P,bottomSpacing:(null!==(r=h.compoundedHeight[V])&&void 0!==r?r:0)-(null!==(l=h.compoundedHeight[S])&&void 0!==l?l:0)}}var Ry=s("./node_modules/react-intersection-observer/lib/index.js"),Ly=s("./src/shared/Explore/containers/PageContainer/VerticalPaginationController.tsx");const By="_8SdHse",My="_5aEY3d";var Oy=function(e){return e.CannotPaginate="CannotPaginate",e.CanPaginate="CanPaginate",e.CanRequestLock="CanRequestLock",e.HasLock="HasLock",e.IsPaginating="IsPaginating",e}(Oy||{});const jy=[Oy.HasLock,Oy.IsPaginating],Fy=[Oy.CanPaginate,Oy.CanRequestLock,Oy.HasLock],Hy=({onPaginateContainer:e})=>{const{index:t,hasMoreItems:s,isPaginatingContainer:a,container:n}=i.useContext(iw),{entityWithLock:r,actions:o}=i.useContext(Ly.U),[l,c]=i.useState(!1),[d,u]=i.useState(Oy.CannotPaginate);return i.useEffect((()=>{"EpgGroup"===n.containerType&&o.hideBelow(t)}),[]),i.useEffect((()=>{s||o.unhideBelow(t)}),[s]),i.useEffect((()=>{let e=Oy.CannotPaginate;const n="CONTAINER"===r.type&&r.containerIndex===t;a?e=Oy.IsPaginating:s&&(e=Oy.CanPaginate,l&&(e=Oy.CanRequestLock,n&&(e=Oy.HasLock))),u(e)}),[t,r,s,l,a,d]),i.useEffect((()=>{d===Oy.CanRequestLock?o.lock(t):jy.includes(d)||o.unlock(t),d===Oy.HasLock&&e(),Fy.includes(d)||c(!1)}),[d]),i.createElement(i.Fragment,null,a&&i.createElement("div",{className:My},i.createElement(ra(),null)),Fy.includes(d)&&i.createElement(Ry.Z,{rootMargin:"150% 0px",onChange:e=>c(!!e)},i.createElement("div",{className:By})))},Uy=()=>{var e,t,s;const{actions:a,container:n,consumingWidgetType:r,enrichments:o}=i.useContext(iw),{entities:l}=n,{isDesktopDeviceVariant:c,isTouchDevice:d}=i.useContext(sc.z1),u=i.useRef(new Set),m=i.useRef(null),p=i.useRef(null),g=i.useRef(null);let h;h="Categories"===r?"GenreCard":c?"Card":"RanOverCard";const v=i.useCallback((()=>{switch(h){case"RanOverCard":return"undefined"==typeof window||window.innerWidth>=680?2:1;case"Card":return lp.is(op.LAPTOP)?4:lp.is(op.TABLET)?3:lp.is(op.PHONE)?1:5;case"GenreCard":return lp.is(op.LAPTOP)?4:lp.is(op.TABLET)?3:lp.is(op.PHONE)?2:5}}),[h]);let b;switch(h){case"Card":b=Ty;break;case"RanOverCard":b=Cy;break;case"GenreCard":b=xy}const D="Card"===h?Ny:i.Fragment,{firstCardIndex:y,lastCardIndex:f,topSpacing:E,bottomSpacing:w}=Ay(m.current,p.current,l.length,v());i.useEffect((()=>{if("GenreCard"===h)return;if(d)return;const e=new Set;for(let t=y;t<=f;t++)u.current.has(t)||e.add(t);u.current=new Set([...u.current,...e]);const t=l.filter(((t,s)=>e.has(s)));if(t.length>0){const e=t.filter((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID})).map((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID}));a.getEnrichments(e)}}),[y,f]);const _=null==n||null===(e=n.entitlementCues)||void 0===e?void 0:e.entitledCarousel,T=null==n||null===(t=n.entitlementCues)||void 0===t?void 0:t.offerType,C=null==n?void 0:n.facetText,x=null!==(s=n.text)&&void 0!==s?s:n.title,I="MyStuff"!==r&&x;return i.createElement("div",{className:wy,"data-testid":"grid-container"},I&&i.createElement(Sp,{title:x,entitlementType:_,offerType:T,facetText:C}),i.createElement("div",{className:Iy,ref:p,style:{height:E}}),i.createElement(D,null,i.createElement("div",{className:st()(_y,b),ref:m},l.map(((e,t)=>{var s,a,n;if(t<y||t>f)return;const r=null==o?void 0:o[null!==(s=null!==(a=e.entityID)&&void 0!==a?a:e.titleID)&&void 0!==s?s:""];switch(h){case"Card":return i.createElement(vp,{key:t,index:t,card:e,isVisible:!0,enrichment:r});case"RanOverCard":return i.createElement(cy,{key:t,index:t,card:e,enrichment:r,modalRootElement:null!==(n=g.current)&&void 0!==n?n:void 0});case"GenreCard":return i.createElement(Ey,{key:t,index:t,card:e})}})))),i.createElement("div",{className:Iy,style:{height:w}}),a.onPaginateContainer&&i.createElement(Hy,{onPaginateContainer:a.onPaginateContainer}),i.createElement("div",{ref:g}))},Zy="DOAFpy",zy=()=>{var e;const{container:t}=i.useContext(iw),s=null!==(e=t.text)&&void 0!==e?e:t.title;var a,n;return s?i.createElement("div",{className:Zy},i.createElement(Sp,{title:s,entitlementType:null==t||null===(a=t.entitlementCues)||void 0===a?void 0:a.entitledCarousel,offerType:null==t||null===(n=t.entitlementCues)||void 0===n?void 0:n.offerType})):null},qy="ixM6h0",$y="_1Hokx8",Gy="_1LtlWp",Qy="-M3nlU",Yy="J89F1+",Ky="RTVlok",Xy="NtaKT3",Jy="Xc8EKK",ef="UJUN21",tf=(e,t,s)=>{const a=e?i.createElement(xo.w,{src:e,alt:s,wrapperClassName:Ky,imageClassName:Xy,baseValue:240,debugID:s,responsiveScaleDimension:nt.rB.HEIGHT}):i.createElement("div",{className:Qy,"data-testid":"fixed-header-no-image"},i.createElement(Cr.Icon,{use:Cr.IconType.LOGO_PRIMEVIDEO}));return null!=t&&t.url?i.createElement("a",{href:t.url,className:Yy,"aria-label":s,"data-testid":"fixed-header-image-link"},a):a},sf=()=>{const{container:e,enrichments:t,actions:s}=i.useContext(iw),{entities:a}=e;if(a.length<2)return null;const n=a.some((e=>{var t,s;return Boolean(null===(t=e.entitlementCues)||void 0===t||null===(s=t.glanceMessage)||void 0===s?void 0:s.message)}));return i.createElement("section",{className:qy},Bp(e),(e=>{const[a,...r]=e;return i.createElement("div",{className:st()($y,{[ef]:n}),"data-testid":"fixed-header-carousel-row"},i.createElement("div",{className:Gy,"data-testid":"fixed-header-cell"},(o=a)&&"Image"==o.itemType?tf(null===(l=o.image)||void 0===l?void 0:l.url,o.link,null===(c=o.image)||void 0===c?void 0:c.alternateText):i.createElement(i.Fragment,null)),i.createElement("div",{className:Jy},i.createElement(Up,{entities:r,actions:s,enrichments:t})));var o,l,c})(a))};sf.displayName="FixedHeaderCarousel";const af=sf,nf="laynrO",rf="bLzkzY",of="nH-Hic",lf="_3qkAoe",cf="TdyVo+",df="_9AsXJt",uf="g2R9ou",mf="hg6hgb",pf="_1LHq2x",gf="cZr6v2",hf="_6FJYb7",vf="F9VBPM",bf="b+eUmA",Df="J-j+b4",yf="NpF2DH",ff="s8AFke",Ef="i4aaP5",wf="l44tNo",_f="VV7ouy",Tf="hG+XO3",Cf="mzDTzk";function xf(e,t){return(t-e)/6e4}const If="wo2RUy",Nf="a-gASW",Pf=({startTime:e,endTime:t})=>{const s=oE(),a=Math.round(xf(e,s)),n=Math.round(xf(s,t)),r=Math.round(xf(e,t));return s<e?null:i.createElement("label",null,i.createElement("span",{className:Nf},"currently airing, at ",a," minutes of ",r," minutes of content play time,"),i.createElement("progress",{role:"presentation",className:If,value:r-n,max:r}))},kf="KcRaco",Sf="rYx5A1",Vf="eIS29O",Wf="_8UtsXN",Af="VDb1tV",Rf="_8BeN8H",Lf="JtXtue",Bf="_8L7oBG",Mf="PqeoiE",Of="RE4ima",jf="vKLH1G",Ff="YBTqCI",Hf="bxc7QD",Uf="xB+4W9",Zf="PhG3dl",zf="_5Afe1u",qf="AYllr7",$f="Cgc+on",Gf=i.memo((({title:e,titleImage:t,startTime:s,endTime:a,showPlayArrow:n})=>{const r=st()(Af,Lf);return i.createElement("div",{className:kf},n&&i.createElement("div",{className:r},i.createElement("div",{className:Sf},i.createElement(La(),{color:"white"}))),i.createElement("img",{src:t,alt:e}),i.createElement("div",{className:Wf}),i.createElement("div",{className:Vf},i.createElement(Pf,{startTime:s,endTime:a})))})),Qf="wr9qCt",Yf=({renderButton:e,channelId:t,appFallbackUrl:s,fallbackUrl:a,signInUrl:n,refMarker:r,resumeTime:o,videoMaterialType:l,playbackEnvelope:c,correlationId:d,expiryTime:u,playbackExperiences:m})=>{const{onPlay:p,launchType:g}=(()=>{const e=i.useContext(bs.ET);if(void 0===e)throw new Error("usePlayerContext must be used within a PlayerContext.Provider");return e})(),h=rE(),v=e=>{t&&h.has(t)&&zc.F.logManualImpression(h.get(t),"Select"),p&&a&&t&&(p({playbackUrl:a,fallbackUrl:s,signInUrl:n,contentConfig:{asin:t,videoType:l,trailer:!1,position:o||0,ref:r,playbackEnvelope:d&&c&&u?{correlationId:d,envelope:c,expiration:u}:void 0,playbackExperiences:m}}),e.preventDefault())},b=Boolean(t)&&"EMBEDDED"===g?void 0:a;return Boolean(t&&a)?b?i.createElement("a",{href:b,className:Qf,onClick:v,"data-testid":"play"},e(!0)):i.createElement("button",{type:"button",className:Qf,onClick:v,"data-testid":"play"},e(!0)):i.createElement("div",{className:Qf,"data-testid":"play"},e(!1))};const Kf="pz+MqK",Xf="_9btrqy",Jf="_5Ca0h3";const eE=i.createContext(void 0),tE=i.createContext(void 0),sE=i.createContext(void 0),aE=i.createContext(void 0),nE=()=>{const e=i.useContext(eE);if(void 0===e)throw new Error("useDispatchContext must be used within a StationContextProvider");return e},iE=()=>{const e=i.useContext(tE);if(void 0===e)throw new Error("useBreakpointContext must be used within a StationContextProvider");return e},rE=()=>{const e=i.useContext(sE);if(void 0===e)throw new Error("useCSMElementContext must be used within a StationContextProvider");return e},oE=()=>{const e=i.useContext(aE);if(void 0===e)throw new Error("useTimeContext must be used within a StationContextProvider");return e},lE="gdjPtR",cE="lqLx8N",dE=Array.from({length:16}),uE=i.memo((function({previous:e,onNowLabel:t}){const s=iE(),a=30*s.pixelsPerMinute;return i.createElement("div",{className:lE},dE.map(((n,r)=>{const o=new Date(e);o.setMinutes(o.getMinutes()+30*r);let l={width:`${a}px`};return 0===r&&(l={width:`${a+s.nowPlayingExtraWidth}px`}),i.createElement("div",{key:o.toString(),className:cE,style:l},0===r?null!=t?t:"On now":o.toLocaleTimeString(void 0,{timeStyle:"short"}))})))}));function mE(e){const t=new Date(e);t.setSeconds(0),t.setMilliseconds(0);const s=new Date(e);s.setSeconds(0),s.setMilliseconds(0);let a=0,n=0;const i=t.getMinutes();return i<30?(a=i,t.setMinutes(0),n=30-i,s.setMinutes(30)):(a=i-30,t.setMinutes(30),n=60-i,s.setHours(s.getHours()+1),s.setMinutes(0)),{next:s.getTime(),minutesToNext:n,previous:t.getTime(),minutesFromPrevious:a}}const pE=(e,t,s,a)=>{let n=0;n=(t-e)/6e4;const i=n/30;let r=0;i>1&&(r=(i-1)*a);return n*s+r},gE="bNT+0W",hE="q2n-hv",vE="WNW5uE",bE="hzMlL9",DE="_0RPEHW",yE=e=>{var t,s,a;const n=oE(),o=null!==(t=null===(s=(0,r.G4)().render)||void 0===s?void 0:s.isRTL)&&void 0!==t&&t,l=nE(),c=iE(),d=i.useRef(null),u=i.useRef(null),m=i.useRef({collapsedDetailsWidth:0,hoveredDetailsWidth:0,hoveredDetailsOffset:0,initialImageWidth:0,initialDetailsWidth:0}),{minutesFromPrevious:p,previous:g}=mE(n),h=pE(g,e.endTime,c.pixelsPerMinute,c.epgGapWidth)+c.nowPlayingExtraWidth;i.useEffect((()=>{if(d.current&&u.current){var t;m.current.initialImageWidth=d.current.clientWidth;const s=document.createElement("div");s.style.width="auto",s.style.position="absolute",s.style.whiteSpace="nowrap",s.style.top="0px",s.style.padding="var(--dvui-spacing-400)";const a=document.createElement("span");a.style.fontSize="var(--font-size-body)",a.textContent=null!==(t=e.seriesTitle)&&void 0!==t?t:e.title;const n=document.createElement("span");n.style.fontSize="var(--font-size-metadata)",n.style.fontWeight="700",n.textContent=e.seriesTitle?e.title:"",s.appendChild(a),s.appendChild(document.createElement("br")),s.appendChild(n),u.current.appendChild(s),m.current.initialDetailsWidth=s.clientWidth,u.current.removeChild(s)}}),[e.title,e.seriesTitle]),i.useEffect((()=>{if(u.current){const e=1.25*m.current.initialImageWidth-m.current.initialImageWidth,t=-1*e;m.current={...m.current,collapsedDetailsWidth:h,hoveredDetailsWidth:Math.max(m.current.initialDetailsWidth,h),hoveredDetailsOffset:o?t:e},u.current.style.setProperty("--width-collapsed",`${m.current.collapsedDetailsWidth}px`),u.current.style.setProperty("--width-hovered",`${m.current.hoveredDetailsWidth}px`),u.current.style.setProperty("--offset-hovered",`${m.current.hoveredDetailsOffset}px`)}}),[h,o]),i.useEffect((()=>{if(u.current){const e=(30-p)/30*100,t=`calc(${p/30*100}% + ${c.nowPlayingExtraWidth/100*e}px)`;u.current.style.setProperty("--gradient-progress",t),u.current.style.setProperty("--background-size",`${30*c.pixelsPerMinute+c.epgGapWidth+c.nowPlayingExtraWidth}px`)}}),[c.epgGapWidth,c.pixelsPerMinute,c.nowPlayingExtraWidth,p]);const v=()=>{l(e),e.logModalOpen()},b=h+c.nowPlayingThumbnailWidth,D={width:0!==m.current.collapsedDetailsWidth?`${b}px`:"auto"},y=st()(Rf,gE,{[Of]:e.isEntitled}),f=st()(Mf,vE);return i.createElement("div",{className:y,style:D},i.createElement("div",{className:Bf,ref:d},i.createElement(Yf,{appFallbackUrl:e.appFallbackUrl,signInUrl:e.signInUrl,channelId:e.channelId,disableJs:e.disableJs,fallbackUrl:e.fallbackUrl,playbackStatus:e.playbackStatus,refMarker:e.refMarker,resumeTime:e.resumeTime,sessionID:e.sessionID,videoMaterialType:e.videoMaterialType,playbackEnvelope:e.playbackEnvelope,correlationId:e.correlationId,expiryTime:e.expiryTime,renderButton:t=>{var s;const a=i.createElement(Gf,{title:null!==(s=e.seriesTitle)&&void 0!==s?s:e.title,titleImage:e.titleImage,startTime:e.startTime,endTime:e.endTime,showPlayArrow:t});return t?i.createElement(i.Fragment,null,a,i.createElement("span",{className:$f},e.label)):i.createElement("button",{type:"button",onClick:v,className:Zf},a)}})),i.createElement("button",{type:"button",className:f,ref:u,onClick:v,"data-testid":"details"},i.createElement("div",{className:hE},i.createElement("div",{className:jf},i.createElement("div",{className:Ff},e.timeRemaining),i.createElement("div",{className:qf},null!==(a=e.seriesTitle)&&void 0!==a?a:e.title),e.seriesTitle&&e.seriesTitle!==e.title&&i.createElement("div",{className:Hf},e.title),i.createElement("div",{className:Uf},e.contentMaturityRating),i.createElement("div",{className:zf},i.createElement(Pf,{startTime:e.startTime,endTime:e.endTime}))))))},fE="izZL9w",EE="mrWrKI",wE="VRbPRZ",_E="jVDLUF",TE="_5u7sLm",CE="LoAxCB",xE="_5RSEDb",IE="OM3sZv",NE=i.memo((function(e){var t;const s=nE(),{pixelsPerMinute:a,epgGapWidth:n}=iE(),r=pE(e.startTime,e.endTime,a,n),o={width:`${r}px`},l=i.useRef(null);i.useEffect((()=>{if(l.current){var t;const s=document.createElement("div");s.style.width="auto",s.style.position="absolute",s.style.whiteSpace="nowrap",s.style.top="0px",s.style.padding="var(--dvui-spacing-400)";const a=document.createElement("span");a.style.fontSize="var(--font-size-body)",a.textContent=null!==(t=e.seriesTitle)&&void 0!==t?t:e.title;const n=document.createElement("span");n.style.fontSize="var(--font-size-metadata)",n.style.fontWeight="700",n.textContent=e.seriesTitle?e.title:"",s.appendChild(a),s.appendChild(document.createElement("br")),s.appendChild(n),l.current.appendChild(s),l.current.style.setProperty("--width-collapsed",`${r}px`),l.current.style.setProperty("--width-hovered",`${Math.max(s.clientWidth,r)}px`),l.current.removeChild(s)}}),[e.title,e.seriesTitle,r]);const c=st()(fE,bE,{[wE]:e.isEntitled}),d=st()(EE,vE),u=new Date(e.startTime).toLocaleTimeString(void 0,{timeStyle:"short"});return i.createElement("button",{type:"button",className:c,style:o,onClick:()=>{s(e),e.logModalOpen()},"data-testid":"details"},i.createElement("span",{className:d,ref:l},i.createElement("div",{className:hE},i.createElement("div",{className:xE},i.createElement("div",{className:_E,suppressHydrationWarning:!0},u),i.createElement("div",{className:IE},null!==(t=e.seriesTitle)&&void 0!==t?t:e.title),e.seriesTitle&&e.seriesTitle!==e.title&&i.createElement("div",{className:TE},e.title),i.createElement("div",{className:CE},e.contentMaturityRating)))))})),PE="dmXGs0",kE="_5vnmi7",SE=i.memo((function({startTime:e,endTime:t,isScrolling:s}){const{pixelsPerMinute:a,epgGapWidth:n}=iE(),r={width:`${pE(e,t,a,n)}px`},o=st()(PE,{[kE]:s});return i.createElement("div",{className:o,style:r})})),VE="u3F+dS";function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},WE.apply(this,arguments)}const AE=e=>{const t=rE(),{stationName:s,programs:a,refMarker:n,index:r}=e,{clickstream:o,clickstreamPageContext:l}=i.useContext(sc.z1),c=i.useCallback((()=>{l&&(0,sa.X)(null!=n?n:"atv_unknown",l.pageType,l.subPageType,void 0,[ta.W0.Click],void 0,l.clientVariant,o)}),[o,l,n]);return i.createElement("ol",{className:`${VE} ${DE}`,onMouseEnter:()=>{e.titleId&&t.has(e.titleId)&&zc.F.logManualImpression(t.get(e.titleId),"Highlight")},onClick:()=>{e.titleId&&t.has(e.titleId)&&zc.F.logManualImpression(t.get(e.titleId),"Select")},role:"presentation","data-index":r},a.map(((e,t)=>i.createElement("li",{"data-testid":"card",key:`${t}_${s}_${e.title}_${e.startTime.toString()}`},function(e,t,s){return 0===t?i.createElement(yE,WE({},e,{logModalOpen:s})):e.endsAfterScheduledTimeLimit?i.createElement(SE,{startTime:e.startTime,endTime:e.endTime,isScrolling:!1}):i.createElement(NE,WE({},e,{logModalOpen:s}))}(e,t,c)))))},RE=i.memo((function(e){const t=(0,r.G4)(),s=rE(),a=i.useCallback((a=>{e.metrics.csm.titleID&&(a&&!s.has(e.metrics.csm.titleID)?(zc.F.observe(a,e.metrics.csm,t.context),s.set(e.metrics.csm.titleID,a)):null===a&&s.has(e.metrics.csm.titleID)&&(zc.F.unobserve(s.get(e.metrics.csm.titleID)),s.delete(e.metrics.csm.titleID)))}),[]),n=st()(Kf,{[Xf]:e.isEntitled});return i.createElement("div",{className:n,ref:a},i.createElement("div",{className:Jf},i.createElement("img",{src:e.url,alt:e.title})))})),LE="xtGQ1v",BE="_4iikON",ME="_8-AYtx";function OE(){return OE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},OE.apply(this,arguments)}const jE=i.forwardRef(((e,t)=>{const{pixelsPerMinute:s,epgGapWidth:a,nowPlayingThumbnailWidth:n}=iE(),{data:r,height:o,itemHeight:l,offScreenCount:c,onScroll:d}=e,[{isScrolling:u,scrollDirection:m,scrollOffset:p},g]=i.useState({isScrolling:!1,scrollDirection:"forward",scrollOffset:0}),{actions:h}=function(){const e=i.useContext(iw);if(0===Object.keys(e).length)throw new Error("useBaseContainerContext must be used within a BaseContainerContext.Provider");return e}();i.useEffect((()=>{d&&d({scrollDirection:m,scrollOffset:p,isScrolling:!0});const e=setTimeout((()=>{g((e=>({...e,isScrolling:!1}))),d&&d({scrollDirection:m,scrollOffset:p,isScrolling:!1})}),150);return()=>{clearTimeout(e)}}),[m,p,d]);const v=i.useRef(null);i.useEffect((()=>{const e=window.innerHeight/4,t=new IntersectionObserver((([e])=>{e.target.classList.toggle(BE,e.isIntersecting)}),{threshold:[1],rootMargin:`${e}px`});return v.current&&(o>=window.innerHeight?t.observe(v.current):v.current.classList.add(BE)),()=>{t.disconnect()}}),[o]);const[b,D]=function(e,t,s,a,n){const i=function(e,t,s){return Math.max(0,Math.min(e-1,Math.floor(s/t)))}(e,t,a),r=function(e,t,s,a,n){const i=a*t,r=Math.ceil((n+s-i)/t);return Math.max(0,Math.min(e-1,a+r-1))}(e,t,a,i,s),o=Math.max(0,i-n),l=Math.min(e-1,r+n);return[o,l]}(r.length,l,o,p,c),y=[],f=[];for(let e=b;e<=D;e++)y.push(i.createElement(AE,OE({key:`${e}_${r[e].title}`,stationName:r[e].title,isScrolling:u},r[e]))),f.push(i.createElement(RE,{key:`${e}_${r[e].title}`,title:r[e].title,isScrolling:u,url:r[e].url,isEntitled:r[e].isEntitled,metrics:r[e].metrics}));const E=b*l,w=(r.length-1-D)*l;return i.createElement("div",{className:LE,style:{height:`${o}px`},onScroll:function(e){const{clientHeight:t,scrollHeight:s,scrollTop:a}=e.target;g((e=>{if(e.scrollOffset===a)return{...e,isScrolling:!1};const n=Math.max(0,Math.min(a,s-t));return{isScrolling:!0,scrollDirection:e.scrollOffset<n?"forward":"backward",scrollOffset:n}}))},"data-testid":"station-window",ref:v},i.createElement("div",{style:{height:`${E}px`}}),i.createElement("div",{className:ME},i.createElement("div",{className:`${Df} ${bf}`,style:{pointerEvents:u?"none":"auto"}},f),i.createElement("div",{className:`${Tf} ${bf}`,ref:t,"data-station-scroll-sync":"true","data-testid":"station-carousels-list"},i.createElement("div",{className:Cf,style:{width:`${30*s*16+15*a+n}px`,pointerEvents:u?"none":"auto"}},y))),i.createElement("div",{style:{height:`${w}px`}}),h.onPaginateContainer&&i.createElement(Hy,{onPaginateContainer:h.onPaginateContainer}))}));function FE(e){var t,s;const{pixelsPerMinute:a,epgGapWidth:n,nowPlayingThumbnailWidth:r,nowPlayingExtraWidth:o,mobile:l,stationRowHeight:c}=iE(),d=i.useRef(null),u=i.useRef(null),m=i.useRef(null),p=i.useRef(null);i.useEffect((()=>{((e,t,s)=>{const a=new Set(document.querySelectorAll("[data-station-scroll-sync]")),n=30*e*16+15*t+s;for(const e of a){var i,r;e.removeEventListener("scroll",e.syncOthersOnScroll,!1),e.storedScrollOffset=0,null===(i=e.closest(`.${nf}`))||void 0===i||i.classList.toggle(rf,!1),null===(r=e.closest(`.${nf}`))||void 0===r||r.classList.toggle(cf,e.scrollLeft!==n-e.clientWidth-1),e.addEventListener("scroll",e.syncOthersOnScroll=function(){const t=e.scrollLeft,s=t!==e.storedScrollOffset;var i,r;if(e.storedScrollOffset=t,e.className===Tf)if(null===(i=e.closest(`.${nf}`))||void 0===i||i.classList.toggle(rf,Math.abs(t)>0),e.scrollLeft+e.clientWidth>=n)e.scrollLeft=Math.max(0,Math.min(e.scrollLeft+e.clientWidth,n)),null===(r=e.closest(`.${nf}`))||void 0===r||r.classList.toggle(cf,!1);else if(e.scrollLeft!==n-e.clientWidth-1){var o;null===(o=e.closest(`.${nf}`))||void 0===o||o.classList.toggle(cf,!0)}for(const n of a)n!==e&&(n.storedScrollOffset=t,s&&Math.round(n.scrollLeft-t)&&(n.scrollLeft=t))},{passive:!0})}})(a,n,r);const e=.25*window.innerHeight;let t=null;return m.current&&(t=new IntersectionObserver((([t])=>{var s,a,n,i,r,o,l;null===(s=u.current)||void 0===s||s.classList.toggle(uf,t.boundingClientRect.top<=0),null===(a=m.current)||void 0===a||a.classList.toggle(ff,t.boundingClientRect.top<=(null!==(n=null===(i=t.rootBounds)||void 0===i?void 0:i.top)&&void 0!==n?n:e)),null===(r=p.current)||void 0===r||r.classList.toggle(ff,t.boundingClientRect.top<=(null!==(o=null===(l=t.rootBounds)||void 0===l?void 0:l.top)&&void 0!==o?o:e))}),{threshold:[1]}),t.observe(m.current)),()=>{var e;null===(e=t)||void 0===e||e.disconnect()}}),[a,n,r]);const g=i.useCallback((({currentTarget:t})=>{if(d.current){const{direction:s}=t.dataset,n=30*a*3,i=Math.floor(d.current.scrollLeft);let r=e.isRTL?i+n:i-n;"end"===s&&(r=e.isRTL?i-n:i+n),d.current.scrollTo({top:0,left:r,behavior:"auto"})}}),[a,e.isRTL]),{previous:h,minutesFromPrevious:v}=mE(e.currentTime),b=v/30*100+"%",D=e.isRTL?{right:b}:{left:b},y={width:`${30*a+n}px`},f=e.isRTL?{...y,right:`${o}px`}:{...y,left:`${o}px`},[E,w]=i.useState(2e3);i.useEffect((()=>{const t=e.stations.length*(c+n),s=window.innerHeight;if(t>s)return w(s);w(t)}),[c,n,e.stations.length]);const _=st()(nf,{[vf]:e.isEntitled});return i.createElement("section",{className:_,"data-testid":"epg-container",ref:u},i.createElement("div",{className:hf,"data-entitled":e.isEntitled},i.createElement("h2",null,e.blockTitle)),i.createElement("div",{className:`${of} ${lf}`},i.createElement("button",{type:"button",className:`${pf} ${lf}`,"data-direction":"start",onClick:g,"data-testid":"left-arrow"},i.createElement(Rl(),null),i.createElement("span",{className:gf},"Scroll toward carousel start"))),i.createElement("div",{className:`${of} ${df}`},i.createElement("button",{type:"button",className:`${pf} ${df}`,"data-direction":"end",onClick:g,"data-testid":"right-arrow"},i.createElement("span",{className:gf},"Scroll toward carousel end"),i.createElement(Rl(),null))),i.createElement("div",{className:mf},i.createElement(jE,{data:e.stations,height:E,itemHeight:c+n,offScreenCount:2,ref:d})),!l&&i.createElement(i.Fragment,null,i.createElement("div",{className:yf,"data-station-scroll-sync":"true","data-testid":"station-time-bar",ref:m},i.createElement(uE,{previous:h,onNowLabel:null===(t=e.stations[0])||void 0===t||null===(s=t.programs[0])||void 0===s?void 0:s.onNowLabel})),i.createElement("div",{className:Ef,"data-station-scroll-sync":"true","data-testid":"station-time-tip",ref:p},i.createElement("div",{className:wf,style:{width:30*a*16+15*n+"px"}},i.createElement("div",{className:wf,style:f},i.createElement("div",{className:_f,style:D},new Date(e.currentTime).toLocaleTimeString(void 0,{timeStyle:"short"})))))))}const HE="_0sbmz1",UE=i.memo((function({children:e}){return i.createElement("div",{className:HE},e)}));function ZE(e,t,s,a){const n=xf(e,t);if(n/60>1){const e=Math.floor(n/60).toString(),t=Math.floor(n%60).toString();return s?s.replace("{h}",e).replace("{m}",t):`${e}hr ${t}min left`}const i=Math.floor(n).toString();return a?null==a?void 0:a.replace("{m}",i):`${i} min left`}const zE=new Map;function qE(e,t,s){const{previous:a}=mE(t),n=new Date(a);n.setHours(n.getHours()+7),n.setMinutes(n.getMinutes()+55);return e.entities.map(((a,i)=>{var r,o,l,c,d,u,m,p,g,h,v,b,D,y;if(!a.station)return null;const f=null!==(r=null===(o=a.station)||void 0===o||null===(l=o.strings)||void 0===l?void 0:l.timeLeftHours)&&void 0!==r?r:"{h}hr {m}min left",E=null!==(c=null===(d=a.station)||void 0===d||null===(u=d.strings)||void 0===u?void 0:u.timeLeftMinutes)&&void 0!==c?c:"{m} min left",w=null===(m=a.station)||void 0===m?void 0:m.schedule.map(((s,i,r)=>{var o,l,c,d,u,m,p,g,h,v,b,D,y,w,_,T,C,x,I,N,P,k,S,V,W,A,R,L,B,M,O,j,F,H,U,Z,z,q,$,G,Q,Y,K;const X=s.start,J=s.end,ee=0===i;return{startTime:X,endTime:J,titleImage:null!==(o=null===(l=s.metadata.image)||void 0===l?void 0:l.url)&&void 0!==o?o:"",title:null!==(c=s.metadata.title)&&void 0!==c?c:"",seriesTitle:s.metadata.seriesTitle,synopsis:null!==(d=s.metadata.synopsis)&&void 0!==d?d:"",stationId:null!==(u=null===(m=a.station)||void 0===m?void 0:m.id)&&void 0!==u?u:"",stationTitle:null!==(p=null===(g=a.station)||void 0===g?void 0:g.name)&&void 0!==p?p:"",nextBroadcastTitle:null!==(h=null!==(v=null===(b=r[i+1])||void 0===b?void 0:b.metadata.seriesTitle)&&void 0!==v?v:null===(D=r[i+1])||void 0===D?void 0:D.metadata.title)&&void 0!==h?h:"",nextBroadcastTitleImage:null!==(y=null===(w=r[i+1])||void 0===w||null===(_=w.metadata.image)||void 0===_?void 0:_.url)&&void 0!==y?y:"",nextBroadcastStartTime:null===(T=r[i+1])||void 0===T?void 0:T.start,nextBroadcastEndTime:null===(C=r[i+1])||void 0===C?void 0:C.end,isEntitled:"Entitled"===(null===(x=e.entitlementCues)||void 0===x?void 0:x.entitledCarousel),entitlementMessage:null!==(I=null===(N=a.entitlementCues)||void 0===N||null===(P=N.focusMessage)||void 0===P?void 0:P.message)&&void 0!==I?I:"",entitlementIcon:null!==(k=null===(S=a.entitlementCues)||void 0===S||null===(V=S.focusMessage)||void 0===V?void 0:V.icon)&&void 0!==k?k:"OFFER_ICON",entitlementType:null!==(W=null===(A=a.entitlementCues)||void 0===A?void 0:A.entitlementType)&&void 0!==W?W:au.Uz.UNENTITLED,contentMaturityTitle:null!==(R=null===(L=s.metadata.contentMaturityRating)||void 0===L?void 0:L.title)&&void 0!==R?R:"",contentMaturityRating:null!==(B=null===(M=s.metadata.contentMaturityRating)||void 0===M?void 0:M.rating)&&void 0!==B?B:"",nextUp:null!==(O=null===(j=a.station)||void 0===j||null===(F=j.strings)||void 0===F?void 0:F.nextUp)&&void 0!==O?O:"",onNowLabel:null!==(H=null===(U=a.station)||void 0===U||null===(Z=U.strings)||void 0===Z?void 0:Z.onNowLabel)&&void 0!==H?H:"",timeRemaining:ee?ZE(t,J,f,E):"",...a.playbackAction,...null===(z=a.playbackAction)||void 0===z?void 0:z.playbackExperienceMetadata,refMarker:null!==(q=null===($=a.playbackAction)||void 0===$?void 0:$.refMarker)&&void 0!==q?q:"unknown",subscriptionLabel:null!==(G=null===(Q=a.promotedAcquisitionGroup)||void 0===Q?void 0:Q.label)&&void 0!==G?G:"",subscriptionURL:null!==(Y=null===(K=a.link)||void 0===K?void 0:K.url)&&void 0!==Y?Y:"",nowPlaying:ee,endsAfterScheduledTimeLimit:J>n.getTime()}})).filter((e=>e.endTime>t)),_=function(...e){var t,s,a,n;const i=e.join("_");if(zE.has(i))return zE.get(i);const r={csm:{collectionImpressionData:e[0],carouselPosition:e[1],itemPosition:e[2],widgetType:null!==(t=e[3])&&void 0!==t?t:"",refMarker:null!==(s=e[4])&&void 0!==s?s:"unknown",imageURL:null!==(a=e[5])&&void 0!==a?a:"",titleID:null!==(n=e[6])&&void 0!==n?n:"",itemAnalytics:e[7]}};return zE.set(i,r),r}(s.impressionData,s.carouselPosition,i,a.widgetType,a.refMarker,null===(p=a.station)||void 0===p?void 0:p.logo,null===(g=a.station)||void 0===g?void 0:g.id,a.itemAnalytics);return{url:null!==(h=null===(v=a.station)||void 0===v?void 0:v.logo)&&void 0!==h?h:"",title:null===(b=a.station)||void 0===b?void 0:b.name,programs:w,metrics:_,refMarker:null!==(D=a.refMarker)&&void 0!==D?D:"",isEntitled:"Entitled"===(null===(y=e.entitlementCues)||void 0===y?void 0:y.entitledCarousel)}})).filter((e=>!!e&&0!==(null==e?void 0:e.programs.length)))}function $E(){var e,t,s,a,n;const o=(0,r.G4)(),{container:l,index:c}=function(){const e=i.useContext(iw);if(0===Object.keys(e).length)throw new Error("useBaseContainerContext must be used within a BaseContainerContext.Provider");return e}(),d=oE(),u=qE(l,d,{carouselPosition:c,impressionData:null!==(e=l.impressionData)&&void 0!==e?e:""}),m=null!==(t=null===(s=o.render)||void 0===s?void 0:s.isRTL)&&void 0!==t&&t,p="Entitled"===(null===(a=l.entitlementCues)||void 0===a?void 0:a.entitledCarousel),g=null!==(n=l.title)&&void 0!==n?n:"";return i.createElement(UE,null,i.createElement(FE,{blockTitle:g,stations:u,isEntitled:p,isRTL:m,currentTime:d}))}const GE=(e,t)=>{const s={};return e.forEach(((e,a)=>{const n=e.entityID||e.titleID;n&&(s[n]=a+t)})),s},QE=(e,t)=>{var s,a;const n={...e};n.watchlistAction=t;const i=null===(s=n.overflowMenu)||void 0===s||null===(a=s.items)||void 0===a?void 0:a.find((e=>e.itemType===au.Np.WatchlistAction));return i&&(i.action=t,i.text=(0,vt.Wb)(t.text)),n};function YE(e,t){switch(t.type){case"HideThis":{const{container:s}=e,{entities:a}=s,{entityIndex:n}=t,i=[...a];return i[n]={...i[n],hideThisAction:t.payload},{...e,container:{...s,entities:i}}}case"OnNewEntities":{const{container:s,entityIDToIndexMap:a}=e,{entities:n}=s,{entities:i}=t.payload,r=[...n,...i],o=GE(i,n.length);return{...e,container:{...s,entities:r},entityIDToIndexMap:{...a,...o}}}case"ToggleWatchlist":{const{container:s}=e,{entityIndex:a,payload:n}=t,{entities:i}=s,r=[...i];return r[a]=QE(r[a],n),{...e,container:{...s,entities:r}}}case"RemoveItem":{const{removedItemsMap:s,container:a}=e,{entityIndex:n,payload:{removedOverlayMessage:i,canUndoRemoval:r,undo:o,undoMessage:l}}=t,{entities:c}=a,d={...s};return d[c[n].titleID]={removedOverlayMessage:i,canUndoRemoval:r,undo:o,undoMessage:l},{...e,removedItemsMap:d}}case"RestoreItem":{const{removedItemsMap:s,container:a}=e,{entityIndex:n}=t,{entities:i}=a,r={...s};return delete r[i[n].titleID],{...e,removedItemsMap:r}}default:return e}}function KE(e,t){switch(t.type){case"EnrichItemMetadata":return{...e,[t.entityID]:t.payload};case"ToggleWatchlist":{const s=e[t.entityID];if(!s)return e;const a=QE(s,t.payload);return{...e,[t.entityID]:a}}case"SetLiveEventsCustomerIntent":return((e,t)=>{const s={...e};return Object.keys(s).map((e=>{var a;null!==(a=s[e])&&void 0!==a&&a.recordSeason&&(s[e].recordSeason=((e,t)=>!t||t.error?e:"SSM_DISMISSED"===t.intent?{...e,checkbox:void 0}:"OPT_IN"===t.intent?{}:e)(s[e].recordSeason,t))})),s})(e,t.payload);default:return e}}const XE="_5noh4m",JE="_7K84BP";var ew=s("./src/util/logger/logger.ts");function tw({url:e,info:t}){if(void 0!==e&&"string"!=typeof e){new ew.Oc(`DVWebNode:${t}:URLError`).error(e)}return e}const sw=({slotName:e,links:t})=>i.createElement("div",{className:XE,"data-testid":"strategy-bar"},e&&i.createElement("span",{className:JE},e),t&&t.map(((e,t)=>i.createElement("a",{className:JE,key:t,href:tw({url:e.url,info:"StrategyBar"}),target:"_blank"},e.label))));sw.displayName="StrategyBar";const aw=i.memo(sw),nw=i.createContext({});nw.displayName="PaginationApiContext";const iw=i.createContext({});iw.displayName="BaseContainerContext";const rw=i.memo((e=>{const{container:t,nextContainer:s,context:a,apiInteractions:n,isTrailerAutoplayEnabled:r,shouldDisplayStrategy:o,logger:l,consumingWidgetType:c,useWatchlistFromContainerData:d,displayOverlayOnWatchlistRemoval:u,index:m,isHideThisDisabled:p}=e,{entities:g,paginationServiceToken:h,paginationTargetId:v}=t,[b,D]=i.useState(t.paginationStartIndex),[y,f]=i.useState(t.paginationServiceToken),[E,w]=i.useState(!1),[_,T]=i.useState(!0),C={container:t,entityIDToIndexMap:GE(g,0),removedItemsMap:{}},[x,I]=i.useReducer(YE,C),[N,P]=i.useTransition(),[k,S]=i.useReducer(KE,{}),[V,W]=i.useState(!1),{paginateContainer:A}=i.useContext(nw),{isInResiliencyMode:R,clickstream:L,clickstreamPageContext:B,contingencies:M}=i.useContext(sc.z1),{hideBelowContainerIndex:O}=i.useContext(Ly.U),{container:j,entityIDToIndexMap:F,removedItemsMap:H}=x,{debugData:U}=j,Z=e=>{if(!e)return;const t=F[e],{entities:s}=j;return s[t]},z=(()=>{if(A&&h&&v)return async()=>{if(!E)try{var e,t;w(!0);const s=null!=b?b:j.entities.length,a=await A({paginationTargetId:v,serviceToken:null!=y?y:h,startIndex:s,isPurchaseAndRentalCarousel:null===(e=j.seeMoreLink)||void 0===e||null===(t=e.url)||void 0===t?void 0:t.startsWith("/gp/video/mystuff/library/"),journeyIngressContext:j.journeyIngressContext});P((()=>{var e;I({type:"OnNewEntities",payload:{entities:a.entities}}),T(a.hasMoreItems),D(a.startIndex),f(null===(e=a.pagination)||void 0===e?void 0:e.serviceToken),w(!1)}))}catch(e){l.count(`DVWeb::${c}::BaseContainer::PaginateContainerError`,1,!1),l.warn(e),T(!1),w(!1)}}})(),q=(({container:e,enrichments:t,entityIDToIndexMap:s,consumingWidgetType:a,context:n,useWatchlistFromContainerData:i,displayOverlayOnWatchlistRemoval:r,clickstream:o,clickstreamPageContext:l,dispatchContainerData:c,dispatchEnrichments:d,logger:u,apiInteractions:m})=>{const p=async(e,t,o,l)=>{try{const a=await m.toggleWatchlist(e,n);if(!a)return;const{watchlistAction:u}=a;if(i)c({type:"ToggleWatchlist",entityIndex:s[t],payload:u});else if(d({type:"ToggleWatchlist",entityID:t,payload:u}),"Add"===e.tag&&l){const e=await m.setLiveEventsCustomerIntent(l,n);d({type:"SetLiveEventsCustomerIntent",payload:e})}r&&("Remove"===e.tag?c({type:"RemoveItem",entityIndex:s[t],payload:{removedOverlayMessage:e.postActionOverlayMessage,canUndoRemoval:!0,undoMessage:e.undoMessage,undo:()=>{p(u,t,o)}}}):c({type:"RestoreItem",entityIndex:s[t]})),g(e,t,o)}catch(e){u.count(`DVWeb::${a}::BaseContainer::WatchlistToggleError`,1,!1),u.warn(e)}},g=(e,t,s)=>{const a="remove"===e.tag.toLowerCase()?ta.W0.RemoveFromWatchlist:ta.W0.AddToWatchlist,n=`${null!=s?s:"atv_unknown"}_wtl_${a===ta.W0.AddToWatchlist?"add":"rmv"}_hov`;(0,sa.X)(n,null==l?void 0:l.pageType,null==l?void 0:l.subPageType,t,[a],void 0,null==l?void 0:l.clientVariant,o)};return async(a,n,r)=>{var o;let l;var c,d;if(null==a||a.preventDefault(),l=i?null===(c=e.entities[s[n]])||void 0===c?void 0:c.watchlistAction:null===(d=t[n])||void 0===d?void 0:d.watchlistAction,!l)return;const u=null===(o=t[n])||void 0===o?void 0:o.recordSeason,m=u&&(e=>{const{customerIntentAction:t,watchlistAddon:s}=e;if(t&&s)return{id:t.query.id,token:t.query.token,scope:s.scope,intent:s.intent}})(u);return p(l,n,r,m)}})({container:j,enrichments:k,entityIDToIndexMap:F,consumingWidgetType:c,useWatchlistFromContainerData:d,displayOverlayOnWatchlistRemoval:u,dispatchContainerData:I,dispatchEnrichments:S,context:a,clickstreamPageContext:B,clickstream:L,logger:l,apiInteractions:n}),$={container:j,nextContainer:s,enrichments:k,enrichmentAttempted:V,helpers:{getEntityFromContainer:Z},actions:{getEnrichments:(e,t,s)=>!R&&!Boolean(null==M?void 0:M.disableEnrichItemMetadata)&&e.forEach((e=>(async(e,t,s)=>{const a=(e=>{switch(e){case"Charts":return"TOP_CHART";case"StandardHero":return"STANDARD_HERO";case"TentpoleHero":return"TENTPOLE_HERO";default:return"HOVER"}})(j.containerType),i="Charts"===j.containerType?j.impressionData:void 0;try{var r;const l=await n.fetchEnrichment(e,a,j.journeyIngressContext,t,s,i);S({type:"EnrichItemMetadata",entityID:e,payload:{...l,entitlementCues:(o=null===(r=Z(e))||void 0===r?void 0:r.entitlementCues,d=l.entitlementCues,{glanceMessage:null!=d&&null!==(u=d.glanceMessage)&&void 0!==u&&u.message?d.glanceMessage:null==o?void 0:o.glanceMessage,focusMessage:null!=d&&null!==(m=d.focusMessage)&&void 0!==m&&m.message?d.focusMessage:null==o?void 0:o.focusMessage,highValueMessage:null!=d&&null!==(p=d.highValueMessage)&&void 0!==p&&p.message?d.highValueMessage:null==o?void 0:o.highValueMessage,entitlementType:null!=d&&d.entitlementType?d.entitlementType:null==o?void 0:o.entitlementType})}}),W(!0)}catch(e){l.count(`DVWeb::${c}::BaseContainer::FetchEnrichmentError`,1,!1),l.warn(e),W(!0)}var o,d,u,m,p})(e,t,s))),onHideThis:async(e,t,s)=>{var a;e.preventDefault();const i=F[t],{entities:r}=j,o=null===(a=r[i])||void 0===a?void 0:a.hideThisAction;if("number"==typeof i&&o)try{const e=await n.hideThis(o);if(!e)return;const{hideThisAction:t}=e;t&&(I({type:"HideThis",entityIndex:i,payload:t}),s&&s(e))}catch(e){l.count(`DVWeb::${c}::BaseContainer::HideTitleError`,1,!1),l.warn(e)}},onWatchlistToggle:q,onPaginateContainer:z,onLibraryAction:async(e,t)=>{try{(await n.libraryItemStateChange(t,a)).success&&I({type:"RemoveItem",entityIndex:F[e],payload:{removedOverlayMessage:t.overlayMessage,canUndoRemoval:!1}})}catch(e){l.count(`DVWeb::${c}::BaseContainer::LibraryItemActionError`,1,!1),l.warn(e)}}},isTrailerAutoplayEnabled:r,index:m,consumingWidgetType:c,isPaginatingContainer:E,hasMoreItems:!!z&&_,removedItemsMap:H,isHideThisDisabled:p};return i.createElement(iw.Provider,{value:$},i.createElement(gu,null,o&&i.createElement(aw,U),!(void 0!==O&&O<m)&&(e=>{switch(e){case"StandardCarousel":default:return i.createElement(zp,null);case"StandardHero":return i.createElement(qg,null);case"TentpoleHero":return i.createElement(zh,null);case"Charts":return i.createElement(Jv,null);case"SuperCarousel":return i.createElement(sD,null);case"Cover":return i.createElement(ND,null);case"Nodes":return i.createElement(ZD,null);case"Grid":return i.createElement(Uy,null);case"TextContainer":return i.createElement(zy,null);case"EpgGroup":return i.createElement($E,null);case"FixedHeaderCarousel":return i.createElement(af,null)}})(j.containerType)))}));rw.displayName="BaseContainer";const ow=(0,r.s6)((0,o.ty)(rw));var lw=s("./src/util/utils/serializeFormData.ts"),cw=s("./src/util/api/WPSClient.ts");const dw={hideThis:async e=>{var t,s,a,n,i,r,o,l,c;const d={tag:null===(t=e.endpoint)||void 0===t||null===(s=t.query)||void 0===s?void 0:s.tag,token:null===(a=e.endpoint)||void 0===a||null===(n=a.query)||void 0===n?void 0:n.token,titleId:null===(i=e.endpoint)||void 0===i||null===(r=i.query)||void 0===r?void 0:r.titleId,titleType:null===(o=e.endpoint)||void 0===o||null===(l=o.query)||void 0===l?void 0:l.titleType},u=null===(c=e.endpoint)||void 0===c?void 0:c.partialURL,m=(0,lw.V)(d);return uw(u,m)},toggleWatchlist:async(e,t)=>{var s,a,n;const i=null!==(s=null===(a=e.endpoint)||void 0===a?void 0:a.query)&&void 0!==s?s:{},r=null===(n=e.endpoint)||void 0===n?void 0:n.partialURL;if(!e.ajaxEnabled){const e=new URLSearchParams(i).toString();return void(window.location.href=`${r}?${e}`)}i.relatedRequestId=null==t?void 0:t.requestID;const o=(0,lw.V)(i);return uw(r,o)},setLiveEventsCustomerIntent:async(e,t)=>await(new cw.e).SetLiveEventsCustomerIntent({context:t,...e}),libraryItemStateChange:async(e,t)=>await(new cw.e).LibraryStateChange({context:t,titleID:e.titleID,token:e.token,state:e.state})},uw=async(e,t)=>{const s=new ll.l;return await s.call(e,{credentials:"include",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"},body:t})};var mw=s("./src/shared/Explore/utils/GlobalQueueHandler.tsx");const pw=(0,ke.P)(Se.mZ.containers,(e=>Boolean(e&&e.length>0))),gw="_2KkT7L",hw=(0,l.$j)((e=>{var t;return{showContainers:pw(e),containers:Se.mZ.containers(e),isJicEnrichmentEnabled:(0,mt.d5)(e),enableAutoPlayingInBTF:(0,mt.VL)(e)&&(null===(t=To(e))||void 0===t?void 0:t.isTrailerAutoplayEnabled)||!1}}))((({showContainers:e,containers:t,isJicEnrichmentEnabled:s,enableAutoPlayingInBTF:a})=>{const{requestContext:n}=i.useContext(je.h),[r]=i.useState(new mw.Z(n,500,!0,s));return e?i.createElement("div",{className:gw,"data-testid":"dp-containers-wrapper"},null==t?void 0:t.map(((e,t)=>i.createElement(i.Fragment,{key:t},i.createElement(ow,{consumingWidgetType:"DetailPage",index:t,container:e,apiInteractions:{...dw,fetchEnrichment:null==r?void 0:r.enrichmentPromise.bind(r)},isTrailerAutoplayEnabled:a,shouldDisplayStrategy:!1}))))):null}));var vw=s("./src/widgets/DVWebNodeDetail/selectors/castAndCrew.ts");const bw="-x4CpF",Dw="QHYlXv",yw="rMn+YH",fw="olBsw1",Ew=({castMember:e,showCastImages:t,index:s,enrichmentBatchHandler:a,enableAutoPlayingInBTF:n})=>{const{container:r}=e;if(!r)return null;const{text:o}=r,l=r.entities[0],c={...t?r:{...r,containerType:"StandardCarousel",entities:r.entities.slice(1)},text:""};return i.createElement(i.Fragment,null,i.createElement("div",{className:Dw},o&&(null!=l&&l.link?i.createElement(ha.Link,{className:yw,href:l.link.url,testID:"dp-castAndCrew-personPageLink"},o):i.createElement("h3",{className:yw},o))),i.createElement("div",{className:fw,key:`cast-and-crew-collection-${s}`},i.createElement(ow,{consumingWidgetType:"DetailPage",index:s,container:c,apiInteractions:{...dw,fetchEnrichment:null==a?void 0:a.enrichmentPromise.bind(a)},isTrailerAutoplayEnabled:n,shouldDisplayStrategy:!1})))},ww=(0,l.$j)((e=>{var t;return{showCastAndCrew:(0,vw.s)(e),castAndCrew:Se.mZ.castAndCrew(e),enableAutoPlayingInBTF:(0,mt.VL)(e)&&(null===(t=To(e))||void 0===t?void 0:t.isTrailerAutoplayEnabled)||!1}}))((({castAndCrew:e,showCastAndCrew:t,enableAutoPlayingInBTF:s})=>{const{requestContext:a,getString:n}=i.useContext(je.h),[r]=i.useState(new mw.Z(a,500));if(!t)return null;const o=e.castAndCrews,l=o.some((e=>{var t,s,a,n;return null==e||null===(t=e.container)||void 0===t||null===(s=t.entities)||void 0===s||null===(a=s[0])||void 0===a||null===(n=a.image)||void 0===n?void 0:n.url})),c=o.map(((e,t)=>i.createElement(Ew,{castMember:e,showCastImages:l,index:t,enrichmentBatchHandler:r,key:`cast-and-crew-row-${t}`,enableAutoPlayingInBTF:s}))),d=n("DV_DP_CAST_CREW_HEADING");return i.createElement("div",{className:et.Z.pageSection,"data-testid":"cast-and-crew-section"},i.createElement("h2",{className:bw},d),c)}));var _w=s("./src/widgets/DVWebNodeDetail/components/productMetaInfo/btfProductMetaInfo.tsx"),Tw=s("./src/widgets/DVWebNodeDetail/components/extrasTab/extrasTab.tsx"),Cw=s("./src/widgets/DVWebNodeDetail/selectors/collections.ts"),xw=s("./src/widgets/DVWebNodeDetail/selectors/otherFormats.ts"),Iw=s("./src/widgets/DVWebNodeDetail/selectors/productDetails.ts"),Nw=s("./src/widgets/DVWebNodeDetail/selectors/extrasTab.ts"),Pw=s("./src/widgets/DVWebNodeDetail/components/exploreTab/exploreTab.tsx"),kw=s("./src/widgets/DVWebNodeDetail/selectors/exploreTab.ts"),Sw=s("./src/widgets/DVWebNodeDetail/components/tabs/lazyTab.tsx");const Vw="MOlAGY",Ww="U-npIR",Aw="_13nrHV",Rw=(0,l.$j)((e=>({bottomMenu:Se.bS.bottomMenu(e),isPurchaseRestricted:(0,mt.Tr)(e),isChildProfile:(0,mt.Io)(e),isRetail:(0,xe.T_)(e)})))((({isPurchaseRestricted:e,bottomMenu:t,isChildProfile:s,isRetail:a})=>e||s?null:i.createElement("div",{className:Ww},i.createElement("span",{className:Vw}),i.createElement(oo,{feedbackSignInUrl:t.feedbackSignInUrl}),!a&&i.createElement("div",null,i.createElement("h3",{className:Aw},i.createElement(Wt.H1,{stringID:"DV_DP_Help_Support"})),i.createElement(Qr.Z.MetaData,null,i.createElement(gs.Text,{string:t.helpText,testID:"help-link"})))))),Lw=()=>{const{context:e}=(0,r.G4)(),{isTouchDevice:t}=i.useContext(sc.z1);return t||"Fogg"!==e.domain?null:i.createElement("div",{"aria-hidden":"true",className:_p,"data-testid":"page-clearance"})};let Bw=function(e){return e.EPISODES_TAB_ID="episodes",e.EXPLORE_TAB_ID="explore",e.RELATED_TAB_ID="related",e.DETAILS_TAB_ID="details",e.EXTRAS_TAB_ID="extras",e}({});const Mw=s("./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviews.tsx").G,Ow=[Bw.EPISODES_TAB_ID,Bw.EXPLORE_TAB_ID,Bw.EXTRAS_TAB_ID,Bw.RELATED_TAB_ID,Bw.DETAILS_TAB_ID],jw=(0,l.$j)((e=>({showTabCollections:(0,Cw.gy)(e),showOtherFormats:(0,xw.$)(e),showCastAndCrew:(0,vw.s)(e),showContainers:pw(e),showProductDetails:(0,Iw.W)(e),showExploreTab:(0,kw.E)(e),showReviews:(0,bt.M)(e),showExtras:(0,Nw.C)(e),isPhablet:(0,mt.G_)(e),isRetail:(0,xe.T_)(e),disableStickyBtfTab:(0,mt.Fk)(e),queryParameters:(0,xe.$s)(e)})))((e=>{const{queryParameters:t,showReviews:s,isRetail:a}=e,n=(({showTabCollections:e,showOtherFormats:t,showCastAndCrew:s,showContainers:a,showProductDetails:n,showExploreTab:i,showReviews:r,showExtras:o})=>({[Bw.EPISODES_TAB_ID]:e,[Bw.EXPLORE_TAB_ID]:i,[Bw.EXTRAS_TAB_ID]:o,[Bw.RELATED_TAB_ID]:a||s,[Bw.DETAILS_TAB_ID]:n||t||r}))(e),r=(e=>{const t=e.tab?e.tab[0]:void 0;return Object.values(Bw).includes(t)?t:void 0})(t),o=((e,t)=>t&&e[t]?t:e[Bw.EXPLORE_TAB_ID]?Bw.EXPLORE_TAB_ID:Ow.find((t=>e[t]))||"")(n,r),l=`${Sw.$}${o}`,[c,d]=i.useState(l),[u,m]=i.useState(),[p,g]=i.useState(!1),[h,v]=i.useState(0),[b,D]=i.useState(),[y,f]=i.useState(!0),{isRTL:E,getString:w}=i.useContext(je.h),_=i.useRef(null),T=i.useRef(null),C=E?"ArrowLeft":"ArrowRight",x=E?"ArrowRight":"ArrowLeft";let I=!1;const N=b&&p&&_.current.getBoundingClientRect().top-h<0;i.useEffect((()=>{let e,t;window.innerWidth<=Mi.Gz&&o!=Bw.EXTRAS_TAB_ID&&f(!1);{const a=document.getElementById(Mi.Au);var s;if(a&&D(a),void 0!==window.ResizeObserver)t=new ResizeObserver((()=>{var t;const s=parseInt(getComputedStyle(document.body).getPropertyValue(Oi)),n=isNaN(s)?0:s,i=a&&a.getBoundingClientRect()?a.getBoundingClientRect().height+n:0;v(i),e=new IntersectionObserver((([e])=>{g(!e.isIntersecting)}),{rootMargin:`-${i}px 0px 100% 0px`,threshold:1}),null!==(t=e)&&void 0!==t&&t.observe&&null!=_&&_.current&&e.observe(_.current)})),null!==(s=t)&&void 0!==s&&s.observe&&a&&t.observe(a)}return null!=_&&_.current&&r&&n[r]&&P(),()=>{var s,a;(null===(s=e)||void 0===s?void 0:s.disconnect)&&e.disconnect(),(null===(a=t)||void 0===a?void 0:a.disconnect)&&t.disconnect()}}),[]),i.useEffect((()=>{const e=()=>{u&&N&&(document.activeElement.blur(),m(void 0))};return null==b||b.addEventListener("mouseover",e),()=>{null==b||b.removeEventListener("mouseover",e)}}),[u,b,N]);const P=()=>{const e=_.current.getBoundingClientRect().top-h+5;window.scrollBy({top:Math.ceil(e),behavior:"smooth"})},k=e=>{e!==Bw.EXTRAS_TAB_ID||y||f(!0);const t=`${Sw.$}${e}`;P(),d(t)},S=e=>{var t,s;const a=`tab-selector-${V[e].tabId}`;m(a),k(V[e].tabId),null===(t=T.current)||void 0===t||null===(s=t.querySelector(`#${a}`))||void 0===s||s.focus()},V=(()=>{const e="hor",t=i.createElement("div",null,i.createElement(ue.DvuiContainer,{className:tt(Sl.Z.detailsTabContainer)},i.createElement("div",{className:tt(Sl.Z.btfProductMetaInfo)},i.createElement(_w.W,null)),i.createElement("div",{className:tt(Sl.Z.customerReviews)},s&&i.createElement(Mw,null),!1)),i.createElement(Rw,null)),r=n[Bw.EPISODES_TAB_ID]&&{header:i.createElement(Wt.H1,{stringID:"DV_DP_TAB_episodes"}),content:i.createElement(Vl.c,null),refTag:(0,Js.i)("atv_dp_btf_tab_{tabType}_ep",{tabType:e}),automationId:"btf-episodes-tab",tabId:Bw.EPISODES_TAB_ID},o=n[Bw.EXPLORE_TAB_ID]&&{header:i.createElement(Wt.H1,{stringID:"DV_DP_TAB_explore"}),content:i.createElement(Pw.g,null),refTag:(0,Js.i)("atv_dp_btf_tab_{tabType}_exp",{tabType:e}),automationId:"btf-explore-tab",tabId:Bw.EXPLORE_TAB_ID},l=n[Bw.RELATED_TAB_ID]&&{header:i.createElement(Wt.H1,{stringID:"DV_DP_TAB_related"}),content:i.createElement("div",{className:tt({[Sl.Z.relatedTabWrapper]:!a})},i.createElement(hw,null),i.createElement(ww,null),i.createElement(Lw,null)),refTag:(0,Js.i)("atv_dp_btf_tab_{tabType}_rel",{tabType:e}),automationId:"btf-related-tab",tabId:Bw.RELATED_TAB_ID,className:Sl.Z.relatedTabContainer},c=n[Bw.DETAILS_TAB_ID]&&{header:i.createElement(Wt.H1,{stringID:"DV_DP_TAB_details"}),content:t,refTag:(0,Js.i)("atv_dp_btf_tab_{tabType}_det",{tabType:e}),automationId:"btf-details-tab",tabId:Bw.DETAILS_TAB_ID};return[r,o,n[Bw.EXTRAS_TAB_ID]&&{header:i.createElement(Wt.H1,{stringID:"DV_DP_TAB_extras"}),content:i.createElement(Tw.d,{isExtraTabActivated:y}),refTag:(0,Js.i)("atv_dp_btf_tab_{tabType}_ext",{tabType:e}),automationId:"btf-extras-tab",tabId:Bw.EXTRAS_TAB_ID},l,c].filter(Boolean)})();if((0,bn.xb)(V))return null;const W=V.map(((e,t)=>{const s=`${Sw.$}${e.tabId}`===c;return i.createElement(i.Fragment,{key:`btf-content-${t}`},i.createElement(Sw.j,{tabId:e.tabId,isVisible:s,isLazy:!1,tabClassName:tt(e.className,{[Sl.Z.isSelectedTab]:s})},i.createElement("h2",{className:Sl.Z.hide},e.header),e.content,t!==V.length-1&&i.createElement("button",{className:Sl.Z.hide,onFocus:()=>S(t+1),"aria-label":w("DV_DP_ARIA_next_tab")})))})),A=e=>i.createElement(bo.Container,{className:Sl.Z.headers},V.map(((t,s)=>{const a=`${Sw.$}${t.tabId}`===c,n=`tab-selector-${t.tabId}`,r=n===u;return i.createElement(_s._,{key:`btf-nav-${s}`,refTag:t.refTag},i.createElement("button",{id:e?`${n}-sticky`:n,name:"btf-content-selector",className:tt(Sl.Z.headerButton,{[Sl.Z.isSelected]:a,[Sl.Z.isFocused]:e&&r}),defaultChecked:a,onClick:()=>k(t.tabId),tabIndex:a?0:-1,onKeyDown:e=>((e,t)=>{e.key===x?S(0===t?V.length-1:t-1):e.key===C&&S(t===V.length-1?0:t+1)})(e,s),"data-automation-id":t.automationId,"data-testid":t.automationId,onFocus:()=>{I||(e?S(s):m(n))},onBlur:()=>m(void 0),onMouseDown:()=>{I=!0},onMouseUp:()=>{I=!1}},i.createElement("span",{className:Sl.Z.headerText},t.header)))}))),R=i.createElement("div",{className:tt(Sl.Z.nav,Sl.Z.staticNav,{[Sl.Z.hideStaticTabs]:N}),ref:T},A()),L=i.createElement("div",{className:tt(Sl.Z.nav,Sl.Z.stickyNav,{[Sl.Z.focusIn]:!!u})},A(!0));return i.createElement(i.Fragment,null,i.createElement("div",{ref:_}),R,N&&b&&(0,me.createPortal)(L,b),i.createElement("div",{className:Sl.Z.contentWrapperTabbed},W))}));function Fw(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Hw extends i.Component{constructor(e){super(e),Fw(this,"store",void 0),Fw(this,"deviceVariant",void 0),Fw(this,"state",{videoContext:{...Ic.E,disableRightClick:(0,_r.D1)(this.props.context.marketplaceID),updateContext:e=>{this.setState({videoContext:e})}}});const{logger:t,context:s,state:a}=e;this.store=de({...a,requestContext:s},t),this.deviceVariant=new kl.AS(e.context.userAgent,e.context.appName).getVariant(!0)}render(){const{logger:e,context:t,state:s,strings:a,homeRegion:n,render:r}=this.props;if(s.restriction&&s.restriction[s.pageTitleId]&&s.restriction[s.pageTitleId].blockedPageModel)return null;const o=(0,ea.U)({context:t,homeRegion:n}),c=ta.Nb.DetailPage,d={pageType:s.pageContext.pageType,subPageType:s.pageContext.subPageType||ta.wW.Unknown,clientVariant:c},u=s.pageContext.features,m=(p={disableHover:Boolean("true"===u.disableHover),disableEnrichItemMetadata:Boolean("true"===u.disableEnrichItemMetadata)},{disableHover:null!==(g=null==p?void 0:p.disableHover)&&void 0!==g&&g,disableEnrichItemMetadata:null!==(h=null==p?void 0:p.disableEnrichItemMetadata)&&void 0!==h&&h,isHoverSsmOn:null!==(v=null==p?void 0:p.isHoverSsmOn)&&void 0!==v&&v});var p,g,h,v;return i.createElement(ue.DvuiContainer,null,i.createElement(it.kw.Provider,{value:{detailPageTheme:it.wS.NextGen}},i.createElement(sc._z,{strings:a,deviceVariant:this.deviceVariant,os:s.pageContext.os,theme:"Default",shouldUseReducedMotion:!1,clickstream:o,clickstreamPageContext:d,contingencies:m},i.createElement(je.h.Provider,{value:{getString:(0,Fe.qY)(a,e,t),...s.pageContext,isRTL:!(null==r||!r.isRTL),requestContext:t,clickStreamPageType:s.pageContext.pageType,clickStreamSubPageType:s.pageContext.subPageType||ta.wW.Unknown,clickstream:o,isMobile:(0,Ze.t)(s.pageContext),isPhablet:(0,Ze.$)(s.pageContext),refTagTitleId:(0,je.N)(s.pageContext.pageTitleId,s.self&&s.self[s.pageTitleId]),isRetail:"Retail"==t.domain}},i.createElement(l.zt,{store:this.store},i.createElement(Ne,{name:"btf"},i.createElement(Nl,null,i.createElement(Ic.l.Provider,{value:this.state.videoContext},i.createElement(jw,null)))))))))}}const Uw={name:"detail-btf",getProps:void 0,Component:(0,r.s6)((0,o.ty)(Hw))};(async()=>{(0,a.y)(Pl),(0,n.KL)(),await new Promise((e=>setTimeout(e))),(0,a.y)(Uw),(()=>{const e="detail-hydration-complete";let t;"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e)),"complete"===document.readyState&&document.dispatchEvent(t),window.addEventListener("load",(()=>document.dispatchEvent(t)))})()})()},"./src/shared/CS/components/BuyBoxMessage/BuyBoxMessage.tsx":(e,t,s)=>{"use strict";s.d(t,{v:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s.n(n),r=s("./src/shared/CS/components/BuyBoxMessage/BuyBoxMessage.module.scss"),o=s("./node_modules/@amzn/dvui/dist/Text.js");const l=({message:e,className:t,noColumnWidth:s})=>e?a.createElement("div",{className:i()(r.Z.buyboxMessage,{[r.Z.noColumnWidth]:s},t),"data-testid":"buy-box-msg"},a.createElement(o.Text,{string:e})):null},"./src/shared/CS/components/CallToActionButton/CallToActionButton.tsx":(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s("./src/shared/CS/components/CallToActionButton/CallToActionButton.module.scss"),r=s("./node_modules/@amzn/dvui/dist/Button.js"),o=s("./node_modules/@amzn/dvui/dist/Text.js");const l=({icon:e,label:t,labelClassName:s,href:l,isInverted:c,disableInvertedOnHover:d,onCallToActionButtonClick:u,className:m,textAlign:p,testID:g})=>{const h=n(m,i.Z.callToActionButton,{[i.Z.inverted]:c,[i.Z.notInvertedOnHover]:d});return a.createElement(r.Button,{use:Symbol("CallToActionButton"),className:h,href:l,onClick:u,textAlign:null!=p?p:"start",testID:g},e,t&&a.createElement(o.Text,{string:t,className:s}))}},"./src/shared/CS/components/EntitlementMessage/EntitlementMessage.tsx":(e,t,s)=>{"use strict";s.d(t,{nI:()=>b});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s.n(n),r=s("./node_modules/@amzn/dvui/dist/Text.js"),o=s("./node_modules/@amzn/dvui/dist/Icons/Entitled.js"),l=s.n(o),c=s("./node_modules/@amzn/dvui/dist/Icons/Ads.js"),d=s.n(c),u=s("./node_modules/@amzn/dvui/dist/Icons/Unentitled.js"),m=s.n(u),p=s("./src/shared/CS/components/EntitlementMessage/EntitlementMessage.module.scss");const g=({icon:e})=>{switch(e){case h.ENTITLED:return a.createElement("span",{className:p.Z.entitledIcon,"data-testid":"entitled-icon"},a.createElement(l(),null));case h.ADS:return a.createElement("span",{className:p.Z.adsIcon,"data-testid":"ads-icon"},a.createElement(d(),null));case h.OFFER:return a.createElement("span",{className:p.Z.offerIcon,"data-testid":"unentitled-icon"},a.createElement(m(),null));default:return null}};let h=function(e){return e.OFFER="OFFER_ICON",e.ADS="ADS_ICON",e.ENTITLED="ENTITLED_ICON",e}({});function v(e){const t="string"==typeof e?e:null==e?void 0:e.string;return!t||/^\s*$/.test(t)}const b=({message:e,icon:t,className:s,labelClassName:n,hideIcon:o=!1,takeUpSpaceIfEmpty:l=!1})=>v(e)&&v(t)?l?a.createElement("div",{className:i()(p.Z.entitlementMessage,p.Z.hide,s)}," "):null:a.createElement("div",{className:i()(p.Z.entitlementMessage,s)},t&&!o&&a.createElement(g,{icon:t}),e&&a.createElement(r.Text,{className:i()(p.Z.message,n),string:e}))},"./src/shared/CS/components/FocusTrap/FocusTrap.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>n});var a=s("./node_modules/react/index.js");const n=({children:e})=>{const t=a.useRef(null);a.useEffect((()=>(document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s))),[]);const s=e=>{var s;if("Tab"!==e.key)return;const a=e.shiftKey&&"Tab"===e.key,n=Array.from((null===(i=t.current)||void 0===i?void 0:i.querySelectorAll('a[href],textarea,input,button,label,[tabindex]:not([tabindex="-1"])'))||[]);var i;const r=n.shift(),o=n.pop()||r,l=null===(s=t.current)||void 0===s?void 0:s.contains(document.activeElement),c=document.activeElement===(a?r:o)||null;l&&!c||((e,t)=>{t.preventDefault(),null==e||e.focus()})(a?o:r,e)};return a.createElement("div",{ref:t,"data-testid":"focus-trap"},e)}},"./src/shared/CS/components/LazyImage/LazyImage.tsx":(e,t,s)=>{"use strict";s.d(t,{w:()=>d});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s.n(n),r=s("./src/shared/CS/components/LazyImage/LazyImage.module.scss"),o=s("./src/shared/imageUtils/imageUtils.ts"),l=s("./src/util/utils/imageUtils/imageUtils.tsx"),c=s("./src/util/wrappers/LoggersContext.tsx");const d=a.memo((({src:e,baseValue:t,alt:s,aspectRatio:n,imageClassName:d,wrapperClassName:u,autoCrop:m,sizesOptions:p,srcSetWidths:g,parentListeners:h,shouldLazyLoad:v,debugID:b,responsiveScaleDimension:D=o.rB.WIDTH})=>{const y=a.useRef(),[f,E]=a.useState(!1),w=a.useRef(null),_=new l.e(e).urlFileFormat,T="png"==_?"image/png":"image/jpeg",C="png"==_?o.GH.png:o.GH.jpg,{logger:x}=(0,c.L1)(),I=e=>{var t;(E(!0),e)&&(null==h||null===(t=h.onLoad)||void 0===t||t.call(h,e.currentTarget.currentSrc))};return a.useEffect((()=>{var e;null!==(e=w.current)&&void 0!==e&&e.complete&&!f&&I()}),[]),a.createElement("div",{ref:y,className:i()(r.Z.imageContainer,u),style:n?{aspectRatio:n}:{}},a.createElement("picture",null,a.createElement("source",{type:"image/webp",srcSet:g?(0,o.X8)(e,g,D,o.GH.webp,!0,m):(0,o.er)(e,t,D,o.GH.webp,!0,void 0,m),sizes:p&&(0,o.TQ)(p.defaultSrcSize,p.srcSizes)}),a.createElement("source",{type:T,srcSet:g?(0,o.X8)(e,g,D,C,!0,m):(0,o.er)(e,t,D,C,!0,void 0,m),sizes:p&&(0,o.TQ)(p.defaultSrcSize,p.srcSizes)}),a.createElement("img",{alt:null!=s?s:"",className:i()(d,r.Z.image,{[r.Z.imageWithAspectRatio]:n,[r.Z.imageWithNoAspectRatio]:!n}),onLoad:I,onError:t=>{var s;null==h||null===(s=h.onError)||void 0===s||s.call(h);const a="dvWebClientImgLoadFailure";x.count(a,1,!1),x.warn(t,`[${a}] LazyImage failed to load an image for ${b}. The image URL is: ${e}`)},style:n?{aspectRatio:n}:{},src:(0,o.e4)({src:e,value:t,baseType:D,skipStripTags:!0,supportTransparency:void 0,autoCrop:m,type:o.GH.jpg}),loading:v?"lazy":"eager"})))}));d.displayName="LazyImage"},"./src/shared/CS/components/Modal/Modal.tsx":(e,t,s)=>{"use strict";s.d(t,{u:()=>v});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s.n(n),r=s("./node_modules/@amzn/dvui/dist/Icons/Close.js"),o=s.n(r),l=s("./node_modules/@amzn/dvui/dist/Text.js"),c=s("./src/shared/CS/components/Text/Text.tsx"),d=s("./src/shared/CS/components/CallToActionButton/CallToActionButton.tsx"),u=s("./src/shared/CS/components/Modal/Modal.module.scss"),m=s("./node_modules/react-dom/index.js"),p=s("./src/shared/CS/components/FocusTrap/FocusTrap.tsx");function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},g.apply(this,arguments)}const h="modal-no-scroll",v=({isVisible:e,className:t,size:s="m",testID:n,titleText:r,bodyText:v,primaryActionText:b,secondaryActionText:D,onRequestClose:y,onDismiss:f,onPrimaryAction:E,onSecondaryAction:w,header:_,disableHeader:T,disableCloseButton:C,body:x,disableBody:I,footer:N,disableFooter:P,rootElement:k})=>{const S=a.useRef(null);a.useEffect((()=>{var t,s,a,n,i;e?(null===(t=document)||void 0===t||null===(s=t.documentElement)||void 0===s||s.classList.add(h),null==S||null===(a=S.current)||void 0===a||a.focus()):(null===(n=document)||void 0===n||null===(i=n.documentElement)||void 0===i||i.classList.remove(h),null==f||f());return()=>{var e,t;null===(e=document)||void 0===e||null===(t=e.documentElement)||void 0===t||t.classList.remove(h)}}),[e]);if(!e)return null;const V=a.createElement("button",{type:"button",onClick:y,className:u.Z.closeButton,"data-testid":"modal-close-button"},a.createElement(o(),null)),W=a.createElement(l.Text,{string:r,tag:"span",testID:"menu-header"}),A=a.createElement("div",{role:"presentation",onKeyDown:e=>{S.current&&"Escape"===e.key&&y()}},a.createElement("div",g({role:"dialog","aria-label":"Modal",ref:S,tabIndex:0,className:i()(u.Z.modalWrapper,u.Z[`${s}ModalSize`],t)},n&&{"data-automation-id":n,"data-testid":n}),a.createElement(p.i,null,a.createElement("div",{className:u.Z.modalContent},!T&&a.createElement(c.Z.Header,{className:u.Z.headerWrapper},null!=_?_:W,!C&&V),!I&&(null!=x?x:a.createElement(c.Z.Body,{className:u.Z.bodyWrapper},a.createElement(l.Text,{string:v,tag:"span"}))),!P&&(null!=N?N:a.createElement("div",{className:u.Z.footerWrapper},b&&a.createElement(d.z,{testID:"primary-action-button",className:u.Z.actionButton,isInverted:!0,onCallToActionButtonClick:E,label:b}),D&&a.createElement(d.z,{testID:"secondary-action-button",className:u.Z.actionButton,disableInvertedOnHover:!0,onCallToActionButtonClick:w,label:D})))))),a.createElement("div",{role:"presentation",className:u.Z.backgroundOverlay,onClick:y}));return k?(0,m.createPortal)(A,k):A};v.displayName="Modal"},"./src/shared/CS/components/SecondaryButton/SecondaryButton.tsx":(e,t,s)=>{"use strict";s.d(t,{k:()=>r});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s("./src/shared/CS/components/SecondaryButton/SecondaryButton.module.scss");const r=({href:e,isDisabled:t,icon:s,isInverted:r,label:o,className:l,labelClassName:c,onSecondaryButtonClick:d,isTransparentBackground:u,ariaLabel:m,testID:p,smallIconVariant:g=!1})=>{const h=e?"a":"button",v=n(l,i.Z.actionButton,{[i.Z.actionButtonInverted]:r,[i.Z.actionButtonTransparent]:u});return a.createElement("div",{className:v},a.createElement(h,{disabled:t,href:e,onClick:d,className:n(i.Z.actionButtonIcon,{[i.Z.smallIconVariant]:g}),"aria-label":m||o,"data-testid":p},s),o&&!t&&a.createElement("label",{className:n(c,i.Z.actionButtonLabel,{[i.Z.actionButtonLabelInverted]:r,[i.Z.actionButtonLabelTransparent]:u}),"aria-hidden":!0},o))}},"./src/shared/CS/components/Text/Text.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s("./src/shared/CS/components/Text/Text.module.scss");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},r.apply(this,arguments)}const o={MetaDataBadge:({children:e,className:t,...s})=>a.createElement("span",r({className:n(i.Z.metadataBadge,t)},s),e),MetaData:({children:e,className:t,...s})=>a.createElement("span",r({className:n(i.Z.metadata,t)},s),e),ActionButton:({children:e,className:t,...s})=>a.createElement("span",r({className:n(i.Z.actionButton,t)},s),e),Marker:({children:e,className:t,...s})=>a.createElement("span",r({className:n(i.Z.marker,t)},s),e),Body:({children:e,className:t,...s})=>a.createElement("p",r({className:n(i.Z.body,t)},s),e),SubHeader:({children:e,className:t,...s})=>a.createElement("h4",r({className:n(i.Z.subHeader,t)},s),e),Header:({children:e,className:t,...s})=>a.createElement("h3",r({className:n(i.Z.header,t)},s),e),Super:({children:e,className:t,...s})=>a.createElement("h2",r({className:n(i.Z.super,t)},s),e),Mega:({children:e,className:t,...s})=>a.createElement("h2",r({className:n(i.Z.mega,t)},s),e)}},"./src/shared/CS/utils/icons.ts":(e,t,s)=>{"use strict";s.d(t,{$3:()=>i,Nu:()=>n,W6:()=>a,rM:()=>r});const a="var(--dvui-icon-small-height)",n="var(--dvui-icon-small-width)",i="var(--dvui-icon-height)",r="var(--dvui-icon-width)"},"./src/shared/DetailPage/banner/messageCodes.ts":(e,t,s)=>{"use strict";s.d(t,{q:()=>a});let a=function(e){return e.WP_ERROR="WP_ERROR",e.WP_END="WP_END",e.WP_STREAM_ENDED="WP_STREAM_ENDED",e.WP_CREATE_INELIGIBLE="WP_CREATE_INELIGIBLE",e.WP_JOIN_INELIGIBLE="WP_JOIN_INELIGIBLE",e.WP_GEO_RESTRICTION="WP_GEO_RESTRICTION",e.WP_UNSUPPORTED_BROWSER="WP_UNSUPPORTED_BROWSER",e.WP_UNSUPPORTED_CHAT="WP_UNSUPPORTED_CHAT",e.WP_CREATE_INELIGIBLE_TVOD="WP_CREATE_INELIGIBLE_TVOD",e.WP_JOIN_INELIGIBLE_TVOD="WP_JOIN_INELIGIBLE_TVOD",e.WP_CREATE_INELIGIBLE_SVOD_TVOD="WP_CREATE_INELIGIBLE_SVOD_TVOD",e.WP_JOIN_INELIGIBLE_SVOD_TVOD="WP_JOIN_INELIGIBLE_SVOD_TVOD",e.WP_BANNED_SPECIFIC_CHAT="WP_BANNED_SPECIFIC_CHAT",e.WP_SAFARI_MAC_UNSUPPORTED="WP_SAFARI_MAC_UNSUPPORTED",e}({})},"./src/shared/DetailPage/queryParameters.ts":(e,t,s)=>{"use strict";s.d(t,{cg:()=>n,n9:()=>r,pN:()=>a,w5:()=>i});const a="bannerMsg",n="wpTitleId",i="wpCode",r="fbId"},"./src/shared/Explore/ClientImpressions/ImpressionTracker.tsx":(e,t,s)=>{"use strict";s.d(t,{$:()=>d,F:()=>c});var a=s("./src/shared/deviceProxy/ClientsideImpressionClient.ts"),n=s("./src/util/logger/logger.ts"),i=s("./node_modules/uuid/dist/esm-browser/v4.js"),r=s("./src/util/csm/csm.tsx");function o(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l=function(e){return e[e.HandleIOEntries=0]="HandleIOEntries",e[e.GroupIndividualImpressions=1]="GroupIndividualImpressions",e[e.SendRequestsFromQueue=2]="SendRequestsFromQueue",e[e.__LENGTH=3]="__LENGTH",e}(l||{});class c{static init(e){if(c.io||(c.io=new IntersectionObserver(c.onNewIoEntries,{threshold:[.5,.6,.7,.8,.9,1]})),c.logger||(c.logger=new n.Oc("DVWebNode_ImpressionTracker")),c.timeOrigin=Date.now()-performance.now(),c.elementToElementData||(c.elementToElementData=new Map),c.currentlyInViewItems||(c.currentlyInViewItems=new Map),c.intersectionObserverEntryQueue||(c.intersectionObserverEntryQueue=[]),c.pendingIndividualImpressionRecords||(c.pendingIndividualImpressionRecords=new Map),c.groupedImpressionsQueue||(c.groupedImpressionsQueue=[]),c.unobservedElements=0,c.minCarousel=0,c.maxCarousel=0,c.attachOnIdleCallback(),c.client=new a.g(e),!c.pageLoaded){c.pageLoaded=!1;const e=()=>{c.pageLoaded=!0,window.removeEventListener("load",e)};window.addEventListener("load",e)}document.addEventListener("visibilitychange",this.onVisibilityChange),document.addEventListener("pagehide",c.onPageHide)}static observe(e,t,s){try{var a,n;if(c.io||c.init(s),null==t||!t.collectionImpressionData)return;if(!e)return void(0,r.cL)("DVWebNode::ImpressionTracker::ObserveNoElement",1,!1);null===(a=c.io)||void 0===a||a.observe(e),null===(n=c.elementToElementData)||void 0===n||n.set(e,t)}catch(e){var i;null===(i=c.logger)||void 0===i||i.error(e)}}static unobserve(e){var t;e?(null===(t=c.io)||void 0===t||t.unobserve(e),c.unobservedElements++,c.elementToElementData&&c.unobservedElements!==c.elementToElementData.size||c.disconnectAll()):(0,r.cL)("DVWebNode::ImpressionTracker::UnobserveNoElement",1,!1)}static disconnectAll(){var e;null===(e=c.io)||void 0===e||e.disconnect(),c.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}),c.io=void 0,c.elementToElementData=void 0,c.currentlyInViewItems=void 0,c.intersectionObserverEntryQueue=void 0,c.pendingIndividualImpressionRecords=void 0,c.unobservedElements=0,document.removeEventListener("visibilitychange",this.onVisibilityChange)}static addImpressionRecord(e,t){var s,a,n;((0,r.cL)(`DVWebNode::ImpressionTracker::${e.eventType}ImpressionRecorded`,1,!1),null!==(s=c.pendingIndividualImpressionRecords)&&void 0!==s&&s.has(t))?null===(a=c.pendingIndividualImpressionRecords.get(t))||void 0===a||a.push(e):null===(n=c.pendingIndividualImpressionRecords)||void 0===n||n.set(t,[e])}static logManualImpression(e,t){var s,a;const n=null===(s=c.elementToElementData)||void 0===s?void 0:s.get(e),i=null===(a=c.currentlyInViewItems)||void 0===a?void 0:a.get(e),o=performance.now();if(!n||!n.collectionImpressionData||!i)return void(0,r.cL)("DVWebNode::ImpressionTracker::ManualImpressionsNoElement",1,!1);const l={...n,...i,eventType:t,timeToView:i.impressionStartTime,inViewTime:o-i.impressionStartTime,eventTime:c.timeOrigin+o,elementSize:`${e.scrollWidth},${e.scrollHeight}`};c.addImpressionRecord(l,n.collectionImpressionData),"Select"===t?c.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}):c.attachOnIdleCallback()}}o(c,"io",void 0),o(c,"timeOrigin",void 0),o(c,"elementToElementData",void 0),o(c,"intersectionObserverEntryQueue",void 0),o(c,"pendingIndividualImpressionRecords",void 0),o(c,"groupedImpressionsQueue",void 0),o(c,"currentlyInViewItems",void 0),o(c,"idleCallbackHandle",void 0),o(c,"timeoutID",void 0),o(c,"client",void 0),o(c,"unobservedElements",void 0),o(c,"pageLoaded",void 0),o(c,"minCarousel",void 0),o(c,"maxCarousel",void 0),o(c,"logger",void 0),o(c,"onVisibilityChange",(()=>{"hidden"==document.visibilityState&&c.onPageHide()})),o(c,"onNewIoEntries",(e=>{var t;null===(t=c.intersectionObserverEntryQueue)||void 0===t||t.push(...e),c.attachOnIdleCallback()})),o(c,"idleCallbackNextStep",0),o(c,"callbackBuffer",10),o(c,"minimumImpressions",3),o(c,"onIdleCallback",((e,t=!1)=>{var s,a,n;c.clearSavedCallback();const i=()=>e.didTimeout||e.timeRemaining()>c.callbackBuffer;for(;i()&&c.idleCallbackNextStep<3;)switch(c.idleCallbackNextStep){case l.HandleIOEntries:if(c.intersectionObserverEntryQueue){for(;c.intersectionObserverEntryQueue.length>0;)c.handleIoEntryQueue();c.recalculateMinAndMax()}c.idleCallbackNextStep++;break;case l.GroupIndividualImpressions:c.groupIndividualImpressionRecords(),c.idleCallbackNextStep++;break;case l.SendRequestsFromQueue:for(;c.groupedImpressionsQueue&&c.groupedImpressionsQueue.length>0&&(c.groupedImpressionsQueue.length>=c.minimumImpressions||t)&&i();)c.sendRequestFromQueue();c.idleCallbackNextStep++}c.idleCallbackNextStep>=l.__LENGTH&&(c.idleCallbackNextStep=0),(null!==(s=c.intersectionObserverEntryQueue)&&void 0!==s&&s.length||null!==(a=c.pendingIndividualImpressionRecords)&&void 0!==a&&a.size||null!==(n=c.groupedImpressionsQueue)&&void 0!==n&&n.length)&&c.attachOnIdleCallback()})),o(c,"recalculateMinAndMax",(()=>{let e=9999,t=0;c.currentlyInViewItems&&(c.currentlyInViewItems.forEach((s=>{e=Math.min(e,s.carouselPosition),t=Math.max(t,s.carouselPosition)})),c.minCarousel=e,c.maxCarousel=t)})),o(c,"inferEventTrigger",(e=>{if(!e)return"Pageload";const t=e.carouselPosition||0;return c.pageLoaded?c.maxCarousel>=t&&t>=c.minCarousel?"Hscroll":"Vscroll":"Pageload"})),o(c,"handleIoEntryQueue",(()=>{var e,t;if(!c.currentlyInViewItems||0==(null===(e=c.intersectionObserverEntryQueue)||void 0===e?void 0:e.length))return;const s=null===(t=c.intersectionObserverEntryQueue)||void 0===t?void 0:t.shift();if(s)if(s.isIntersecting){const e=c.currentlyInViewItems.get(s.target);if(e)c.currentlyInViewItems.set(s.target,{...e,maxFractionInView:Math.max(s.intersectionRatio,e.maxFractionInView)});else{var a;const e=null===(a=c.elementToElementData)||void 0===a?void 0:a.get(s.target),t=c.inferEventTrigger(e),n=null==e?void 0:e.carouselPosition;void 0!==n?c.currentlyInViewItems.set(s.target,{impressionStartTime:s.time,maxFractionInView:s.intersectionRatio,eventTrigger:t,carouselPosition:n}):(0,r.cL)("DVWebNode::ImpressionTracker::NoCarouselPosition",1,!1)}}else{var n;const e=c.currentlyInViewItems.get(s.target),t=null===(n=c.elementToElementData)||void 0===n?void 0:n.get(s.target);if(e&&t){const a=e.impressionStartTime,n=s.time,i={...t,...e,inViewTime:n-a,timeToView:a,eventTime:c.timeOrigin+a,elementSize:`${s.target.scrollWidth},${s.target.scrollHeight}`,eventType:"View"};c.pageLoaded&&i.inViewTime>1e3&&c.addImpressionRecord(i,null==t?void 0:t.collectionImpressionData),c.currentlyInViewItems.delete(s.target)}}})),o(c,"groupIndividualImpressionRecords",(()=>{var e,t;0!=(null===(e=c.pendingIndividualImpressionRecords)||void 0===e?void 0:e.size)&&(null===(t=c.pendingIndividualImpressionRecords)||void 0===t||t.forEach(((e,t,s)=>{var a;const n=[];let i=0;null==e||e.forEach(((e,t)=>{(0==t||Math.abs(e.eventTime-i/t)<2e3)&&(i+=e.eventTime,n.push(e))})),n.length==(null==e?void 0:e.length)?s.delete(t):s.set(t,e.filter((e=>!n.includes(e)))),null===(a=c.groupedImpressionsQueue)||void 0===a||a.push(n)})))})),o(c,"sendRequestFromQueue",(()=>{var e,t;let s=[];const a=null===(e=c.groupedImpressionsQueue)||void 0===e?void 0:e.length;var n;a&&a>20?(s=null===(n=c.groupedImpressionsQueue)||void 0===n?void 0:n.splice(0,20),(0,r.cL)("DVWebNode::ImpressionTracker::BatchSizeMaxed",1,!1)):(s=c.groupedImpressionsQueue,c.groupedImpressionsQueue=[]);if(s=null===(t=s)||void 0===t?void 0:t.filter((e=>e.length>0)),!s||!s[0])return void(0,r.cL)("DVWebNode::ImpressionTracker::NoGroupedImpressions",1,!1);const o={eventBatchTimestamp:Date.now(),ImpressionEntryList:s.map((e=>({items:e.map((e=>({ImpressionEntryEvent:{eventId:(0,i.Z)(),eventType:e.eventType,eventTrigger:e.eventTrigger,eventTimestamp:e.eventTime},ImpressionEntryView:{inViewTime:e.inViewTime,inViewStripe:Math.min(100*e.maxFractionInView,100),timeToView:e.timeToView},ImpressionEntryItem:{itemName:e.widgetType,itemContentId:e.titleID,itemCreativeId:c.extractCreativeIdFromImageUrl(e.imageURL),itemContentSize:e.elementSize,itemReftag:e.refMarker,itemSlotId:`${e.itemPosition+1},${e.carouselPosition+1}`},ImpressionEntryItemAnalytics:e.itemAnalytics}))),carouselAnalytics:e[0].collectionImpressionData,clientVariant:"PVWebsite"})))};c.client.logImpression(o)})),o(c,"extractCreativeIdFromImageUrl",(e=>{const t=null==e?void 0:e.match("/([a-zA-Z0-9_-]+\\.[a-zA-Z0-9,_.]*(jpe?g|png))");return t&&t.length>1?t[1]:e})),o(c,"attachOnIdleCallback",(()=>{c.idleCallbackHandle||c.timeoutID||(window.requestIdleCallback?c.idleCallbackHandle=window.requestIdleCallback(c.onIdleCallback):c.timeoutID=window.setTimeout((()=>{const e=Date.now();c.onIdleCallback({didTimeout:!1,timeRemaining:()=>e+50-Date.now()})}),2e3))})),o(c,"detatchOnIdleCallback",(()=>{window.cancelIdleCallback&&c.idleCallbackHandle?window.cancelIdleCallback(c.idleCallbackHandle):c.timeoutID&&window.clearTimeout(c.timeoutID),c.clearSavedCallback()})),o(c,"clearSavedCallback",(()=>{c.idleCallbackHandle=void 0,c.timeoutID=void 0})),o(c,"onPageHide",(()=>{var e;(0,r.cL)("DVWebNode::ImpressionTracker::OnPageHide",1,!1);const t=performance.now();if(!c.currentlyInViewItems)return;const s=Array.from(c.currentlyInViewItems.keys()).map((e=>({isIntersecting:!1,target:e,time:t,intersectionRatio:0,rootBounds:null,intersectionRect:e.getBoundingClientRect(),boundingClientRect:e.getBoundingClientRect()})));null===(e=c.intersectionObserverEntryQueue)||void 0===e||e.push(...s),c.onIdleCallback({didTimeout:!0,timeRemaining:()=>100},!0)}));const d=e=>{const t=null==e?void 0:e.match("[/?&]_?ref=([a-zA-Z0-9-_]+)");return t&&t.length>1?t[1]:((0,r.cL)("DVWebNode::ImpressionTracker::UnknownRef",1,!1),"atv_impression_unknown")}},"./src/shared/Explore/components/DraperPlayer/DraperPlayer.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>b});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s("./src/util/csm/csm.tsx"),r=s("./src/shared/Explore/components/DraperPlayer/utils/metrics.ts"),o=s("./src/shared/Explore/components/DraperPlayer/DraperPlayer.module.scss"),l=s("./src/shared/Explore/components/DraperPlayer/types.ts"),c=s("./src/shared/Explore/components/DraperPlayer/utils/locks.ts"),d=s("./src/shared/Explore/components/DraperPlayer/DraperPlayer/Controls.tsx"),u=s("./src/util/api/APIClient.ts"),m=s("./src/shared/utils/analytics/recordReftag.tsx"),p=s("./node_modules/@amzn/dv-web-node-reftags/index.js");function g(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h="DVWeb::Storefront::PreRollPlayer",v=.1;class b extends a.PureComponent{constructor(e){super(e),g(this,"playHandler",void 0),g(this,"stopHandler",void 0),g(this,"updateHandler",void 0),g(this,"errorHandler",void 0),g(this,"waitingHandler",void 0),g(this,"videoStarted",void 0),g(this,"firstQuartileReached",void 0),g(this,"midpointReached",void 0),g(this,"thirdQuartileReached",void 0),g(this,"expectedReadyState",void 0),g(this,"wrappers",{}),g(this,"fadeAudioIntervalHandle",void 0),g(this,"api",new u.l),g(this,"fadeAudio",(e=>new Promise((t=>{var s;this.fadeAudioIntervalHandle&&clearInterval(this.fadeAudioIntervalHandle),null!==(s=this.wrappers.videoPlayer)&&void 0!==s&&s.muted&&(this.wrappers.videoPlayer.muted=!1,this.wrappers.videoPlayer.volume=0);const a=()=>{this.fadeAudioIntervalHandle&&(clearInterval(this.fadeAudioIntervalHandle),this.fadeAudioIntervalHandle=void 0),t()};this.fadeAudioIntervalHandle=setInterval((()=>{if(this.wrappers.videoPlayer){const{volume:t}=this.wrappers.videoPlayer,s=t>e?t>e+v?t-v:e:t<e-v?t+v:e;this.wrappers.videoPlayer.volume=s,s===e&&a()}else a()}),30)})))),g(this,"fadeOutAudio",(()=>this.fadeAudio(0))),g(this,"fadeInAudio",(()=>this.state.originalVolume&&this.fadeAudio(this.state.originalVolume))),g(this,"toggleMute",(e=>{var t,s;if(0!==e.button)return;e.preventDefault();const a=!this.props.videoContext.muted;null===(t=(s=this.props.videoContext).updateContext)||void 0===t||t.call(s,{...this.props.videoContext,muted:!this.props.videoContext.muted}),this.onMute(a)})),g(this,"toggleFullscreen",(e=>{if(0===e.button)return this.updateFullscreen(!this.props.videoContext.fullScreen)})),g(this,"setWrapperRef",(e=>{this.wrappers.videoWrapper=e})),g(this,"setVideoPlayerRef",(e=>{this.wrappers.videoPlayer=e})),this.state={hasError:!1,playing:!1,paused:!1},this.videoStarted=!1,this.firstQuartileReached=!1,this.midpointReached=!1,this.thirdQuartileReached=!1,this.expectedReadyState=4,this.onVideoError=this.onVideoError.bind(this)}componentDidMount(){var e;this.setState({originalVolume:null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.volume}),this.wrappers.videoPlayer&&(this.wrappers.videoPlayer.preload="auto",this.wrappers.videoPlayer.muted=this.props.videoContext.muted)}componentDidUpdate(e){const t=(0,c.wj)(this.props,this),s=(0,c.wj)(e,this);this.state.playing&&t!==s?t?setTimeout((()=>{this.state.playing&&(0,c.wj)(this.props,this)&&this.resumeWhenPaused()}),1500):this.props.playerIsActive?this.stop():this.pauseButKeepVisible():(0,c.eW)(this.props)&&this.state.paused&&this.stop(),this.props.prerolls!=e.prerolls&&(this.videoStarted=!1,this.firstQuartileReached=!1,this.midpointReached=!1,this.thirdQuartileReached=!1);const{muted:a}=this.props.videoContext;a!=e.videoContext.muted&&(this.props.enableAudioFading?a?this.fadeOutAudio():this.fadeInAudio():this.wrappers.videoPlayer&&(this.wrappers.videoPlayer.muted=a))}componentWillUnmount(){this.removeEventListeners(),(0,c.$m)(this.props,this),this.removeVideoSource()}isSuperOrStandardHero(){return[l.H.Superhero,l.H.StandardHero].includes(this.props.placement)}startPlayer(){var e;if(this.playHandler=()=>this.playAssumingReady(),this.stopHandler=()=>this.onPlaybackComplete(),this.updateHandler=()=>this.onTimeUpdate(),this.errorHandler=()=>this.onLoadError(),this.waitingHandler=()=>this.onWaiting(),this.addEventListeners(),!this.props.playerIsActive&&!(0,c.eW)(this.props))return;(0,c.hN)(this.props,this);const t=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.readyState;if(t&&t>=this.expectedReadyState){var s;if(this.isSuperOrStandardHero())null===(s=this.wrappers.videoPlayer)||void 0===s||s.load();this.playHandler()}}async playAssumingReady(){var e;const t=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.readyState;if(t&&t>=this.expectedReadyState){var s,a,n;await(null===(s=this.props.parentListeners)||void 0===s||null===(a=s.onBeforePlay)||void 0===a?void 0:a.call(s));const e=null===(n=this.wrappers.videoPlayer)||void 0===n?void 0:n.play();if(void 0!==e)e.then((()=>{!this.videoStarted&&(0,r.iI)(this.props.prerolls,"defaultImpression"),!this.videoStarted&&this.isSuperOrStandardHero()&&(0,i.Lu)(),this.onPlayStart()})).catch((e=>{this.onPlayError(e.name),(0,r.H)(`Pre-Roll Player Failed to play: ${e}.`,e)}));else try{var o;!this.videoStarted&&(0,r.iI)(this.props.prerolls,"defaultImpression"),!this.videoStarted&&this.isSuperOrStandardHero()&&(0,i.Lu)(),null===(o=this.wrappers.videoPlayer)||void 0===o||o.play(),this.onPlayStart()}catch(e){this.onPlayError(e),(0,r.H)(`Pre-Roll Player Failed to play: ${e}.`,e)}}}pauseButKeepVisible(){var e;null===(e=this.wrappers.videoPlayer)||void 0===e||e.pause(),!this.state.paused&&(0,r.iI)(this.props.prerolls,"pause"),this.setState({paused:!0})}resumeWhenPaused(){var e;null===(e=this.wrappers.videoPlayer)||void 0===e||e.play(),this.state.paused&&(0,r.iI)(this.props.prerolls,"resume"),this.setState({paused:!1})}stop(e=!1){this.setState({playing:!1,paused:!1},(()=>{var t,s,a;null===(t=this.props.parentListeners)||void 0===t||null===(s=t.onPlayStop)||void 0===s||s.call(t),null===(a=this.wrappers.videoPlayer)||void 0===a||a.pause(),this.removeEventListeners(),e?(0,c.K8)(this.props):(0,c.$m)(this.props,this)}))}restartVideo(){this.time=0}set time(e){var t;void 0!==(null===(t=this.wrappers.videoPlayer)||void 0===t?void 0:t.currentTime)&&(this.wrappers.videoPlayer.currentTime=e)}updateFullscreen(e){var t,s;return this.updatePageScrolling(e?"hidden":"visible"),null===(t=(s=this.props.videoContext).updateContext)||void 0===t?void 0:t.call(s,{...this.props.videoContext,fullScreen:e})}updatePageScrolling(e){if(!document)return;const t=document.getElementsByTagName("body")&&document.getElementsByTagName("body")[0];t&&(t.style.overflow=e)}onLoadError(){var e,t,s;const a=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.error;a&&(a.code===MediaError.MEDIA_ERR_DECODE?(0,r.iI)(this.props.prerolls,"error"):(0,r.iI)(this.props.prerolls,"playbackBlocked")),null===(t=this.props.parentListeners)||void 0===t||null===(s=t.onLoadError)||void 0===s||s.call(t),(0,i.cL)(`${h}::loadError`,1,!1),setTimeout((()=>{this.stop()}),4e3)}onMute(e){e?((0,r.iI)(this.props.prerolls,"mute"),(0,m.X)((0,p.i)("atv_trailer_auto_mute"),this.props.pageType,this.props.subPageType,void 0,void 0,void 0,this.props.clientVariant,this.props.clickstream)):((0,r.iI)(this.props.prerolls,"unmute"),(0,m.X)((0,p.i)("atv_trailer_auto_unmute"),this.props.pageType,this.props.subPageType,void 0,void 0,void 0,this.props.clientVariant,this.props.clickstream))}onPlaybackComplete(){var e,t;return(0,r.iI)(this.props.prerolls,"complete"),null===(e=this.props.parentListeners)||void 0===e||null===(t=e.onPlayComplete)||void 0===t||t.call(e),this.stop()}onPlayError(e){var t,s;"NotAllowedError"===e?(0,r.iI)(this.props.prerolls,"playbackBlocked"):(0,r.iI)(this.props.prerolls,"error"),null===(t=this.props.parentListeners)||void 0===t||null===(s=t.onPlayError)||void 0===s||s.call(t)}onPlayStart(){(0,i.cL)(`${h}::BUFFER::INITIALISED`,1,!1),this.videoStarted=!0,this.setState({playing:!0,paused:!1},(()=>{var e,t;null===(e=this.props.parentListeners)||void 0===e||null===(t=e.onPlayStart)||void 0===t||t.call(e),!this.props.playerIsActive&&this.props.videoContext.activeActivePlayer&&this.pauseButKeepVisible()}))}onTimeUpdate(){var e,t;const s=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.duration,a=null===(t=this.wrappers.videoPlayer)||void 0===t?void 0:t.currentTime;s&&a&&(!this.thirdQuartileReached&&a>=.75*s?(this.thirdQuartileReached=!0,(0,r.iI)(this.props.prerolls,"thirdQuartile")):!this.midpointReached&&a>=.5*s?(this.midpointReached=!0,(0,r.iI)(this.props.prerolls,"midpoint")):!this.firstQuartileReached&&a>=.25*s&&(this.firstQuartileReached=!0,(0,r.iI)(this.props.prerolls,"firstQuartile")))}onWaiting(){(0,i.cL)(`${h}::BUFFER::REINITIALISING`,1,!1)}onVideoError(){var e,t;(0,i.cL)(`${h}::videoError`,1,!1),null===(e=this.props.parentListeners)||void 0===e||null===(t=e.onVideoError)||void 0===t||t.call(e)}addEventListeners(){var e,t,s,a,n;this.playHandler&&(null===(e=this.wrappers.videoPlayer)||void 0===e||e.addEventListener("canplaythrough",this.playHandler)),this.stopHandler&&(null===(t=this.wrappers.videoPlayer)||void 0===t||t.addEventListener("ended",this.stopHandler)),this.updateHandler&&(null===(s=this.wrappers.videoPlayer)||void 0===s||s.addEventListener("timeupdate",this.updateHandler)),this.waitingHandler&&(null===(a=this.wrappers.videoPlayer)||void 0===a||a.addEventListener("waiting",this.waitingHandler)),this.errorHandler&&(null===(n=this.wrappers.videoPlayer)||void 0===n||n.addEventListener("error",this.errorHandler))}removeEventListeners(){var e,t,s,a,n;this.playHandler&&(null===(e=this.wrappers.videoPlayer)||void 0===e||e.removeEventListener("canplaythrough",this.playHandler)),this.stopHandler&&(null===(t=this.wrappers.videoPlayer)||void 0===t||t.removeEventListener("ended",this.stopHandler)),this.updateHandler&&(null===(s=this.wrappers.videoPlayer)||void 0===s||s.removeEventListener("timeupdate",this.updateHandler)),this.errorHandler&&(null===(a=this.wrappers.videoPlayer)||void 0===a||a.removeEventListener("error",this.errorHandler)),this.waitingHandler&&(null===(n=this.wrappers.videoPlayer)||void 0===n||n.removeEventListener("waiting",this.waitingHandler))}removeVideoSource(){const e=this.wrappers.videoPlayer;null==e||e.pause(),null==e||e.removeAttribute("src"),null==e||e.load()}styleFromPlacementType(){switch(this.props.placement){case l.H.Superhero:return o.Z.superhero;case l.H.Packshot:return o.Z.packshot;case l.H.PackshotWithEntitlementCue:return o.Z.packshotWithEntitlementCue;case l.H.IntermissionHero:return o.Z.intermissionHero;case l.H.ChartsContainer:case l.H.ChartsCarousel:return o.Z.chartsCarousel;case l.H.DetailHero:return o.Z.detailHero;case l.H.StandardHero:return o.Z.standardHero;case l.H.StandardMiniDetails:return o.Z.standardMiniDetails;case l.H.TentpoleHero:return o.Z.tentpoleHero}}render(){if(this.state.hasError||!this.props.prerolls||!this.props.prerolls.mediaFile||!this.props.videoContext)return null;const e=!this.state.playing&&!this.state.paused&&!this.props.videoContext.fullScreen,t=(this.props.parentListeners||{}).onClick,s=this.props.placement===l.H.Superhero?o.Z.videoFadeOverlay:this.props.videoFadeOverlay;return a.createElement("a",{className:n(o.Z.preRollPlayer,this.styleFromPlacementType(),this.props.className,"tst-video-overlay-player-overlay","tst-preroll-player",{[o.Z.hide]:e,[o.Z.show]:!e,[o.Z.fullScreen]:this.props.videoContext.fullScreen&&this.props.enableFullscreen,[o.Z.useDefaultBackground]:this.props.useDefaultBackground}),href:this.props.link,ref:this.setWrapperRef,onClick:t,"aria-label":this.props.accessibilityLabel||"","data-testid":"preroll-player-link"},a.createElement("video",{className:"tst-video-overlay-player-html5",src:this.props.prerolls.mediaFile,ref:this.setVideoPlayerRef,"data-testid":"preroll-player",onContextMenu:e=>{this.props.videoContext.disableRightClick&&e.preventDefault()},onError:this.onVideoError}),a.createElement(d.a,{disableUnmute:this.props.prerolls.disableUnmute,textMap:this.props.prerolls.textMap,toggleMute:this.toggleMute,enableFullscreen:this.props.enableFullscreen,toggleFullscreen:this.toggleFullscreen,videoContext:this.props.videoContext,placement:this.props.placement,useDefaultBackground:this.props.useDefaultBackground}),s&&a.createElement("div",{className:n(s)}),this.props.children)}}},"./src/shared/Explore/components/DraperPlayer/DraperPlayer/Buttons.tsx":(e,t,s)=>{"use strict";s.d(t,{Bz:()=>n,nw:()=>o,xb:()=>i,yg:()=>r});var a=s("./node_modules/react/index.js");const n=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1",id:"svg2","aria-hidden":!0},a.createElement("defs",{id:"defs11"},a.createElement("mask",{maskUnits:"userSpaceOnUse",id:"mask4258"},a.createElement("g",{id:"g4260"},a.createElement("rect",{y:"0",x:"2",height:"24",width:"22",style:{fill:"#ffffff"}}),a.createElement("path",{d:"m 21.5,2 -16,20",style:{stroke:"#000000",strokeWidth:2}})))),a.createElement("circle",{style:{opacity:.7,fill:"#0f171e"},r:"20",cy:"20",cx:"20",id:"Oval"}),a.createElement("g",{style:{fill:"#ffffff"},transform:"translate(8,8)",id:"icon/unmuted",mask:"url(#mask4258)"},a.createElement("path",{id:"Fill-1",d:"m 4.5488,9 c -0.303,0 -0.549,0.247 -0.549,0.549 l 0,4.902 c 0,0.303 0.246,0.549 0.549,0.549 l 3.451,0 c 0.184,0 0.363,0.051 0.521,0.146 l 6.479,3.949 0,-14.392 -6.461,4.139 C 8.3788,8.945 8.1918,9 7.9998,9 l -3.451,0 z m 11.451,12.875 c -0.18,0 -0.36,-0.049 -0.52,-0.146 L 7.7198,17 4.5488,17 c -1.405,0 -2.549,-1.144 -2.549,-2.549 l 0,-4.902 C 1.9998,8.144 3.1438,7 4.5488,7 l 3.158,0 7.754,-4.967 c 0.31,-0.198 0.699,-0.21 1.019,-0.035 0.321,0.175 0.52,0.511 0.52,0.877 l 0,18 c 0,0.361 -0.195,0.695 -0.511,0.872 -0.151,0.085 -0.32,0.128 -0.489,0.128 l 0,0 z"}),a.createElement("path",{id:"Fill-3",d:"m 19,19 c -0.256,0 -0.512,-0.098 -0.707,-0.293 -0.39,-0.389 -0.391,-1.019 -0.004,-1.41 C 18.375,17.207 20,15.472 20,12 20,8.509 18.357,6.774 18.287,6.702 17.905,6.307 17.91,5.676 18.301,5.29 18.695,4.903 19.32,4.906 19.707,5.293 19.801,5.387 22,7.636 22,12 22,16.364 19.801,18.613 19.707,18.707 19.512,18.902 19.256,19 19,19"})),a.createElement("path",{style:{stroke:"#ffffff",strokeWidth:2,strokeLinecap:"round"},d:"M 27,10 11,30"})),i=a.createElement("svg",{width:"40px",height:"40px",viewBox:"0 0 40 40","aria-hidden":!0},a.createElement("g",{id:"icon/sound-on",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("circle",{id:"Oval",fill:"#0F171E",opacity:"0.7",cx:"20",cy:"20",r:"20"}),a.createElement("g",{id:"icon/unmuted",transform:"translate(8.000000, 8.000000)",fill:"#FFFFFF"},a.createElement("path",{d:"M4.5488,9 C4.2458,9 3.9998,9.247 3.9998,9.549 L3.9998,14.451 C3.9998,14.754 4.2458,15 4.5488,15 L7.9998,15 C8.1838,15 8.3628,15.051 8.5208,15.146 L14.9998,19.095 L14.9998,4.703 L8.5388,8.842 C8.3788,8.945 8.1918,9 7.9998,9 L4.5488,9 Z M15.9998,21.875 C15.8198,21.875 15.6398,21.826 15.4798,21.729 L7.7198,17 L4.5488,17 C3.1438,17 1.9998,15.856 1.9998,14.451 L1.9998,9.549 C1.9998,8.144 3.1438,7 4.5488,7 L7.7068,7 L15.4608,2.033 C15.7708,1.835 16.1598,1.823 16.4798,1.998 C16.8008,2.173 16.9998,2.509 16.9998,2.875 L16.9998,20.875 C16.9998,21.236 16.8048,21.57 16.4888,21.747 C16.3378,21.832 16.1688,21.875 15.9998,21.875 L15.9998,21.875 Z",id:"Fill-1"}),a.createElement("path",{d:"M19,19 C18.744,19 18.488,18.902 18.293,18.707 C17.903,18.318 17.902,17.688 18.289,17.297 C18.375,17.207 20,15.472 20,12 C20,8.509 18.357,6.774 18.287,6.702 C17.905,6.307 17.91,5.676 18.301,5.29 C18.695,4.903 19.32,4.906 19.707,5.293 C19.801,5.387 22,7.636 22,12 C22,16.364 19.801,18.613 19.707,18.707 C19.512,18.902 19.256,19 19,19",id:"Fill-3"})))),r=a.createElement("svg",{width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1","aria-hidden":!0},a.createElement("g",{id:"fullscreen-button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("circle",{id:"Oval",fill:"#0F171E",opacity:"0.7",cx:"20",cy:"20",r:"20"}),a.createElement("g",{id:"fullscreen",fill:"#FFFFFF",transform:"translate(7.5, 7.5)"},a.createElement("path",{d:"M24.969,0.002 L24.969,0.002 L24.969,0 L21.969,0 L21.969,0.002 L15.969,0 L15.969,3 L19.723,3 L13.852,8.871 L15.973,10.992 L21.969,4.996 L21.969,9 L24.969,9 L24.969,2.25 L24.969,0.002 L24.969,0.002 Z",id:"Shape_1_"}),a.createElement("path",{d:"M9,22 L5.246,22 L11.117,16.129 L8.996,14.008 L3,20.004 L3,16 L0,16 L0,22.75 L0,25 L3,25 L9,25 L9,22 L9,22 Z",id:"Shape_2_"})))),o=a.createElement("svg",{width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1","aria-hidden":!0},a.createElement("g",{id:"exit-fullscreen",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},a.createElement("circle",{id:"Oval",fill:"#0F171E",opacity:"0.7",cx:"20",cy:"20",r:"20"}),a.createElement("g",{id:"exit-fullscreen",fill:"#FFFFFF",transform:"translate(5, 7)"},a.createElement("path",{d:"M9.984,15 L3.984,15 L3.985,18 L7.738,18 L0.867,24.871 L2.989,26.992 L9.984,19.996 L9.984,24 L12.984,24 L12.984,17.25 L12.984,15.001 L9.984,15 Z",id:"Shape_1_"}),a.createElement("path",{d:"M21.262,9 L28.133,2.129 L26.012,0.008 L19.016,7.004 L19.016,3 L16.016,3 L16.016,9.75 L16.016,11.999 L19.016,12 L25.016,12 L25.016,9 L21.262,9 Z",id:"Shape_2_"}))))},"./src/shared/Explore/components/DraperPlayer/DraperPlayer/Controls.tsx":(e,t,s)=>{"use strict";s.d(t,{a:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s("./src/shared/Explore/components/DraperPlayer/DraperPlayer/Buttons.tsx"),r=s("./src/shared/Explore/components/DraperPlayer/DraperPlayer/Controls.module.scss"),o=s("./src/shared/Explore/components/DraperPlayer/types.ts"),l=s("./src/shared/CS/components/SecondaryButton/SecondaryButton.tsx"),c=s("./node_modules/@amzn/dvui/dist/Icons/Unmuted.js"),d=s.n(c),u=s("./node_modules/@amzn/dvui/dist/Icons/Muted.js"),m=s.n(u);const p=e=>{const t=!e.disableUnmute;if(!t&&!e.enableFullscreen)return null;const s=a.createElement(a.Fragment,null,t&&e.videoContext.muted?a.createElement("button",{key:"unmute","aria-label":e.textMap.unmuteButton,onMouseDown:e.toggleMute,className:"tst-video-overlay-player-muted"},i.Bz):void 0,t&&!e.videoContext.muted?a.createElement("button",{key:"mute","aria-label":e.textMap.muteButton,onMouseDown:e.toggleMute,className:"tst-video-overlay-player-unmuted"},i.xb):void 0),c=t?a.createElement(l.k,{icon:e.videoContext.muted?a.createElement(m(),null):a.createElement(d(),null),isInverted:!0,onSecondaryButtonClick:e.toggleMute,testID:e.videoContext.muted?"unmute":"mute"}):null;return a.createElement("div",{className:n(r.Z.playerControls,{[r.Z.packshot]:[o.H.Packshot,o.H.PackshotWithEntitlementCue].includes(e.placement),[r.Z.standardMiniDetails]:e.placement===o.H.StandardMiniDetails})},e.useDefaultBackground?s:c,e.enableFullscreen&&!e.videoContext.fullScreen?a.createElement("button",{className:"tst-video-overlay-player-fullscreen","aria-label":e.textMap.enterFullscreen,key:"fullscreen",onMouseDown:e.toggleFullscreen},i.yg):void 0,e.enableFullscreen&&e.videoContext.fullScreen?a.createElement("button",{className:"tst-video-overlay-player-exit-fullscreen","aria-label":e.textMap.exitFullscreen,key:"exit-fullscreen",onMouseDown:e.toggleFullscreen},i.nw):void 0)}},"./src/shared/Explore/components/DraperPlayer/types.ts":(e,t,s)=>{"use strict";s.d(t,{H:()=>a});var a={Superhero:0,Packshot:1,PackshotWithEntitlementCue:2,IntermissionHero:3,DetailHero:4,ChartsCarousel:5,StandardHero:6,ChartsContainer:7,StandardMiniDetails:8,TentpoleHero:9}},"./src/shared/Explore/components/DraperPlayer/utils/locks.ts":(e,t,s)=>{"use strict";function a(e){return e.playerIsActive?null===e.videoContext.activeActivePlayer:null===e.videoContext.activePassivePlayer}function n(e,t){return e.playerIsActive?e.videoContext.activeActivePlayer===t:e.videoContext.activePassivePlayer===t&&null===e.videoContext.activeActivePlayer}function i(e,t){var s,a,n,i;e.playerIsActive?null===(s=(a=e.videoContext).updateContext)||void 0===s||s.call(a,{...e.videoContext,activeActivePlayer:t}):null===(n=(i=e.videoContext).updateContext)||void 0===n||n.call(i,{...e.videoContext,activePassivePlayer:t})}function r(e,t){var s,a;if(e.playerIsActive&&e.videoContext.activeActivePlayer===t)null===(s=(a=e.videoContext).updateContext)||void 0===s||s.call(a,{...e.videoContext,activeActivePlayer:null});else if(e.videoContext.activePassivePlayer===t){var n,i;null===(n=(i=e.videoContext).updateContext)||void 0===n||n.call(i,{...e.videoContext,activePassivePlayer:null})}}s.d(t,{$m:()=>r,K8:()=>o,eW:()=>a,hN:()=>i,wj:()=>n});const o=e=>{var t,s;return null===(t=(s=e.videoContext).updateContext)||void 0===t?void 0:t.call(s,{...e.videoContext,activeActivePlayer:null,activePassivePlayer:null})}},"./src/shared/Explore/components/DraperPlayer/utils/metrics.ts":(e,t,s)=>{"use strict";s.d(t,{H:()=>c,iI:()=>r});var a=s("./src/util/logger/logger.ts"),n=s("./src/util/csm/csm.tsx");const i=new Map,r=(e,t,s=1e3)=>{const a=e&&e.trackingEvents&&e.trackingEvents[t];if(a&&!i.has(a)){l(e,t,a,!1);const n=o(s).then((()=>(i.delete(a),fetch(a)))).catch((e=>{i.delete(a),c("Error firing Draper tracking event with eventUrl: "+a,e)}));return i.set(a,n),n.then((()=>{}))}return a&&l(e,t,a,!0),Promise.resolve()},o=e=>new Promise((t=>setTimeout(t,e))),l=(e,t,s,a=!1)=>{window&&window.location.href.includes("draperDebug")&&window.console.log({eventLogged:t,trackingEventURL:s,videoURL:e.mediaFile,debounced:a})},c=(e,t)=>(0,n.rp)(t,{logLevel:a.in.ERROR,message:e,attribution:"DVWebNodeDraperPlayer"})},"./src/shared/Explore/components/DraperPlayer/videoContext.ts":(e,t,s)=>{"use strict";s.d(t,{E:()=>n,l:()=>i});var a=s("./node_modules/react/index.js");const n={disableRightClick:!1,muted:!0,activeActivePlayer:null,activePassivePlayer:null,fullScreen:!1,updateContext:null},i=a.createContext(n);i.displayName="VideoContext"},"./src/shared/Explore/containers/PageContainer/PageContainer.tsx":(e,t,s)=>{"use strict";s.d(t,{_:()=>b,z:()=>h});var a=s("./node_modules/react/index.js"),n=s("./src/shared/Explore/utils/cssUtils.ts"),i=s("./src/util/utils/swiftDevice.ts"),r=s("./src/util/utils/hooks/useHasMounted.ts"),o=s("./src/util/utils/debounce.ts"),l=s("./src/util/utils/array.ts"),c=s("./src/util/wrappers/LoggersContext.tsx"),d=s("./src/shared/Explore/containers/PageContainer/VerticalPaginationController.tsx"),u=s("./node_modules/fast-deep-equal/index.js");const m=[i.fv.DesktopLinuxVariant,i.fv.DesktopWindowsVariant,i.fv.DesktopOSXVariant,i.fv.DesktopDefaultVariant,i.fv.DesktopBrowserVariant],p=i.fv.TabletDefaultVariant,g=[i.fv.MshopIOSVariant,i.fv.MshopAndroidVariant,i.fv.MshopDefaultVariant,i.fv.MobileAndroidVariant,i.fv.MobileDefaultVariant],h=a.createContext({});h.displayName="PageContext",(0,n.eE)();const v=e=>{const[t,s]=a.useState(0),[c,v]=a.useState(!0),[b,D]=a.useState(!0),[y,f]=a.useState(!1),[E,w]=a.useState(!1),[_,T]=a.useState(!1),[C,x]=a.useState({visible:new Map,min:null,max:null}),I=(0,r.f)();function N(){T(!0)}function P(){T(!1)}function k(){v("visible"===document.visibilityState)}a.useEffect((()=>{const t="undefined"!=typeof window&&"undefined"!=typeof navigator&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),a=e.os===i.U5.Windows&&window.matchMedia("(any-pointer: coarse)").matches;f(t),D((e=>{var t;if("undefined"==typeof window)return!0;const s=null===(t=navigator.userAgent)||void 0===t?void 0:t.match("[a-z]{2}-[a-z]{3}-[a-z]{3}@[a-z]{6}.[a-z]{3}");return window.matchMedia("(hover: hover)").matches||e||!!s&&s.length>0})(a)),w(a);const r=(s,a)=>{if(a){const n=t?"TouchScreen":"NonTouchScreen";e.logger.count(`DVWeb::Storefront::${s}::${n}::${a}`,1,!1)}},l=()=>"undefined"==typeof window?null:window.innerWidth<window.innerHeight?"Portrait":"Landscape";let c=l();r("OnLoad",c),(0,n.eE)();const d=(0,o.D)((()=>{const e=l();e!==c&&(c=e,r("OnResize",c)),(0,n.eE)(),s(window.innerWidth)}),300);return"undefined"!=typeof window&&(window.addEventListener("resize",d),s(window.innerWidth)),document.addEventListener("visibilitychange",k),document.addEventListener("PVVideoPlayerPlay",N),document.addEventListener("PVVideoPlayerClosed",P),()=>{"undefined"!=typeof window&&window.removeEventListener("resize",d),document.removeEventListener("visibilitychange",k),document.removeEventListener("PVVideoPlayerPlay",N),document.removeEventListener("PVVideoPlayerClosed",P)}}),[]);const S=a.useCallback(((e,t)=>{var s,a;const n=C.visible;n.set(e,t);const i=new Array;for(const[e,t]of n)t&&(0,l.y)(i,e);const r={visible:n,min:null!==(s=i[0])&&void 0!==s?s:null,max:null!==(a=i[i.length-1])&&void 0!==a?a:null};u(r,C)||x(r)}),[C]),V=m.indexOf(e.deviceVariant)>-1,W=e.deviceVariant===p,A=g.indexOf(e.deviceVariant)>-1,R=a.useCallback((t=>(e.strings||{})[t]||""),[e.strings]),L=e.swiftPageParameters&&"resiliencyHome"===e.swiftPageParameters.pageType||!1,B=a.useMemo((()=>{var s;return{pageWidth:t,isTouchDevice:y,isHoverEnabled:b,isDesktopDeviceVariant:V,isTabletDeviceVariant:W,isMobileDeviceVariant:A,isPageVisible:c,hasPageMounted:I,getString:R,theme:e.theme,shouldUseReducedMotion:e.shouldUseReducedMotion,isInResiliencyMode:L,clickstream:e.clickstream,clickstreamPageContext:e.clickstreamPageContext,onContainerVisibilityChange:S,containerVisibility:C,enableVerticalPerformantRender:null!==(s=e.enableVerticalPerformantRender)&&void 0!==s&&s,contingencies:e.contingencies,isPlayerVisible:_,isTouchEnabledWindowsDevice:E}}),[R,V,L,c,W,A,I,y,b,t,e.clickstream,e.clickstreamPageContext,e.shouldUseReducedMotion,e.theme,S,C,e.enableVerticalPerformantRender,e.contingencies,_,E]);return a.createElement(h.Provider,{value:B},a.createElement(d.a,null,e.children))};v.displayName="PageContainer";const b=(0,c.ty)(v)},"./src/shared/Explore/containers/PageContainer/VerticalPaginationController.tsx":(e,t,s)=>{"use strict";s.d(t,{U:()=>n,a:()=>i});var a=s("./node_modules/react/index.js");const n=a.createContext({});n.displayName="VerticalPaginationContext";const i=({children:e})=>{const[t,s]=a.useState(null),i=a.useRef([]),r=a.useRef([]),[o,l]=a.useState(void 0),c=a.useMemo((()=>{let e={type:"PAGE"};null!==t&&(e={type:"CONTAINER",containerIndex:t});return{entityWithLock:e,hideBelowContainerIndex:o,actions:{lock:e=>{var a;(i.current.includes(e)||i.current.push(e),null===t)&&s(null!==(a=i.current.shift())&&void 0!==a?a:null)},unlock:e=>{var a;t===e&&s(null!==(a=i.current.shift())&&void 0!==a?a:null)},hideBelow:e=>{void 0===o?l(e):r.current.includes(e)||r.current.push(e)},unhideBelow:e=>{o===e?l(r.current.shift()):r.current=r.current.filter((t=>t!==e))}}}}),[t,o]);return a.createElement(n.Provider,{value:c},e)}},"./src/shared/Explore/containers/PageContainer/index.tsx":(e,t,s)=>{"use strict";s.d(t,{_z:()=>a._,z1:()=>a.z});var a=s("./src/shared/Explore/containers/PageContainer/PageContainer.tsx")},"./src/shared/Explore/shared/navigation.ts":(e,t,s)=>{"use strict";s.d(t,{Au:()=>a,Gz:()=>i,mP:()=>n});const a="pv-nav-container",n=880,i=448},"./src/shared/Explore/utils/EnrichItemMetadataUtils.ts":(e,t,s)=>{"use strict";s.d(t,{C:()=>a});const a=(e,t,s,a,n,i,r,o)=>{const l=(c=e)&&JSON.stringify(c);var c;const d=((e,t,s,a,n,i,r)=>({placement:e,playback:t,preroll:s,trailer:a,watchlist:n,badge:i,impressionData:r}))(t,s,a,n,i,r,o);var u;return{metadataToEnrich:(u=d)&&JSON.stringify(u),titleIDsToEnrich:l}}},"./src/shared/Explore/utils/GlobalQueueHandler.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s("./src/util/api/WPSClient.ts"),n=s("./src/shared/Explore/utils/EnrichItemMetadataUtils.ts"),i=s("./src/util/csm/csm.tsx");function r(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o{constructor(e,t=1500,s=!1,l=!1){r(this,"ctx",void 0),r(this,"queueMap",{}),r(this,"finished",[]),r(this,"timeout",void 0),r(this,"titleIdsForBadgeRequest",[]),r(this,"isCleanSlateActive",!1),r(this,"isJicEnrichmentOn",!1),r(this,"handleQueue",(e=>{if(!this.ctx||!this.getQueue(e)||0==this.getQueue(e).length)return;const t=this.getQueue(e).splice(0,30);this.finished=[...this.finished,...t];const s=t.map((e=>e.title)),r=JSON.parse(e),l=t.some((e=>this.titleIdsForBadgeRequest.includes(e.title))),c=(0,n.C)(s,r.placement,!0,!0,!0,!0,l,r.impressionData),d=(new a.e).EnrichItemMetadata({context:this.ctx,...c,isCleanSlateActive:this.isCleanSlateActive,journeyIngressContext:r.journeyIngressContext});(0,i.cL)("DVWebNode::EnrichmentCall::JIC"+(this.isJicEnrichmentOn?"Enabled":"Disabled"),1,!1),d.then((t=>{this.clearTimer(e);const a=o.enrichmentMap[e];o.enrichmentMap={...o.enrichmentMap,[e]:{...a,...t.enrichments}},this.broadcastChanges(t.enrichments,s,e),null!=t.isTrailerAutoplayEnabled&&(o.isTrailerAutoplayEnabled=t.isTrailerAutoplayEnabled),this.queueFull(e)?this.handleQueue(e):this.getQueue(e).length>0&&this.setTimer(e)})).catch((()=>this.broadcastChanges({},s,e)))})),this.ctx=e,this.timeout=t,this.isCleanSlateActive=s,this.isJicEnrichmentOn=l}enrichmentFor(e,t="HOVER",s){var a;if(!e)return;const n=this.isJicEnrichmentOn?s:void 0,i=this.batchKey(t,n);return null===(a=o.enrichmentMap[i])||void 0===a?void 0:a[e]}enrichmentPromise(e,t="HOVER",s,a=!1,n=!1,i){return new Promise(((r,l)=>{if(!e)return l();const c=this.isJicEnrichmentOn?s:void 0,d=this.batchKey(t,c,i),u={title:e,placement:t,journeyIngressContext:c,impressionData:i},m=this.isTitleDetailIncluded(this.finished,u)&&!a&&o.enrichmentMap[d]&&o.enrichmentMap[d][e],p=n&&m&&!this.titleIdsForBadgeRequest.includes(e);if(m&&!p)return r(m);{this.isTitleDetailIncluded(this.getQueue(d),u)||this.getQueue(d).push(u),n&&!this.titleIdsForBadgeRequest.includes(e)&&this.titleIdsForBadgeRequest.push(e);const t=this.getOrSet(o.resolverMap,d,{})[e]||[];o.resolverMap[d][e]=[...t,r];const s=this.getOrSet(o.rejecterMap,d,{})[e]||[];o.rejecterMap[d][e]=[...s,l],this.queueFull(d)?this.handleQueue(d):this.getTimer(d)||this.setTimer(d)}}))}batchKey(e,t,s){return JSON.stringify({placement:e,journeyIngressContext:t,impressionData:s})}getQueueAndTimer(e){return this.queueMap[e]||(this.queueMap[e]={timer:void 0,queue:[]}),this.queueMap[e]}getQueue(e){return this.getQueueAndTimer(e).queue}getTimer(e){return this.getQueueAndTimer(e).timer}isTitleDetailIncluded(e,t){return e.some((e=>e.title===t.title&&e.placement===t.placement&&e.journeyIngressContext===t.journeyIngressContext&&e.impressionData===t.impressionData))}getOrSet(e,t,s){return e[t]=e[t]||s,e[t]}queueFull(e){return this.getQueue(e).length>=30}setTimer(e){this.getQueueAndTimer(e).timer=window.setTimeout(this.handleQueue,this.timeout,e)}clearTimer(e){window.clearTimeout(this.getTimer(e)),this.getQueueAndTimer(e).timer=void 0}broadcastChanges(e,t,s){t.forEach((t=>{const a=e[t],n=o.resolverMap[s][t],i=o.rejecterMap[s][t];o.resolverMap[s][t]=[],o.rejecterMap[s][t]=[],n&&a?n.forEach((e=>e(a))):i&&!a&&i.forEach((e=>e(`EnrichItemMetadata failed to respond with enrichment for title ID ${t} with batch key ${s}`)))}))}}r(o,"enrichmentMap",{}),r(o,"resolverMap",{}),r(o,"rejecterMap",{}),r(o,"isTrailerAutoplayEnabled",!0)},"./src/shared/Explore/utils/cssUtils.ts":(e,t,s)=>{"use strict";s.d(t,{My:()=>r,eE:()=>o,pm:()=>i});const a=["--dv-carousel-column-margin","--dv-supercarousel-card-number","--dv-carousel-column-gap","--dv-current-target-screen","--side-panel-width"];let n=new Map;function i(e){var t;return null!==(t=n.get(e))&&void 0!==t?t:""}function r(e,t=0){const s=parseInt(i(e));return isNaN(s)?t:s}function o(){if("undefined"==typeof window)return;const e=new Map,t=window.getComputedStyle(document.documentElement);a.forEach((s=>{e.set(s,t.getPropertyValue(s))})),n=e}},"./src/shared/SPA/SpaContext.tsx":(e,t,s)=>{"use strict";s.d(t,{cG:()=>i});var a=s("./node_modules/react/index.js");const n=a.createContext({}),i=(n.Consumer,n.Provider,e=>t=>a.createElement(e,t))},"./src/shared/SPA/UWPNotifier/index.ts":(e,t,s)=>{"use strict";s.d(t,{_5:()=>a._5,lh:()=>a.lh});s("./src/shared/SPA/UWPNotifier/uwp-notifier.ts");var a=s("./src/shared/SPA/UWPNotifier/inputActions/index.ts");s("./src/shared/SPA/UWPNotifier/outputActions/index.ts")},"./src/shared/SPA/UWPNotifier/inputActions/index.ts":(e,t,s)=>{"use strict";s.d(t,{_5:()=>n,lh:()=>a});let a=function(e){return e.IDLE="IDLE",e.SEASON_IDLE="SEASON_IDLE",e.SEASON_DOWNLOADING="SEASON_DOWNLOADING",e.SEASON_COMPLETED="SEASON_COMPLETED",e.SEASON_QUEUED="SEASON_QUEUED",e.SEASON_ERROR="SEASON_ERROR",e.WAITING="WAITING",e.QUEUED="QUEUED",e.DOWNLOADING="DOWNLOADING",e.PAUSED="PAUSED",e.ERROR="ERROR",e.COMPLETED="COMPLETED",e.CANCELLED="CANCELLED",e.REMOVED="REMOVED",e.DISABLED="DISABLED",e.CANCELLING="CANCELLING",e.REMOVING="REMOVING",e.RETRYING="RETRYING",e.PAUSING="PAUSING",e}({}),n=function(e){return e.UWP="UWP",e.XP="XP",e}({})},"./src/shared/SPA/UWPNotifier/outputActions/index.ts":(e,t,s)=>{"use strict"},"./src/shared/SPA/UWPNotifier/uwp-notifier.ts":(e,t,s)=>{"use strict";var a=s("./src/util/logger/logger.ts"),n=s("./src/util/utils/pubSub.ts");function i(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e,t=new a.Oc("DVWebNodeSPA/UWPNotifier")){i(this,"myWindow",void 0),i(this,"logger",void 0),i(this,"pubSub",void 0),i(this,"chromeWebViewInputDispatcher",(e=>{try{const t=e.data[0],s=JSON.parse(e.data[1]);t&&s&&this.pubSub.publish(t,s)}catch(t){this.logger.error("UWPNotifier failed to parse the native action payload in webview2 ",e,t)}})),this.myWindow=e,this.logger=t,this.pubSub=(0,n.M)(),this.init()}static getInstance(){return this.instance||(this.instance=new r(window)),this.instance}isChromeWebViewPresent(){return"undefined"!=typeof window&&void 0!==window.chrome&&void 0!==window.chrome.webview}isSubscribed(e){const t=this.pubSub.query(e);return t&&t.length>0}subscribe(e,t){try{return this.pubSub.subscribe(e.toString(),t)}catch(s){const a="UWPNotifier failed to subscribe to an event from the native app";this.logger.error(a,e,t,s)}}unsubscribe(e,t){try{return this.pubSub.unsubscribe(e.toString(),t)}catch(s){const a="UWPNotifier failed to unsubscribe to an event from the native app";return this.logger.error(a,e,t,s),Promise.reject(new Error(a))}}publish(e,t){const s=Date.now();try{this.notify(JSON.stringify({action:e,payload:t,timestamp:s}))}catch(a){this.logger.error("UWPNotifier failed to generate the payload and notify the native app",e,t,s,a)}}init(){this.isChromeWebViewPresent()&&window.chrome.webview.addEventListener("message",this.chromeWebViewInputDispatcher),this.myWindow.primevideoUWPNotifierHandler=this.inputDispatcher.bind(this)}notify(e){if(this.isChromeWebViewPresent())try{window.chrome.webview.postMessage(e)}catch(e){0}else if(this.myWindow&&this.myWindow.external)try{this.myWindow.external.notify(e)}catch(e){0}}inputDispatcher(e,t){try{const s=JSON.parse(t);this.pubSub.publish(e,s)}catch(s){this.logger.error("UWPNotifier failed to parse the native action payload",e,t,s)}}}i(r,"instance",void 0)},"./src/shared/SPA/downloadButton/DownloadButton.tsx":(e,t,s)=>{"use strict";s.d(t,{C$:()=>_,o6:()=>E});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Button.js"),i=s("./node_modules/@amzn/dvui/dist/Text.js"),r=s("./node_modules/@amzn/dvui/dist/Tooltip.js"),o=s("./src/shared/SPA/downloadButton/DownloadButton.module.scss"),l=s("./src/shared/SPA/UWPNotifier/index.ts"),c=s("./src/util/utils/dvstring/utils.ts"),d=s("./node_modules/classnames/index.js"),u=s.n(d),m=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),p=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),g=s("./node_modules/@amzn/dvui/dist/IconButton.js"),h=s("./src/shared/SPA/downloadButton/DownloadIconMapping.tsx");function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},v.apply(this,arguments)}const b=Math.round(11*Math.PI*2),D=(e=0)=>Math.round((100-Math.min(e,100))/100*b),y="undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Edge")>-1&&navigator.userAgent.indexOf("Windows NT 10.0")>-1?"":"js-deeplinkable",f=({status:e,progress:t=0,hasLabel:s})=>{const n="#8197A4",i="#F2F4F6",r=e&&[l.lh.WAITING,l.lh.REMOVING,l.lh.CANCELLING].includes(e),c=D(r?75:t),d=e&&[l.lh.DOWNLOADING,l.lh.SEASON_DOWNLOADING,l.lh.PAUSED,l.lh.QUEUED,l.lh.SEASON_QUEUED,l.lh.ERROR,l.lh.SEASON_ERROR].includes(e),m=e&&[l.lh.DOWNLOADING,l.lh.PAUSED,l.lh.SEASON_DOWNLOADING].includes(e),p=e&&[l.lh.IDLE,l.lh.PAUSED,l.lh.QUEUED,l.lh.SEASON_QUEUED,l.lh.SEASON_IDLE,l.lh.REMOVED,l.lh.CANCELLED].includes(e),g=e&&[l.lh.IDLE,l.lh.SEASON_IDLE,l.lh.REMOVED,l.lh.CANCELLED].includes(e),h=e===l.lh.COMPLETED&&!s||e===l.lh.DISABLED;return a.createElement("svg",{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:u()({[o.Z.spin]:r})},a.createElement("g",{fillRule:"nonzero",fill:"none"},g&&a.createElement("path",{className:o.Z.stroke,stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M2.997 18.087v4.972h18.03v-4.972"}),p&&a.createElement("path",{className:o.Z.stroke,d:"M12 5v12M7.5 12.5L12 17M16.5 12.5L12 17",stroke:e===l.lh.PAUSED||g?i:n,strokeWidth:"1.5",strokeLinecap:"round"}),d&&a.createElement("circle",{className:o.Z.circle,stroke:n,strokeWidth:2,fill:"none",cx:"12",cy:"12",r:"11"}),(m||r)&&a.createElement("circle",{stroke:i,transform:"rotate(-90 12 12)",strokeWidth:2,fill:"none",cx:"12",cy:"12",r:"11",strokeDasharray:"69",strokeDashoffset:"69",strokeLinecap:"butt",style:{strokeDashoffset:c,transition:"strokeDashoffset 2s linear"}}),h&&a.createElement("g",{fill:i},a.createElement("path",{d:"M 14.121094 0.878906 C 15.292969 2.050781 15.292969 3.949219 14.121094 5.121094 C 12.949219 6.292969 11.050781 6.292969 9.878906 5.121094 C 8.707031 3.949219 8.707031 2.050781 9.878906 0.878906 C 11.050781 -0.292969 12.949219 -0.292969 14.121094 0.878906 M 14.121094 9.878906 C 15.292969 11.050781 15.292969 12.949219 14.121094 14.121094 C 12.949219 15.292969 11.050781 15.292969 9.878906 14.121094 C 8.707031 12.949219 8.707031 11.050781 9.878906 9.878906 C 11.050781 8.707031 12.949219 8.707031 14.121094 9.878906 M 14.121094 18.878906 C 15.292969 20.050781 15.292969 21.949219 14.121094 23.121094 C 12.949219 24.292969 11.050781 24.292969 9.878906 23.121094 C 8.707031 21.949219 8.707031 20.050781 9.878906 18.878906 C 11.050781 17.707031 12.949219 17.707031 14.121094 18.878906 "})),e===l.lh.COMPLETED&&s&&a.createElement("g",{fill:i},a.createElement("path",{d:"M15 18V8a1 1 0 012 0v11a1 1 0 01-1 1H4a1 1 0 01-1-1V8a1 1 0 112 0v10h10z"}),a.createElement("path",{d:"M7 8a1 1 0 112 0v7a1 1 0 01-2 0V8zm4 0a1 1 0 012 0v7a1 1 0 01-2 0V8zM1 5a1 1 0 110-2h18a1 1 0 010 2H1z"}),a.createElement("path",{d:"M6.8 2v2c0 .552-.403 1-.9 1S5 4.552 5 4V1c0-.552.403-1 .9-1h7.2c.497 0 .9.448.9 1v3c0 .552-.403 1-.9 1s-.9-.448-.9-1V2H6.8z"})),(e===l.lh.DOWNLOADING||e===l.lh.SEASON_DOWNLOADING)&&a.createElement("g",{fill:i},a.createElement("path",{d:"M10.3 16.012c0 .828-.335 1.054-.75 1.054-.414 0-.75-.226-.75-1.054V7.007C8.8 6.178 9.158 6 9.55 6s.75.178.75 1.007v9.005zM15.3 16.012c0 .828-.335 1.054-.75 1.054s-.75-.226-.75-1.054V7.007c0-.829.358-1.007.75-1.007s.75.178.75 1.007v9.005z"})),(e===l.lh.ERROR||e===l.lh.SEASON_ERROR)&&a.createElement("g",{fill:i},a.createElement("path",{d:"M13 13.024a.978.978 0 0 1-.975.976h-.05a.978.978 0 0 1-.975-.976V6.976c0-.537.439-.976.976-.976h.049c.536 0 .975.439.975.976v6.048zM11 16h2v2.04h-2z"})),e===l.lh.SEASON_COMPLETED&&a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M20.03 4.28a1 1 0 00-1.42.03l-8.8 9.19-3.04-3.66a1 1 0 10-1.54 1.27l3.75 4.53a1 1 0 001.5.05l9.58-10a1 1 0 00-.03-1.41zM20 16v4H4v-4a1 1 0 10-2 0v5a1 1 0 001 1h18a1 1 0 001-1v-5a1 1 0 10-2 0z",clipRule:"evenodd"})))},E=({progress:e,status:t=l.lh.IDLE,downloadURL:s,fallbackURL:n,onClick:d,isDropList:u,label:m,id:p,containerRef:g})=>{const h=u?"button":"a",b={onClick:d,...!u&&{href:s},...(0,c.Ol)({fallbackUrl:n})},D=a.createElement(h,v({className:`${y} ${o.Z.button}`},b),a.createElement("span",{className:"avu-screen-reader-only"},m),a.createElement(f,{hasLabel:!1,progress:e,status:t}));return p&&m?a.createElement(r.Tooltip,{content:a.createElement(i.Text,{string:m}),position:"top",size:"m",tabIndex:0,id:p,containerRef:g},D):D},w=({showIcon:e,progress:t,status:s,hasLabel:n})=>{const i=[l.lh.IDLE,l.lh.SEASON_IDLE,l.lh.CANCELLED,l.lh.REMOVED],r=[l.lh.SEASON_DOWNLOADING,l.lh.SEASON_COMPLETED,l.lh.SEASON_QUEUED,l.lh.SEASON_ERROR,l.lh.WAITING,l.lh.DOWNLOADING,l.lh.PAUSED,l.lh.ERROR,l.lh.QUEUED];return e?a.createElement("span",{className:u()(o.Z.redesignButtonIcon,o.Z.simplifiedBuyboxButtonIcon,{[o.Z.idleIcon]:i.includes(s),[o.Z.downloadingIcon]:r.includes(s),[o.Z.completedIcon]:s===l.lh.COMPLETED,[o.Z.disabledIcon]:s===l.lh.DISABLED,[o.Z.seasonCompletedIcon]:s===l.lh.SEASON_COMPLETED})},a.createElement(f,{progress:t,status:s,hasLabel:n})):null},_=(0,p.QI)((({onClick:e,progress:t,status:s,label:l,downloadURL:d,fallbackURL:p,forceDoubleHeight:g,containerRef:h,showIcon:b=!0,disabled:D=!1})=>{const f={...(0,c.Ol)({fallbackUrl:p}),onClick:e,forceDoubleHeight:g,href:d,disabled:D,className:u()(y,"dv-node-dp-download",o.Z.withLabelButton,o.Z.circularButton,m.Z.enablePointerEvents)},E={showIcon:b,progress:t,status:s,hasLabel:!0};return a.createElement(r.Tooltip,{position:"top",size:"s",content:a.createElement(i.Text,{tag:"span",string:l}),className:o.Z.downloadTooltip,id:"dv-dp-node-download-tooltip",containerRef:h},a.createElement(n.Button,v({},f,{role:"button","aria-live":"polite","aria-label":l,testID:"download-button"}),a.createElement(w,E)))}),(({status:e=l.lh.IDLE,onClick:t,label:s,variant:r,rectButton:o,progress:c,showLabelOnTouchDevices:d=!0,downloadURL:u})=>o?a.createElement("div",{className:`${m.Z.fullWidthPhablet} ${m.Z.stretchHeight}`},a.createElement(n.Button,{icon:a.createElement(h.i,{status:e,progress:c}),onClick:t,href:u},a.createElement(i.Text,{tag:"span",string:s}))):a.createElement(g.IconButton,{icon:a.createElement(h.i,{status:e,progress:c}),onClick:t,ariaLabel:s,label:s,variant:r,showLabelOnTouchDevices:d,href:u})));_.displayName="DownloadButtonWithLabel"},"./src/shared/SPA/downloadButton/DownloadIconMapping.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>f});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Icons/Download.js"),i=s("./node_modules/@amzn/dvui/dist/Icons/DownloadComplete.js"),r=s("./node_modules/@amzn/dvui/dist/Icons/DownloadFailed.js"),o=s("./node_modules/@amzn/dvui/dist/Icons/DownloadingCancel.js"),l=s("./node_modules/@amzn/dvui/dist/Icons/DownloadingQueued.js"),c=s("./node_modules/@amzn/dvui/dist/Icons/DownloadingError.js"),d=s("./node_modules/@amzn/dvui/dist/Icons/Delete.js"),u=s("./node_modules/@amzn/dvui/dist/Icons/Overflow.js"),m=s("./node_modules/@amzn/dvui/dist/Icons/Spinner.js"),p=s("./src/shared/CS/utils/icons.ts"),g=s("./src/shared/SPA/UWPNotifier/index.ts"),h=s("./src/shared/SPA/downloadButton/DownloadIcons.module.scss");const v=Math.round(11*Math.PI*2),b=({progress:e=75})=>{const t=((e=0)=>Math.round((100-Math.min(e,100))/100*v))(e);return a.createElement("div",{className:h.Z.progressIcon},a.createElement("svg",{height:"24",width:"24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},a.createElement("g",{fillRule:"nonzero",fill:"none"},a.createElement("circle",{strokeWidth:2,fill:"none",cx:"12",cy:"12",r:"11",className:h.Z.baseCircle}),a.createElement("circle",{transform:"rotate(-90 12 12)",strokeWidth:2,fill:"none",cx:"12",cy:"12",r:"11",strokeDasharray:"69",strokeDashoffset:"69",strokeLinecap:"butt",style:{strokeDashoffset:t,transition:"strokeDashoffset 2s linear"},className:h.Z.progressCircle}),a.createElement("g",{className:h.Z.pauseIcon},a.createElement("path",{d:"M10.3 16.012c0 .828-.335 1.054-.75 1.054-.414 0-.75-.226-.75-1.054V7.007C8.8 6.178 9.158 6 9.55 6s.75.178.75 1.007v9.005zM15.3 16.012c0 .828-.335 1.054-.75 1.054s-.75-.226-.75-1.054V7.007c0-.829.358-1.007.75-1.007s.75.178.75 1.007v9.005z"})))))},D=()=>a.createElement(m.Spinner,{width:p.rM,height:p.$3}),y={[g.lh.IDLE]:a.createElement(n.Download,null),[g.lh.SEASON_IDLE]:a.createElement(n.Download,null),[g.lh.REMOVED]:a.createElement(n.Download,null),[g.lh.QUEUED]:a.createElement(l.DownloadingQueued,null),[g.lh.SEASON_QUEUED]:a.createElement(l.DownloadingQueued,null),[g.lh.PAUSED]:a.createElement(l.DownloadingQueued,null),[g.lh.DOWNLOADING]:a.createElement(b,null),[g.lh.SEASON_DOWNLOADING]:a.createElement(b,null),[g.lh.ERROR]:a.createElement(c.DownloadingError,null),[g.lh.SEASON_ERROR]:a.createElement(r.DownloadFailed,null),[g.lh.CANCELLED]:a.createElement(o.DownloadingCancel,null),[g.lh.SEASON_COMPLETED]:a.createElement(i.DownloadComplete,null),[g.lh.COMPLETED]:a.createElement(d.Delete,null),[g.lh.DISABLED]:a.createElement(c.DownloadingError,null),[g.lh.WAITING]:a.createElement(D,null),[g.lh.CANCELLING]:a.createElement(D,null),[g.lh.REMOVING]:a.createElement(D,null),[g.lh.RETRYING]:a.createElement(D,null),[g.lh.PAUSING]:a.createElement(D,null)},f=(g.lh.COMPLETED,u.Overflow,({status:e,progress:t})=>e!==g.lh.DOWNLOADING&&e!==g.lh.SEASON_DOWNLOADING?y[e]:a.createElement(b,{progress:t}))},"./src/shared/SPA/stores.ts":(e,t,s)=>{"use strict";s.d(t,{OG:()=>r,ke:()=>o});var a=s("./node_modules/zustand/esm/vanilla.js"),n=s("./src/shared/SPA/UWPNotifier/index.ts");const i=[n.lh.DOWNLOADING.toString(),n.lh.QUEUED.toString(),n.lh.SEASON_DOWNLOADING.toString(),n.lh.SEASON_QUEUED.toString()],r=(0,a.Z)(((e,t)=>({downloads:{},setDownloads:t=>e({downloads:t}),playingDownloadedTitle:void 0,setPlayingDownloadedTitle:t=>e({playingDownloadedTitle:t}),isDownloadStoreActive:()=>{const e=t().downloads||{};return Object.keys(e).some((t=>i.includes(e[t].Status)))},metaData:{},setMetaData:t=>e({metaData:t}),savedImages:{},setSavedImages:t=>e({savedImages:t})}))),o=((0,a.Z)((e=>({downloadSettings:{},setDownloadSettings:t=>e({downloadSettings:t})}))),(0,a.Z)((e=>({appSettings:{},setAppSettings:t=>e({appSettings:t})}))),()=>({}));(0,a.Z)((e=>({profiles:null,setProfiles:t=>e({profiles:t})})))},"./src/shared/deeplink/browser.ts":(e,t,s)=>{"use strict";s.d(t,{Vl:()=>m,Y5:()=>p,pb:()=>u,uW:()=>g});var a=s("./src/shared/utils/analytics/recordReftag.tsx");const n=new(s("./src/util/logger/logger.ts").Oc)("DVWbNode:deeplink"),i="pv-hidden-iframe",r=e=>{var t,s;return null!==(t=null==e||null===(s=e.match(/^([^:]+)/))||void 0===s?void 0:s[1])&&void 0!==t?t:"unknown"},o=(e,t,s)=>{const i=r(e);s?((0,a.X)(`dv_deeplink_${i}_noapp`),n.count(`DVWeb::Deeplink::${i}::NoApp`,1,!0),t({isSuccess:!0}),window.location.assign(s)):(t({isSuccess:!1}),n.error("fallbackUrl param is required for deeplinking"))},l=(e,t)=>{const s=r(e);(0,a.X)(`dv_deeplink_${s}`),t({isSuccess:!0}),n.count(`DVWeb::Deeplink::${s}`,1,!0)},c=()=>document.querySelector("#"+i)||((e,t)=>{const s=document.createElement("iframe");return s.src=t,s.id=i,s.style.display="none",e.appendChild(s),s})(document.body,"about:blank"),d=(e,t,s)=>(e.addEventListener(t,s),()=>{e.removeEventListener(t,s)}),u=({logOutcome:e})=>({url:t,fallbackUrl:s})=>{navigator.msLaunchUri&&navigator.msLaunchUri(t,(()=>l(t,e)),(()=>o(t,e,s)))},m=({logOutcome:e})=>({url:t,fallbackUrl:s})=>{const a=setTimeout((()=>{o(t,e,s),i&&i()}),1e3),n=c(),i=d(window,"blur",(()=>{clearTimeout(a),i&&i(),l(t,e)}));n.contentWindow&&(n.contentWindow.location.href=t)},p=({logOutcome:e})=>({url:t,fallbackUrl:s})=>{const a=c();try{a.contentWindow&&(a.contentWindow.location.href=t),l(t,e)}catch(a){"NS_ERROR_UNKNOWN_PROTOCOL"===a.name?o(t,e,s):n.error("Unexpected error with Firefox deeplinking",a)}},g=({logOutcome:e})=>({url:t,fallbackUrl:s})=>{const a=setTimeout((()=>{o(t,e,s),i&&i()}),1e3);let n=window;for(;n!=n.parent;)n=n.parent;const i=d(n,"blur",(()=>{clearTimeout(a),i&&i(),l(t,e)}));window.location.assign(t)}},"./src/shared/deeplink/index.ts":(e,t,s)=>{"use strict";s.d(t,{b:()=>l});var a=s("./src/shared/deeplink/url.ts"),n=s("./src/shared/deeplink/mshop.ts"),i=s("./src/shared/deeplink/browser.ts");const r=new(s("./src/util/logger/logger.ts").Oc)("DVWebNode:deeplink"),o=(e,t)=>e({logOutcome:({isSuccess:e})=>{r.count(`DVWebNode:deeplinking:${t}:${e?"success":"failure"}`,1,!1)}}),l=()=>({URL:o(a.t,"url"),URL_EMBEDDED:o(a.t,"urlEmbedded"),MSHOP_ANDROID:o(n.Q,"mshopAndroid"),MSHOP_ANDROID_EMBEDDED:o(n.Q,"mshopAndroidEmbedded"),MSHOP_IOS:o(n.l,"mshopIos"),IOS_LEGACY:o(a.t,"iosLegacy"),WIN10_EDGE:o(i.pb,"win10Edge"),WIN10_FIREFOX:o(i.Vl,"win10Firefox"),WIN10_FIREFOX_LEGACY:o(i.Y5,"win10FirefoxLegacy"),WIN10_CHROME:o(i.uW,"win10Chrome"),MAC_OS:o(i.Vl,"macOS")})},"./src/shared/deeplink/mshop.ts":(e,t,s)=>{"use strict";s.d(t,{Q:()=>o,l:()=>r});var a=s("./src/shared/utils/analytics/recordReftag.tsx");const n="dv_web_dl_success",i="dv_web_dl_failure",r=({logOutcome:e})=>({url:t,fallbackUrl:s})=>{var r;null===(r=window.P)||void 0===r||r.when("mash").execute((r=>{r.launchIntentURL({url:t,successCallback:()=>{e({isSuccess:!0}),(0,a.X)(n)},failCallback:async()=>{s?(e({isSuccess:!0}),await(0,a.X)(n),window.location.assign(s)):(e({isSuccess:!1}),await(0,a.X)(i))}})}))},o=({logOutcome:e})=>({url:t,fallbackUrl:s})=>{var r;null===(r=window.P)||void 0===r||r.when("mash").execute((r=>{r.canLaunchIntentURL({url:t,successCallback:async o=>{o?(await(0,a.X)(n),e({isSuccess:!0}),r.launchIntentURL({url:t})):(await(0,a.X)(i),e({isSuccess:!1}),s&&r.launchIntentURL({url:s}))},failCallback:()=>{e({isSuccess:!1}),(0,a.X)(i)}})}))}},"./src/shared/deeplink/url.ts":(e,t,s)=>{"use strict";s.d(t,{t:()=>a});const a=({logOutcome:e})=>({url:t})=>{e({isSuccess:!0}),window.location.assign(t)}},"./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts":(e,t,s)=>{"use strict";s.d(t,{KU:()=>o,Nb:()=>r,W0:()=>c,c7:()=>a,cf:()=>i,qB:()=>d,sW:()=>l,wW:()=>n});let a=function(e){return e.ATVMyStuff="ATVMyStuff",e.ATVProfiles="ATVProfiles",e.ATVDetail="ATVDetail",e.ATVHome="ATVHome",e.ATVBrowse="ATVBrowse",e.ATVPerson="ATVPerson",e.ATVUnknown="ATVUnknown",e.ATVDownloads="ATVDownloads",e.ATVSubscription="ATVSubscription",e.ATVSearch="ATVSearch",e.ATVMerch="ATVMerch",e.ATVWatchParty="ATVWatchParty",e.ATVMoviesAnywhere="ATVMoviesAnywhere",e.ATVModal="ATVModal",e.ATVLive="ATVLive",e.ATVGenre="ATVGenre",e.ATVCategories="ATVCategories",e.ATVRoadblock="ATVRoadblock",e.ATVSplash="ATVSplash",e.Detail="Detail",e.DetailWebView="DetailWebView",e.DetailAW="DetailAW",e.PVPerson="PVPerson",e.DVWebAjaxAnalytics="DVWebAjaxAnalytics",e.DVSPA="DVSPA",e}({}),n=function(e){return e.Library="Library",e.Watchlist="Watchlist",e.Channels="Channels",e.Following="Following",e.Home="Home",e.Store="Store",e.FreeToMe="FreeToMe",e.TV="TV",e.Kids="Kids",e.Search="Search",e.SearchInput="SearchInput",e.Browse="Browse",e.Categories="Categories",e.WhosWatching="WhosWatching",e.Manage="Manage",e.Edit="Edit",e.Associate="Associate",e.Create="Create",e.PinAndLocks="PinAndLocks",e.Season="Season",e.Movie="Movie",e.Event="Event",e.InstantVideo="InstantVideo",e.TVSeason="TVSeason",e.SSM="SSM",e.Actor="Actor",e.Watch="Watch",e.Chat="Chat",e.PVWinApp="PVWinApp",e.GettingStarted="GettingStarted",e.Main="Main",e.Unknown="Unknown",e}({}),i=function(e){return e.Explore="pvwindowsapp-explore",e.DetailPage="pvwindowsapp-dp",e.Live="pvwindowsapp-live",e.AccList="pvwindowsapp-al",e.WindowsApp="pvwindowsapp-main",e.Unknown="pvwindowsapp-unknown",e}({}),r=function(e){return e.Explore="pvweb-explore",e.DetailPage="pvweb-dp",e.Live="pvweb-live",e.AccList="pvweb-al",e.WindowsApp="pvweb-winapp",e.Unknown="pvweb-unknown",e}({}),o=function(e){return e.Web="web",e.WinApp="winApp",e}({});const l={[a.ATVMyStuff]:{[o.WinApp]:i.AccList,[o.Web]:r.AccList},[a.ATVProfiles]:{[o.WinApp]:i.AccList,[o.Web]:r.AccList},[a.ATVDetail]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage},[a.ATVPerson]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage},[a.ATVWatchParty]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage},[a.ATVMoviesAnywhere]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage},[a.ATVHome]:{[o.WinApp]:i.Explore,[o.Web]:r.Explore},[a.ATVBrowse]:{[o.WinApp]:i.Explore,[o.Web]:r.Explore},[a.ATVSearch]:{[o.WinApp]:i.Explore,[o.Web]:r.Explore},[a.ATVMerch]:{[o.WinApp]:i.Explore,[o.Web]:r.Explore},[a.ATVSubscription]:{[o.WinApp]:i.Explore,[o.Web]:r.Explore},[a.ATVUnknown]:{[o.WinApp]:i.Unknown,[o.Web]:r.Unknown},[a.ATVDownloads]:{[o.WinApp]:i.WindowsApp,[o.Web]:r.WindowsApp},[a.DVSPA]:{[o.WinApp]:i.WindowsApp,[o.Web]:r.WindowsApp},[a.ATVModal]:{[o.WinApp]:i.Live,[o.Web]:r.Live},[a.ATVLive]:{[o.WinApp]:i.Explore,[o.Web]:r.Explore},[a.ATVGenre]:{[o.WinApp]:i.Explore,[o.Web]:r.Explore},[a.ATVCategories]:{[o.WinApp]:i.Explore,[o.Web]:r.Explore},[a.Detail]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage},[a.DetailWebView]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage},[a.DetailAW]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage},[a.PVPerson]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage},[a.DVWebAjaxAnalytics]:{[o.WinApp]:i.DetailPage,[o.Web]:r.DetailPage}};let c=function(e){return e.SignOut="SignOut",e.SignIn="SignIn",e.Share="Share",e.Search="Search",e.CarouselScroll="CarouselScroll",e.Purchase="Purchase",e.Rent="Rent",e.PlayTrailer="PlayTrailer",e.PlayStream="PlayStream",e.PlayDraper="PlayDraper",e.PlayDownload="PlayDownload",e.Download="Download",e.Click="Click",e.Back="Back",e.AddToWatchlist="AddToWatchlist",e.RemoveFromWatchlist="RemoveFromWatchlist",e.PageNavigate="PageNavigate",e.DefaultAction="Click",e}({}),d=function(e){return e.PageHit="pageHit",e.PageTouch="pageTouch",e.PopUp="popUp",e.actionOnly="actionOnly",e.refreshButton="refreshButton",e.BackForwardButton="bf=10",e}({})},"./src/shared/deviceProxy/Clickstream/ClickstreamClient.ts":(e,t,s)=>{"use strict";s.d(t,{E:()=>m});var a=s("./src/shared/deviceProxy/ServiceClientBase.ts"),n=s("./src/util/logger/logger.ts"),i=s("./src/shared/deviceProxy/DeviceProxy.ts"),r=s("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),o=s("./src/shared/deviceProxy/Clickstream/ClickstreamUtilities.ts"),l=s("./src/shared/deviceProxy/Clickstream/ClickstreamSchemaValidator.ts"),c=s("./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts"),d=s("./src/shared/utils/LoggerWrapper.ts");function u(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class m{constructor({context:e,DTID:t,logger:s=new d.G(new n.Oc("DVWebNode:ClickstreamClient")),batchParameters:p,homeRegion:g}){u(this,"DTID",void 0),u(this,"context",void 0),u(this,"serviceClient",void 0),u(this,"queue",void 0),u(this,"dcsSchemaValidator",new l.j(c.I3)),u(this,"logger",void 0),u(this,"homeRegion",void 0),u(this,"buildURL",(()=>{const e=new URLSearchParams({...(0,i.B$)(this.context),deviceTypeID:this.DTID,firmware:"DVWebNode"});return`${(0,i.WA)(this.context,this.homeRegion)}/${m.CLICKSTREAM_URL}?${e.toString()}`})),u(this,"buildEntry",((e,t)=>Object.assign(t,{hitType:e,startTime:Date.now(),deviceTypeId:this.DTID}))),u(this,"getAdditionalParameters",(()=>({isStressTest:String(Boolean(this.context.isTest)),clientIp:this.context.customerIPAddress,currentClientTime:Date.now(),currentTerritory:this.context.currentTerritory,customerId:this.context.customerID,deviceId:this.context.deviceID,deviceTypeId:this.DTID,identityContext:this.context.identityContext,marketplaceId:this.context.marketplaceID,preferredLanguage:this.context.locale,sessionId:this.context.sessionID,videoCountryOfRecord:this.context.recordTerritory}))),u(this,"enqueue",(e=>{const t=this.dcsSchemaValidator.isValid(e);t.isValid||this.logger.debug("Invalid Clickstream entry",{validationError:(null==t?void 0:t.errorMessage)||"",invalidEntry:JSON.stringify(e)}),this.queue.add(e)})),u(this,"call",(async e=>{const t=JSON.stringify({EntryList:e,...this.getAdditionalParameters()});try{await this.serviceClient.post({operationName:a.n.Clickstream,uri:this.buildURL(),opts:{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:t}},m.strategy)}catch(e){}})),u(this,"hit",(({pageType:e,subPageType:t,clientVariant:s,refMarker:a,pageTypeId:n,A9SearchFields:i})=>{const o=this.buildEntry(r.qB.PageHit,{action:r.W0.Click,pageType:e,subPageType:t,clientVariant:s,...a&&{refMarker:a},...n&&{pageTypeId:n},...i&&{A9SearchFields:i}});this.enqueue(o)})),u(this,"hva",(({pageType:e,subPageType:t,action:s,clientVariant:a,refMarker:n,pageTypeId:i,hitType:o,A9SearchFields:l})=>{const c=this.buildEntry(null!=o?o:r.qB.PageTouch,{action:s,pageType:e,subPageType:t,clientVariant:a,...n&&{refMarker:n},...i&&{pageTypeId:i},...l&&{A9SearchFields:l}});this.enqueue(c)})),this.context=e,this.DTID=t,this.logger=s,this.serviceClient=new a.v({context:this.context,logger:s,logErrorAsWarning:!0}),this.queue=new o.V(p,this.call),this.homeRegion=g}}u(m,"CLICKSTREAM_URL","cdp/usage/Clickstream"),u(m,"strategy",{maxRetries:0,retryOnException:()=>!1})},"./src/shared/deviceProxy/Clickstream/ClickstreamSchemaValidator.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>r});var a=s("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),n=s("./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts");function i(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e){i(this,"clickstreamSchemaConfiguration",n.I3),i(this,"isClickstreamPayload",((e,t)=>!!(e&&"object"==typeof e&&e instanceof Object&&Object.getPrototypeOf(e)===Object.prototype)||(t.message="Clickstream payload is not an object",!1))),e&&(this.clickstreamSchemaConfiguration=e)}isValid(e){let t={message:""};return this.isClickstreamPayload(e,t)&&this.checkProperties(e,t)?{isValid:!0}:{isValid:!1,errorMessage:t.message}}checkProperties(e,t){return this.checkProperty(e,"hitType",t)&&this.checkProperty(e,"action",t)&&this.checkProperty(e,"refMarker",t)&&this.checkProperty(e,"pageType",t)&&this.checkProperty(e,"pageTypeId",t)&&this.checkProperty(e,"subPageType",t)&&this.checkProperty(e,"startTime",t)&&this.checkProperty(e,"deviceId",t)&&this.checkProperty(e,"deviceTypeId",t)&&this.checkProperty(e,"clientVariant",t)&&this.checkProperty(e,"preferredLanguage",t)&&this.checkProperty(e,"ue",t)&&this.checkProperty(e,"cf",t)&&this.checkProperty(e,"id",t)&&this.checkAdditionalData(e,"additionalData",t)&&this.checkTags(e,"tags",t)}checkProperty(e,t,s){return this.isPropertyDefined(e,t)?this.isOfSpecifiedType(e,t,this.clickstreamSchemaConfiguration[t],s)&&this.propertySpecificCheck(e,t,s):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,s)}checkAdditionalData(e,t,s){return this.isPropertyDefined(e,t)?this.isPlainObject(e.additionalData,t,s):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,s)}checkTags(e,t,s){return this.isPropertyDefined(e,t)?this.isArray(e.tags,"tags",s)&&e.tags.every((e=>this.isOfSpecifiedType(e,"tags","string",s))):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,s)}handleUndefinedProperty(e,t,s,a){return!this.isRequired(e,t,s)||(this.setUndefinedErrorMessage(t,a),!1)}isRequired(e,t,s){return s.indexOf(t)>=0||this.isMaybeRequired(e,t)}isMaybeRequired(e,t){if("pageTypeId"===t){const t=e.pageType,s=e.hitType,n=e.action;return s==a.qB.PageHit&&t==a.c7.ATVDetail&&n==a.W0.Click||s==a.qB.PageTouch&&(n==a.W0.Download||n==a.W0.PlayDownload)}return!1}isPropertyDefined(e,t){return Object.hasOwnProperty.call(e,t)}isPlainObject(e,t,s){const a=e instanceof Object&&Object.getPrototypeOf(e)===Object.prototype;return a||this.setIncorrectTypeErrorMessage(t,s,e),a}isArray(e,t,s){const a=Array.isArray(e);return a||this.setIncorrectTypeErrorMessage(t,s,e),a}isOfSpecifiedType(e,t,s,a){const n=Array.isArray(s)&&s.indexOf(e[t])>=0||typeof e[t]===s;return n||this.setIncorrectTypeErrorMessage(t,a,e[t]),n}setUndefinedErrorMessage(e,t){t.message=`ClickstreamValidationFailed - ${e} is not defined`}setIncorrectTypeErrorMessage(e,t,s){Array.isArray(s)?s="Array":s instanceof Object&&Object.getPrototypeOf(s)===Object.prototype&&(s="Object"),t.message=`ClickstreamValidationFailed - ${e} is of incorrect type, received value is ${s}`}propertySpecificCheck(e,t,s){switch(t){case"subPageType":return this.checkSubPageType(e,s);case"refMarker":return this.checkRefMarker(e,s);default:return!0}}checkSubPageType(e,t){const s=e.subPageType;return s?s.match(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/)?(t.message=`ClickstreamValidationFailed - subPageType must not contain special characters, received value is ${s}`,!1):s.charAt(0)===s.charAt(0).toUpperCase()||(t.message=`ClickstreamValidationFailed - subPageType is not CapitalizedCamelCase, received value is ${s}`,!1):(t.message="ClickstreamValidationFailed - subPageType must not be empty string",!1)}checkRefMarker(e,t){const s=e.refMarker;return s.match("^[A-Za-z0-9_|\\-]*$")?s.match("^[A-Za-z].*")?s.match(".*[A-Za-z0-9]$")?s.match("^(?!.*([-_|]){2,}).*$")?!(s.length<2||s.length>64)||(t.message=`ClickstreamValidationFailed - refMarker must be within the length limits, received value is ${s}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must not contain repeating punctuation, received value is ${s}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must end with alphanumeric character, received value is ${s}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must start with alphabetic character, received value is ${s}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must contain alphanumeric characters and punctuation only, received value is ${s}`,!1)}}},"./src/shared/deviceProxy/Clickstream/ClickstreamUtilities.ts":(e,t,s)=>{"use strict";function a(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{V:()=>i});class n{constructor(){a(this,"store",new Map),a(this,"push",(e=>{const t=this.store.size+e.startTime;return this.store.set(t,e),t})),a(this,"delete",(e=>{this.store.delete(e)})),a(this,"values",(()=>Array.from(this.store.values()))),a(this,"clear",(()=>{this.store.clear()}))}}class i{constructor(e,t){a(this,"storage",void 0),a(this,"callback",void 0),a(this,"parameters",void 0),a(this,"interval",null),a(this,"timer",(()=>{this.interval=setInterval(this.execute,1e3*this.parameters.duration)})),a(this,"add",(e=>{const t=this.storage.push(e);return this.storage.store.size===this.parameters.size?this.execute():null===this.interval&&this.timer(),t})),a(this,"remove",(e=>{this.storage.delete(e)})),a(this,"execute",(()=>{this.callback(this.storage.values()),this.reset()})),a(this,"reset",(()=>{this.storage.clear(),null!==this.interval&&clearInterval(this.interval),this.interval=null})),this.storage=new n,this.callback=t,this.parameters=e}}},"./src/shared/deviceProxy/Clickstream/DefaultClickstreamSchema.ts":(e,t,s)=>{"use strict";s.d(t,{I3:()=>n});var a=s("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts");const n={hitType:Object.values(a.qB),action:Object.values(a.W0),pageType:Object.values(a.c7),subPageType:"string",clientVariant:[...Object.values(a.Nb),...Object.values(a.cf)],refMarker:"string",pageTypeId:"string",startTime:"number",deviceTypeId:"string",deviceId:"string",pageTypeIdSource:"string",preferredLanguage:"string",ue:"number",cf:"number",af:"number",id:"number",requiredProperties:["hitType","pageType","subPageType","startTime","deviceTypeId","action","clientVariant","refMarker"]}},"./src/shared/deviceProxy/ClientsideImpressionClient.ts":(e,t,s)=>{"use strict";s.d(t,{g:()=>l});var a=s("./src/util/logger/logger.ts"),n=s("./src/util/utils/device.ts"),i=s("./src/shared/deviceProxy/DeviceProxy.ts"),r=s("./src/util/csm/csm.tsx");function o(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l{constructor(e){o(this,"context",void 0),o(this,"logger",void 0),this.context=e,this.logger=new a.Oc("DVWebNode_ClientsideImpressionClient")}buildClientsideImpressionUri(){const e={...(0,i.B$)(this.context),deviceTypeID:l.html5DTID,deviceID:"Web",firmware:"DVWebNode"},t=new URLSearchParams(e);return`${(0,i.WA)(this.context)}/${l.clientsideImpressionUrl}?${t.toString()}`}getParameters(e){return{...(0,i.B$)(this.context),...e,sessionId:this.context.sessionID,deviceTypeID:(0,n.dz)().deviceTypeId}}async logImpression(e){const t=this.buildClientsideImpressionUri(),s=this.getParameters(e),a="sendBeacon"in navigator&&!Boolean(window.chrome);if(a){(0,r.cL)("DVWebNode::ClientsideImpressionClient::sendBeaconAttempt",1,!1);const e=new Blob([JSON.stringify(s)],{type:"application/json"});return navigator.sendBeacon(t,e)}return(0,r.cL)("DVWebNode::ClientsideImpressionClient::fetchAttempt",1,!1),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),keepalive:!0,credentials:"include"}).then((()=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${a?"sendBeacon":"fetch"}Success`,1,!1),!0)),(()=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${a?"sendBeacon":"fetch"}Reject`,1,!1),!1))).catch((e=>((0,r.cL)(`DVWebNode::ClientsideImpressionClient::${a?"sendBeacon":"fetch"}Caught`,1,!1),this.logger.warn("Clientside impression fetch failed",e),!1)))}}o(l,"clientsideImpressionUrl","cdp/usage/ClientsideImpression"),o(l,"html5DTID",i.V4.WEB)},"./src/shared/deviceProxy/DeviceProxy.ts":(e,t,s)=>{"use strict";s.d(t,{B$:()=>l,V4:()=>r,WA:()=>o});var a=s("./src/util/utils/device.ts"),n=s("./src/util/utils/marketplace.ts"),i=s("./src/shared/deviceProxy/marketplaceUtils.ts");const r={WEB:"AOAGZA014O5RE",WINDOWS:"A3OEMT9S4WNMK"},o=(e,t)=>`https://${(0,i.fJ)(e.marketplaceID,t)}`,l=e=>({deviceID:e.deviceID,deviceTypeID:(0,a.dz)().deviceTypeId,gascEnabled:(0,n.ST)()?"true":"false",marketplaceID:e.marketplaceID,uxLocale:e.locale})},"./src/shared/deviceProxy/PVClickstreamClient.ts":(e,t,s)=>{"use strict";s.d(t,{U:()=>u});var a=s("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),n=s("./src/shared/deviceProxy/DeviceProxy.ts"),i=s("./src/util/utils/refMarker.ts"),r=s("./src/shared/deviceProxy/Clickstream/ClickstreamClient.ts");function o(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l={size:1,duration:1};class c extends r.E{constructor({context:e,homeRegion:t,logger:s}){super({context:e,DTID:c.getDTID(),logger:s,homeRegion:t,batchParameters:c.getBatchParameters()}),o(this,"previousParameters",void 0),o(this,"onNavigation",void 0),o(this,"backButtonData",void 0),o(this,"getClientVariant",(e=>a.sW[e]?a.sW[e][a.KU.Web]:a.Nb.Unknown)),o(this,"getA9SearchFields",(()=>{var e;const t=new URLSearchParams(window.location.search),s=e=>{if(null===e)return null;const t=parseInt(e,10);return isNaN(t)?null:t},a=s(t.get("qid")),n=t.get("sr"),i=null===n?null:s(n.split("-")[1]);return null!==a&&null!==i&&i>0?{qid:a,searchPositionIndex:i,keyword:null!==(e=t.get("keywords"))&&void 0!==e?e:""}:void 0})),o(this,"getRefmarker",(()=>{const e=window.location.href.match(i.oA);return e&&e[1]||"atv_unknown"})),o(this,"getParameters",((e,t,s,a)=>({pageType:e,subPageType:t,refMarker:s||this.getRefmarker(),clientVariant:a||this.getClientVariant(e),A9SearchFields:this.getA9SearchFields()}))),o(this,"recordBackButton",(()=>{const e=this.getRefmarker();this.backButtonData={ref:e+"_back",hitType:a.qB.BackForwardButton}})),o(this,"clearBackButton",(()=>{this.backButtonData=void 0})),o(this,"navigation",(e=>{const{pType:t,sPageType:s,ref:n,pageTypeId:i}=e;try{const{pageType:e,subPageType:r,refMarker:o,clientVariant:l,A9SearchFields:c}=this.getParameters(t,s,n);this.previousParameters={pageType:e,subPageType:r,refMarker:o,clientVariant:l,A9SearchFields:c},this.backButtonData&&(this.hva({pageType:e,subPageType:r,action:a.W0.Back,clientVariant:l,refMarker:this.backButtonData.ref,pageTypeId:i,hitType:this.backButtonData.hitType,A9SearchFields:c}),this.clearBackButton()),this.hit({pageType:e,subPageType:r,clientVariant:l,refMarker:o,pageTypeId:i,A9SearchFields:c}),this.onNavigation&&this.onNavigation({pageType:e,subPageType:r})}catch(e){this.logger.warn("PVClickstream navigation() error",e)}})),o(this,"action",(e=>{const{action:t,pType:s,sPageType:a,ref:n,pageTypeId:i,hitType:r,clientVariantOverride:o}=e;try{const{pageType:e,subPageType:l,refMarker:c,clientVariant:d}=s&&a?this.getParameters(s,a,n,o):this.previousParameters;this.previousParameters={pageType:e,subPageType:l,refMarker:c,clientVariant:d},this.hva({pageType:e,subPageType:l,action:t,clientVariant:null!=o?o:d,hitType:r,refMarker:null!=n?n:c,pageTypeId:i})}catch(e){this.logger.warn("PVClickstream action() error",e)}})),o(this,"setOnNavigation",(e=>this.onNavigation=e)),this.previousParameters={pageType:a.c7.ATVUnknown,subPageType:a.wW.Unknown,clientVariant:a.cf.Unknown,refMarker:"atv_unknown"}}}o(c,"getBatchParameters",(()=>l)),o(c,"getDTID",(()=>n.V4.WEB));let d=null;const u=e=>(null==d&&void 0!==(null==e?void 0:e.context)&&(d=new c(e)),d)},"./src/shared/deviceProxy/ServiceClientBase.ts":(e,t,s)=>{"use strict";s.d(t,{n:()=>o,v:()=>c});var a=s("./src/util/api/util.ts"),n=s("./src/shared/utils/metrics/metricTypes.ts");function i(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const r={credentials:"include",headers:{},body:void 0};let o=function(e){return e.Clickstream="Clickstream",e.ConsumeRental="ConsumeRental",e.Release="Release",e.Sync="Sync",e.UpdateStream="UpdateStream",e}({});const l={Clickstream:n.$E.CallClickStream,ConsumeRental:n.$E.CallConsumeRental,Release:n.$E.CallRelease,Sync:n.$E.CallSync,UpdateStream:n.$E.CallUpdateStream};class c{constructor({context:e,logger:t,retryLogic:s,logErrorAsWarning:a=!1}){i(this,"context",void 0),i(this,"logger",void 0),i(this,"retryLogic",void 0),i(this,"logErrorAsWarning",void 0),i(this,"defaultRetryCondition",(()=>!1)),i(this,"logError",((e,t,s)=>{this.logErrorAsWarning?this.logger.warn(t,{errorMessage:null==e?void 0:e.message,...s}):this.logger.error(e,t,s)})),this.context=e,this.logger=t;const n={maxRetries:0,retryOnStatusCode:this.defaultRetryCondition,retryOnException:this.defaultRetryCondition,retryOnDeserializationException:this.defaultRetryCondition};this.retryLogic={...n,...s},this.logErrorAsWarning=a}sleep(e){return new Promise((t=>setTimeout(t,e)))}async get(e,t){const s={...e.opts,method:"GET"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),s,t)}async post(e,t){const s={...e.opts,method:"POST"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),s,t)}buildURL(e,t={}){let s;try{s=new URL(e)}catch(t){s=new URL(e,window.location.origin)}for(const e in t)s.searchParams.set(e,`${t[e]}`);return s.toString().replace(/\/$/,"")}constructPostRequest({body:e,...t}){return{...r,...t,body:e?JSON.stringify(e):void 0}}async call(e,t,s,a){const i={...this.retryLogic,...a};let r=0;do{const a={};try{if(r>0&&i.backoffStrategy){const e=i.backoffStrategy(r);await this.sleep(e)}const o=await this.fetchResponse(e,t,s,a);let c=await this.parseResponse(e,o,a);return a.Success=1,c}catch(n){if(this.shouldRetry(n,t,s,e,a,i)&&r!=i.maxRetries)continue;throw a.Failure=1,n}finally{0!=r&&(a.Retry=1),void 0!==e?this.logger.count(l[e],a):this.logger.count(n.$E.CallUndefined,a),r++}}while(r<=((null==i?void 0:i.maxRetries)||0));return Promise.reject()}async parseResponse(e,t,s){let n;try{n=await t.json()}catch(t){const n=new a.xU(t.message);throw this.logError(n,"Could not parse response",{operationName:e}),s.DeserializationException=1,n}return n}async fetchResponse(e,t,s,i){const r=await fetch(t,s);if(i[`StatusCode_${r.status}`]=1,!r.ok){const s=await r.text(),o=new a.jZ(s,r.status);throw 400===r.status?this.logger.count(n.l4.FetchResponseCode400,i,!0):403===r.status?this.logger.count(n.l4.FetchResponseCode403,i,!0):this.logError(o,"Non 2xx status code received",{statusCode:r.status,operationName:e,url:t,marketplaceId:this.context.marketplaceID,currentTerritory:this.context.currentTerritory,recordTerritory:this.context.recordTerritory,geoToken:this.context.geoToken,location:window.location.href}),o}return r}shouldRetry(e,t,s,n,i,r){return e instanceof a.jZ&&r&&r.retryOnStatusCode?r.retryOnStatusCode(e,t,s):e instanceof a.xU&&r&&r.retryOnDeserializationException?r.retryOnDeserializationException(e,t,s):(i.Exception=1,this.logError(e,`${s.method} request threw an exception`,{url:t,operationName:n}),!(!r||!r.retryOnException)&&r.retryOnException(e,t,s))}}},"./src/shared/deviceProxy/marketplaceUtils.ts":(e,t,s)=>{"use strict";s.d(t,{fJ:()=>n});var a=s("./src/util/utils/marketplace.ts");const n=(e,t)=>{let s="";switch(s=(0,a.is)()===a.wQ.ROW&&t?t:i(e),s){case a.yp.EU:return`atv-ps-eu${(0,a.is)()}`;case a.yp.FE:return`atv-ps-fe${(0,a.is)()}`;case a.yp.NA:default:return`atv-ps${(0,a.is)()}`}},i=e=>{switch(e){case a.HZ.UK:case a.HZ.DE:case a.HZ.ROW_EU:case a.HZ.ROE_EU:return a.yp.EU;case a.HZ.JP:case a.HZ.ROW_FE:return a.yp.FE;case a.HZ.US:case a.HZ.ROW_NA:default:return a.yp.NA}}},"./src/shared/imageUtils/imageUtils.ts":(e,t,s)=>{"use strict";s.d(t,{GH:()=>r,Ro:()=>h,TQ:()=>g,X8:()=>p,e4:()=>m,er:()=>u,rB:()=>i});var a=s("./src/util/utils/imageUtils/imageUtils.tsx"),n=s("./src/shared/utils/utils.ts");let i=function(e){return e.WIDTH="WIDTH",e.HEIGHT="HEIGHT",e}({}),r=function(e){return e.gif="gif",e.jpg="jpg",e.pkmz="pkmz",e.png="png",e.webp="webp",e}({});const o=[1.5,2],l={phone:"20em",phablet:"28em","phone-landscape":"47em",tablet:"55em","tablet-landscape":"65em",desktop:"90em",largeScreen:"118em","tablet-lowest":"28em","laptop-lowest":"55em","desktop-lowest":"80em","desktop-hd-lowest":"100em","desktop-uhd-lowest":"150em"},c=RegExp(`(${Object.keys(l).join("|")})$`),d=e=>"string"==typeof e?e:`${e}px`,u=(e,t,s,a,n,i,r)=>{const l=o.map((o=>`${m({src:e,value:t*o,baseType:s,type:a,skipStripTags:n,supportTransparency:i,autoCrop:r})} ${o}x`));return l&&l.unshift(m({src:e,value:t,baseType:s,type:a,skipStripTags:n,supportTransparency:i,autoCrop:r})),l&&l.join(", ")},m=({src:e,value:t,baseType:s,type:n,skipStripTags:r,supportTransparency:o=!1,autoCrop:l})=>{if(!e)return"";const c=new a.e(e);return r||c.stripTags(),l&&c.autoCrop(),s===i.HEIGHT?c.scaleHeight(t):c.scaleWidth(t),n?c.forceFormat(n):o&&c.formatHasTransparencySupport&&c.forceFormat(c.urlFileFormat),c.getImageUrl()},p=(e,t,s,a,n,i)=>t.map((t=>`${m({src:e,value:t,baseType:s,type:a,skipStripTags:n,autoCrop:i})} ${t}w`)).join(", "),g=(e,t=[])=>{const s=t.reduce(((e,t)=>{const[s,a]=Object.entries(t)[0],n=(e=>e.replace(c,(e=>`width: ${l[e]}`)))(s);return n&&a&&e.push(`(${n}) ${d(a)}`),e}),[]);return s.push(d(e)),s.join(", ")},h=({src:e,baseValue:t,baseType:s=i.WIDTH,srcSizes:a,format:r,resolutions:l,skipStripTags:c,supportTransparency:d,autoCrop:h})=>{if(s===i.HEIGHT&&a)throw new Error("BaseType.HEIGHT can't be used with srcSizes. It is only compatible with format and resolutions.");if((0,n.xb)(a))return{src:m({src:e,value:t,baseType:s,type:r,skipStripTags:c,supportTransparency:d,autoCrop:h}),srcSet:u(e,t,s,r,c,d,h)};const v=a.map((e=>Object.values(e)[0]));v.push(t);const b=((e,t=o)=>{const s=t.reduce(((t,s)=>[...t,...e.map((e=>Math.floor(e*s)))]),e);return Array.from(new Set(s)).sort(n.ws)})(v,l);return{src:m({src:e,value:t,baseType:s,type:r,skipStripTags:c,autoCrop:h}),srcSet:p(e,b,s,r,c,h),sizes:g(t,a)}}},"./src/shared/person/toggleFollowingButton/FollowingButtonContainer.tsx":(e,t,s)=>{"use strict";s.d(t,{G:()=>u});var a=s("./node_modules/react/index.js"),n=s("./src/util/wrappers/ArgsContext.tsx"),i=s("./src/util/wrappers/LoggersContext.tsx"),r=s("./src/shared/person/toggleFollowingButton/ToggleFollowingButton.tsx");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},o.apply(this,arguments)}function l(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=e=>{const{tag:t,text:s,endpoint:a}=e;return{tag:t,text:s,endpoint:a}};class d extends a.Component{constructor(e){super(e),l(this,"onToggleFollowingSuccess",(e=>{e.newAction&&this.setState({toggleFollowingAction:e.newAction})})),this.state={toggleFollowingAction:c(e.toggleFollowingAction)}}render(){const{buttonType:e,className:t,enableErrorMessage:s,context:n,logger:i}=this.props,{toggleFollowingAction:l}=this.state;return a.createElement(r._,o({},l,{context:n,logger:i,onSuccess:this.onToggleFollowingSuccess,buttonType:e,className:t,enableErrorMessage:s}))}}const u=(0,n.s6)((0,i.ty)(d))},"./src/shared/person/toggleFollowingButton/ToggleFollowingButton.tsx":(e,t,s)=>{"use strict";s.d(t,{_:()=>u});var a=s("./node_modules/react/index.js"),n=s("./src/shared/person/toggleFollowingButton/toggleFollowingButton.module.scss"),i=s("./src/util/api/WPSClient.ts"),r=s("./src/util/types/wps/following.ts"),o=s("./node_modules/@amzn/dvui/dist/Callout.js"),l=s("./node_modules/classnames/index.js");function c(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=({errorMessage:e})=>a.createElement(o.Callout,{use:"error",content:e,position:"bottom",startOpen:!0,size:"s",dismissSeconds:5});class u extends a.Component{constructor(e){super(e),c(this,"constructInput",(e=>{const{endpoint:t,context:s}=e,{query:a}=t,{tagValue:n,scopeValue:i,personIdValue:r,tokenValue:o,personNameValue:l}=this.getQueryValues(a);return{context:s,personId:r,personName:l,tag:n,scope:i,token:o}})),c(this,"onSubmit",(e=>{e.preventDefault(),this.submitForm()})),c(this,"updateErrorMessage",(e=>{this.setState({errorMessage:e})})),c(this,"submitForm",(()=>{const{logger:e,onSuccess:t,onFailureWithMessage:s,onUnexpectedFailure:a}=this.props;(new i.e).ToggleFollowing(this.constructInput(this.props)).then((e=>{e.success?t&&t(e):s?s(e):this.updateErrorMessage(e.message)})).catch((t=>{a&&a(t),e.error(t)}))})),c(this,"getQueryValues",(e=>({tagValue:e.tag,scopeValue:e.scope,personIdValue:e.personId,tokenValue:e.token,personNameValue:e.personName}))),c(this,"getButtonStyle",((e,t)=>{const s=t?n.Z.darkButton:n.Z.lightButton;switch(e){case"primary":default:return s;case"secondary":return n.Z.lightButton;case"undo-link":return n.Z.linkButton}})),this.state={errorMessage:e.errorMessage}}componentDidUpdate(e){e.errorMessage!==this.props.errorMessage&&this.updateErrorMessage(this.props.errorMessage)}render(){const{tag:e,buttonType:t,text:s,endpoint:i,className:o,enableErrorMessage:c}=this.props,{errorMessage:u}=this.state,m=e===r.Ou.Unfollow,{partialURL:p,query:g}=i,{tagValue:h,scopeValue:v,personIdValue:b,tokenValue:D,personNameValue:y}=this.getQueryValues(g),f=this.getButtonStyle(t||"primary",m),E=l(n.Z.toggleFollowingButton,null!=o?o:"");return a.createElement("div",{className:E},a.createElement("form",{action:p,method:"POST",onSubmit:this.onSubmit},a.createElement("input",{name:"token",type:"hidden",value:D}),a.createElement("input",{name:"tag",type:"hidden",value:h}),a.createElement("input",{name:"scope",type:"hidden",value:v}),a.createElement("input",{name:"personId",type:"hidden",value:b}),y&&a.createElement("input",{name:"personName",type:"hidden",value:y}),a.createElement("button",{type:"submit",className:f},s)),c&&u&&a.createElement(d,{errorMessage:u}))}}},"./src/shared/player/index.tsx":(e,t,s)=>{"use strict";s.d(t,{Sz:()=>b,c4:()=>h});var a=s("./node_modules/react/index.js"),n=s("./src/util/utils/network.ts"),i=s("./src/util/logger/logger.ts"),r=s("./src/shared/player/integration/index.ts"),o=s("./src/shared/player/integration/config.ts"),l=s("./src/shared/SPA/SpaContext.tsx");function c(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=(e,t)=>{const s=document.createEvent("CustomEvent");s.initCustomEvent(e,!0,!0,t),document.dispatchEvent(s)},u=e=>{document.getElementsByTagName("body")[0].style.overflow=e},m=e=>{document.getElementById(o.c6).className=e},p=e=>{m("dv-player-fullscreen"),u("hidden")},g=e=>{m(""),u("visible")},h=e=>{window.location.assign(e)};class v extends a.Component{constructor(e){super(e),c(this,"logger",void 0),c(this,"player",void 0),c(this,"playerFailedToLoad",void 0),c(this,"unsubscribeHandlers",void 0),c(this,"loadPlayer",(async(e=!1)=>{const{playerConfig:t,whisperCacheData:s,liveIncompatibleCallback:a,capabilities:n,onPlayerLoadErrorCallback:i}=this.props;try{this.player=await(0,r.MD)(t,a,this.logger,e),this.attachRefreshEventHandlers(),s&&await this.handlePrepareRequest(s)}catch(e){"string"==typeof e?this.logFatal(e):this.logger.fatal(e),this.playerFailedToLoad=!0,i&&i()}})),c(this,"handleNetworkChange",(async()=>{!this.player&&n.Zc.isOnline()&&this.loadPlayer(!0)})),this.logger=e.logger||new i.Oc(`DVWebNode:Player:${this.props.playerConfig.pageType}`),this.unsubscribeHandlers=[],this.playerFailedToLoad=!1}logFatal(e){this.count(e).fatal(e)}count(e){const{pageType:t}=this.props.playerConfig;return this.logger.count(`${e}:${t}`,1,!1)}async attachRefreshEventHandlers(){const{onPlay:e,onClosed:t,downloadGateway:s,onAsinChanged:a,onInitialized:n,onPrepare:i,onPlayerCapabilities:r}=this.props,o=this.player,l=(e,t)=>{this.unsubscribeHandlers.push(o.on(e,(e=>t(e))))};l("play",p),l("play",(e=>d("PVVideoPlayerPlay",e))),e&&l("play",e),l("closed",g),l("closed",(e=>d("PVVideoPlayerClosed",e))),t&&l("closed",t),s&&l("closed",s.onPlayerClosed),l("asinChanged",(e=>d("PVVideoPlayerTitleChanged",e))),a&&l("asinChanged",a),l("initialized",(()=>d("PVVideoPlayerInitialized",void 0))),n&&l("initialized",n),l("prepare",(()=>d("PVVideoPlayerPrepared",void 0))),i&&l("prepare",i),l("aborted",(()=>{this.count("DVWebPlayer:aborted")}));const c=await o.capabilities;c.supportsDrm||this.count("DVWebPlayer:missingDrm"),d("PVVideoPlayerCapabilities",c),r&&r(c)}async componentDidMount(){this.loadPlayer(),n.Zc.onNetworkChange(this.handleNetworkChange)}componentDidUpdate({playbackLinkData:e,whisperCacheData:t}){const{playbackLinkData:s,whisperCacheData:a}=this.props;s&&!e&&this.handlePlayRequest(s),!s&&a&&a!==t&&this.handlePrepareRequest(a)}async componentWillUnmount(){this.unsubscribeHandlers.forEach((e=>e())),n.Zc.offNetworkChange(this.handleNetworkChange)}async handlePrepareRequest(e){this.player&&this.player.prepare(e)}async handlePlayRequest({contentConfig:e,signInUrl:t}){const{onPlayFailure:s}=this.props;let a=!0;if(this.player)if(t)h(t);else try{await this.player.play(e)}catch(t){this.logger.fatal("Playback failed",{contentConfig:e},t),a=!1}else this.playerFailedToLoad?(this.count("DVWebPlayer:FailedToLoad"),this.logger.warn("Player failed to load",{contentConfig:e})):(this.count("DVWebPlayer:notReady"),this.logger.warn("Player not ready",{contentConfig:e})),a=!1;!a&&s&&s()}render(){return null}}const b=(0,l.cG)(v)},"./src/shared/player/integration/config.ts":(e,t,s)=>{"use strict";s.d(t,{QD:()=>c,c6:()=>n,it:()=>d});var a=s("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts");const n="dv-web-player",i=()=>{let e=document.getElementById(n);return e||(e=document.createElement("div"),e.setAttribute("id",n),document.body.appendChild(e),e)},r={Detail:"f22dbddb-ef2c-48c5-8876-bed0d47594fd",DetailAndroid:"898eb3b8-96c0-4c6b-baa3-2d253860be8c",DetailAndroidMShop:"98d383c3-632a-4872-8ef8-7cc10d033066",Live:"b4f777f2-3153-4c55-8aa7-4645fe264be1",Home:"9ee9ba9b-f89c-41bb-8aa0-4db6e7f24cad",MyStuffLanding:"54cb2f2e-e96f-4e25-9d08-ea852a40588d",AIVWatchlist:"8e377055-28b0-4475-a3e7-f909ebcad6f1",YourVideoLibrary:"1e2f7321-aba1-4bd3-bdfc-a63777d869af",SPA:"933adc82-54c5-4fe0-9273-f1e188456161",PersonPage:"41e7965c-89b8-4967-bdd3-74e2a8f06636",ChannelsSubscription:"66d54d28-d754-4b11-b74d-427a03909d93",Following:"74392e3c-4c00-479e-90c8-f4d42aae8705",EPG:"bdd74b62-c362-46c8-86f0-47e300702607",Search:"47c62571-58c9-4572-9a75-52f68e019cea",Browse:"47c62571-58c9-4572-9a75-52f68e019cea",Genre:"47c62571-58c9-4572-9a75-52f68e019cea",Categories:"47c62571-58c9-4572-9a75-52f68e019cea"},o=e=>r[e],l={Detail:a.c7.Detail,Live:a.c7.ATVDetail,DetailAndroid:a.c7.ATVDetail,DetailAndroidMShop:a.c7.ATVDetail,Home:a.c7.ATVHome,MyStuffLanding:a.c7.ATVMyStuff,AIVWatchlist:a.c7.ATVMyStuff,YourVideoLibrary:a.c7.ATVMyStuff,SPA:a.c7.DVSPA,PersonPage:a.c7.ATVPerson,ChannelsSubscription:a.c7.ATVSubscription,Following:a.c7.ATVMyStuff,EPG:a.c7.ATVLive,Search:a.c7.ATVSearch,Browse:a.c7.ATVBrowse,Genre:a.c7.ATVGenre,Categories:a.c7.ATVCategories},c=e=>l[e],d=e=>{const{marketplaceId:t,sessionId:s,playerBeta:a,customerId:n,locale:r,pageType:l,deviceId:c}=e,d={marketplaceId:t,sessionId:s,playerBeta:a,customerId:n,locale:r,deviceId:c,domElement:i(),clientId:o(l)};var u;return(u=d)&&Object.entries(u).forEach((([e,t])=>void 0===t&&delete u[e])),d}},"./src/shared/player/integration/index.ts":(e,t,s)=>{"use strict";s.d(t,{MD:()=>p});var a=s("./src/util/utils/pubSub.ts"),n=s("./src/shared/player/integration/loader.ts"),i=s("./src/shared/player/integration/config.ts"),r=s("./src/shared/player/integration/logger.ts");function o(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l=["closed","asinChanged","aborted"],c=e=>({trailer:e.trailer,position:Number(e.position||0),videoType:e.videoType,live:Boolean(e.lcid),asin:e.lcid||e.asin,ref:e.ref,playbackEnvelope:e.playbackEnvelope,privacyConsent:e.privacyConsent,playbackExperiences:e.playbackExperiences,isAVOD:e.isAVOD}),d=e=>({...e,startEpoch:Math.floor(Date.now()/1e3)});class u{constructor(e,t,s,n){o(this,"player",void 0),o(this,"logger",void 0),o(this,"liveIncompatibleCallback",void 0),o(this,"playerConfigData",void 0),o(this,"playerConfig",void 0),o(this,"currentContentConfig",null),o(this,"pubSub",void 0),o(this,"lastTitle",void 0),o(this,"capabilities",void 0),o(this,"_test",void 0),o(this,"playbackLaunchedTime",void 0),this.player=e,this.logger=n,this._test={player:e},this.liveIncompatibleCallback=s,this.pubSub=(0,a.M)(),this.playerConfigData=t,this.playerConfig=(0,i.it)(t),this.lastTitle=null,this.init(),this.capabilities=new Promise((t=>{e.on("playerCapabilities",(({capabilities:e})=>{t(e)}))}))}init(){const e=(0,i.QD)(this.playerConfigData.pageType);l.forEach((e=>{this.player.on(e,(async t=>{await this.callAction(e),t&&"asinChanged"===e&&(this.lastTitle=d(c(t)))}))})),this.player.on("playing",(()=>{if(this.playbackLaunchedTime){const t=Date.now()-this.playbackLaunchedTime;this.logCounter("playbackdelay",t),this.playbackLaunchedTime=null,(0,r.c)({action:r.m.PlaybackStarted,pageType:e,logger:this.logger,videoType:this.getVideoType()})}})),this.on("closed",(()=>(0,r.c)({action:r.m.PlayerClosed,pageType:e,logger:this.logger,videoType:this.getVideoType()}))),this.on("asinChanged",(()=>(0,r.c)({action:r.m.PlayerTitleChanged,pageType:e,logger:this.logger,videoType:this.getVideoType()}))),this.on("beforePlay",(e=>this.liveIncompatibleCheck(e))),this.player.initialize(this.playerConfig)}async callAction(e){return await Promise.all(this.pubSub.query(e).map((e=>e(this.lastTitle))))}on(e,t){return this.pubSub.subscribe(e,t)}async prepare(e){await this.callAction("prepare"),this.player.prepare(this.playerConfig,{...c(e),immediateConsumption:!1})}async liveIncompatibleCheck(e){var t;if(!("Live"!==(t=e).videoType&&!t.lcid&&!t.live||(await this.capabilities).supportsLive))throw this.liveIncompatibleCallback(),"Live Incompatible"}async play(e){const t=c(e);this.lastTitle=d(t),this.currentContentConfig=t,this.playbackLaunchedTime=Date.now(),await this.callAction("beforePlay"),await this.callAction("play");const s={clickstreamRefMarker:e.ref||"atv_dp_unknown",playbackInitiatedTime:Date.now()};this.player.play(this.playerConfig,t,s)}async stop(){await this.callAction("stop"),this.player.initialize(this.playerConfig),this.currentContentConfig=null,this.playbackLaunchedTime=null,await this.callAction("closed")}getVideoType(){return this.currentContentConfig&&this.currentContentConfig.videoType||"unknown"}logCounter(e,t=1){const s=`dvweb:playback:${e}:${this.playerConfigData.pageType}:web:${this.getVideoType()}`.toLocaleLowerCase();this.logger.count(s,t,!1)}}const m={instance:null},p=(e,t,s,a=!1)=>(m.instance=!a&&m.instance||(0,n.N)().then((a=>new u(a,e,t,s))).catch((t=>{throw(0,r.c)({action:r.m.PlayerFailedToLoad,pageType:(0,i.QD)(e.pageType),logger:s,videoType:"unknown"}),t})),m.instance)},"./src/shared/player/integration/loader.ts":(e,t,s)=>{"use strict";s.d(t,{N:()=>a});const a=()=>new Promise(((e,t)=>{const s=e=>{fetch(`/gp/video/ajax/log-device-info.html/ref=atv_log_device_info?description=DVWebPlayer${e}:LoadFailed`),t(`DVWebPlayer:${e}:load:failure`)};window.WebPlayer?e(new window.WebPlayer):null==document.getElementById("player-script")?s("Tag"):(()=>{let t,a=0;const n=()=>{a<60?(a+=1,window.WebPlayer?e(new window.WebPlayer):t=setTimeout(n,1e3)):s("Timeout")};n(),document.getElementById("player-script").onload=()=>{clearTimeout(t),window.WebPlayer?e(new window.WebPlayer):s("Loading")}})()}))},"./src/shared/player/integration/logger.ts":(e,t,s)=>{"use strict";s.d(t,{c:()=>n,m:()=>a});let a=function(e){return e.PlaybackClicked="PlaybackClicked",e.PlaybackClickUnhandled="PlaybackClickUnhandled",e.PlaybackStarted="PlaybackStarted",e.PlayerTitleChanged="PlayerTitleChanged",e.PlayerClosed="PlayerClosed",e.PlayerFailedToLoad="PlayerFailedToLoad",e.SignupClick="SignupClick",e.SignupComplete="SignupComplete",e.PurchaseClicked="PurchaseClicked",e.PurchaseCompleted="PurchaseCompleted",e}({});const n=e=>{const{action:t,logger:s,pageType:a,videoType:n}=e;s.count(`DVWeb::Actions::${t}::${a}::Web::${n}`,1,!0)}},"./src/shared/player/integration/playbackArea.tsx":(e,t,s)=>{"use strict";s.d(t,{ET:()=>D,XM:()=>E,cr:()=>_});var a,n=s("./node_modules/react/index.js"),i=s("./src/shared/deeplink/index.ts"),r=s("./src/util/logger/logger.ts"),o=s("./src/util/wrappers/ArgsContext.tsx"),l=s("./node_modules/@amzn/dv-marin-tracking-js-library/dist/index.js"),c=s("./src/shared/SPA/SpaContext.tsx"),d=s("./src/shared/player/integration/logger.ts"),u=s("./src/shared/player/integration/config.ts"),m=s("./src/shared/SPA/UWPNotifier/index.ts"),p=s("./src/shared/utils/analytics/recordReftag.tsx"),g=s("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),h=s("./src/shared/Explore/containers/PageContainer/index.tsx"),v=s("./src/shared/utils/metrics/metricTypes.ts");const b=new r.Oc("DVWebNode:deeplink"),D=n.createContext({onPlay:null}),y=(e,t)=>{(0,i.b)()[t]({url:e.playbackUrl,fallbackUrl:e.fallbackUrl})},f=e=>(null==e?void 0:e.isBonus)||(null==e?void 0:e.sequenceNumber)&&e.sequenceNumber>=1&&e.sequenceNumber<=3,E=({onPlay:e,launchType:t,trailerLaunchType:s,playerConfigPageType:n,playerCapabilities:r,onDownloadAppRequired:o,enableMarinTracking:c,recordTerritory:h,downloadGateway:D,pageType:E,subPageType:w,clientVariant:_,clickstream:T})=>C=>{var x,I;const N=(0,u.QD)(n),P=null!=C&&C.triggerLocation?`${n}:${C.triggerLocation}`:n,k=null==C||null===(x=C.contentConfig)||void 0===x?void 0:x.asin,S=null==D?void 0:D.triggerNativeOfflinePlayback,V=null==D?void 0:D.hasDownloaded,W=null==D?void 0:D.isDownloadQueuedOrDownloading,A=null==D||null===(I=D.xp)||void 0===I?void 0:I.triggerXpOfflinePlayback,R=e?t=>{(0,d.c)({action:d.m.PlaybackClicked,pageType:N,logger:b,videoType:B}),e(t)}:null;const{trailer:L}=C.contentConfig;!c||L||C.isBonus||("Detail"===n||"DetailAndroid"===n?"Prime"===C.subscriptionName&&(0,l.sendConversionTrackingRequest)(l.ConversionType.SVOD_ANY_STREAM,null!=h?h:"INVALID_TERRITORY"):(0,l.sendConversionTrackingRequest)(l.ConversionType.UNDEFINED_ANY_STREAM,null!=h?h:"INVALID_TERRITORY"));const B=C.contentConfig.videoType||"unknown",M=B.toLowerCase(),O="trailer"===M?s:t;if(b.count(`DVWebNode:LaunchType:${n}:${O}`,1,!1),b.count(`DVWebNode:LaunchType:${n}:${M}:${O}`,1,!1),"feature"===M&&(e=>!e||e.supportsDrm)(r)&&["MSHOP_ANDROID_EMBEDDED","URL_EMBEDDED"].includes(O))"MSHOP_ANDROID_EMBEDDED"===O?((e,t,s,a)=>{var n;const i=()=>{f(t)&&e?e(t):a?a():y(t,s)};null===(n=window.P)||void 0===n||n.when("mash").execute((e=>{e.canLaunchIntentURL({url:t.playbackUrl,successCallback:e=>{e?y(t,s):i()},failCallback:()=>{i()}})}))})(R,C,O,o):((e,t,s)=>{f(t)&&e?e(t):y(t,s)})(R,C,O);else if("EMBEDDED"===O)if("feature"===M&&V&&V(k,m._5.UWP)&&S)S(k),a.count(v.p1.PlaybackOriginNativePlayback,{[P]:1});else if(R){let e=v.B.DownloadFallBackStreaming;"feature"===M&&V&&V(k,m._5.XP)&&A?(A(C,R),a.count(v.p1.PlaybackOriginXpPlayback,{[P]:1})):R(C),"feature"===M&&W&&W(k)&&a.count(e,{downloadingInComplete:1}),(0,p.X)(C.refMarker||C.contentConfig.ref||"atv_unknown",E,w,k,[g.W0.Click],void 0,_,T)}else(0,d.c)({action:d.m.PlaybackClickUnhandled,pageType:N,logger:b,videoType:B}),b.error("Missing onPlay for Embedded Player",{pageType:E,subPageType:w});else(0,i.b)().hasOwnProperty(O)?y(C,O):((0,d.c)({action:d.m.PlaybackClickUnhandled,pageType:N,logger:b,videoType:B}),b.error("Unhandled Playback",{pageType:E,subPageType:w,launchTypeToApply:O}))},w=({onPlay:e,launchType:t,trailerLaunchType:s,playerConfigPageType:a,playerCapabilities:i,onDownloadAppRequired:r,children:o,enableMarinTracking:l,context:c,downloadGateway:d,pageType:u,subPageType:m,clientVariant:p,clickstream:g})=>{var v,b,y;const{clickstreamPageContext:f}=n.useContext(h.z1),w=null!==(v=null==f?void 0:f.pageType)&&void 0!==v?v:u,_=null!==(b=null==f?void 0:f.subPageType)&&void 0!==b?b:m,T=null!==(y=null==f?void 0:f.clientVariant)&&void 0!==y?y:p,C=E({onPlay:e,launchType:t,trailerLaunchType:s,playerConfigPageType:a,playerCapabilities:i,onDownloadAppRequired:r,enableMarinTracking:l,recordTerritory:null==c?void 0:c.recordTerritory,downloadGateway:d,pageType:w,subPageType:_,clientVariant:T,clickstream:g});return n.createElement(D.Provider,{value:{onPlay:C,launchType:t}},o)};w.displayName="PlaybackArea";const _=(0,c.cG)((0,o.s6)(w))},"./src/shared/utils/LoggerWrapper.ts":(e,t,s)=>{"use strict";function a(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,{G:()=>n});class n{constructor(e){a(this,"logger",void 0),a(this,"warn",((e,t)=>{this.logger.warn(e,t)})),a(this,"error",((e,t,s)=>{this.logger.error(t,s,e)})),a(this,"debug",((e,t)=>{this.logger.debug(e,t)})),a(this,"info",((e,t)=>{this.logger.info(e,t)})),a(this,"fatal",((e,t,s)=>{this.logger.fatal(t,s,e)})),a(this,"count",((e,t,s)=>{this.logger.count(e,1,!1),t&&Object.entries(t).forEach((([t,a])=>{this.logger.count(`${e}::${t}`,a,!1,s)}))})),this.logger=e}}},"./src/shared/utils/analytics/recordReftag.tsx":(e,t,s)=>{"use strict";s.d(t,{J:()=>o,X:()=>r});var a=s("./node_modules/react/index.js"),n=s("./src/shared/deviceProxy/Clickstream/ClickStreamTypes.ts"),i=s("./src/shared/deviceProxy/PVClickstreamClient.ts");function r(e,t,s,a,r,o,l,c){var d;r||(r=[void 0]);const u=c||(0,i.U)();null===(d=r)||void 0===d||d.forEach((i=>{null==u||u.action({action:i||n.W0.DefaultAction,pageTypeId:a,ref:e,sPageType:s,pType:t,hitType:o,clientVariantOverride:l})}))}const o=({refTag:e,pageType:t,subPageType:s,children:n,className:i="",pageAction:o,hitType:l,titleId:c,clickstream:d})=>e?a.createElement("span",{className:i,onClick:()=>r(e,t,s,c,o&&[o],l,void 0,d)},n):a.createElement(a.Fragment,null,"children")},"./src/shared/utils/events/index.ts":(e,t,s)=>{"use strict";s.d(t,{q:()=>a});const a=e=>{e&&e.nativeEvent&&e.nativeEvent.ack&&e.nativeEvent.ack(e.currentTarget)}},"./src/shared/utils/maturityRatings/ratingMap.ts":(e,t,s)=>{"use strict";s.d(t,{D:()=>a});const a={NZ:{g:{stringId:"vcc_maturity_rating_oflc_g",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/g.png"},pg:{stringId:"vcc_maturity_rating_oflc_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/pg.png"},13:{stringId:"vcc_maturity_rating_cvod_13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/13.png"},rp13:{stringId:"vcc_maturity_rating_oflc_rp13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp13.png"},r13:{stringId:"vcc_maturity_rating_oflc_r13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r13.png"},r15:{stringId:"vcc_maturity_rating_oflc_r15",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r15.png"},m:{stringId:"vcc_maturity_rating_oflc_m",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/m.png"},16:{stringId:"vcc_maturity_rating_cvod_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/16.png"},rp16:{stringId:"vcc_maturity_rating_oflc_rp16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp16.png"},r16:{stringId:"vcc_maturity_rating_oflc_r16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r16.png"},18:{stringId:"vcc_maturity_rating_cvod_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/18.png"},rp18:{stringId:"vcc_maturity_rating_oflc_rp18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp18.png"},r18:{stringId:"vcc_maturity_rating_oflc_r18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r18.png"},r:{stringId:"vcc_maturity_rating_oflc_r",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r.png"}},BR:{l:{stringId:"vcc_maturity_rating_djctq_l",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/l.png"},10:{stringId:"vcc_maturity_rating_djctq_10",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/10.png"},12:{stringId:"vcc_maturity_rating_djctq_12",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/12.png"},14:{stringId:"vcc_maturity_rating_djctq_14",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/14.png"},16:{stringId:"vcc_maturity_rating_djctq_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/16.png"},18:{stringId:"vcc_maturity_rating_djctq_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/18.png"},al:{stringId:"vcc_maturity_rating_adjctq_al",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/al.png"},a10:{stringId:"vcc_maturity_rating_adjctq_a10",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a10.png"},a12:{stringId:"vcc_maturity_rating_adjctq_a12",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a12.png"},a14:{stringId:"vcc_maturity_rating_adjctq_a14",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a14.png"},a16:{stringId:"vcc_maturity_rating_adjctq_a16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a16.png"},a18:{stringId:"vcc_maturity_rating_adjctq_a18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a18.png"}},ZA:{a:{stringId:"vcc_maturity_rating_fpb_a",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/a.png"},pg:{stringId:"vcc_maturity_rating_fpb_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/pg.png"},"7-9-pg":{stringId:"vcc_maturity_rating_fpb_7_9_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/7-9-pg.png"},"10-12-pg":{stringId:"vcc_maturity_rating_fpb_10_12_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/10-12-pg.png"},13:{stringId:"vcc_maturity_rating_fpb_13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/13.png"},16:{stringId:"vcc_maturity_rating_fpb_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/16.png"},18:{stringId:"vcc_maturity_rating_fpb_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/18.png"},x18:{stringId:"vcc_maturity_rating_fpb_x18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/x18.png"},xx:{stringId:"vcc_maturity_rating_fpb_xx",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/xx.png"}}}},"./src/shared/utils/metrics/metricTypes.ts":(e,t,s)=>{"use strict";s.d(t,{$E:()=>r,B:()=>a,l4:()=>i,p1:()=>n});let a=function(e){return e.DownloadActionDisable="DownloadAction:Disable",e.DownloadActionEnable="DownloadAction:Enable",e.DownloadActionResume="DownloadAction:Resume",e.DownloadActionHold="DownloadAction:Hold",e.DownloadActionPause="DownloadAction:Pause",e.DownloadActionRefresh="DownloadAction:Refresh",e.DownloadActionRemove="DownloadAction:Remove",e.DownloadActionRetry="DownloadAction:Retry",e.DownloadActionRelease="DownloadAction:Release",e.DownloadActionStarted="DownloadAction:Started",e.HeartbeatXPDownloads="DownloadActive:XP",e.DownloadEventDownloadError="DownloadEvent:DownloadError",e.DownloadEventStatusChange="DownloadEvent:StatusChange",e.DownloadEventLocalContentError="DownloadEvent:LocalContentError",e.DownloadEventRefreshed="DownloadEvent:Refreshed",e.DownloadEventRefreshing="DownloadEvent:Refreshing",e.DownloadEventRefreshError="DownloadEvent:RefreshError",e.DownloadEventProgress="DownloadEvent:Progress",e.DownloadEventTriggered="DownloadEvent:Triggered",e.DownloadOfflineDataSavingError="offline-data-saving-error",e.DownloadReportNoDownloads="dl-no-downloads",e.DownloadReportNoDownloadsButMetadata="dl-no-downloads-but-metadata",e.DownloadReportNoMetadataButDownloads="dl-no-metadata-but-downloads",e.DownloadReportNoMetadata="dl-no-metadata",e.DownloadReportNoDownloadsNoMetadata="dl-nothing",e.DownloadAdditionalLanguageDefault="download-additional-language-default",e.DownloadQualityDefault="download-download-quality-default",e.DownloadQualityDownloadSettingsPage="download-quality:settings-page",e.DownloadQualityDownloadSettingsModal="download-quality:download-settings-modal",e.DownloadSettingsModalDownloadQualityTabOpened="download-settings-modal-download-quality-tab-opened",e.DownloadSettingsModalLanguageTabOpened="download-settings-modal-language-tab-opened",e.DownloadSettingsModalDownloadStart="download-settings-modal:download-start",e.DownloadSettingsModalOpen="download-settings-modal:open",e.DownloadMissingAudioTracks="missing-audio-tracks",e.DownloadMultiDeleteRequested="multi-delete-requested",e.DownloadMissingDownloadsMetadata="missing-downloads-metadata",e.DownloadNoAction="download-no-action",e.GetAllDownloadOperations="GetAllDownloadOperations",e.XPDownloadTimingDownloadsMetadataReceived="xp-download-timing:downloads-metadata-received",e.XPDownloadTimingDownloadsPayloadConstructed="xp-download-timing:downloads-payload-constructed",e.XPDownloadTimingLCMLoaded="xp-download-timing:lcm-loaded",e.XPDownloadTimingOperationsDataReceived="xp-download-timing:operations-data-received",e.XPDownloadTimingSDKLoaded="xp-download-timing:sdk-loaded",e.EditDownloadsClicked="edit-clicked",e.DownloadFallBackStreaming="fallback-streaming",e}({}),n=function(e){return e.PlaybackOrigin="PlaybackOrigin",e.PlaybackOriginNativePlayback="PlaybackOrigin:NativePlayback",e.PlaybackOriginXpPlayback="PlaybackOrigin:XpPlayback",e.PlaybackTitleIdMismatch="playback-title-id-mismatch",e}({}),i=function(e){return e.SWClearCache="sw-clear-cache",e.AssetLoadingFailed="AssetLoadingFailed",e.CXBlockingErrorRecovered="CXBlockingErrorRecovered",e.CXBlockingErrorUnknown="CXBlockingErrorUnknown",e.ChunkFailedToLoad="ChunkFailedToLoad",e.FetchResponseCode400="HTTP:400",e.FetchResponseCode403="HTTP:403",e.LogoutActionTimeout="LogoutAction-Timeout",e.ProfileSwitch="ProfileSwitch",e.SPAInitialisation="SPAInitialisation",e.Deeplink="deeplink",e.DeeplinkAction="deeplinkAction",e.NavBarToggle="navigationBar:toggle",e.ProfilesModalOpen="profilesModal:open",e.SpaEPAReload="spa-epa-reload",e.UXLanguageChangeShowErrorBanner="uxLanguageChange-show-error-banner",e.WidgetMount="widget-mount",e.AppUpdateBannerAction="AppUpdateBannerAction",e.AppUpdateSunsetAction="AppUpdateSunsetAction",e}({}),r=function(e){return e.CallClickStream="Call:Clickstream",e.CallConsumeRental="Call:ConsumeRental",e.CallRelease="Call:Release",e.CallSync="Call:Sync",e.CallUpdateStream="Call:UpdateStream",e.CallUndefined="Call:Undefined",e.SyncDisable="Sync:Disable",e.SyncRefresh="Sync:Refresh",e.SyncDelete="Sync:Delete",e.SyncNoAction="Sync:NoAction",e.SyncUnknown="Sync:Unknown",e}({})},"./src/shared/utils/modalTrigger/ModalTrigger.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>c});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Modal.js"),i=s("./src/shared/utils/events/index.ts"),r=s("./src/shared/utils/modalTrigger/ModalTrigger.module.scss"),o=s("./node_modules/react-dom/index.js");function l(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class c extends a.Component{constructor(...e){super(...e),l(this,"state",{isVisible:Boolean(this.props.isOpen)}),l(this,"openModal",(()=>{this.setState({isVisible:!0})})),l(this,"openModalClickHandler",(e=>{(0,i.q)(e),this.openModal(),e.preventDefault()})),l(this,"closeModal",(()=>{this.setState({isVisible:!1}),this.props.onClose&&this.props.onClose()}))}componentDidUpdate(e){const{isOpen:t}=this.props;t!==e.isOpen&&this.setState({isVisible:t})}render(){const e=this.closeModal,t={openModal:this.openModal,openModalClickHandler:this.openModalClickHandler,closeModal:e},s={closeModal:e},{modalContent:i,modalHeader:l,modalFooter:c,toggle:d,modalId:u,className:m,size:p,rootElement:g}=this.props,h="function"==typeof c?c(s):c,v="function"==typeof l?l(s):l,b="function"==typeof i?i(s):i,D=()=>a.createElement(n.Modal,{className:m||"av-narrow",isVisible:!0,onClose:e,footer:a.createElement("div",{className:r.Z.modalFooter},h),header:a.createElement("h3",null,v),modalId:u,size:p},b);return a.createElement(a.Fragment,null,this.state.isVisible&&(g?(0,o.createPortal)(D(),g):D()),d&&d(t))}}},"./src/shared/utils/utils.ts":(e,t,s)=>{"use strict";s.d(t,{R4:()=>a,ws:()=>i,xb:()=>n});s("./node_modules/react/index.js");const a=(e,t)=>{const s=e||.7*window.innerWidth,a=t||.7*window.innerHeight;return`toolbar=0, status=0, width=${s}, height=${a}, top=${window.top?window.top.outerHeight/2+window.top.screenY-a/2:0}, left=${window.top?window.top.outerWidth/2+window.top.screenX-s/2:0}`},n=e=>!e||0===e.length,i=(e,t)=>e-t},"./src/widgets/DVWebNodeDetail/actions/banner.ts":(e,t,s)=>{"use strict";s.d(t,{I:()=>n,y:()=>i});var a=s("./src/widgets/DVWebNodeDetail/actions/constants.ts");const n=e=>({type:a.k.CreateBanner,payload:e}),i=()=>({type:a.k.ClearBanner})},"./src/widgets/DVWebNodeDetail/actions/constants.ts":(e,t,s)=>{"use strict";s.d(t,{k:()=>a});let a=function(e){return e.STORE_MERGE="@@dp/STORE_MERGE",e.CHANGE_PAGE="@@dp/CHANGE_PAGE",e.LIVE_PAGE="@@lp/LIVE_PAGE",e.WatchlistToggle="@@dp/WatchlistToggle",e.WatchlistToggleFailed="@@dp/WatchlistToggleFailed",e.ClearWatchlistToggleFailure="@@dp/ClearWatchlistToggleFailure",e.GetDevices="@@dp/GetDevices",e.GetDevicesFailed="@@dp/GetDevicesFailed",e.RefreshEpisode="@@dp/ActionBox/RefreshEpisode",e.RefreshAtfActionBox="@@dp/ActionBox/RefreshAtfActionBox",e.RefreshBtfActionBoxes="@@dp/ActionBox/RefreshBtfActionBoxes",e.TriggerPurchase="@@dp/ActionBox/TriggerPurchase",e.PurchaseCancelled="@@dp/ActionBox/PurchaseCancelled",e.PurchaseFailed="@@dp/ActionBox/PurchaseFailed",e.TriggerRefund="@@dp/ActionBox/TriggerRefund",e.RefundFailed="@@dp/ActionBox/RefundFailed",e.RefundCancelled="@@dp/ActionBox/RefundCancelled",e.CreateBanner="@@dp/CreateBanner",e.ClearBanner="@@dp/ClearBanner",e.SetPlayerCapabilities="@@dp/player/SetPlayerCapabilities",e.PlaybackStart="@@dp/player/PlaybackStart",e.PlaybackFailed="@@dp/player/PlaybackFailed",e.PlaybackClosed="@@dp/player/PlaybackClosed",e.UpdateShowCancellationWinback="@@dp/UpdateShowCancellationWinback",e.TriggerUpsellApp="@@dp/TriggerUpsellApp",e.ClearUpsellApp="@@dp/ClearUpsellApp",e.UpdatedBatchTranslationStatus="@@dp/UpdatedBatchTranslationStatus",e.FetchReviewEligibility="@@dp/FetchReviewEligibility",e.ClearReviewEligibility="@@dp/ClearReviewEligibility",e}({})},"./src/widgets/DVWebNodeDetail/actions/index.ts":(e,t,s)=>{"use strict";s.d(t,{k:()=>a.k});var a=s("./src/widgets/DVWebNodeDetail/actions/constants.ts")},"./src/widgets/DVWebNodeDetail/actions/purchase.ts":(e,t,s)=>{"use strict";s.d(t,{MW:()=>g,NT:()=>u,P:()=>m,jF:()=>d,lQ:()=>c});var a=s("./src/widgets/DVWebNodeDetail/actions/constants.ts"),n=s("./src/util/utils/device.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/purchase.ts"),r=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),o=s("./node_modules/@amzn/dv-web-node-reftags/index.js");const{deviceTypeId:l}=(0,n.dz)(),c=(e,t,s,n,i,o)=>{const c=[r.EZ,"Purchase",n?"continuePurchase":"startPurchase"].join("_");t.info(`[Purchase] - Initiating purchase of offerToken ${s}`).count(c,1,!1).count(`${c}_${l}`,1,!1),e({type:a.k.TriggerPurchase,payload:{offerToken:s,continueToken:n,refTag:i,gtiRedirect:o}})},d=({dispatch:e})=>e({type:a.k.PurchaseCancelled}),u=({dispatch:e,reload:t=!1})=>e({type:a.k.PurchaseFailed,payload:{reload:t}}),m=(e,t)=>s=>({logger:a})=>{var n;const c=t(),d=(0,i.G)(c);d||a.fatal("[Purchase] - No ongoing purchase found").count(`${r.EZ}_Purchase_refreshAfterDoneError`,1,!1).count(`${r.EZ}_Purchase_refreshAfterDoneError_${l}`,1,!1);const u=d&&d.details,m=u&&!u.offer.purchaseData.isSeasonPurchase&&u.canonicalId||void 0,p=null===(n=c.requestContext)||void 0===n?void 0:n.queryParameters;return p&&(p.wpCode||p.wpTitleId)?((e,t,s)=>{const a="Retail"===s.domain?"/gp/video/watchparty":"/watchparty";e?window.location.assign(`${a}/${e}/ref=${(0,o.i)("atv_dp_wp_join_ap")}`):window.location.assign(`${a}/ref=${(0,o.i)("atv_dp_wp_create_ap")}?titleId=${t}`)})(p.wpCode&&p.wpCode[0],p.wpTitleId&&p.wpTitleId[0],c.requestContext):s(m)(e,t)};let p=null;const g=(e,t)=>s=>async({logger:a})=>{const{purchase:n}=t();if(!n)return;const{offerToken:i,continueToken:o,refTag:d}=n;i!==p?(p=i,await s()(e,t),c(e,a,i,o,d)):(a.fatal(`[Purchase] - CSRF Callback already called once for offerToken ${i}`).count(`${r.EZ}_Purchase_refreshCSRFError`,1,!1).count(`${r.EZ}_Purchase_refreshCSRFError_${l}`,1,!1),p=null,u({dispatch:e,logger:a,reload:!0}))}},"./src/widgets/DVWebNodeDetail/actions/refund.ts":(e,t,s)=>{"use strict";s.d(t,{C0:()=>d,H8:()=>l,YV:()=>c,dz:()=>o});var a=s("./node_modules/@amzn/dvui/dist/Block.js"),n=s("./src/widgets/DVWebNodeDetail/actions/constants.ts"),i=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),r=s("./src/widgets/DVWebNodeDetail/actions/banner.ts");const o=({dispatch:e})=>e({type:n.k.RefundCancelled}),l=({dispatch:e})=>{e({type:n.k.RefundFailed})},c=(e,t,s)=>{t.info(`Initiating refund of titleId ${s}`).count(`${i.EZ}_Refund_Purchase`,1,!1),e({type:n.k.TriggerRefund,payload:{titleId:s}})},d=(e,t,s)=>(n,i)=>async()=>{if(await s()(n,i),(((t||{}).clientContract||{}).taskData||{}).viewData){const{title:s,message:i}=t.clientContract.taskData.viewData;n((0,r.I)({type:"Success"===e?a.MessageTypes.success:a.MessageTypes.warning,string:i,heading:s}))}}},"./src/widgets/DVWebNodeDetail/actions/reviewSubmission.ts":(e,t,s)=>{"use strict";s.d(t,{m:()=>n});var a=s("./src/widgets/DVWebNodeDetail/actions/constants.ts");const n=(e,t)=>s=>{s({type:a.k.FetchReviewEligibility,output:e,payload:{pageTitleId:t}})}},"./src/widgets/DVWebNodeDetail/actions/winback.ts":(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s("./src/widgets/DVWebNodeDetail/actions/constants.ts");const n=(e,t)=>{e({type:a.k.UpdateShowCancellationWinback,payload:{showCancellationWinback:t}})}},"./src/widgets/DVWebNodeDetail/components/acquisition/acquisition.tsx":(e,t,s)=>{"use strict";s.d(t,{k:()=>b});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Spacer.js"),i=s("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),r=s("./src/widgets/DVWebNodeDetail/components/acquisition/svodButton.tsx"),o=s("./src/widgets/DVWebNodeDetail/components/acquisition/moreSubscriptionOptionsButton.tsx"),l=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),c=s("./src/shared/utils/utils.ts"),d=s("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),u=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),m=s("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),p=s("./src/widgets/DVWebNodeDetail/components/acquisition/keepSubscriptionModal.tsx"),g=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx");const h="Collapsed",v="Expanded",b=(0,g.eB)((({acquisitionActions:e,titleId:t,tvodButtonScope:s,forceDoubleHeight:g,tapsExperimentToken:b,hasDefaultTheme:D})=>{const y=(e=>{const t=e&&e.cancellationWinbackToken&&e.cancellationWinbackToken.cancellationWinbackStringInfo,s=e&&e.cancellationWinbackToken;return t&&a.createElement(p.$d,{label:t.label,message:t.modalMessage,confirmationLabel:t.confirmationLabel,cancellationLabel:t.cancellationLabel,enrollmentKey:s.enrollmentId,token:s.csrfToken})})(b);if(!e)return y?a.createElement(n.Spacer,{className:u.Z.fullWidthPhablet,alignItems:n.spacerAlignItems.top},y):null;const{tvodWinners:f,svodWinners:E}=e,w=(0,m.Ic)(E)&&(0,l.Db)(E.children),_=(({forceDoubleHeight:e,titleId:t,svodWinners:s})=>{if(!s)return[];switch(s.metadata&&s.metadata.behaviour){case h:return(0,m.Ic)(s)?[a.createElement(o.g,{key:"MsoButton",svodWinners:s,titleId:t,forceDoubleHeight:e})]:[];case v:return(0,d.$c)(s).filter((e=>(0,c.xb)(e.problems))).map(((t,s)=>a.createElement(r.R,{key:`SvodButton-${s}`,svodAction:t,forceDoubleHeight:e})));default:return[]}})({forceDoubleHeight:g,titleId:t,svodWinners:E}),T=(({tvodWinners:e,tvodButtonScope:t,svodWinnerChildrenExists:s})=>(0,d.YD)(e).map(((e,n)=>a.createElement(i.DA,{key:`TvodButton-${n}`,tvodAction:e,scope:t,svodWinnerChildrenExists:s}))))({tvodWinners:f,tvodButtonScope:s,svodWinnerChildrenExists:w}),C=[y,..._,...T].filter(Boolean);return(0,c.xb)(C)?null:D?a.createElement(n.Spacer,{className:u.Z.fullWidthPhablet,alignItems:n.spacerAlignItems.top},C):a.createElement(a.Fragment,null,C)}))},"./src/widgets/DVWebNodeDetail/components/acquisition/defaultMoreWaysToWatchModal.tsx":(e,t,s)=>{"use strict";s.d(t,{C:()=>w,M:()=>_});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Alert.js"),i=s("./node_modules/@amzn/dvui/dist/Spacer.js"),r=s("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),o=s("./src/widgets/DVWebNodeDetail/components/acquisition/svodButton.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.tsx"),c=s("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),d=s("./src/shared/utils/utils.ts"),u=s("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),m=s("./src/util/utils/strings.ts"),p=s("./src/widgets/DVWebNodeDetail/components/acquisition/defaultMoreWaysToWatchModal.module.scss"),g=s("./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx"),h=s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),v=s("./src/shared/imageUtils/imageUtils.ts"),b=s("./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.tsx");function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},D.apply(this,arguments)}const y=({label:e,sequenceNumber:t})=>{const s=t&&t.toString()||"";return a.createElement("h3",{className:p.Z.groupLabel},(0,m.VJ)(e,{episodeNumber:s}))},f={alt:"",baseValue:b.y7,baseType:v.rB.HEIGHT,format:v.GH.png},E=(e,t)=>a.createElement("div",{key:`actionGroup-${t}`,className:p.Z.subsGroup},e.children.map(((e,t)=>{return(0,u.ok)(e)&&(0,d.xb)(e.problems)&&a.createElement("div",{className:p.Z.subsOffer,key:`SvodButton-${t}`},e.image&&(s=a.createElement("div",null,a.createElement(h.t,D({},f,{src:e.image}))),(n=e.channelLink)?a.createElement("a",{href:n},s):s),e.message&&a.createElement("p",{className:p.Z.subMessage},e.message),a.createElement(o.R,{className:p.Z.subsButton,svodAction:e}));var s,n}))),w=({moreWaysToWatch:e,closeModal:t,sequenceNumber:s,toggleGiftCardModal:o})=>{if(!e)return null;const m=(0,c.$0)(e);return(0,d.xb)(m)?null:a.createElement("div",{className:`dv-mwtw-modal ${p.Z.modalWrapper}`},m.map(((e,o)=>(e=>e.children&&e.children[0]&&(0,u.ok)(e.children[0]))(e)?E(e,o):((e,t,s,o)=>a.createElement("div",{key:`actionGroup-${t}`,className:p.Z.purchaseGroup},e.metadata&&e.metadata.label&&a.createElement(y,{label:e.metadata.label,sequenceNumber:s}),a.createElement(i.Spacer,{space:i.spacerSpacing.xs},a.createElement(g.y,{Tag:n.InfoAlert,messages:e.metadata.messages})),e.children.map(((t,s)=>(0,u.E2)(t)&&a.createElement("div",{key:`TvodButton-${s}`,className:p.Z.purchaseOffer},a.createElement(i.Spacer,{space:i.spacerSpacing.xs,className:1==e.children.length?p.Z.purchaseMessageButtonMax:p.Z.purchaseMessageButtonNormal},a.createElement(g.y,{Tag:n.InfoAlert,messages:t.displayMessages})),a.createElement(r.DA,{tvodAction:t,scope:r.b2.MORE_WAYS_TO_WATCH,closeModal:o}))))))(e,o,s,t))),a.createElement(l.h,{placement:"MWTW",closeModal:t,toggleGiftCardModal:o}))},_=({svodWinners:e})=>(0,d.xb)(e.children)?null:a.createElement("div",{className:`dv-mwts-modal ${p.Z.modalWrapper}`},E(e,0))},"./src/widgets/DVWebNodeDetail/components/acquisition/keepSubscriptionModal.tsx":(e,t,s)=>{"use strict";s.d(t,{$d:()=>k});var a=s("./node_modules/react/index.js"),n=s("./src/util/api/WPSClient.ts"),i=s("./src/util/api/util.ts"),r=s("./src/util/utils/history.ts"),o=s("./node_modules/react-redux/es/index.js"),l=s("./node_modules/@amzn/dv-web-node-reftags/index.js"),c=s("./node_modules/@amzn/dvui/dist/Button.js"),d=s("./node_modules/@amzn/dvui/dist/Spacer.js"),u=s("./node_modules/@amzn/dvui/dist/Spinner.js"),m=s("./node_modules/@amzn/dvui/dist/Text.js"),p=s("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),g=s("./src/widgets/DVWebNodeDetail/actions/winback.ts"),h=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),v=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),b=s("./src/widgets/DVWebNodeDetail/components/acquisition/keepSubscriptionModal.module.scss"),D=s("./node_modules/@amzn/dvui/dist/TextBlock.js"),y=s("./src/shared/player/index.tsx"),f=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),E=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),w=s("./src/util/utils/marketplace.ts"),_=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx");function T(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const C=new n.e,x=e=>a.createElement("div",{className:b.Z.keepSubscriptionModalHeader},a.createElement("strong",null,e.title)),I=e=>a.createElement(D.TextBlock,{className:b.Z.keepSubscriptionModalContent},e.message),N=e=>a.createElement("div",null,e.requestInProgress?a.createElement("div",{className:b.Z.keepSubscriptionModalLoading},a.createElement(d.Spacer,{space:d.spacerSpacing.xs},a.createElement(u.Spinner,null),a.createElement(m.Text,{tag:"div",className:b.Z.keepSubscriptionModalLoadingMessage},e.requestInProgressMessage))):a.createElement("div",null,a.createElement(d.Spacer,{space:d.spacerSpacing.xs},a.createElement(_._,{refTag:(0,l.i)("atv_dp_ks_yes")},a.createElement(c.PrimaryButton,{name:"keep-subscription-now",onClick:()=>{e.onKeepSubscription()}},a.createElement(m.Text,{string:e.confirmationLabel}))),a.createElement(_._,{refTag:(0,l.i)("atv_dp_ks_no")},a.createElement(c.Button,{name:"keep-subscription-not-now",onClick:e.closeModal},a.createElement(m.Text,{string:e.cancellationLabel})))),e.requestFailed&&a.createElement("div",{className:b.Z.keepSubscriptionModalErrorMessage},a.createElement(h.H1,{stringID:"AVOD_DP_E_error_text"}))));class P extends a.Component{constructor(e){super(e),T(this,"keepSubscriptionUrlParam",void 0),T(this,"closeModal",(()=>{this.setState({isModalOpen:!1})})),T(this,"clearErrors",(()=>{this.setState({requestFailed:!1})})),T(this,"onKeepSubscription",(async()=>{this.setState({requestInProgress:!0}),this.clearErrors();const e=[w.HZ.US,w.HZ.JP];C.SetSubscriptionNextRenewal({__type:"atv.wps#SetSubscriptionNextRenewalInput",context:this.props.requestContext,enrollmentKey:this.props.enrollmentKey,renewEnabled:!0,token:this.props.token,allowsRecognized:e.includes(this.props.requestContext.marketplaceID)}).then((e=>{e.success?(this.closeModal(),this.props.updateShowCancellationWinback(!1)):this.setState({requestFailed:!0}),this.setState({requestInProgress:!1})})).catch((e=>{if(e instanceof i.lY){var t=Object.assign({},this.props.requestContext.queryParameters);t[this.keepSubscriptionUrlParam]=["true"];const e=(0,f.P_)({parameters:t,originalURI:this.props.requestContext.originalURI,isRetail:this.props.isRetail},this.props.pageTitleId,(0,l.i)("atv_dp_ks_sign_in")),s=(0,f.Md)({parameters:this.props.requestContext.queryParameters,originalURI:this.props.requestContext.originalURI,isRetail:this.props.isRetail},(0,l.i)("atv_dp_ks_sign_in"),e);(0,y.c4)(s)}else this.setState({requestFailed:!0}),this.setState({requestInProgress:!1})}))})),T(this,"validateProps",(()=>!!(this.props.message&&this.props.label&&this.props.token&&this.props.enrollmentKey&&this.props.cancellationLabel&&this.props.confirmationLabel))),this.state={isModalOpen:!1,requestInProgress:!1,requestFailed:!1},this.keepSubscriptionUrlParam="keepSubscription"}componentDidMount(){if(!this.state.isModalOpen&&!this.state.requestFailed&&this.props.requestContext.queryParameters[this.keepSubscriptionUrlParam]&&"true"===this.props.requestContext.queryParameters[this.keepSubscriptionUrlParam][0]){const e=new URL(window.location.href);e.searchParams.delete(this.keepSubscriptionUrlParam),(0,r.qA)(null,document.title,e.href),this.setState({isModalOpen:!0}),this.onKeepSubscription()}}render(){return this.validateProps()&&this.props.showCancellationWinback?a.createElement("div",{className:`${v.Z.stretchHeight} ${v.Z.fullWidthPhablet}`},a.createElement(p.i,{size:"s",isOpen:this.state.isModalOpen,modalId:"dvui-close-overlay-atf-keepSubscriptionModal",className:b.Z.keepSubscriptionModal,modalContent:()=>a.createElement(I,{message:this.props.message}),modalHeader:()=>a.createElement(x,{title:this.props.confirmationLabel}),onClose:this.closeModal,modalFooter:()=>a.createElement(N,{closeModal:this.closeModal,onKeepSubscription:this.onKeepSubscription,confirmationLabel:this.props.confirmationLabel,cancellationLabel:this.props.cancellationLabel,requestFailed:this.state.requestFailed,requestInProgress:this.state.requestInProgress,requestInProgressMessage:this.props.requestInProgressMessage}),toggle:()=>a.createElement(_._,{refTag:(0,l.i)("atv_dp_ks")},a.createElement(c.PurchaseButton,{"data-ux-click":!0,onClick:()=>{this.clearErrors(),this.setState({isModalOpen:!0})},forceDoubleHeight:!0,name:"keep-subscription",className:`${v.Z.fullWidth}`},a.createElement(m.Text,{string:this.props.label})))})):null}}const k=(0,o.$j)((e=>({requestContext:(0,E.Iz)(e).rawContext,pageTitleId:e.pageTitleId,showCancellationWinback:e.winback.showCancellationWinback,originalURI:(0,E.Iz)(e).originalURI,isRetail:(0,E.Iz)(e).isRetail})),(e=>({updateShowCancellationWinback:t=>(0,g.A)(e,t)})))(P)},"./src/widgets/DVWebNodeDetail/components/acquisition/moreSubscriptionOptionsButton.tsx":(e,t,s)=>{"use strict";s.d(t,{g:()=>v});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Button.js"),i=s("./node_modules/@amzn/dvui/dist/Text.js"),r=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),o=s("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/acquisition/defaultMoreWaysToWatchModal.tsx"),c=s("./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.tsx"),d=s("./node_modules/classnames/index.js"),u=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),m=s("./node_modules/@amzn/dv-web-node-reftags/index.js"),p=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),g=s("./src/widgets/DVWebNodeDetail/context/modalContext.tsx"),h=s("./src/shared/CS/components/Modal/Modal.tsx");const v=(0,p.QI)((({svodWinners:e,forceDoubleHeight:t})=>{const{rootElement:s,onModalClose:c,onModalOpen:p}=a.useContext(g.t),h=e.metadata&&e.metadata.label,v=e.metadata&&e.metadata.refMarker||(0,m.i)("atv_unknown");return a.createElement(o.i,{modalId:"dvui-close-overlay-mwts",modalContent:a.createElement(l.M,{svodWinners:e}),onClose:()=>c&&c(),toggle:({openModalClickHandler:e})=>a.createElement(u._,{refTag:v,className:r.Z.fullWidthPhablet},a.createElement(n.PurchaseButton,{"data-ux-click":!0,onClick:t=>{p&&p(),e(t)},className:d(r.Z.fullWidthPhablet,"more-subscription-options-button"),forceDoubleHeight:t},a.createElement(i.Text,{string:h}))),rootElement:s})}),(({svodWinners:e,forceDoubleHeight:t})=>{const{rootElement:s,onModalClose:o,onModalOpen:l}=a.useContext(g.t),[p,v]=a.useState(!1),b=e.metadata&&e.metadata.label,D=e.metadata&&e.metadata.refMarker||(0,m.i)("atv_unknown");return a.createElement(a.Fragment,null,a.createElement(u._,{refTag:D,className:r.Z.fullWidthPhablet},a.createElement(n.PrimaryButton,{"data-ux-click":!0,onClick:()=>(l&&l(),void v(!0)),className:d(r.Z.fullWidthPhablet,"more-subscription-options-button"),forceDoubleHeight:t},a.createElement(i.Text,{string:b}))),a.createElement(h.u,{titleText:b,body:a.createElement(c.M,{svodWinners:e}),isVisible:p,onRequestClose:()=>(o&&o(),void v(!1)),disableFooter:!0,size:"m",rootElement:s,testID:"more-subscription-options-modal"}))}))},"./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.tsx":(e,t,s)=>{"use strict";s.d(t,{C:()=>C,M:()=>x});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),i=s("./src/widgets/DVWebNodeDetail/components/acquisition/svodButton.tsx"),r=s("./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.tsx"),o=s("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),l=s("./src/shared/utils/utils.ts"),c=s("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),d=s("./src/util/utils/strings.ts"),u=s("./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.module.scss"),m=s("./node_modules/@amzn/dvui/dist/Text.js"),p=s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),g=s("./src/shared/imageUtils/imageUtils.ts"),h=s("./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.tsx"),v=s("./src/widgets/DVWebNodeDetail/components/stack/stack.tsx"),b=s("./node_modules/classnames/index.js"),D=s.n(b),y=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),f=s("./src/shared/CS/components/EntitlementMessage/EntitlementMessage.tsx");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},E.apply(this,arguments)}const w=({label:e,sequenceNumber:t})=>{const s=t&&t.toString()||"";return a.createElement("h3",{className:u.Z.groupLabel},(0,d.VJ)(e,{episodeNumber:s}))},_={alt:"",baseValue:h.y7,baseType:g.rB.HEIGHT,format:g.GH.png},T=(e,t)=>a.createElement("div",{key:`actionGroup-${t}`,className:u.Z.subsGroup},e.children.map(((e,t)=>{return(0,c.ok)(e)&&(0,l.xb)(e.problems)&&a.createElement("div",{className:u.Z.subsOffer,key:`SvodButton-${t}`},e.image&&(s=a.createElement("div",{className:u.Z.subscribeImage},a.createElement(p.t,E({},_,{src:e.image}))),(n=e.channelLink)?a.createElement("a",{href:n},s):s),a.createElement(f.nI,{message:e.message,icon:"OFFER_ICON",className:u.Z.entitlementMessage}),a.createElement(i.R,{svodAction:e}));var s,n}))),C=({moreWaysToWatch:e,closeModal:t,sequenceNumber:s,toggleGiftCardModal:i})=>{if(!e)return null;const d=(0,o.$0)(e);return(0,l.xb)(d)?null:a.createElement("div",{className:`dv-mwtw-modal ${u.Z.modalWrapper}`},d.map(((e,i)=>(e=>e.children&&e.children[0]&&(0,c.ok)(e.children[0]))(e)?T(e,i):((e,t,s,i)=>{var r,o;return a.createElement("div",{key:`actionGroup-${t}`,className:u.Z.purchaseGroup},e.metadata&&e.metadata.label&&a.createElement(w,{label:e.metadata.label,sequenceNumber:s}),a.createElement(v.E,{spacing:500,className:D()(y.Z.fullWidthPhablet)},e.children.map(((e,t)=>{var s;return(0,c.E2)(e)&&a.createElement("div",{key:`TvodButton-${t}`,className:D()(y.Z.fullWidthPhablet)},a.createElement(v.K,{spacing:200,className:u.Z.metadataMessages},null===(s=e.displayMessages)||void 0===s?void 0:s.map((e=>a.createElement(m.Text,null,e)))),a.createElement(n.DA,{tvodAction:e,scope:n.b2.MORE_WAYS_TO_WATCH,closeModal:i}))}))),a.createElement(v.K,{spacing:200,className:u.Z.metadataMessages},null===(r=e.metadata)||void 0===r||null===(o=r.messages)||void 0===o?void 0:o.map((e=>a.createElement(m.Text,null,e)))))})(e,i,s,t))),a.createElement(r.h,{placement:"MWTW",closeModal:t,toggleGiftCardModal:i}))},x=({svodWinners:e})=>(0,l.xb)(e.children)?null:a.createElement("div",{className:`dv-mwts-modal ${u.Z.modalWrapper}`},T(e,0))},"./src/widgets/DVWebNodeDetail/components/acquisition/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["AVOD_DP_E_error_text"]}},"./src/widgets/DVWebNodeDetail/components/acquisition/svodButton.tsx":(e,t,s)=>{"use strict";s.d(t,{R:()=>u});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Button.js"),r=s("./node_modules/@amzn/dvui/dist/Text.js"),o=s("./node_modules/classnames/index.js"),l=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),c=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),d=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx");const u=(0,n.$j)((e=>({requestContext:(0,l.Iz)(e)})))((0,d.eB)((({svodAction:e,requestContext:{isRetail:t},className:s,forceDoubleHeight:n,hasNextGenTheme:l})=>{const d=l?i.PrimaryButton:"PRIME"!==e.sType||t?i.PurchaseButton:i.PrimeButton;return a.createElement(d,{className:o({[s]:!!s},c.Z.fullWidthPhablet,"dv-signup-button"),href:e.signupLink,forceDoubleHeight:n},a.createElement(r.Text,{string:e.label}))})))},"./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx":(e,t,s)=>{"use strict";s.d(t,{DA:()=>f,b2:()=>y});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Button.js"),r=s("./node_modules/@amzn/dvui/dist/Text.js"),o=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),l=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),c=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),d=s("./src/widgets/DVWebNodeDetail/actions/purchase.ts"),u=s("./src/widgets/DVWebNodeDetail/selectors/purchase.ts"),m=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),p=s("./node_modules/classnames/index.js"),g=s("./src/widgets/DVWebNodeDetail/components/acquisition/acquisition.module.scss"),h=s("./src/shared/deeplink/index.ts"),v=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},b.apply(this,arguments)}const D=({hiddenInputs:e={},children:t,id:s,...n})=>a.createElement("form",b({},n,{id:s,method:"POST"}),t,Object.keys(e).map(((t,s)=>a.createElement("input",{key:`ActionFormImput-${s}`,type:"hidden",name:t,value:e[t]}))));let y=function(e){return e.ACTION_BOX="ab",e.EPISODE_LIST="el",e.MORE_WAYS_TO_WATCH="mw",e.MORE_WAYS_TO_SUBSCRIBE="mws",e.EPISODE_LIST_MORE_WAYS_TO_WATCH="el_mw",e}({});const f=(0,l.n)((0,n.$j)(((e,t)=>{const s=(0,u.n)(e)[t.tvodAction.offerToken];return{requestContext:(0,o.Iz)(e),canonicalTitleId:s&&s.canonicalId,isMShop:(0,m.gK)(e),purchaseLaunchType:e.pageContext.purchaseLaunchType,offerClarityEnabled:e.pageContext.features&&"true"===e.pageContext.features.offerClarityEnabled}}),((e,{logger:t})=>({triggerPurchase:(s,a)=>(0,d.lQ)(e,t,s,void 0,a)})))((({tvodAction:e,requestContext:{isRetail:t},scope:s,triggerPurchase:n,canonicalTitleId:o,closeModal:l,isMShop:d,purchaseLaunchType:u,offerClarityEnabled:m,svodWinnerChildrenExists:b=!1})=>{const f=e&&e.purchaseData;if(!f)return null;const E=!m||b||l?((e="DEFAULT")=>"HIGHLIGHTED"===e.toUpperCase()?i.Purchase:i.Default)(e.style):i.Purchase;if("EMBEDDED"!==u){if(!f.appPurchaseUrl||"NONE"===u)return null;const t=`${f.appPurchaseUrl}&ref_=${e.refMarker}`,s=e=>{(0,h.b)()[u]({url:t,fallbackUrl:f.appFallbackUrl}),e.preventDefault()};return a.createElement(i.Button,{href:d?void 0:t,className:p(c.Z.fullWidthPhablet,"tvod-button"),onClick:s,use:E},a.createElement(r.Text,{string:e.label}))}{const{family:d,videoQuality:u="",offerType:m,nonJsPurchaseUrl:h}=f,b=e.refMarker,w=t?{refTag:b,offerToken:e.offerToken,csrfToken:e.csrfToken,asin:e.asin}:{offerToken:e.offerToken},_=async t=>{o&&((e,t)=>{const s=t===y.EPISODE_LIST||t===y.EPISODE_LIST_MORE_WAYS_TO_WATCH;if("function"!=typeof document.querySelector||!s)return;const a=document.querySelector(`[for="selector-${e}"]`);a&&("function"==typeof a.scrollIntoViewIfNeeded?a.scrollIntoViewIfNeeded(!1):"function"==typeof a.scrollIntoView&&a.scrollIntoView(!0))})(o,s),l&&l(),n(e.offerToken,b),t.preventDefault()},T=`${s}-${d}-${u}-${m}`.toLowerCase(),C=`tvod-btn-${T}`;return a.createElement(D,{id:C,action:h,className:`${c.Z.fullWidthPhablet} ${g.Z.buttonFormWrapper}`,hiddenInputs:w,"data-automation-id":T},a.createElement(v._,{refTag:b},a.createElement(i.ConfirmButton,{onlyConfirmOnTouchDevices:!0,onClick:_,className:p("tvod-button",{"av-button":!e.style}),type:"submit",use:E},a.createElement(r.Text,{string:e.label}))),a.createElement("div",{dangerouslySetInnerHTML:{__html:`<script>\n              document.getElementById("${C}").addEventListener("submit",\n                function() {\n                  ue && ue.count('DVWebNodeDetail-PurchaseCoreExpJs', 1);\n                  return true;\n                }\n              )\n            <\/script>`}}))}})))},"./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.tsx":(e,t,s)=>{"use strict";s.d(t,{Pz:()=>I});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Spacer.js"),i=s("./node_modules/@amzn/dvui/dist/Text.js"),r=s("./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/btfMorePurchaseOptions.tsx"),o=s("./src/widgets/DVWebNodeDetail/components/refund/refund.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/acquisition/acquisition.tsx"),c=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),d=s("./src/shared/utils/utils.ts"),u=s("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),m=s("./src/widgets/DVWebNodeDetail/components/acquisition/tvodButton.tsx"),p=s("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx"),g=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),h=s("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.module.scss"),v=s("./node_modules/classnames/index.js"),b=s("./src/widgets/DVWebNodeDetail/utils/AdjustHeightForContent.tsx"),D=s("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.tsx"),y=s("./src/widgets/DVWebNodeDetail/components/watchPartyLink/watchPartyLink.tsx"),f=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),E=s("./src/shared/CS/components/BuyBoxMessage/BuyBoxMessage.tsx"),w=s("./src/widgets/DVWebNodeDetail/context/modalContext.tsx");function _(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const T=({acquisitionActions:e})=>{if(!e)return null;const t=(e=>{const t=(0,u.RE)(e);return t.length>0?t.map(((e,t)=>a.createElement(i.Text,{key:`tvod-inner-${t}`,string:e}))):(0,c.VF)((0,u.YD)(e).filter((e=>!(0,d.xb)(e.displayMessages))).map(((e,t)=>e.displayMessages.map(((e,s)=>a.createElement(i.Text,{key:`${t},${s}`,string:e}))))))})(e.tvodWinners);return(0,d.xb)(t)?null:a.createElement(n.Spacer,{alignItems:n.spacerAlignItems.stretch},t)},C=({watchPartyAction:e})=>{const t=a.useRef(null);return e?a.createElement("div",{className:v(g.Z.stretchHeight,h.Z.linkWrapper),ref:t},a.createElement("span",{className:h.Z.watchParty},a.createElement(y.vY,{watchPartyAction:e,buttonOrLinkProps:{buttonClassName:h.Z.linkWrapperTarget},containerRef:t}))):null};class x extends a.Component{constructor(e){super(e),_(this,"toggleGiftCardModal",(()=>{this.setState({giftCardModalIsVisible:!this.state.giftCardModalIsVisible})})),this.state={giftCardModalIsVisible:!1}}render(){const{acquisitionActions:e,titleID:t,sequenceNumber:s,isPurchasing:i,isRefunding:c,rawContext:d,watchPartyAction:u}=this.props,y=e&&e.moreWaysToWatch,f=i||c;return a.createElement("div",{className:v({[h.Z.isProcessingTransaction]:f},h.Z.wrapper),"data-testid":"dp-btf-action-box"},a.createElement(b._,null,a.createElement(T,{acquisitionActions:e}),a.createElement(n.Spacer,{alignItems:n.spacerAlignItems.stretch},a.createElement("div",{className:v(h.Z.acquisition,g.Z.fullWidthPhablet)},a.createElement(l.k,{acquisitionActions:e,titleId:t,tvodButtonScope:m.b2.EPISODE_LIST,forceDoubleHeight:!1})),a.createElement(n.Spacer,{alignItems:n.spacerAlignItems.stretch},a.createElement(r.to,{titleId:t,sequenceNumber:s,moreWaysToWatch:y,toggleGiftCardModal:this.toggleGiftCardModal,componentClassName:h.Z.linkWrapper,linkClassName:h.Z.linkWrapperTarget}),a.createElement(C,{watchPartyAction:u})),a.createElement(o.N,{titleId:t})),f&&a.createElement(p.K2,null)),a.createElement(D.fs,{isOpen:this.state.giftCardModalIsVisible,onClose:this.toggleGiftCardModal,requestContext:d}))}}const I=(0,f.QI)(x,(({acquisitionActions:e,titleID:t,sequenceNumber:s,isPurchasing:i,isRefunding:c,rawContext:d,watchPartyAction:u,buyBoxMessage:g})=>{const{rootElement:y,onModalClose:f,onModalOpen:_}=a.useContext(w.t),[x,I]=(0,a.useState)(!1),N=e&&e.moreWaysToWatch,P=()=>{I((e=>!e))},k=i||c;return a.createElement("div",{className:v({[h.Z.isProcessingTransaction]:k},h.Z.wrapper),"data-testid":"dp-btf-action-box"},a.createElement(b._,null,a.createElement(E.v,{message:null==g?void 0:g.dvMessage,noColumnWidth:!0,className:h.Z.buyBoxMessage}),a.createElement(T,{acquisitionActions:e}),a.createElement(n.Spacer,{alignItems:n.spacerAlignItems.center,className:h.Z.actionButtons},a.createElement(n.Spacer,{className:h.Z.options},a.createElement(l.k,{acquisitionActions:e,titleId:t,tvodButtonScope:m.b2.EPISODE_LIST,forceDoubleHeight:!1}),a.createElement(r.to,{titleId:t,sequenceNumber:s,moreWaysToWatch:N,toggleGiftCardModal:()=>{_&&_(),P()},linkClassName:h.Z.linkWrapperTarget})),a.createElement("div",{className:h.Z.watchPartyContainer},a.createElement(C,{watchPartyAction:u})),a.createElement(o.N,{titleId:t})),k&&a.createElement(p.K2,null),a.createElement(D.fs,{isOpen:x,onClose:()=>{f&&f(),P()},requestContext:d,rootElement:y})))}))},"./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx":(e,t,s)=>{"use strict";s.d(t,{K2:()=>c,UQ:()=>d});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.module.scss"),i=s("./node_modules/@amzn/dvui/dist/Spinner.js"),r=s("./node_modules/classnames/index.js"),o=s.n(r),l=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx");const c=({children:e=null,className:t=""})=>a.createElement("div",{className:[t,n.Z.disableOverlay].join(" ")},e),d=(0,l.QI)((({text:e,useSmallSpinner:t=!1,className:s=""})=>a.createElement(c,{className:s},a.createElement("div",{className:n.Z.messageWrapper},a.createElement("div",{className:t?n.Z.smallSpinnerWrapper:n.Z.spinnerWrapper},a.createElement(i.Spinner,{fillHeight:!0,testID:"dp-spinner"})),e&&a.createElement("div",null,e)))),(({text:e})=>a.createElement("div",{className:o()(n.Z.messageWrapperNextGen)},a.createElement("div",{className:n.Z.spinnerNextGen},a.createElement(i.Spinner,{fillHeight:!0,testID:"dp-spinner"})),e&&a.createElement("div",null,e))))},"./src/widgets/DVWebNodeDetail/components/actionBox/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const n={bundles:[a.R.ATF,a.R.BTF],strings:["AVOD_DP_E_error_text","AVOD_DP_E_error_ok"]}},"./src/widgets/DVWebNodeDetail/components/badges/ad.tsx":(e,t,s)=>{"use strict";s.d(t,{Ad:()=>o});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Icon.js"),i=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),r=s("./src/widgets/DVWebNodeDetail/components/badges/ad.module.scss");const o=({isAd:e})=>{const{getString:t}=a.useContext(i.h);return e?a.createElement("span",{"data-automation-id":"ad-badge",className:r.Z.adLogo,title:t("DV_DP_ARIA_audio_description"),"aria-label":t("DV_DP_ARIA_audio_description"),role:"text"},a.createElement(n.Icon,{use:n.IconType.AUDIO_DESCRIPTION})):null}},"./src/widgets/DVWebNodeDetail/components/badges/age-rating.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>p});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts"),i=s("./node_modules/@amzn/dvui/dist/AgeRating.js"),r=s("./node_modules/@amzn/dvui/dist/Text.js"),o=s("./src/shared/utils/maturityRatings/ratingMap.ts"),l=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),c=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx");const d="DVWebNode::DetailPage::RatingBadge::TypeError",u=(e,t,s,n,l,c,d,u)=>{var m,p;const g="number"==typeof t?t.toString():t.toUpperCase(),h=u||d&&(null===(m=o.D[d])||void 0===m||null===(p=m[e])||void 0===p?void 0:p.url);return a.createElement(i.AgeRating,{rating:g,locale:n,ariaLabel:c,title:s,logoUrl:h,testID:"rating-badge"},l&&a.createElement(r.Text,{string:l}))},m=({id:e,displayText:t,description:s,localRatingLink:a,logoUrl:n},i,r)=>u(e,t,s,void 0,a,r||s,i,n),p=(0,c.n)((({ratingBadge:e,notRatedString:t,suitableForAriaLabel:s,logger:i})=>{var r;const o=a.useContext(l.h),c=null==o||null===(r=o.requestContext)||void 0===r?void 0:r.recordTerritory;if(!e)return null;if((0,n.j9)(e)){"number"==typeof e.displayText&&(null==i||i.count(`${d}::AMR`,1,!0));const a=e.description===t?e.description:s;return m(e,c,a)}return(0,n.nn)(e)?("number"==typeof e.displayText&&(null==i||i.count(`${d}::RegulatoryRating`,1,!0)),m(e,c)):(0,n.ws)(e)?("number"==typeof e.simplifiedId&&(null==i||i.count(`${d}::LocalRating`,1,!0)),(({id:e,countryCode:t,simplifiedId:s,description:a,localRatingLink:n,logoUrl:i},r)=>u(e,s,a,t.toLowerCase(),n,a,r,i))(e,c)):null}))},"./src/widgets/DVWebNodeDetail/components/badges/amazonRating.tsx":(e,t,s)=>{"use strict";s.d(t,{jn:()=>a});s("./node_modules/react/index.js"),s("./node_modules/@amzn/dvui/dist/Link.js"),s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),s("./src/widgets/DVWebNodeDetail/components/badges/amazonRating.module.scss"),s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),s("./src/shared/utils/analytics/recordReftag.tsx"),s("./node_modules/@amzn/dv-web-node-reftags/index.js"),s("./src/widgets/DVWebNodeDetail/components/tabs/btfTabsDefault.tsx"),s("./node_modules/@amzn/dvui/dist/StarRating.js");const a="customer-review-section"},"./src/widgets/DVWebNodeDetail/components/badges/audioDescription.tsx":(e,t,s)=>{"use strict";s.d(t,{w:()=>o});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Badge.js"),i=s("./node_modules/@amzn/dvui/dist/Icons/AudioDescriptionBadgeIcon.js"),r=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const o=({isAd:e})=>{const{getString:t}=a.useContext(r.h);return e&&a.createElement(n.Badge,{"data-automation-id":"ad-badge",title:t("DV_DP_ARIA_audio_description"),ariaLabel:t("DV_DP_ARIA_audio_description")},a.createElement(i.AudioDescriptionBadgeIcon,null))||null}},"./src/widgets/DVWebNodeDetail/components/badges/rating.tsx":(e,t,s)=>{"use strict";s.d(t,{i:()=>g});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts"),i=s("./node_modules/@amzn/dvui/dist/MaturityRating.js"),r=s("./node_modules/@amzn/dvui/dist/Text.js"),o=s("./src/widgets/DVWebNodeDetail/components/badges/rating.module.scss"),l=s("./src/shared/utils/maturityRatings/ratingMap.ts"),c=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),d=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx");const u="DVWebNode::DetailPage::RatingBadge::TypeError",m=(e,t,s,n,c,d,u,m)=>{var p,g;const h="number"==typeof t?t.toString():t.toUpperCase(),v=m||u&&(null===(p=l.D[u])||void 0===p||null===(g=p[e])||void 0===g?void 0:g.url);return v?a.createElement("span",{role:"text","aria-label":d,className:o.Z.rating},a.createElement("img",{className:o.Z.logoBadge,src:v,alt:s,title:s,"data-testid":"rating-badge"})):a.createElement("span",{role:"text","aria-label":d,className:o.Z.rating},a.createElement(i.MaturityRating,{rating:h,locale:n,title:s,"data-testid":"rating-badge"},c&&a.createElement(r.Text,{string:c})))},p=({id:e,displayText:t,description:s,localRatingLink:a,logoUrl:n},i,r)=>m(e,t,s,void 0,a,r||s,i,n),g=(0,d.n)((({ratingBadge:e,notRatedString:t,suitableForAriaLabel:s,logger:i})=>{var r;const o=a.useContext(c.h),l=null==o||null===(r=o.requestContext)||void 0===r?void 0:r.recordTerritory;if(!e)return null;if((0,n.j9)(e)){"number"==typeof e.displayText&&(null==i||i.count(`${u}::AMR`,1,!0));const a=e.description===t?e.description:s;return p(e,l,a)}return(0,n.nn)(e)?("number"==typeof e.displayText&&(null==i||i.count(`${u}::RegulatoryRating`,1,!0)),p(e,l)):(0,n.ws)(e)?("number"==typeof e.simplifiedId&&(null==i||i.count(`${u}::LocalRating`,1,!0)),(({id:e,countryCode:t,simplifiedId:s,description:a,localRatingLink:n,logoUrl:i},r)=>m(e,s,a,t.toLowerCase(),n,a,r,i))(e,l)):null}))},"./src/widgets/DVWebNodeDetail/components/badges/runtime.tsx":(e,t,s)=>{"use strict";s.d(t,{r:()=>i});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Badge.js");const i=({runtime:e,ariaLabel:t})=>e&&a.createElement(n.Badge,{use:n.badges.TEXT},a.createElement("span",{role:"text","aria-label":t,"data-automation-id":"runtime-badge"},e))||null},"./src/widgets/DVWebNodeDetail/components/badges/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const n={bundles:[a.R.ATF,a.R.BTF],strings:["DV_DP_first_review","DV_DP_ARIA_amazon_rating","DV_DP_ARIA_star_rating","DV_DP_ARIA_imdb_rating","DV_DP_ARIA_watch_episode","DV_DP_ARIA_watch_title","DV_DP_ARIA_audio_description","DV_DP_ARIA_release_year","DV_WEB_SETTINGS_HEAD_SUBTITLES","DV_DP_ARIA_runtime","DV_DP_ARIA_scheduled","DV_DP_ARIA_located","DV_DP_ARIA_suitable_for","DV_TW_amr_nr_text"]}},"./src/widgets/DVWebNodeDetail/components/badges/subtitles-default.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>o});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Icon.js"),i=s("./src/widgets/DVWebNodeDetail/components/badges/subtitles-default.module.scss"),r=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const o=({subtitles:e,isClosedCaption:t})=>{const{getString:s}=a.useContext(r.h);return Boolean(e&&e.length||t)&&a.createElement("span",{"data-automation-id":"subtitles-badge","aria-label":s("DV_WEB_SETTINGS_HEAD_SUBTITLES"),role:"text"},a.createElement(n.Icon,{className:i.Z.subtitlesLogo,use:n.IconType.SUBTITLES}))||null}},"./src/widgets/DVWebNodeDetail/components/badges/subtitles.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>o});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),i=s("./node_modules/@amzn/dvui/dist/Badge.js"),r=s("./node_modules/@amzn/dvui/dist/Icons/SubtitleBadgeIcon.js");const o=({subtitles:e,isClosedCaption:t})=>{const{getString:s}=a.useContext(n.h);return Boolean(e&&e.length||t)&&a.createElement(i.Badge,{"data-automation-id":"subtitles-badge",title:s("DV_WEB_SETTINGS_HEAD_SUBTITLES"),ariaLabel:s("DV_WEB_SETTINGS_HEAD_SUBTITLES")},a.createElement(r.SubtitleBadgeIcon,null))||null}},"./src/widgets/DVWebNodeDetail/components/bottomMenu/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_WEB_FEEDBACK__send_us_feedback","DV_WEB_FEEDBACK_feedback","DV_WEB_FEEDBACK_select_related_device","DV_WEB_FEEDBACK_select_option_dropdown_menu","DV_WEB_FEEDBACK_dropdown_prompt","DV_WEB_FEEDBACK_submit_button","DV_WEB_FEEDBACK_no_device_website","DV_WEB_SETTINGS_HEAD_YOUR_DEVICES","DV_DP_Help_Support"]}},"./src/widgets/DVWebNodeDetail/components/carousel/carousel.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>d});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Container.js"),r=s("./src/widgets/DVWebNodeDetail/selectors/carousel.ts"),o=s("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},c.apply(this,arguments)}const d=(0,n.$j)((e=>({showCarousels:(0,r.i)(e),carousels:(0,r.b)(e)})))((({carousels:e,showCarousels:t})=>t?a.createElement(i.Container,{className:l.Z.pageSection,testID:"caw-carousel-section"},e.map(((e,t)=>null===e?null:a.createElement(o.J,c({},e,{key:`carousel-collection-${e.index}-${t}`}))))):null))},"./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx":(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Carousel.js"),i=s("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollectionItem.tsx"),r=s("./node_modules/classnames/index.js"),o=s("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollectionItem.module.scss"),l=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");function c(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class d extends a.PureComponent{constructor(e){super(e),c(this,"state",void 0),c(this,"containerRef",void 0),this.state={isCarouselFocused:!1},this.containerRef=a.createRef()}setFocusedCarousel(e){this.setState({isCarouselFocused:e===this.props.index})}resetFocusedCarousel(){this.setState({isCarouselFocused:!1})}componentDidUpdate(){if(!this.state.isCarouselFocused){const e=document.activeElement,t=this.containerRef&&this.containerRef.current;t&&e&&t.contains(e)&&e.blur()}}getCarouselCollectionItem(e,t,s){const{refTagPrefix:n,index:r,isLast:l,impressionData:c}=this.props;return a.createElement("div",{className:o.Z.carouselCollectionItemWrapper,key:`carousel-collection-wrapper${s?`-${s}`:""}-${e}-${t}`},a.createElement(i.T,{key:`carousel-collection${s?`-${s}`:""}-${e}-${t}`,idx:t,titleId:e,refTagPrefix:n,requestFocusForCarousel:()=>this.setFocusedCarousel(r),resetFocusForCarousel:()=>this.resetFocusedCarousel(),carouselContainerRef:this.containerRef,isFirst:0==t,isOnLastCarousel:l,impressionData:c,carouselIndex:r}))}render(){const{header:e,cardTitleIds:t,totalEpisodeSize:s,isLast:i}=this.props;return 0===t.length?null:a.createElement("div",{className:r(`dv-hover-packshot-container ${o.Z.collection}`,{[o.Z.singleItemCarousel]:1===s}),ref:this.containerRef},e&&a.createElement("h1",{className:o.Z.title}," ",e," "),a.createElement(l.h.Consumer,null,(({formFactor:e})=>{const s=["Tablet","Phone"].includes(e);return a.createElement(n.Carousel,{className:r(o.Z.carouselWrapper,{[o.Z.focusedCarousel]:this.state.isCarouselFocused,[o.Z.isLast]:i}),leftScrollButtonClassName:r(o.Z.scrollButton,{[o.Z.hideScroll]:s}),rightScrollButtonClassName:r(o.Z.scrollButton,{[o.Z.hideScroll]:s})},t.map(((e,t)=>this.getCarouselCollectionItem(e,t))))})))}}},"./src/widgets/DVWebNodeDetail/components/carousel/carouselCollectionItem.tsx":(e,t,s)=>{"use strict";s.d(t,{T:()=>N});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Badge.js"),r=s("./node_modules/@amzn/dvui/dist/Icon.js"),o=s("./node_modules/@amzn/dvui/dist/Packshot.js"),l=s("./src/util/utils/retryComponent.ts"),c=s("./src/util/utils/titleType.ts"),d=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),u=s("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollectionItem.module.scss"),m=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),p=s("./src/widgets/DVWebNodeDetail/utils/liveState.ts"),g=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),h=s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),v=s("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),b=s("./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts"),D=s("./src/widgets/Explore/Hover/utils.ts"),y=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),f=s("./src/shared/Explore/ClientImpressions/ImpressionTracker.tsx"),E=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},w.apply(this,arguments)}function _(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const T=a.lazy((()=>(0,l.k)((()=>Promise.all([s.e(9351),s.e(6745),s.e(8584)]).then(s.bind(s,"./src/widgets/Explore/Hover/index.ts"))),"detail-hover",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:Hover",1)})).then((({Hover:e})=>({default:e}))))),C=a.lazy((()=>(0,l.k)((()=>s.e(8918).then(s.bind(s,"./src/widgets/Explore/EntitlementCue/EntitlementCue.tsx"))),"detail-entitlement",(()=>{var e;return null===(e=window.ue)||void 0===e?void 0:e.count("DVWebNode:ChunkFailedToLoad:EntitlementCue",1)})).then((({EntitlementCue:e})=>({default:e}))))),x=({detail:e})=>{var t;const s=null===(t=e.liveState)||void 0===t?void 0:t.isLive,n=e.liveState&&e.liveState.text,r=e.liveState&&e.liveState.id,o=e.dateTimeBadge,l=s?i.badges.LIVE:i.badges.CRITICAL;return a.createElement("div",{className:u.Z.packshotBadges},(0,p.dn)(r)||s?n&&a.createElement("span",{className:u.Z.packshotBadge},a.createElement(i.Badge,{use:l},n)):o&&a.createElement("span",{className:u.Z.packshotBadge},a.createElement(i.Badge,{use:i.badges.WHITE},o)))};class I extends a.PureComponent{constructor(e){super(e),_(this,"elementRef",void 0),_(this,"setElementRef",(e=>{var t;const{impressionData:s,carouselIndex:a,idx:n,detail:i,requestContext:r,titleId:o,pageLink:l,impressionAnalytics:c}=this.props,d=null==i||null===(t=i.images)||void 0===t?void 0:t.covershot;this.elementRef=e,s&&d&&f.F.observe(this.elementRef,{collectionImpressionData:s,titleID:(r.isRetail?null==i?void 0:i.asin:null==i?void 0:i.gti)||o,carouselPosition:a,itemPosition:n,imageURL:d,refMarker:(0,f.$)(l),widgetType:"TitleCard",itemAnalytics:c},r.rawContext)})),this.state={isHoverReady:!1,entitlementCue:e.entitlementCue,hoverIsExpanded:!1}}componentDidMount(){this.state.isHoverReady||this.setState({isHoverReady:!0})}componentWillUnmount(){this.elementRef&&this.props.impressionData&&f.F.unobserve(this.elementRef)}render(){var e;const{detail:t,imdb:s,titleId:n,idx:i,requestContext:l,pageContext:d,pageLink:p,watchlistAction:v,refTagPrefix:y,isElcano:_,enableAutoPlayingInBTF:I,resetFocusForCarousel:N,requestFocusForCarousel:P,impressionData:k,hideStarRatings:S}=this.props,{isHoverReady:V,entitlementCue:W}=this.state,A=l.isRetail;if(!t)return null;const R=(A?t.asin:t.compactGti)||n,L=(A?t.asin:t.gti)||(0,c.rM)(n)?n:void 0,B=y?`${y}${i+1}`:`atv_dp_sims_c_${i+1}`,M=(0,m.P_)({parameters:l.queryParameters,originalURI:l.originalURI,isRetail:A},R,B),O=d.features&&"true"===d.features.offerClarityEnabled,j=p||M,F=(A||_)&&t.isPrime&&!O,H=t.images&&t.images.covershot,U={alt:t.title,src:H,baseValue:329,srcSizes:[{"max-tablet-landscape":266},{"max-phone-landscape":216}],skipStripTags:!0,isLazy:!0},Z={url:j,alt:t.title,isPrime:F},z=L&&d.enableHover,q=z?"dv-universal-hover-enabled":void 0,$=a.createElement("div",{className:u.Z.packshot},a.createElement(o.Packshot,w({},Z,{className:q,asin:L}),a.createElement("div",{className:u.Z.imageWrapper},a.createElement("div",{className:u.Z.fallbackPackshot},a.createElement(r.Icon,{use:r.IconType.SMILE})),H&&a.createElement(h.t,w({className:u.Z.image,classNameContainer:u.Z.image},U)))),V&&O&&W&&a.createElement(a.Suspense,{fallback:a.createElement(a.Fragment,null)},a.createElement(C,w({},W,{containerRef:this.props.carouselContainerRef,hoverIsExpanded:this.state.hoverIsExpanded,increaseZIndex:this.state.hoverIsExpanded,tooltip:this.state.hoverIsExpanded?W.tooltip:void 0}))),a.createElement(x,{detail:t})),G=null!==(e=t.liveState)&&void 0!==e&&e.isLive?t.liveState.text:void 0,Q=t.liveState||t.dateTimeBadge||t.location?{status:t.liveState&&t.liveState.id,label:t.liveState&&t.liveState.text,timeBadge:t.dateTimeBadge,venue:t.location}:void 0,Y=t.ratingBadge,K=Y?(0,b.ws)(Y)?{rating:Y.simplifiedId,locale:Y.countryCode.toLowerCase(),title:Y.description,link:Y.localRatingLink}:{rating:Y.displayText,title:Y.description,link:Y.localRatingLink}:void 0,X=!S&&A?t.amazonRating:void 0,J=s&&s.scoreFormatted;return V&&z?a.createElement("div",{ref:this.setElementRef},a.createElement(a.Suspense,{fallback:$},a.createElement("div",(0,D.Wx)((e=>V&&this.setState({hoverIsExpanded:e}))),a.createElement(E.h.Consumer,null,(({pageType:e,subPageType:s,clickstream:n})=>a.createElement(T,{className:u.Z.hover,title:t.title,titleID:L,synopsis:t.synopsis,liveBadgeLabel:G,imdbRating:J,releaseYear:t.releaseYear,runtime:t.runtime,hasSubtitles:(0,g.Db)(t.subtitles),showPrerollsInHover:I,watchlistAction:v,placementType:"DETAIL_BTF",url:j,customerReviews:X,liveInfo:Q,contentMaturityRating:K,onMouseOver:()=>P&&P(),onMouseLeave:()=>N&&N(),entitlementCue:W,prefetchOnVisible:O,onEnrich:e=>this.setState({entitlementCue:e.cardBundle&&e.cardBundle.entitlementCue}),signInTrailerURL:t.signInTrailerURL,isOnLastCarousel:this.props.isOnLastCarousel,isFirstCard:this.props.isFirst,impressionsRef:k?this.elementRef:void 0,carouselRefTag:(0,f.$)(p),pageType:e,subPageType:s,clickstream:n},$)))))):$}}const N=(0,n.$j)(((e,t)=>({detail:e.detail[v.Xt][t.titleId],imdb:e.imdb[t.titleId],watchlistAction:e.hoverWatchlist[t.titleId],requestContext:(0,d.Iz)(e),pageContext:e.pageContext,pageLink:e.pageLink[t.titleId],isElcano:Boolean(e.features.isElcano),entitlementCue:e.entitlementCue[t.titleId],enableAutoPlayingInBTF:(0,y.VL)(e),impressionAnalytics:e.impressionAnalytics[t.titleId],hideStarRatings:(0,y.j$)(e)})))(I)},"./src/widgets/DVWebNodeDetail/components/castAndCrew/castAndCrew.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>_});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Icon.js"),r=s("./node_modules/@amzn/dvui/dist/Container.js"),o=s("./node_modules/@amzn/dvui/dist/Text.js"),l=s("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx"),c=s("./src/widgets/DVWebNodeDetail/components/castAndCrew/castAndCrew.module.scss"),d=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),u=s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),m=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),p=s("./node_modules/classnames/index.js"),g=s("./src/widgets/DVWebNodeDetail/selectors/castAndCrew.ts"),h=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),v=s("./src/shared/person/toggleFollowingButton/FollowingButtonContainer.tsx"),b=s("./node_modules/@amzn/dvui/dist/Icons/LogoImdbOutline.js"),D=s.n(b),y=s("./src/util/utils/marketplace.ts"),f=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},E.apply(this,arguments)}const w=({castMember:e,showCastImages:t,index:s,isLast:n,marketplaceID:r})=>{const d=e.titles||[],m={collectionType:"carousel",cardTitleIds:d,totalEpisodeSize:d.length,index:s,isLast:n},g=(e,t)=>t?`${e} - ${t}`:e,{imageUrl:h,name:b,role:D,personPageLink:f,personPageImageLink:w,personPageFollowingAction:_}=e.cast,T=r&&(0,y.D1)(r)?void 0:g(b,D);return a.createElement(a.Fragment,null,a.createElement("div",{className:c.Z.nameRow},T&&a.createElement("h3",{className:c.Z.name},T),f&&a.createElement(o.Text,{className:c.Z.personPageLink,string:f,testID:"person-page-link"}),_&&a.createElement(v.G,{toggleFollowingAction:_,className:c.Z.followingButtonWrapper,enableErrorMessage:!0})),a.createElement("div",{className:p(c.Z.imageRow,"cast-and-crew-member",{[c.Z.showCastImage]:t})},t&&a.createElement("div",{className:`${c.Z.castImageWrapper}`},((e,t,s)=>{const n={alt:"",src:e,baseValue:175,srcSizes:[{"max-phone-landscape":112}],isLazy:!0},r=e&&"\\N"!==e,o=a.createElement(a.Fragment,null,a.createElement("div",{className:c.Z.noImage},a.createElement(i.Icon,{use:i.IconType.LOGO_PRIMEVIDEO})),r&&a.createElement(u.t,E({className:c.Z.castImage},n)));return t?a.createElement("a",{href:t,"data-automation-id":"person-page-image-link",className:"personPageImageLink","aria-label":s}," ",o," "):o})(h,w,g(b,D))),a.createElement(l.J,m)))},_=(0,n.$j)((e=>({showCastAndCrew:(0,g.s)(e),castAndCrew:h.mZ.castAndCrew(e),marketplaceID:(0,f.C2)(e)})))((({castAndCrew:e,showCastAndCrew:t,marketplaceID:s})=>{if(!t)return null;const n=e&&e.castAndCrews,i=!!n&&n.some((e=>e.cast.imageUrl&&"\\N"!==e.cast.imageUrl));return a.createElement(r.Container,{className:`${d.Z.pageSection} cast-and-crew-section`,testID:"cast-and-crew-section"},a.createElement("h2",{className:c.Z.title},a.createElement(m.H1,{stringID:"DV_DP_CAST_CREW_HEADING"}),a.createElement("span",{className:c.Z.poweredBy},a.createElement(m.H1,{stringID:"DV_DP_powered_by"})),a.createElement(D(),null)),n&&n.map(((e,t)=>a.createElement(w,{castMember:e,showCastImages:i,key:`cast-member-${t}`,index:t,isLast:t===n.length-1,marketplaceID:s}))))}))},"./src/widgets/DVWebNodeDetail/components/castAndCrew/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_CAST_CREW_HEADING","DV_DP_powered_by"]}},"./src/widgets/DVWebNodeDetail/components/castAndCrewContainer/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_CAST_CREW_HEADING"]}},"./src/widgets/DVWebNodeDetail/components/channelLogo/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_DP_ALT_channel_logo"]}},"./src/widgets/DVWebNodeDetail/components/chartPosition/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_DP_CHART_TOP_TEN"]}},"./src/widgets/DVWebNodeDetail/components/collection/collection.tsx":(e,t,s)=>{"use strict";s.d(t,{F:()=>u});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx"),i=s("./src/widgets/DVWebNodeDetail/components/schedule/schedule.tsx"),r=s("./src/widgets/DVWebNodeDetail/components/episodeList/episodeList.tsx"),o=s("./src/widgets/DVWebNodeDetail/components/error/withFatalCheck.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/carousel/carouselCollection.tsx"),c=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");const d=(0,n.Y)((e=>{switch(e.collectionType){case"schedule":return a.createElement(i.P,e);case"carousel":return a.createElement("div",{className:c.Z.pageSection},a.createElement(l.J,e));default:return a.createElement(r.kw,e)}})),u=(0,o.O3)(d)},"./src/widgets/DVWebNodeDetail/components/collection/collectionTypes.tsx":(e,t,s)=>{"use strict";s.d(t,{gK:()=>r,nx:()=>n,or:()=>o});var a=s("./src/widgets/DVWebNodeDetail/utils/utils.ts");const n=(0,a.bc)(["highlights","schedule","episodes","bonus","carousel"]),i=(0,a.bc)(["episodes","bonus"]),r=e=>n.includes(e),o=e=>i.includes(e)},"./src/widgets/DVWebNodeDetail/components/collection/pagination.tsx":(e,t,s)=>{"use strict";s.d(t,{L8:()=>m,Z_:()=>g,bG:()=>h});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Pagination.js"),i=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),r=s("./src/widgets/DVWebNodeDetail/utils/paginator.ts"),o=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),l=s("./src/widgets/DVWebNodeDetail/components/collection/collectionTypes.tsx"),c=s("./node_modules/react-redux/es/index.js"),d=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),u=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const m=200,p=l.nx.reduce(((e,t)=>({...e,[t]:`${t}From`})),{}),g=(e,t)=>{const s=p[t],a=e&&s&&e[s]&&e[s][0];return(0,i.e$)(a)},h=(0,c.$j)((e=>({requestContext:(0,d.Iz)(e),pageTitleId:e.pageTitleId})))((({totalEpisodeSize:e,requestContext:{queryParameters:t,makeUrl:s},collectionType:i,pageTitleId:l})=>{const{getString:c}=a.useContext(u.h);if(!["episodes","bonus"].includes(i))return null;const d={currentOffset:g(t,i),totalItems:e,pageSize:m,paginationHardLimit:1e4,linkMaker:(e,a)=>{const n={...(r=t,Object.keys(p).reduce(((e,t)=>{const s=p[t];return s&&r[s]&&(e[s]=r[s][0]),e}),{})),[p[i]]:`${e}`};var r;const c=`dv_dp_${i}_${a}`;return s((0,o.K1)(l),{get:n,refTag:c})},strings:{page:e=>c("DV_WEB_PAGINATION_PAGE",{pageNumber:e}),previous:c("DV_WEB_PAGINATION_PREVIOUS"),next:c("DV_WEB_PAGINATION_NEXT")}};return a.createElement(n.Pagination,{paginator:(0,r.g)(d)})}))},"./src/widgets/DVWebNodeDetail/components/collection/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_WEB_PAGINATION_PAGE","DV_WEB_PAGINATION_PREVIOUS","DV_WEB_PAGINATION_NEXT"]}},"./src/widgets/DVWebNodeDetail/components/collectionTabs/collectionTabs.tsx":(e,t,s)=>{"use strict";s.d(t,{c:()=>u});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./src/widgets/DVWebNodeDetail/components/collection/collection.tsx"),r=s("./node_modules/@amzn/dvui/dist/Container.js"),o=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),l=s("./src/widgets/DVWebNodeDetail/selectors/collections.ts"),c=s("./src/widgets/DVWebNodeDetail/components/pageClearance/pageClearance.tsx");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},d.apply(this,arguments)}const u=(0,n.$j)((e=>({showTabCollections:(0,l.gy)(e),collections:(0,l.s6)(e)})))((0,o.eB)((({collections:e,showTabCollections:t,hasDefaultTheme:s})=>{if(!t)return null;const n=e.map(((e,t)=>a.createElement(i.F,d({},e,{key:`collection-${e.index}-${t}`}))));return s?a.createElement(r.Container,null,n):a.createElement(a.Fragment,null,n,a.createElement(c.B,{paddingBottom:150}))})))},"./src/widgets/DVWebNodeDetail/components/customerErrorMessage/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_unavailable_episode_list_message"]}},"./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviews.tsx":(e,t,s)=>{"use strict";s.d(t,{G:()=>y});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),r=s("./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviews.module.scss"),o=s("./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviewsDefault.module.scss"),l=s("./src/widgets/DVWebNodeDetail/components/badges/amazonRating.tsx"),c=s("./node_modules/classnames/index.js"),d=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),u=s("./src/widgets/DVWebNodeDetail/components/customerReviews/reviewsHistogram.tsx"),m=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),p=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),g=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),h=s("./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviewsContext.ts"),v=s("./node_modules/@amzn/dvui/dist/DvuiContainer.js"),b=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),D=s("./node_modules/@amzn/dvui/dist/Container.js");const y=(0,n.$j)((e=>({reviews:i.mZ.reviews(e),requestContext:(0,p.Iz)(e),pageTitleId:e.pageTitleId,maybeDetailFragment:i.mZ.moreDetails(e),reviewSubmission:i.mZ.reviewSubmission(e),isReviewsSubmissionEnabled:(0,g.nV)(e),checkReviewEligibility:(0,g.hu)(e)})))((0,b.eB)((({reviews:e,requestContext:t,maybeDetailFragment:s,reviewSubmission:n,isReviewsSubmissionEnabled:i,checkReviewEligibility:p,hasDefaultTheme:g})=>{const{getString:b}=a.useContext(m.h);if(!e)return null;const{reviewTitleId:y}=e,f=b(t.isRetail?"DV_CR_write_review_label":"DV_CR_write_review_label_other"),E={reviewsHeader:b("DV_CR_reviews_header"),ratingsExplanationHeader:b("DV_CR_reviews_explanation_header"),ratingsExplanationText:b("DV_CR_reviews_explanation_text"),writeReviewText:f},w={reviewsAnalysisModel:e.reviewsAnalysisModel,createReviewLink:e.createReviewLink,isRetail:t.isRetail,reviewsHistogramStrings:E,checkReviewEligibility:p,allReviewsLink:e.allReviewsLink,hasDefaultTheme:g};return g?a.createElement(h.P.Provider,{value:{reviewSubmission:n,maybeDetailFragment:s,isReviewsSubmissionEnabled:i,reviewTitleId:y}},a.createElement(D.Container,{className:c(d.Z.pageSection,o.Z.reviewsContainer),testID:l.jn},a.createElement(u.Cz,w))):a.createElement(h.P.Provider,{value:{reviewSubmission:n,maybeDetailFragment:s,isReviewsSubmissionEnabled:i,reviewTitleId:y}},a.createElement(v.DvuiContainer,{className:c(d.Z.pageSection,r.Z.reviewsContainer),testID:l.jn},a.createElement(u.Cz,w)))})))},"./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviewsContext.ts":(e,t,s)=>{"use strict";s.d(t,{P:()=>a});const a=s("./node_modules/react/index.js").createContext({})},"./src/widgets/DVWebNodeDetail/components/customerReviews/reviewsHistogram.tsx":(e,t,s)=>{"use strict";s.d(t,{Cz:()=>k});var a=s("./src/widgets/DVWebNodeDetail/components/customerReviews/reviewsHistogram.module.scss"),n=s("./src/widgets/DVWebNodeDetail/components/customerReviews/reviewsHistogramDefault.module.scss"),i=s("./node_modules/react/index.js"),r=s("./node_modules/@amzn/dvui/dist/Button.js"),o=s.n(r),l=s("./node_modules/@amzn/dvui/dist/Spacer.js"),c=s("./node_modules/@amzn/dvui/dist/Icons/ToggleCollpase.js"),d=s.n(c),u=s("./node_modules/@amzn/dvui/dist/Icons/ToggleExpand.js"),m=s.n(u),p=s("./node_modules/@amzn/dvui/dist/CustomerRating.js"),g=s("./src/widgets/DVWebNodeDetail/utils/linkWrapper.tsx"),h=s("./src/shared/utils/analytics/recordReftag.tsx"),v=s("./node_modules/@amzn/dv-web-node-reftags/index.js"),b=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),D=s("./node_modules/@amzn/dvui/dist/Tooltip.js"),y=s("./node_modules/@amzn/dvui/dist/Text.js"),f=s("./src/widgets/DVWebNodeDetail/components/customerReviews/submissionModal.tsx"),E=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),w=s("./node_modules/@amzn/dvui/dist/Icon.js"),_=s("./node_modules/@amzn/dvui/dist/StarRating.js");const T=({ratingsExplanationHeader:e,ratingsExplanationText:t})=>{const[s,n]=i.useState(!1),{clickStreamPageType:r,clickStreamSubPageType:o,refTagTitleId:l}=i.useContext(b.h);return i.createElement("button",{className:a.Z.ratingsExplanation,onClick:()=>{s||(0,h.X)((0,v.i)("atv_dp_cr_rev_exp"),r,o,l),n(!s)},"data-automation-id":"ratings-explanation-expander",role:"button"},i.createElement("div",{className:a.Z.explanationText},i.createElement("p",{className:a.Z.explanationHeader},e,i.createElement("span",{className:a.Z.expanderIcon},s?i.createElement(d(),null):i.createElement(m(),null))),s&&i.createElement("p",{className:a.Z.explanationBody,"data-automation-id":"ratings-explanation-body"},t)))},C=({ratingsExplanationHeader:e,ratingsExplanationText:t})=>{const[s,a]=i.useState(!1),{clickStreamPageType:r,clickStreamSubPageType:o,refTagTitleId:l}=i.useContext(b.h);return i.createElement("button",{className:n.Z.ratingsExplanation,onClick:()=>{s||(0,h.X)((0,v.i)("atv_dp_cr_rev_exp"),r,o,l),a(!s)},"data-automation-id":"ratings-explanation-expander",role:"button"},i.createElement(w.Icon,{className:n.Z.expanderIcon,use:s?w.IconType.TOGGLE_COLLAPSE:w.IconType.TOGGLE_EXPAND}),i.createElement("div",{className:n.Z.explanationText},i.createElement("p",{className:n.Z.explanationHeader},e),s&&i.createElement("p",{className:n.Z.explanationBody,"data-automation-id":"ratings-explanation-body"},t)))},x=({ratingDisplayLabel:e,percentageDisplay:t,hasDefaultTheme:s})=>i.createElement("div",{className:s?n.Z.histogramRow:a.Z.histogramRow},i.createElement("span",{className:s?n.Z.ratingDisplayLabel:a.Z.ratingDisplayLabel},e),i.createElement("div",{className:s?n.Z.histogramBar:a.Z.histogramBar},i.createElement("span",{style:{width:t}})),i.createElement("span",{className:s?n.Z.percentageDisplay:a.Z.percentageDisplay},t)),I=({createReviewLink:e,writeReviewText:t,hasDefaultTheme:s})=>i.createElement(o(),{className:s?n.Z.writeReviewButton:a.Z.writeReviewButton,role:"button","aria-live":"polite","aria-label":t,testID:"write-review-button",href:e},t),N=({readReviewLink:e,readReviewText:t,hasDefaultTheme:s})=>i.createElement(o(),{className:s?n.Z.writeReviewButton:a.Z.readReviewButton,role:"button","aria-live":"polite","aria-label":t,testID:"read-review-button",href:e},i.createElement(E.H1,{stringID:"DV_CR_read_reviews_label"})),P=({reviewRatingInfo:e,hasDefaultTheme:t})=>{const{starCount:s,hasHalfStar:r,averageRatingLabel:o,totalReviewCountText:c}=e;return i.createElement("div",null,i.createElement(l.Spacer,{alignItems:l.spacerAlignItems.center},t?i.createElement(_.StarRating,{rating:s+(r?.5:0),className:n.Z.reviewRating}):i.createElement(p.CustomerRating,{rating:s+(r?.5:0),ariaLabel:"",className:a.Z.reviewRating}),i.createElement("strong",{className:t?n.Z.averageRatingLabel:a.Z.averageRatingLabel},o)),i.createElement("p",{className:t?n.Z.totalReviewCountText:a.Z.totalReviewCountText},c))},k=e=>{const{reviewsAnalysisModel:t,createReviewLink:s,reviewsHistogramStrings:r,isRetail:o,checkReviewEligibility:l,allReviewsLink:c,hasDefaultTheme:d}=e,{getString:u}=i.useContext(b.h),m=u("DV_CR_read_reviews_label"),{ratingsHistogram:p,reviewRatingInfo:h}=t,{oneStar:E,twoStar:w,threeStar:_,fourStar:k,fiveStar:S}=p,V=i.useRef(null),W=[S,k,_,w,E];return i.createElement("div",{className:d?n.Z.histogramContainer:a.Z.histogramContainer,"data-automation-id":"reviews-histogram-container",ref:V},d?i.createElement("h1",{className:n.Z.reviewsHeader},r.reviewsHeader):i.createElement("h3",{className:a.Z.reviewsHeader},r.reviewsHeader),h&&"number"==typeof h.totalReviewCount&&h.totalReviewCount>0&&i.createElement(P,{reviewRatingInfo:h,hasDefaultTheme:d}),i.createElement("ol",{className:d?n.Z.histogramRows:a.Z.histogramRows},W.map(((e,t)=>{const{hoverText:s,ratingDisplayLabel:r,percentageDisplay:l,url:c}=e,u={url:c,ariaLabel:r,automationId:`histogram-row-${t}`,target:o?void 0:"_blank"},m={ratingDisplayLabel:r,percentageDisplay:l,hasDefaultTheme:d};return i.createElement("li",{key:t,className:d?n.Z.histogramRowWrapper:a.Z.histogramRowWrapper},s?i.createElement(D.Tooltip,{content:i.createElement(y.Text,{tag:"span",string:s,testID:`review-histogram-tooltip-${t}`}),size:"s",id:`histogram-tooltip-id-${t}`,containerRef:V},i.createElement(g.g,u,i.createElement(x,m))):i.createElement(x,m))}))),d?i.createElement(C,r):i.createElement(T,r),i.createElement("div",{className:d?n.Z.reviewButtons:a.Z.reviewButtons},o&&!l?i.createElement(I,{writeReviewText:r.writeReviewText,createReviewLink:s,hasDefaultTheme:d}):i.createElement(f.Sh,{buttonText:r.writeReviewText,refTag:(0,v.i)("atv_dp_cr_sub_open"),className:d?n.Z.writeReviewButton:a.Z.writeReviewButton,testID:"histogram-submission-modal-button",createReviewLink:s,showButtonWithFailure:!0}),i.createElement(N,{readReviewText:m,readReviewLink:c,hasDefaultTheme:d})))}},"./src/widgets/DVWebNodeDetail/components/customerReviews/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_CR_sorted_by","DV_CR_see_all_reviews","DV_CR_sorting_top_reviews","DV_CR_sorting_most_recent","DV_CR_profile_aria_label","DV_CR_helpful_button_label","DV_CR_report_abuse_label","DV_CR_reviews_header","DV_CR_write_review_label","DV_CR_write_a_review_label","DV_CR_read_reviews_label","DV_CR_write_review_label_other","DV_CR_vote_unsuccessful","DV_CR_thank_you_feedback","DV_CR_report_abuse_message","DV_CR_confirm_label","DV_CR_sending_feedback","DV_CR_reviews_explanation_header","DV_CR_reviews_explanation_text","DV_CR_fallback_with_ratings","DV_CR_fallback_no_ratings","DV_CR_verified_purchase","DE_DV_CR_sorting_header","JP_DV_CR_sorting_header","US_DV_CR_sorting_header","UK_DV_CR_sorting_header","DV_CR_other_countries_header","DV_CR_first_to_rate","DV_CR_first_to_review","DV_CR_show_original_review","DV_CR_translation_error","DV_CR_translated_review","DV_CR_translate_single_review","DV_CR_translate_all_reviews","DV_CR_translating_review","DV_CR_submission_overall_rating","DV_CR_submission_headline_placeholder","DV_CR_submission_add_headline","DV_CR_submission_body_placeholder","DV_CR_submission_add_more","DV_CR_submission_add_written_review","DV_CR_submission_rating_saved","DV_CR_submission_submit","DV_CR_submission_optional","DV_CR_submission_max_chars","DV_CR_submission_min_chars","DV_CR_submission_max_words","DV_CR_submission_min_words","DV_CR_submission_min_chars_one","DV_CR_submission_min_words_one","DV_common_cancel","DV_CR_public_name_change","DV_CR_public_name_rating_as","DV_CR_public_name_failure","DV_CR_review_submission_failure","DV_CR_create_review","DV_CR_edit_review","DV_CR_rating_missing","DV_CR_delete_review","DV_common_yes","DV_common_no","DV_common_edit","DV_common_delete","DV_CR_delete_review_warning","DV_CR_review_deleting","DV_CR_review_deleted","DV_CR_rating_missing","DV_CR_approval_pending"]}},"./src/widgets/DVWebNodeDetail/components/customerReviews/submissionModal.tsx":(e,t,s)=>{"use strict";s.d(t,{Sh:()=>y});var a=s("./node_modules/react/index.js"),n=s("./src/shared/utils/analytics/recordReftag.tsx"),i=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),r=s("./node_modules/@amzn/dvui/dist/Button.js"),o=s.n(r),l=s("./src/widgets/DVWebNodeDetail/components/customerReviews/submissionModal.module.scss"),c=s("./node_modules/@amzn/dvui/dist/Icon.js"),d=s("./node_modules/react-redux/es/index.js"),u=s("./src/widgets/DVWebNodeDetail/actions/reviewSubmission.ts"),m=s("./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviewsContext.ts"),p=s("./src/widgets/DVWebNodeDetail/actions/banner.ts"),g=s("./node_modules/@amzn/dvui/dist/Block.js"),h=s("./node_modules/@amzn/dvui/dist/Spinner.js"),v=s("./src/widgets/DVWebNodeDetail/utils/wps.ts"),b=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts");const D=({buttonText:e,className:t,refTag:s,testID:r,updateReviewEligibility:d,createEligibilityBanner:u,createReviewLink:p,showButtonWithFailure:g=!1})=>{const{clickStreamPageType:D,clickStreamSubPageType:y,pageTitleId:f,requestContext:E,getString:w,refTagTitleId:_}=a.useContext(i.h),{reviewSubmission:T,reviewTitleId:C}=a.useContext(m.P),[x,I]=a.useState("idle"),N="unsuccessful"===x?g:"inProgress"!==x;return a.createElement("div",{className:l.Z.submissionButtonContainer},"inProgress"===x?a.createElement(h.Spinner,{className:l.Z.eligibilitySpinner}):N&&a.createElement(o(),{disabled:void 0!==T.isEligible&&!T.isEligible,className:t,role:"button","aria-live":"polite",onClick:()=>{if(Boolean(E.customerID)){var e;if((0,n.X)(s,D,y,_),T.isEligible)p&&(null===(e=window)||void 0===e||e.location.assign(p));else I("inProgress"),(0,v.mx)(E,C,T.reviewSubmissionToken).then((e=>{var t,s;null!=e&&e.eligibilityResponse?(I("successful"),d(e,f),e.eligibilityResponse.isEligible?p&&(null===(t=window)||void 0===t||t.location.assign(p)):e.eligibilityResponse.eligibilityMessage&&(u(e.eligibilityResponse.eligibilityMessage),null===(s=window)||void 0===s||s.scrollTo({left:0,top:0,behavior:"smooth"}))):I("unsuccessful")})).catch((e=>{I("unsuccessful")}))}else{var t;const e=(0,b.Z$)(E,f,"atv_dp_cr_sign_rev","atv_dp_cr_sign_rev");null===(t=window)||void 0===t||t.location.assign(e)}},"aria-label":e,"data-automation-id":r,"data-testid":r},e),"unsuccessful"===x&&a.createElement("div",{className:l.Z.errorMessage,"data-automation-id":"review-eligibility-failure"},a.createElement(c.Icon,{use:c.IconType.ALERT_CRITICAL}),a.createElement("p",null,w("DV_CR_review_submission_failure"))))},y=(0,d.$j)(null,(e=>({updateReviewEligibility:(t,s)=>e((0,u.m)(t,s)),createSuccessBanner:()=>e((0,p.I)({type:g.MessageTypes.success,stringId:"DV_CR_review_submission_processing",headingStringId:"DV_CR_review_submission_success",automationId:"review-submission-success"})),createEligibilityBanner:({header:t,body:s})=>e((0,p.I)({type:g.MessageTypes.info,heading:t.string,bodyDVString:s,automationId:"review-eligibility-banner"}))})))((({buttonText:e,refTag:t,className:s,testID:n,updateReviewEligibility:i,showButtonWithFailure:r,createEligibilityBanner:o,createReviewLink:l})=>{const{reviewSubmission:c,isReviewsSubmissionEnabled:d}=a.useContext(m.P);return c&&d?a.createElement(D,{testID:n,refTag:t,buttonText:e,className:s,updateReviewEligibility:i,showButtonWithFailure:r,createEligibilityBanner:o,createReviewLink:l}):null}))},"./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx":(e,t,s)=>{"use strict";s.d(t,{v:()=>i});var a=s("./node_modules/react/index.js"),n=s("./src/util/utils/htmlEncode.ts");const i=({string:e,dir:t})=>{const s=(0,n.l_)(e);return t?a.createElement("div",{dir:t},s):a.createElement(a.Fragment,null,s)};i.displayName="DecodedText"},"./src/widgets/DVWebNodeDetail/components/downloadUpsellBanner/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_DP_download_upsell_banner"]}},"./src/widgets/DVWebNodeDetail/components/episode/episode.tsx":(e,t,s)=>{"use strict";s.d(t,{Di:()=>ee,IH:()=>te});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Icon.js"),r=s("./node_modules/@amzn/dvui/dist/Tooltip.js"),o=s("./node_modules/classnames/index.js"),l=s("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),c=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),d=s("./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.tsx"),u=s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),m=s("./src/widgets/DVWebNodeDetail/components/badges/rating.tsx"),p=s("./src/widgets/DVWebNodeDetail/components/badges/age-rating.tsx"),g=s("./src/widgets/DVWebNodeDetail/components/episodePlayback/episodePlayback.tsx"),h=s("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.tsx"),v=s("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),b=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),D=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),y=s("./src/widgets/DVWebNodeDetail/components/episode/episode.module.scss"),f=s("./src/widgets/DVWebNodeDetail/components/episode/episodeDefault.module.scss"),E=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),w=s("./src/widgets/DVWebNodeDetail/utils/widgetNameClasses.ts"),_=s("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),T=s("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),C=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),x=s("./src/widgets/DVWebNodeDetail/selectors/purchase.ts"),I=s("./src/widgets/DVWebNodeDetail/reducers/action.ts"),N=s("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),P=s("./src/widgets/DVWebNodeDetail/selectors/player.ts"),k=s("./src/shared/SPA/downloadButton/DownloadButton.tsx"),S=s("./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts"),V=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),W=s("./src/shared/deeplink/index.ts"),A=s("./src/shared/SPA/stores.ts"),R=s("./node_modules/@amzn/dvui/dist/IconButton.js"),L=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),B=s("./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts"),M=s("./node_modules/@amzn/dvui/dist/Alert.js"),O=s("./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx"),j=s("./src/shared/SPA/SpaContext.tsx"),F=s("./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.tsx"),H=s("./src/widgets/DVWebNodeDetail/components/episodePackshot/episodePackshot.tsx"),U=s("./src/widgets/DVWebNodeDetail/components/playAction/playAction.tsx"),Z=s("./src/widgets/DVWebNodeDetail/components/episodeTitle/episodeTitle.tsx"),z=s("./src/shared/CS/components/EntitlementMessage/EntitlementMessage.tsx"),q=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),$=s("./src/widgets/DVWebNodeDetail/context/modalContext.tsx"),G=s("./src/shared/Explore/shared/navigation.ts");function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Q.apply(this,arguments)}const Y=e=>e>=G.mP,K=e=>Y(window.innerWidth)&&(e=>{if(!e)return 0;const t=window.getComputedStyle(e);return parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("height"))})(e)||0,X=(e,t,s,n)=>{const i=a.createElement(c.H1,{stringID:e}),o=a.createElement(a.Fragment,null,a.createElement("div",{className:f.Z.tooltipTitle},i),a.createElement("span",{className:f.Z.tooltipContent},a.createElement(l.v,{string:t,dir:"auto"})));return a.createElement(r.Tooltip,{content:o,position:"top",size:"m",tabIndex:0,id:s,containerRef:n},i)};const J=(0,q.QI)((function({packshotUrl:e,isWatched:t}){if(!e)return a.createElement("div",{className:`${f.Z.packshot} ${f.Z.fallbackPackshot}`},a.createElement(i.Icon,{use:i.IconType.SMILE}));const s={alt:"",src:e,baseValue:268,srcSizes:[{"max-phablet":148},{"min-desktop":268}],isLazy:!0},n=o(f.Z.packshot,{[f.Z.packshotDimmed]:t});return a.createElement("div",{className:n,"data-is-watched":t},a.createElement(u.t,s))}),H.H),ee=(e,t)=>{const s=(0,x.G)(e);return!s||s.details&&s.details.canonicalId!==t&&!s.details.offer.purchaseData.isSeasonPurchase?null:s},te=(0,n.$j)(((e,t)=>({playerConfigData:(0,P.UH)(e),action:e.action[I.L5][t.titleId],detail:e.detail[N.Xt][t.titleId],requestContext:(0,C.Iz)(e),pageTitleId:e.pageTitleId,purchaseDetails:ee(e,t.titleId),isRefunding:Boolean(e.refund.refunding&&e.refund.refunding.titleId===t.titleId),isMShop:(0,V.gK)(e),downloadLaunchType:e.pageContext.downloadLaunchType,metadata:e.metadata[t.titleId]})))((0,j.cG)((0,q.QI)((e=>{const{getString:t}=a.useContext(L.h),s=a.useRef(null),{playerConfigData:n,detail:r,action:l,titleId:c,epListIndex:u,isFirstEpisode:p,isBonus:y,pageTitleId:C,requestContext:{rawContext:x},purchaseDetails:I,isRefunding:N,isMShop:P,downloadLaunchType:V,metadata:R}=e,j=(0,A.ke)(),{title:H,subtitles:U,audioTracks:Z,playbackTracks:z,images:q,releaseDate:$,runtime:G,synopsis:Y}=r,K=l&&l.playbackActions,ee=l&&l.downloadActions,te=l&&l.notificationActions,se=l&&l.watchPartyAction,ae=l&&l.acquisitionActions,ne=(0,D.MG)(K),ie=(0,S.Lu)(ee),re=Boolean(ne),oe=r&&r.episodeNumber,le=(0,B.O)(te),ce=(0,B.X)(te),de=(null==R?void 0:R.maturityRating)||r.ratingBadge,ue={title:H,playbackActions:K,playerConfigData:n,sequenceNumber:oe,notificationActions:te,entityType:r&&r.entityType,isBonus:y,titleId:c,purchaseDetails:I,isRefunding:N,duration:r&&r.duration,isMShop:P},me="NONE"===V||"EMBEDDED"===V?void 0:e=>{e.preventDefault(),(0,W.b)()[V]({url:ie.downloadURL,fallbackUrl:ie.fallbackURL})},pe=(0,S.Tg)(ie,[]),ge=ie&&{...ie,isMovie:!1,episodeNumber:oe,onClick:me,downloadURL:P?void 0:ie.downloadURL,playbackTracks:z,title:H,titlesRentalMetadata:pe}||j&&j[c]&&{label:"",downloadURL:"",titleID:c,episodeNumber:r.episodeNumber,isMovie:"Movie"===r.entityType,onClick:me,playbackTracks:z,title:H,titlesRentalMetadata:pe},he={packshotUrl:q&&q.packshot,isWatched:Boolean(ne&&(0,v.Nw)(ne.progress)),titleID:c},ve=t("DV_comma_separator"),be=(U||[]).join(ve),De=(Z||[]).join(ve),ye=(0,_.YD)(ae&&ae.tvodWinners).map((e=>e.asin||null)).filter(Boolean),fe=(0,_.c0)(ae&&ae.moreWaysToWatch).map((e=>(0,T.bd)(e)&&e.asin||null)).filter(Boolean),Ee=Array.from(new Set([...fe,...ye])),we=Boolean(ge),_e=o(f.Z.episode,"js-node-episode-container",{[f.Z.episodeWithPlayback]:re,[f.Z.episodeWithDownload]:we}),Te={notificationActions:te,acquisitionActions:ae,sequenceNumber:oe,pageTitleId:C,titleID:c,isPurchasing:Boolean(I),isRefunding:N,rawContext:x,watchPartyAction:se},Ce=`av-ep-${u}`;return a.createElement("li",{id:Ce,"data-aliases":Ee.join(","),className:_e,ref:s},a.createElement("input",{id:`selector-${c}`,name:"highlight-list-selector",className:f.Z.expanderToggleInput,type:"checkbox",defaultChecked:p&&!y}),a.createElement("label",{className:f.Z.expanderToggle,htmlFor:`selector-${c}`}),a.createElement("label",{className:f.Z.expanderToggleChevron,htmlFor:`selector-${c}`},a.createElement(i.Icon,{use:i.IconType.BREADCRUMB_CHEVRON,className:f.Z.chevron})),a.createElement("div",{"data-automation-id":`ep-title-${e.epListIndex}`,className:f.Z.episodeTitle},a.createElement(g.s,ue),we&&a.createElement(k.o6,Q({},ge,{containerRef:s,id:`download-ep-${Ce}`}))),a.createElement("div",{className:o(f.Z.tags,f.Z.expandable)},$&&a.createElement("div",null,$),G&&a.createElement("div",null,G),a.createElement("div",{className:f.Z.regulatoryRatingContainer},a.createElement(m.i,{ratingBadge:de})),(0,b.Db)(U)&&a.createElement("div",{className:f.Z.subtitles},X("DV_TW_title_subtitles",be,`subt-${Ce}`,s)),(0,b.Db)(Z)&&a.createElement("div",{className:f.Z.languages},X("DV_TW_title_languages",De,`lang-${Ce}`,s))),a.createElement("div",{className:f.Z.expandable},a.createElement(J,he)),a.createElement("div",{className:o(f.Z.synopsis,f.Z.expandable)},a.createElement(d.GR,{synopsis:String(Y),numOfLines:2,expanderId:`synopsis-${c}`})),a.createElement("div",{className:o(w.t.offers,f.Z.actionBox,E.Z.fullWidth,f.Z.expandable)},a.createElement(h.Pz,Te)),(0,b.Db)(le)&&a.createElement("div",{className:o(f.Z.expandable,f.Z.relevantWarnings)},a.createElement(O.y,{Tag:M.WarningAlert,messages:le})),(0,b.Db)(ce)&&a.createElement("div",{className:f.Z.comingSoonLeavingSoonWarnings},a.createElement(F.Kr,{messages:ce})))}),(e=>{const t=a.useRef(null),s=a.useRef(null),{playerConfigData:n,detail:i,action:r,titleId:l,epListIndex:c,isFirstEpisode:u,isBonus:m,pageTitleId:g,requestContext:{rawContext:b},purchaseDetails:f,isRefunding:E,isMShop:C,downloadLaunchType:x,metadata:I}=e,[N,P]=a.useState(!1),[V,L]=a.useState(!1),[B,M]=a.useState(0),O=(0,A.ke)(),{title:j,playbackTracks:F,images:H,releaseDate:q,seasonNumber:X,runtime:ee,synopsis:te}=i,se=r&&r.playbackActions,ae=r&&r.downloadActions,ne=r&&r.notificationActions,ie=r&&r.watchPartyAction,re=r&&r.acquisitionActions,oe=r&&r.messages&&r.messages.buyBoxMessage,le=r&&r.messages&&r.messages.focusMessage,ce=(0,D.MG)(se),de=(0,S.Lu)(ae),ue=i&&i.episodeNumber,me=(null==I?void 0:I.maturityRating)||i.ratingBadge,pe={title:j,playbackActions:se,playerConfigData:n,sequenceNumber:ue,seasonNumber:X,notificationActions:ne,entityType:i&&i.entityType,isBonus:m,titleId:l,purchaseDetails:f,isRefunding:E,duration:i&&i.duration,isMShop:C},ge="NONE"===x||"EMBEDDED"===x?void 0:e=>{e.preventDefault(),(0,W.b)()[x]({url:de.downloadURL,fallbackUrl:de.fallbackURL})},he=(0,S.Tg)(de,[]),ve=de&&{...de,isMovie:!1,episodeNumber:ue,onClick:ge,downloadURL:C?void 0:de.downloadURL,playbackTracks:F,title:j,titlesRentalMetadata:he}||O&&O[l]&&{label:"",downloadURL:"",titleID:l,episodeNumber:i.episodeNumber,isMovie:"Movie"===i.entityType,onClick:ge,playbackTracks:F,title:j,titlesRentalMetadata:he},be=ce?(0,v.fZ)(O,ce.playbackID,i.duration):0,De=Math.max(be,(0,v._y)(null==ce?void 0:ce.progress)),ye={packshotUrl:H&&H.packshot,progress:De,minutesRemaining:(null==ce?void 0:ce.minutesRemaining)&&(null==ce?void 0:ce.minutesRemaining.toString())},fe=(0,_.YD)(re&&re.tvodWinners).map((e=>e.asin||null)).filter(Boolean),Ee=(0,_.c0)(re&&re.moreWaysToWatch).map((e=>(0,T.bd)(e)&&e.asin||null)).filter(Boolean),we=Array.from(new Set([...Ee,...fe])),_e=Boolean(ve),Te=`av-ep-${c}`,Ce={buyBoxMessage:oe,acquisitionActions:re,sequenceNumber:ue,pageTitleId:g,titleID:l,isPurchasing:Boolean(f),isRefunding:E,rawContext:b,watchPartyAction:ie},xe=a.useCallback((e=>{if(e&&!N){const e=null==s?void 0:s.current;M(K(e))}!V&&Y(window.innerWidth)&&P(e)}),[V,N]),Ie=a.useCallback((()=>{setTimeout((()=>{var e;const a=document.activeElement,n=(null===(e=t.current)||void 0===e?void 0:e.contains(a))||!1;if(n&&!N){const e=null==s?void 0:s.current;M(K(e))}(Y(window.innerWidth)||n)&&P(n)}))}),[N]),Ne=()=>P(!1);return a.useEffect((()=>{if(P(!Y(window.innerWidth)&&u&&!m),window.matchMedia){const e=window.matchMedia(`(min-width: ${G.mP}px)`);if(e.addEventListener)return e.addEventListener("change",Ne),()=>{e.removeEventListener("change",Ne)};if(e.addListener)return e.addListener(Ne),()=>{e.removeListener(Ne)}}}),[]),a.createElement("li",{id:Te,"data-aliases":we.join(","),className:y.Z.base,ref:t,style:B>0&&N?{height:B}:{}},a.createElement("div",{className:o(y.Z.episode,N&&!V?y.Z.hover:""),ref:s,onMouseOver:()=>xe(!0),onMouseLeave:()=>xe(!1),onFocus:Ie,onBlur:Ie},a.createElement("input",{id:`selector-${l}`,name:"highlight-list-selector",className:y.Z.expanderToggleInput,type:"checkbox",checked:N||V,onChange:()=>P((e=>!e))}),a.createElement("div",{"data-automation-id":`ep-title-${e.epListIndex}`,className:y.Z.header},a.createElement(U._,Q({className:y.Z.playActionContainer},pe,{progress:De})),a.createElement("div",{className:y.Z.titleContainer},a.createElement("label",{className:y.Z.expanderToggle,htmlFor:`selector-${l}`}),a.createElement(Z.D,pe)),_e&&a.createElement(k.C$,Q({},ve,{variant:R.IconButtonVariant.TRANSPARENT,showLabelOnTouchDevices:!1}))),a.createElement("div",{className:o(y.Z.packshotContainer,y.Z.expandable)},a.createElement(J,ye)),a.createElement("div",{className:o(y.Z.tags,y.Z.expandable)},q&&a.createElement("div",null,q),ee&&a.createElement("div",null,ee),a.createElement(p.i,{ratingBadge:me})),a.createElement("div",{className:o(y.Z.synopsisContainer,y.Z.expandable)},a.createElement(d.GR,{synopsis:String(te),expanderId:`synopsis-${l}`,className:y.Z.synopsis,isExpanded:!0})),a.createElement(z.nI,{className:o(y.Z.entitlementContainer,y.Z.expandable),message:null==le?void 0:le.dvMessage,icon:null==le?void 0:le.icon}),a.createElement("div",{className:o(w.t.offers,y.Z.actionBox,y.Z.expandable)},a.createElement($.t.Provider,{value:{rootElement:(null==s?void 0:s.current)||void 0,onModalOpen:()=>{Y(window.innerWidth)&&P(!1),L(!0)},onModalClose:()=>{Y(window.innerWidth)&&P(!1),L(!1)}}},a.createElement(h.Pz,Ce)))))}))))},"./src/widgets/DVWebNodeDetail/components/episode/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_EL_episode_title_template","DV_DP_EL_episode_title","DV_DP_EL_bonus_title_template","DV_comma_separator","DV_DP_minutes_remaining"]}},"./src/widgets/DVWebNodeDetail/components/episodeList/episodeList.tsx":(e,t,s)=>{"use strict";s.d(t,{kw:()=>S,mO:()=>_});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Link.js"),i=s("./node_modules/@amzn/dvui/dist/Spinner.js"),r=s("./src/widgets/DVWebNodeDetail/components/episode/episode.tsx"),o=s("./src/widgets/DVWebNodeDetail/components/collection/pagination.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/episodeList/episodeList.module.scss"),c=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),d=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),u=s("./src/widgets/DVWebNodeDetail/utils/wps.ts"),m=s("./node_modules/react-redux/es/index.js"),p=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),g=s("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),h=s("./src/widgets/DVWebNodeDetail/reducers/collections.ts"),v=s("./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx"),b=s("./node_modules/@amzn/dv-web-node-reftags/index.js"),D=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),y=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),f=s("./src/shared/utils/analytics/recordReftag.tsx"),E=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx");function w(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _=0;let T=function(e){return e.EpisodeNumberAscending="EpisodeNumberAscending",e.EpisodeNumberDescending="EpisodeNumberDescending",e.Available="Available",e}({});const C={EpisodeNumberAscending:"DV_DP_EPISODE_NUM_ASCENDING",EpisodeNumberDescending:"DV_DP_EPISODE_NUM_DESCENDING",Available:"DV_DP_EPISODE_AVAILABLE"},x={EpisodeNumberAscending:(0,b.i)("atv_dp_ep_ena"),EpisodeNumberDescending:(0,b.i)("atv_dp_ep_end"),Available:(0,b.i)("atv_dp_ep_av")},I={EpisodeNumberAscending:e=>e,EpisodeNumberDescending:e=>[...e].reverse(),Available:(e,t)=>[...e.filter((e=>t[e])),...e.filter((e=>!t[e]))]},N=[T.EpisodeNumberAscending,T.EpisodeNumberDescending,T.Available],P=(e,t,s)=>t?C[e]:s?"DV_DP_EPISODE_SORT_BY":"DV_DP_EPISODE_SORT";class k extends a.Component{constructor(e){super(e),w(this,"onClickHandler",((e,t,s,a)=>n=>{const{requestContext:i,pageTitleId:r,isElcano:o,totalEpisodeSize:l,cardTitleIds:c,requestEpisodes:d}=this.props,u=!!s;n.preventDefault(),s&&this.state.sortingState===s||(0,f.X)(s?x[s]:(0,b.i)("atv_dp_ep_exp"),e,t,a),this.setState((e=>s&&e.sortingState===s?{...e,sortingSelected:u}:{episodesHidden:!1,sortingState:s||e.sortingState,sortingSelected:u})),c.length<l&&d(i.rawContext,r,o,h.Wq,l-h.Wq)})),this.state={episodesHidden:e.cardTitleIds.length<e.totalEpisodeSize,sortingState:T.EpisodeNumberAscending,sortingSelected:!1}}componentDidMount(){const{requestContext:e,pageTitleId:t,isElcano:s,collectionType:a,totalEpisodeSize:n,cardTitleIds:i,episodesSeen:r,requestEpisodes:o}=this.props;"episodes"===a&&i.length<n&&r>=h.Wq&&(o(e.rawContext,t,s,h.Wq,n-h.Wq),this.setState({episodesHidden:!1}))}shouldComponentUpdate(e,t){return e.cardTitleIds!==this.props.cardTitleIds||t.sortingState!==this.state.sortingState||t.episodesHidden!==this.state.episodesHidden||t.sortingSelected!==this.state.sortingSelected}render(){const{header:e,cardTitleIds:t,totalEpisodeSize:s,collectionType:d,pageTitleId:u,requestContext:m,titleIdToAvailable:g,hasDefaultTheme:b}=this.props,{episodesHidden:y,sortingState:f,sortingSelected:E}=this.state,w=t.length<s;if(!d)return null;const T="episodes"!==d||w?t:I[f](t,g);return a.createElement(D.h.Consumer,null,(({getString:t,clickStreamPageType:g,clickStreamSubPageType:D,refTagTitleId:x})=>{const I=T.map(((e,t)=>{const s={titleId:e,collectionType:d,epListIndex:`${d}-${t}`,isFirstEpisode:0===t,isBonus:"bonus"===d};return a.createElement(a.Fragment,{key:`episode-${e}-${t}`},a.createElement(r.IH,s))}));if(0===(I||[]).length)return null;const k=N.map((e=>{const s=e===f,n=C[e];return{id:e,name:e,text:a.createElement("span",{className:s?l.Z.boldText:""},a.createElement(c.H1,{stringID:n})),isHighlighted:s,onClick:this.onClickHandler(g,D,e,x),ariaLabel:t(n)}})),S={get:{episodeListSize:`${s}`}},V=m.makeUrl((0,p.K1)(u),S);if("episodes"===d)return a.createElement("div",{className:l.Z.pageSection},a.createElement("div",{className:b?l.Z.headerWithDropListDefault:l.Z.headerWithDropList},e&&b&&a.createElement("h1",{className:l.Z.episodeListHeader},e," (",s,")"),a.createElement(v.x,{links:k,customDropListID:"sorting-droplist",isCustomTrigger:!!b,className:b?void 0:l.Z.sortDropList,right:!0,customText:t(P(f,E,b))})),a.createElement("ol",{className:l.Z.episodeList},I.slice(_,h.Wq),a.createElement("span",{className:y?l.Z.hidden:""},w?a.createElement("div",{className:l.Z.episodeSpinner},a.createElement(i.Spinner,null)):I.slice(h.Wq))),y&&a.createElement(n.Link,{className:l.Z.expanderLink,href:V,onClick:this.onClickHandler(g,D,void 0,x),"data-automation-id":"ep-expander","data-testid":"ep-expander",ariaLabel:t("DV_DP_EPISODE_EXPANDER",{episodeCount:`${s}`})},a.createElement(c.H1,{stringID:"DV_DP_EPISODE_EXPANDER",replace:{episodeCount:`${s}`}})));{const t={totalEpisodeSize:s,collectionType:d};return a.createElement("div",{className:l.Z.pageSection},e&&b&&a.createElement("h1",{className:l.Z.episodeListHeader},e," (",s,")"),a.createElement("ol",{className:l.Z.episodeList},I),a.createElement(o.bG,t))}}))}}const S=(0,y.n)((0,m.$j)((e=>({requestContext:(0,d.Iz)(e),pageTitleId:e.pageTitleId,isElcano:Boolean(e.features.isElcano),episodesSeen:(0,g.C9)(e),titleIdToAvailable:(0,g.ZA)(e)})),(e=>({requestEpisodes:(t,s,a,n,i)=>e((0,u.P_)(t,s,a,n,i))})))((0,E.eB)(k)))},"./src/widgets/DVWebNodeDetail/components/episodeList/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_EPISODE_EXPANDER","DV_DP_EPISODE_NUM_ASCENDING","DV_DP_EPISODE_NUM_DESCENDING","DV_DP_EPISODE_AVAILABLE","DV_DP_EPISODE_SORT_BY","DV_DP_EPISODE_SORT"]}},"./src/widgets/DVWebNodeDetail/components/episodePackshot/episodePackshot.tsx":(e,t,s)=>{"use strict";s.d(t,{H:()=>u});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Icon.js"),i=s("./src/shared/CS/components/LazyImage/LazyImage.tsx"),r=s("./src/widgets/DVWebNodeDetail/components/episodeProgress/episodeProgress.tsx"),o=s("./node_modules/classnames/index.js"),l=s("./src/widgets/DVWebNodeDetail/components/episodePackshot/episodePackshot.module.scss");const c=[{"max-tablet-lowest":182},{"max-laptop-lowest":195},{"max-desktop-lowest":324},{"max-desktop-hd-lowest":408},{"max-desktop-uhd-lowest":555}],d=[360,480,720,1080,1440,1920],u=({packshotUrl:e,progress:t,minutesRemaining:s,titleID:u})=>{if(!e)return a.createElement("div",{className:l.Z.packshotBase},a.createElement("div",{className:`${l.Z.packshot} ${l.Z.fallbackPackshot}`},a.createElement(n.Icon,{use:n.IconType.SMILE})));const m=100===t;return a.createElement("div",{className:l.Z.packshotBase},a.createElement("div",{className:o(l.Z.packshot,{[l.Z.packshotDimmed]:m}),"data-is-watched":m},a.createElement(i.w,{alt:"",src:e,baseValue:720,srcSetWidths:d,sizesOptions:{defaultSrcSize:1920,srcSizes:c},debugID:u}),!!t&&a.createElement(r.E,{progress:t,minutesRemaining:s})))}},"./src/widgets/DVWebNodeDetail/components/episodePlayback/episodePlayback.tsx":(e,t,s)=>{"use strict";s.d(t,{s:()=>N});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Text.js"),i=s("./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx"),r=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),o=s("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),l=s("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),c=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),d=s("./src/widgets/DVWebNodeDetail/components/episodePlayback/episodePlayback.module.scss"),u=s("./node_modules/classnames/index.js"),m=s("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),p=s("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx"),g=s("./src/widgets/DVWebNodeDetail/utils/widgetNameClasses.ts"),h=s("./src/shared/player/integration/playbackArea.tsx"),v=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),b=s("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts"),D=s("./src/shared/SPA/SpaContext.tsx"),y=s("./node_modules/zustand/esm/index.js"),f=s("./src/shared/SPA/stores.ts");function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},E.apply(this,arguments)}const w=({notificationActions:e})=>{const t=(e||[]).find((({severity:e})=>!e||["CRITICAL","ERROR"].includes(e)));return t?a.createElement("span",{className:d.Z.playbackNotifications},a.createElement(n.Text,{string:t.message})):null},_=({messages:e})=>e&&e.length>0?a.createElement("span",{className:d.Z.playbackNotifications},e.map(((e,t)=>a.createElement(T,{key:`pb-action-message-${t}`,message:e})))):null,T=({message:e})=>a.createElement("span",{className:d.Z.playbackMessage},a.createElement(n.Text,{string:e})),C=({title:e,sequenceNumber:t,isBonus:s,entityType:n})=>e?(0,o.Z4)(n)||!t&&!s?a.createElement(m.v,{string:e}):s?a.createElement(r.H1,{stringID:"DV_DP_EL_bonus_title_template",replace:{episodeTitle:e},shouldDecode:!0,dir:"auto"}):a.createElement(r.H1,{stringID:"DV_DP_EL_episode_title_template",replace:{sequenceNumber:t?t.toString():"",episodeTitle:e},shouldDecode:!0,dir:"auto"}):null,x=({title:e,purchaseDetails:t,sequenceNumber:s,isBonus:n=!1,entityType:i,playbackActions:r,notificationActions:o,inProgress:l})=>a.createElement("div",{className:`dv-episode-noplayback-title ${d.Z.playboxUnavailable}`},a.createElement("div",{className:u({[d.Z.inProgress]:l,[d.Z.purchasing]:Boolean(t)},d.Z.title)},a.createElement(C,{title:e,sequenceNumber:s,isBonus:n,entityType:i})),a.createElement(w,{notificationActions:o}),a.createElement(_,{messages:(0,c.D8)(r)})),I=({title:e,playbackActions:t,sequenceNumber:s,isBonus:n=!1,entityType:r,duration:o,isMShop:u})=>{const{getString:m}=a.useContext(v.h),p=(0,c.MG)(t),g=(0,y.oR)(f.OG,(e=>e.downloads));if(!p)return null;const D=e?s?m("DV_DP_ARIA_watch_episode",{episodeNumber:s.toString(),episodeTitle:e}):m("DV_DP_ARIA_watch_title",{title:e}):void 0,E=p.playbackID,w=(0,b.D)(p),_={signInUrl:p.signInURL,playbackUrl:p.playbackURL,fallbackUrl:p.fallbackURL,sequenceNumber:s,isBonus:n,contentConfig:{asin:E,trailer:!1,position:p.resumeTime,ref:p.playerRefMarker,videoType:p.videoMaterialType,useFullView:!0,playbackEnvelope:w},subscriptionName:p.subscriptionName,triggerLocation:"EpisodeList",refMarker:p.refMarker},T=Math.max((0,l.fZ)(g,E,o),(0,l._y)(p.progress));return a.createElement(a.Fragment,null,a.createElement("div",{className:`dv-episode-playback-title ${d.Z.playbox}`},a.createElement(h.ET.Consumer,null,(({onPlay:t})=>a.createElement(i.oe,{progress:T,ariaLabel:D,href:u?void 0:p.playbackURL,onClick:e=>{t(_),e.preventDefault()}},a.createElement("div",{className:`js-episode-title-name ${d.Z.playboxActionLabel}`},a.createElement(C,{title:e,sequenceNumber:s,isBonus:n,entityType:r})))))))},N=(0,D.cG)((e=>{const{playbackActions:t,purchaseDetails:s,isRefunding:n}=e,i=(0,c.MG)(t),r=Boolean(i),o=Boolean(s)||n;return a.createElement("div",{className:`js-eplist-episode ${g.t.playback}`},i?a.createElement(I,e):a.createElement(x,E({},e,{inProgress:o})),o&&a.createElement(p.UQ,{className:d.Z.progressWrapper,text:r?"":s&&s.details&&s.details.offer.purchaseData.text||"",useSmallSpinner:!0}))}))},"./src/widgets/DVWebNodeDetail/components/episodeProgress/episodeProgress.tsx":(e,t,s)=>{"use strict";s.d(t,{E:()=>r});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/components/episodeProgress/episodeProgress.module.scss"),i=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx");const r=({progress:e,minutesRemaining:t})=>a.createElement("div",{className:n.Z.progressContainer},t&&e<100&&a.createElement("div",{className:n.Z.resumeTimeContainer,"data-automation-id":"dv-progress-resume-text"},a.createElement(i.H1,{stringID:"DV_DP_minutes_remaining",replace:{minutesRemaining:t}})),a.createElement("div",{className:n.Z.progressBarBackground},a.createElement("div",{className:n.Z.progressBar,style:{width:`${e}%`}})))},"./src/widgets/DVWebNodeDetail/components/episodeTitle/episodeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{D:()=>v});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Text.js"),i=s("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),r=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),o=s("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx"),c=s("./src/shared/SPA/SpaContext.tsx"),d=s("./src/widgets/DVWebNodeDetail/components/episodeTitle/episodeTitle.module.scss"),u=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx");const m=({notificationActions:e})=>a.createElement(a.Fragment,null,(e||[]).filter((({severity:e})=>!e||["CRITICAL","ERROR"].includes(e))).map(((e,t)=>a.createElement(n.Text,{key:`nt-action-message-${t}`,className:d.Z.notificationMessage,string:e.message})))),p=({messages:e})=>e&&e.length>0?a.createElement("span",null,e.map(((e,t)=>a.createElement(n.Text,{string:e,key:`pb-action-message-${t}`})))):null,g=({title:e,sequenceNumber:t,seasonNumber:s,isBonus:n,entityType:r})=>(0,i.Z4)(r)||!t&&!n?a.createElement(o.v,{string:e}):n?a.createElement(u.H1,{stringID:"DV_DP_EL_bonus_title_template",replace:{episodeTitle:e},shouldDecode:!0,dir:"auto"}):a.createElement(u.H1,{stringID:"DV_DP_EL_episode_title",replace:{seasonNumber:s?s.toString():"",episodeNumber:t?t.toString():"",episodeTitle:e},dvStringAttrs:{divider:{class:d.Z.divider},titleContainer:{class:d.Z.name}},className:d.Z.title}),h=({title:e,sequenceNumber:t,seasonNumber:s,isBonus:n=!1,entityType:i,playbackActions:o,notificationActions:l})=>a.createElement(a.Fragment,null,a.createElement("div",{className:d.Z.title},e&&a.createElement(g,{title:e,sequenceNumber:t,seasonNumber:s,isBonus:n,entityType:i})),a.createElement("div",{className:d.Z.messageContainer},a.createElement(m,{notificationActions:l}),a.createElement(p,{messages:(0,r.D8)(o)}))),v=(0,c.cG)((e=>{const{playbackActions:t,purchaseDetails:s,isRefunding:n}=e,i=(0,r.MG)(t),o=Boolean(i),c=Boolean(s)||n;return a.createElement("div",null,!c&&a.createElement(h,e),c&&a.createElement(l.UQ,{text:o?"":s&&s.details&&s.details.offer.purchaseData.text||"",useSmallSpinner:!0}))}))},"./src/widgets/DVWebNodeDetail/components/error/withFatalCheck.tsx":(e,t,s)=>{"use strict";s.d(t,{O3:()=>l});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/components/error/withFatalCheck.module.scss"),i=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),r=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts");const o=(0,s("./node_modules/react-redux/es/index.js").$j)((e=>({requestContext:(0,r.Iz)(e)})))((0,i.n)((e=>{const{requestContext:{isInternal:t},error:s,logger:i}=e,r=`Fatals found in Data: ${s}`;return i.error(r),t?a.createElement("div",{className:n.Z.error},r):null}))),l=e=>t=>function(e){return!!e&&Boolean(e.error)}(t)?a.createElement(o,t):a.createElement(e,t)},"./src/widgets/DVWebNodeDetail/components/exploreTab/exploreTab.tsx":(e,t,s)=>{"use strict";s.d(t,{g:()=>v});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-dom/index.js"),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),o=s("./src/widgets/DVWebNodeDetail/selectors/exploreTab.ts"),l=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),c=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),d=s("./src/shared/player/integration/playbackArea.tsx"),u=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),m=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),p=s("./src/util/csm/csm.tsx");const g="StarlightPlayRequest",h=({content:e,showExploreTab:t,requestContext:s,titleId:i,logger:r})=>{const{onPlay:o}=a.useContext(d.ET),{isRecognizedCustomer:c,queryParameters:m,originalURI:h,isRetail:v}=s,b=()=>{const e="dv_dp_explore_sign_in",t=(0,u.P_)({parameters:m,originalURI:h,isRetail:v},i,e);return(0,u.Md)({parameters:m,originalURI:h,isRetail:v},e,t)};return a.useEffect((()=>{if(t&&e){(0,p._U)("pv-starlight-detail-page");const e=({detail:e})=>{e&&(r.count(`${l.EZ}_Starlight_Playback`,1,!1),o(Object.assign(e,!c&&{signInUrl:b()})))};return document.addEventListener(g,e),()=>{const t=document.getElementById("starlight-root");t&&n.unmountComponentAtNode(t),document.removeEventListener(g,e)}}}),[]),t&&e&&e.staticPageContent?a.createElement("div",{dangerouslySetInnerHTML:{__html:e.staticPageContent}}):null},v=(0,c.n)((0,i.$j)((e=>({content:r.bS.exploreTabContent(e),showExploreTab:(0,o.E)(e),requestContext:(0,m.Iz)(e),titleId:r.bS.pageTitleId(e)})))(a.memo(h)))},"./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasCarousel.tsx":(e,t,s)=>{"use strict";s.d(t,{p:()=>d});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Carousel.js"),i=s("./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasCarouselItem.tsx"),r=s("./node_modules/classnames/index.js"),o=s("./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasCarouselItem.module.scss"),l=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),c=s("./src/shared/utils/utils.ts");const d=e=>{const{cardTitleIds:t,index:s,impressionData:d,header:u}=e;if((0,c.xb)(t))return null;const m=t.map(((e,t)=>((e,t,n)=>a.createElement(i.W,{key:`extras-carousel-collection${n?`-${n}`:""}-${e}-${t}`,idx:t,titleId:e,impressionData:d,carouselIndex:s}))(e,t)));return a.createElement("div",{className:o.Z.collection},u&&a.createElement("h1",{className:o.Z.title}," ",u," "),a.createElement(l.h.Consumer,null,(({formFactor:e})=>{const t=["Tablet","Phone"].includes(e);return a.createElement(n.Carousel,{className:o.Z.carouselWrapper,leftScrollButtonClassName:r({[o.Z.hideScroll]:t}),rightScrollButtonClassName:r({[o.Z.hideScroll]:t})},m)})))}},"./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasCarouselItem.tsx":(e,t,s)=>{"use strict";s.d(t,{W:()=>I});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Icon.js"),r=s("./node_modules/@amzn/dvui/dist/Packshot.js"),o=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),l=s("./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasCarouselItem.module.scss"),c=s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),d=s("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),u=s("./node_modules/@amzn/dvui/dist/Beard.js"),m=s("./src/widgets/DVWebNodeDetail/components/badges/rating.tsx"),p=s("./src/widgets/DVWebNodeDetail/components/badges/subtitles-default.tsx"),g=s("./src/widgets/DVWebNodeDetail/reducers/action.ts"),h=s("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.tsx"),v=s("./src/widgets/DVWebNodeDetail/components/episode/episode.tsx"),b=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),D=s("./src/widgets/DVWebNodeDetail/components/badges/ad.tsx"),y=s("./src/widgets/DVWebNodeDetail/components/badges/runtime.tsx"),f=s("./node_modules/classnames/index.js"),E=s("./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasPlayButton.tsx"),w=s("./src/shared/utils/utils.ts"),_=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),T=s("./src/widgets/DVWebNodeDetail/components/actionBox/disableOverlay.tsx"),C=s("./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.tsx");function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},x.apply(this,arguments)}const I=(0,n.$j)(((e,t)=>({detail:e.detail[d.Xt][t.titleId],action:e.action[g.L5][t.titleId],requestContext:(0,o.Iz)(e),isMShop:(0,b.gK)(e),isRefunding:Boolean(e.refund.refunding&&e.refund.refunding.titleId===t.titleId),purchaseDetails:(0,v.Di)(e,t.titleId)})))((e=>{var t;const{detail:s,action:n,titleId:o,requestContext:d,purchaseDetails:g,isMShop:v,idx:b,isRefunding:I,carouselIndex:N}=e;if(!s)return null;const P=(d.isRetail?s.asin:s.gti)||o,k=null===(t=s.images)||void 0===t?void 0:t.covershot,S=null==s?void 0:s.episodeNumber,V=(0,_.MG)(null==n?void 0:n.playbackActions),W=Boolean(g),A=W||I,R={alt:s.title,src:k,baseValue:329,srcSizes:[{"max-tablet-landscape":266},{"max-phone-landscape":216}],skipStripTags:!0,isLazy:!0},L={playbackActionData:V,isMShop:v,index:b,sequenceNumber:S},B={alt:s.title,className:l.Z.packshot,overlay:A?a.createElement(T.UQ,{className:l.Z.progressWrapper,useSmallSpinner:!0}):a.createElement(E.N,L)},M=null==s?void 0:s.ratingBadge,O={subtitles:null==s?void 0:s.subtitles,isClosedCaption:s.isClosedCaption},j=Boolean((null==n?void 0:n.acquisitionActions)&&!(0,w.xb)(Object.keys(n.acquisitionActions))),F={acquisitionActions:null==n?void 0:n.acquisitionActions,sequenceNumber:S,titleID:o,isPurchasing:W,rawContext:d.rawContext,isRefunding:I},H={synopsis:null==s?void 0:s.synopsis,modalId:`extras-synopsis-${N}-${b}`,header:s.title},U={title:s.title,secondLine:a.createElement("div",null,a.createElement("div",{className:l.Z.gridBeardInfo},a.createElement("div",{className:l.Z.beardInfoContainer},a.createElement(p.B,O)),a.createElement("div",{className:l.Z.beardInfoContainer},a.createElement(y.r,{runtime:s.runtime})),a.createElement("div",{className:l.Z.beardInfoContainer},a.createElement(D.Ad,{isAd:s.isAd})),a.createElement("div",{className:l.Z.beardInfoContainer},a.createElement(m.i,{ratingBadge:M}))),a.createElement(C.Lx,H),a.createElement("div",{className:l.Z.actionBox},a.createElement(h.Pz,F)))};return a.createElement(u.Beard,x({className:f({[l.Z.purchaseButtonsShown]:j},l.Z.beard)},U),a.createElement(r.Packshot,x({},B,{asin:P}),a.createElement("div",{className:l.Z.imageWrapper},a.createElement("div",{className:l.Z.fallbackPackshot},a.createElement(i.Icon,{use:i.IconType.SMILE})),k&&a.createElement(c.t,x({className:l.Z.image,classNameContainer:l.Z.image},R)))))}))},"./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasPlayButton.tsx":(e,t,s)=>{"use strict";s.d(t,{N:()=>d});var a=s("./node_modules/react/index.js"),n=s("./src/shared/player/integration/playbackArea.tsx"),i=s("./src/util/utils/strings.ts"),r=s("./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasPlayButton.module.scss"),o=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),l=s("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts"),c=s("./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx");const d=({playbackActionData:e,isMShop:t,index:s,sequenceNumber:d})=>{const{onPlay:u}=a.useContext(n.ET);if(!e)return null;const m=(0,i.VJ)(e.label,{lineBreak:", "}),p={contentConfig:{asin:e.playbackID,trailer:!1,position:e.resumeTime,ref:e.playerRefMarker,videoType:e.videoMaterialType,useFullView:!0,playbackEnvelope:(0,l.D)(e)},signInUrl:e.signInURL,playbackUrl:e.playbackURL,fallbackUrl:e.fallbackURL,sequenceNumber:d,isBonus:!0,subscriptionName:e.subscriptionName,triggerLocation:"Extras",refMarker:e.refMarker};return a.createElement(o._,{refTag:`atv_dp_extras_pb_${s}`},a.createElement("span",{"data-automation-id":"extras-playbutton"},a.createElement(c.oe,{className:r.Z.playButton,href:t?void 0:e.playbackURL,isSeeThrough:!0,isLarge:!1,ariaLabel:m,onClick:e=>{u(p),e.preventDefault()}})))}},"./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasCollection.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasCollectionItem.tsx"),i=s("./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasCollection.module.scss"),r=s("./src/shared/utils/utils.ts");const o=e=>{const{cardTitleIds:t,impressionData:s,header:o}=e;if((0,r.xb)(t))return null;const l=t.map(((e,t)=>((e,t,i)=>a.createElement(n.y,{key:`extras-collection${i?`-${i}`:""}-${e}-${t}`,idx:t,titleId:e,impressionData:s}))(e,t)));return a.createElement("div",{className:i.Z.collection},o&&a.createElement("h3",{className:i.Z.title}," ",o," "),a.createElement("div",{className:i.Z.collectionContainer},l))}},"./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasCollectionItem.tsx":(e,t,s)=>{"use strict";s.d(t,{y:()=>W});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Icon.js"),r=s("./node_modules/@amzn/dvui/dist/Packshot.js"),o=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),l=s("./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasCollectionItem.module.scss"),c=s("./src/shared/CS/components/LazyImage/LazyImage.tsx"),d=s("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),u=s("./src/widgets/DVWebNodeDetail/reducers/action.ts"),m=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),p=s("./src/widgets/DVWebNodeDetail/components/badges/subtitles.tsx"),g=s("./src/widgets/DVWebNodeDetail/components/badges/age-rating.tsx"),h=s("./src/widgets/DVWebNodeDetail/components/badges/runtime.tsx"),v=s("./node_modules/classnames/index.js"),b=s.n(v),D=s("./node_modules/@amzn/dvui/dist/Badge.js"),y=s("./src/shared/CS/components/Modal/Modal.tsx"),f=s("./src/widgets/DVWebNodeDetail/components/badges/audioDescription.tsx"),E=s("./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasPlayButton.tsx"),w=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),_=s("./node_modules/@amzn/dvui/dist/Icons/MoreDetails.js"),T=s("./src/shared/CS/components/Text/Text.tsx"),C=s("./src/widgets/DVWebNodeDetail/components/episode/episode.tsx"),x=s("./node_modules/@amzn/dvui/dist/Spinner.js"),I=s("./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.tsx"),N=s("./src/widgets/DVWebNodeDetail/context/modalContext.tsx");function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},P.apply(this,arguments)}const k=[{"max-tablet-lowest":400},{"max-laptop-lowest":262},{"max-desktop-lowest":422},{"max-desktop-hd-lowest":536},{"max-desktop-uhd-lowest":736}],S=[360,480,720,1080,1440,1920],V=({synopsis:e,header:t,actionBoxProps:s,isHovering:n})=>{const[i,r]=a.useState(!1),[o,c]=a.useState(!1),[d,u]=a.useState(!1),m=a.useCallback((e=>{e&&c(e.offsetHeight<e.scrollHeight)}),[]),p={isVisible:d,titleText:t,body:a.createElement(T.Z.MetaData,null,e),onRequestClose:()=>u(!1),disableFooter:!0},g=s?a.createElement(I.Pz,s):null,h=s||e?a.createElement("div",{className:b()(l.Z.detailsHoverContainer,n?l.Z.hovering:null)},e&&a.createElement(a.Fragment,null,e),g):null,v=s||e?a.createElement("div",{className:l.Z.detailsModalContainer},e&&a.createElement(a.Fragment,null,a.createElement("div",{className:l.Z.synopsisModalWrapper,onClick:()=>u(!0)},e),a.createElement(y.u,p)),g):null,f=s||e?a.createElement("div",{className:b()(l.Z.expandedDetailsContainer)},e&&a.createElement("div",{className:l.Z.synopsisContainer},a.createElement("div",{className:b()(l.Z.synopsis,{[l.Z.showMoreSysnopsis]:i}),ref:m,"data-automation-id":"extras-tab-item-expanded-synopsis"},e),o&&!i&&a.createElement("div",{onClick:()=>r(!0),"data-automation-id":"extras-tab-item-more-icon"},a.createElement(D.Badge,{className:l.Z.moreIcon},a.createElement(_.MoreDetails,null)))),g):null;return a.createElement("div",{className:l.Z.extrasItemDetailsContainer},h,v,f)},W=(0,n.$j)(((e,t)=>({detail:e.detail[d.Xt][t.titleId],action:e.action[u.L5][t.titleId],requestContext:(0,o.Iz)(e),isMShop:(0,m.gK)(e),isRefunding:Boolean(e.refund.refunding&&e.refund.refunding.titleId===t.titleId),purchaseDetails:(0,C.Di)(e,t.titleId)})))((e=>{var t;const{detail:s,titleId:n,requestContext:o,action:d,isMShop:u,idx:m,purchaseDetails:v,isRefunding:D}=e,y=a.useRef(),_=a.useRef(null),[T,C]=a.useState(!1),[I,W]=a.useState(!1),A=a.useCallback((()=>{var e,t,s;const a=null===(e=document)||void 0===e?void 0:e.activeElement;null!==(t=_.current)&&void 0!==t&&t.contains(a)||a.blur(),y.current=null===(s=_.current)||void 0===s?void 0:s.getBoundingClientRect().height,!I&&C(!0)}),[I]),R=a.useCallback((()=>{y.current=0,!I&&C(!1)}),[I]),L=a.useCallback((()=>{setTimeout((()=>{var e,t;const s=document.activeElement,a=(null===(e=_.current)||void 0===e?void 0:e.contains(s))||!1;y.current=a?null===(t=_.current)||void 0===t?void 0:t.getBoundingClientRect().height:0,!I&&C(a)}))}),[I]);if(!s)return null;const B=(o.isRetail?s.asin:s.gti)||n,M=null===(t=s.images)||void 0===t?void 0:t.covershot,O={playbackActionData:(0,w.MG)(null==d?void 0:d.playbackActions),isMShop:u,index:m,sequenceNumber:null==s?void 0:s.episodeNumber,showPlayButton:T},j=Boolean(v),F=j||D,H={alt:s.title,src:M||"",baseValue:720,srcSetWidths:S,imageClassName:l.Z.image,wrapperClassName:l.Z.image,sizesOptions:{defaultSrcSize:1920,srcSizes:k},debugID:n},U={alt:s.title,className:l.Z.packshot,overlay:F?a.createElement("div",{className:l.Z.progressWrapper},a.createElement(x.Spinner,null)):a.createElement(E.N,O)},Z=null==s?void 0:s.ratingBadge,z={subtitles:null==s?void 0:s.subtitles,isClosedCaption:s.isClosedCaption},q={acquisitionActions:null==d?void 0:d.acquisitionActions,sequenceNumber:null==s?void 0:s.episodeNumber,titleID:n,isPurchasing:j,rawContext:o.rawContext,isRefunding:D};return a.createElement("div",{className:l.Z.extrasCollectionItemContainer,onMouseEnter:A,onMouseLeave:R,onFocus:L,onBlur:L,ref:_,style:{minHeight:y.current}},a.createElement("div",{className:b()({[l.Z.extrasCollectionHoveredItem]:T})},a.createElement(r.Packshot,P({},U,{asin:B}),a.createElement("div",{className:l.Z.imageWrapper},a.createElement("div",{className:l.Z.fallbackPackshot},a.createElement(i.Icon,{use:i.IconType.SMILE})),M&&a.createElement(c.w,H))),a.createElement("span",{className:l.Z.title},s.title),a.createElement("section",{className:l.Z.metadata},s.runtime&&a.createElement(h.r,{runtime:s.runtime}),Z&&a.createElement(g.i,{ratingBadge:Z}),z&&a.createElement(p.B,z),a.createElement(f.w,{isAd:s.isAd})),a.createElement(N.t.Provider,{value:{rootElement:(null==_?void 0:_.current)||void 0,onModalOpen:()=>{C(!1),W(!0)},onModalClose:()=>{C(!1),W(!1)}}},a.createElement(V,{synopsis:s.synopsis,header:s.title,actionBoxProps:q,isHovering:T}))))}))},"./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasPlayButton.tsx":(e,t,s)=>{"use strict";s.d(t,{N:()=>m});var a=s("./node_modules/react/index.js"),n=s("./src/shared/player/integration/playbackArea.tsx"),i=s("./src/util/utils/strings.ts"),r=s("./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasPlayButton.module.scss"),o=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),l=s("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts"),c=s("./node_modules/@amzn/dvui/dist/PlayButton.js"),d=s("./node_modules/classnames/index.js"),u=s.n(d);const m=({playbackActionData:e,isMShop:t,index:s,sequenceNumber:d,showPlayButton:m})=>{const{onPlay:p}=a.useContext(n.ET);if(!e)return null;const g=(0,i.VJ)(e.label,{lineBreak:", "}),h={contentConfig:{asin:e.playbackID,trailer:!1,position:e.resumeTime,ref:e.playerRefMarker,videoType:e.videoMaterialType,useFullView:!0,playbackEnvelope:(0,l.D)(e)},signInUrl:e.signInURL,playbackUrl:e.playbackURL,fallbackUrl:e.fallbackURL,sequenceNumber:d,isBonus:!0,subscriptionName:e.subscriptionName,triggerLocation:"Extras",refMarker:e.refMarker};return a.createElement(o._,{refTag:`atv_dp_extras_pb_${s}`},a.createElement("div",{className:u()(m?r.Z.showPlayButton:r.Z.hidePlayButton,r.Z.playButtonContainer)},a.createElement(c.PlayButton,{"data-automation-id":"extras-playbutton",size:c.PlayButtonSize.small,ariaLabel:g,onClick:e=>{p(h),e.preventDefault()},href:t?void 0:e.playbackURL,className:r.Z.playButton})))}},"./src/widgets/DVWebNodeDetail/components/extrasTab/extrasTab.tsx":(e,t,s)=>{"use strict";s.d(t,{d:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Container.js"),r=s("./src/widgets/DVWebNodeDetail/selectors/extrasTab.ts"),o=s("./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasCarousel.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),c=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),d=s("./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasCollection.tsx"),u=s("./src/widgets/DVWebNodeDetail/components/pageClearance/pageClearance.tsx");function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},m.apply(this,arguments)}const p=(0,n.$j)((e=>({showExtrasTab:(0,r.C)(e),extrasCollections:(0,r.J)(e)})))((0,c.eB)((({extrasCollections:e,showExtrasTab:t,hasDefaultTheme:s,isExtraTabActivated:n})=>{if(!t)return null;if(!s&&!n)return null;const r=e.map(((e,t)=>a.createElement("div",{key:t,className:s?l.Z.pageSection:""},s?a.createElement(o.p,m({},e,{key:`extras-collection-${e.index}-${t}`})):a.createElement(d.Z,m({},e,{key:`extras-collection-${e.index}-${t}`})))));return s?a.createElement(i.Container,null,r):a.createElement("div",null,r,a.createElement(u.B,{paddingBottom:300}))})))},"./src/widgets/DVWebNodeDetail/components/feedbackForm/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_WEB_FEEDBACK__send_us_feedback","DV_WEB_FEEDBACK_feedback","DV_WEB_FEEDBACK_select_related_device","DV_WEB_FEEDBACK_select_option_dropdown_menu","DV_WEB_FEEDBACK_dropdown_prompt","DV_WEB_FEEDBACK_submit_button","DV_WEB_FEEDBACK_no_device_website","DV_WEB_SETTINGS_HEAD_YOUR_DEVICES"]}},"./src/widgets/DVWebNodeDetail/components/giftCard/balancesTable.tsx":(e,t,s)=>{"use strict";s.d(t,{p:()=>r});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.module.scss"),i=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx");const r=({balances:e})=>e&&e.length?a.createElement("table",{className:n.Z.balancesTable},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(i.H1,{stringID:"DV_DP_GC_balance_type_heading"})),a.createElement("th",null,a.createElement(i.H1,{stringID:"DV_DP_GC_balance_amount_heading"}))),e&&e.map((e=>a.createElement("tr",{key:e.label.string},a.createElement("td",null,e.label.string),a.createElement("td",null,e.displayAmount)))))):null},"./src/widgets/DVWebNodeDetail/components/giftCard/codeSubmissionForm.tsx":(e,t,s)=>{"use strict";s.d(t,{SY:()=>C,n9:()=>b});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Spacer.js"),i=s("./node_modules/@amzn/dvui/dist/Button.js"),r=s("./node_modules/@amzn/dvui/dist/Input.js"),o=s("./node_modules/@amzn/dvui/dist/Block.js"),l=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),c=s("./src/widgets/DVWebNodeDetail/utils/wps.ts"),d=s("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.module.scss"),u=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),m=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),p=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx");function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},g.apply(this,arguments)}function h(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v="DVWebNodeDetail-RedeemCode",b="/videohelp",D={video_support_website_url:{href:b}};var y=0,f=1,E=2;class w extends a.Component{constructor(e){super(e),h(this,"handleInput",(e=>{this.setState({code:e.target.value,formStatus:y})})),h(this,"onDismiss",(()=>{this.setState({formStatus:y})})),h(this,"handleSubmit",(e=>{e.preventDefault(),this.setState({disableInputs:!0}),this.redeemCode()})),h(this,"redeemCode",(async()=>{try{const e={context:this.props.requestContext,csrfToken:this.props.csrfToken,code:this.state.code},t=await c.py.RedeemCode(e);t.success?(this.setState({formStatus:E}),t.balanceType&&await this.props.updateBalance([t.balanceType])):this.setState({formStatus:f})}catch(e){this.props.logger.error(`${v} - RedeemCode request failed`,e).count(v,1,!1),this.setState({formStatus:f})}this.setState({disableInputs:!1})})),this.state={disableInputs:!1,code:"",formStatus:y}}render(){const{csrfToken:e,hideInput:t}=this.props,{formStatus:s,code:o,disableInputs:c}=this.state,u=!e||c;return a.createElement(a.Fragment,null,!t&&a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("label",{htmlFor:"dv-gc-input",className:d.Z.codeSubmissionFormLabel},a.createElement(l.H1,{stringID:"DV_DP_UB_GC_enter_code"})),a.createElement("div",{className:d.Z.codeSubmissionForm},a.createElement(m.h.Consumer,null,(({getString:e})=>a.createElement(r.Input,{className:d.Z.codeSubmissionFormInput,type:"text",placeholder:e("DV_DP_GC_code_input_placeholder"),autoComplete:"off",id:"dv-gc-input",value:o,onChange:this.handleInput,required:!0,disabled:u}))),a.createElement("div",{className:d.Z.codeSubmissionFormButton},a.createElement(p._,{refTag:"atv_dp_apply_gcpc"},a.createElement(i.Button,{textAlign:"center",use:i.Purchase,type:"submit",className:n.spacerAlignItems.center,disabled:u},a.createElement(l.H1,{stringID:"DV_DP_UB_GC_popup_apply"})))))),a.createElement(T,{formStatus:s,onDismiss:this.onDismiss}))}}const _={className:`${d.Z.giftCardModalMessageBlock} ${d.Z.codeSubmissionFormMessageBlock}`,heading:"",dismissable:!0},T=({formStatus:e,onDismiss:t})=>{switch(e){case f:return a.createElement("div",{id:"codeFailedBlock"},a.createElement(o.MessageBlock,g({type:o.MessageTypes.warning},_,{onDismiss:t}),a.createElement(l.H1,{stringID:"DV_DP_GC_wrong_code",dvStringAttrs:D})));case E:return a.createElement("div",{id:"codeSuccessBlock"},a.createElement(o.MessageBlock,g({type:o.MessageTypes.success},_),a.createElement(l.H1,{stringID:"DV_DP_UB_GC_success_message"})));default:return null}},C=(0,u.n)(w)},"./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.tsx":(e,t,s)=>{"use strict";s.d(t,{fs:()=>u,yv:()=>p});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Link.js"),i=s("./node_modules/@amzn/dvui/dist/Modal.js"),r=s("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.module.scss"),o=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModalContent.tsx"),c=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),d=s("./node_modules/react-dom/index.js");const u=({requestContext:e,isOpen:t,onClose:s,rootElement:n})=>{if(!t)return a.createElement(a.Fragment,null);const o=()=>a.createElement(i.Modal,{className:r.Z.giftCardModal,isVisible:!0,onClose:s,header:a.createElement(m,null),modalId:"giftCardModal",size:"s"},a.createElement(l.lK,{requestContext:e}));return a.createElement(a.Fragment,null,n?(0,d.createPortal)(o(),n):o())},m=()=>a.createElement("div",{id:"giftCardModalHeader"},a.createElement("h3",{className:r.Z.giftCardModalHeader},a.createElement("strong",null,a.createElement(o.H1,{stringID:"DV_DP_GC_widget_heading"})))),p=({openModal:e})=>a.createElement(c._,{refTag:"dv-gcp-modal"},a.createElement(n.Link,{className:r.Z.giftCardButton,onClick:e,href:"#"},a.createElement(o.H1,{stringID:"AVOD_DP_redeem_gift_card_or_promotion"})))},"./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModalContent.tsx":(e,t,s)=>{"use strict";s.d(t,{lK:()=>E});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Link.js"),i=s("./node_modules/@amzn/dvui/dist/Block.js"),r=s("./node_modules/@amzn/dvui/dist/Spinner.js"),o=s("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.module.scss"),l=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),c=s("./src/widgets/DVWebNodeDetail/components/giftCard/balancesTable.tsx"),d=s("./src/widgets/DVWebNodeDetail/components/giftCard/codeSubmissionForm.tsx"),u=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),m=s("./src/widgets/DVWebNodeDetail/utils/wps.ts");function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},p.apply(this,arguments)}function g(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h="DVWebNodeDetail-GetGiftCard",v={url:{href:d.n9}};var b=0,D=1,y=2;class f extends a.Component{constructor(e){super(e),g(this,"updateBalance",(async e=>{try{const t={context:this.props.requestContext,balanceTypes:e};this.setState({balanceStatus:D});const s=await m.py.GetGiftCard(t),{giftCardContent:a}=this.state,n=T(a&&a.balanceMap,s&&s.balances);this.setState({balanceStatus:b,giftCardContent:{csrfToken:s&&s.csrfToken,balanceMap:n}})}catch(e){this.props.logger.error(`${h} - GetGiftCard request failed`,e).count(h,1,!1),this.setState({balanceStatus:y,giftCardContent:void 0})}})),this.state={balanceStatus:D}}componentDidMount(){this.updateBalance(["GiftCard","Promotion"])}render(){const{requestContext:e}=this.props,{giftCardContent:t,balanceStatus:s}=this.state;return a.createElement("div",null,a.createElement(d.SY,{csrfToken:t&&t.csrfToken,requestContext:e,updateBalance:this.updateBalance,hideInput:s===y}),a.createElement("p",{className:o.Z.promotionMessage},a.createElement(l.H1,{stringID:"AVOD_DP_GC_promotion_message"})," ",a.createElement(n.Link,{href:"/help/video/giftcard",target:"_blank"},a.createElement(l.H1,{stringID:"AVOD_DP_GC_toc_learn_more"}))),a.createElement("h3",{className:o.Z.balancesTitle},a.createElement(l.H1,{stringID:"DV_DP_DV_GCPC_window_title"})),s!==y&&a.createElement("p",{className:o.Z.balancesExplanation},a.createElement(l.H1,{stringID:"DV_DP_GC_balances_explanation"})),a.createElement("div",{className:o.Z.giftCardModalContentStatusBlock},a.createElement(_,{balanceStatus:s,balances:t&&t.balanceMap&&Object.values(t.balanceMap)})))}}const E=(0,u.n)(f),w={className:o.Z.giftCardModalMessageBlock,heading:"",dismissable:!1},_=({balanceStatus:e,balances:t})=>{switch(e){case b:return a.createElement(c.p,{balances:t});case D:return a.createElement(r.Spinner,null);case y:return a.createElement("div",{id:"balanceUpdateFailedBlock"},a.createElement(i.MessageBlock,p({type:i.MessageTypes.warning},w),a.createElement(l.H1,{stringID:"DV_DP_GC_balance_update_failed",dvStringAttrs:v})));default:return null}},T=(e,t)=>{const s=e?{...e}:{};return t&&t.forEach((e=>s[e.balanceType]=e)),s}},"./src/widgets/DVWebNodeDetail/components/giftCard/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const n={bundles:[a.R.ATF,a.R.BTF],strings:["DV_DP_GC_widget_heading","DV_DP_UB_GC_success_message","DV_DP_DV_GCPC_window_title","DV_DP_UB_GC_popup_apply","DV_DP_UB_GC_enter_code","AVOD_DP_GC_promotion_message","DV_DP_GC_balances_explanation","AVOD_DP_GC_toc_learn_more","DV_DP_GC_balance_type_heading","DV_DP_GC_balance_amount_heading","DV_DP_GC_code_input_placeholder","DV_DP_GC_wrong_code","DV_DP_GC_balance_update_failed"]}},"./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx":(e,t,s)=>{"use strict";s.d(t,{t:()=>h});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/classnames/index.js"),r=s.n(i),o=s("./src/shared/imageUtils/imageUtils.ts"),l=s("./src/util/utils/useInteractionObserver.tsx"),c=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),d=s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.module.scss");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},u.apply(this,arguments)}const m=e=>{const{src:t,baseValue:s,format:n,baseType:i,srcSizes:r,skipStripTags:l,className:c,classNameContainer:u,alt:m}=e,{src:p,srcSet:g,sizes:h}=(0,o.Ro)({src:t,baseValue:s,baseType:i,srcSizes:r,format:n,skipStripTags:l}),[v,b]=a.useState(!1),D=(0,o.Ro)({src:t,baseValue:50,baseType:o.rB.WIDTH,format:n}).src;return a.createElement(a.Fragment,null,a.createElement(a.Fragment,null,a.createElement("noscript",null,a.createElement("img",{src:p,srcSet:g,sizes:h,className:c,alt:m}),a.createElement("style",null,`.${d.Z.imageContainer}{display:none;}`)),a.createElement("div",{className:`${d.Z.imageContainer} ${u}`,dangerouslySetInnerHTML:{__html:`\n      <script>document.body.classList.remove("atfimgloaded")<\/script>\n      <img id="atf-thumb" className="${d.Z.thumb}" src="${D}"/>\n      <img id="atf-full" className="${d.Z.full} ${c}" src="${p}" srcSet="${g}" sizes="${h}" alt="${m}" fetchpriority="high" onload="document.body.classList.add('atfimgloaded')"/>\n            `}})))},p=e=>{const{src:t,baseValue:s,format:n,baseType:i,srcSizes:c,skipStripTags:m,className:p,classNameContainer:g,alt:h,isLazyImageSupported:v}=e,b=a.useRef(null),[D,y]=a.useState(!1),[f,E]=a.useState(!1),w=a.useCallback((([{isIntersecting:e}],t)=>{e&&(E(!0),b.current&&t.unobserve(b.current))}),[]);return(0,l.S)({enabled:v,target:b,rootMargin:"200px",onIntersect:w}),a.createElement(a.Fragment,null,a.createElement("noscript",null,a.createElement("img",{src:t,className:p,alt:h}),a.createElement("style",null,`.${d.Z.imageContainer}{display:none;}`)),a.createElement("div",{ref:b,className:r()(d.Z.imageContainer,g)},f&&a.createElement("img",u({},(0,o.Ro)({src:t,baseValue:s,baseType:i,srcSizes:c,format:n,skipStripTags:m}),{loading:"lazy",onLoad:()=>{y(!0)},alt:h,className:r()(d.Z.full,p,{[d.Z.showLoaded]:D})}))))},g=e=>{const{src:t,baseValue:s,format:n,baseType:i,srcSizes:r,skipStripTags:l,isLazy:c=!1,className:d,alt:g,isAtfMainImage:h,isLazyImageSupported:v}=e;return t&&s?v&&h?a.createElement(m,e):v&&c?a.createElement(p,e):a.createElement("img",u({},(0,o.Ro)({src:t,baseValue:s,baseType:i,srcSizes:r,format:n,skipStripTags:l}),{className:d,alt:g})):null},h=(0,n.$j)((e=>({isLazyImageSupported:!(0,c._n)(e)})))(a.memo(g))},"./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx":(e,t,s)=>{"use strict";s.d(t,{H1:()=>z,xU:()=>Z});var a=s("./node_modules/react/index.js"),n=s("./src/util/utils/strings.ts"),i=s("./node_modules/@amzn/dvui/dist/Text.js"),r=s("./src/widgets/DVWebNodeDetail/components/productMetaInfo/strings.ts"),o=s("./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/strings.ts"),l=s("./src/widgets/DVWebNodeDetail/components/refund/strings.ts"),c=s("./src/widgets/DVWebNodeDetail/components/episode/strings.ts"),d=s("./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/strings.ts"),u=s("./src/widgets/DVWebNodeDetail/components/customerErrorMessage/strings.ts"),m=s("./src/widgets/DVWebNodeDetail/components/schedule/strings.ts"),p=s("./src/widgets/DVWebNodeDetail/components/seasonSelector/strings.ts"),g=s("./src/widgets/DVWebNodeDetail/components/badges/strings.ts"),h=s("./src/widgets/DVWebNodeDetail/components/watchlist/strings.ts"),v=s("./src/widgets/DVWebNodeDetail/components/feedbackForm/strings.ts"),b=s("./src/widgets/DVWebNodeDetail/components/bottomMenu/strings.ts"),D=s("./src/widgets/DVWebNodeDetail/components/synopsis/strings.ts"),y=s("./src/widgets/DVWebNodeDetail/components/pageUnavailable/strings.ts"),f=s("./src/widgets/DVWebNodeDetail/components/collection/strings.ts"),E=s("./src/widgets/DVWebNodeDetail/components/playbackMessaging/strings.ts"),w=s("./src/widgets/DVWebNodeDetail/components/actionBox/strings.ts"),_=s("./src/widgets/DVWebNodeDetail/components/castAndCrew/strings.ts"),T=s("./src/widgets/DVWebNodeDetail/components/castAndCrewContainer/strings.ts"),C=s("./src/widgets/DVWebNodeDetail/components/player/strings.ts"),x=s("./src/widgets/DVWebNodeDetail/components/otherFormats/strings.ts"),I=s("./src/widgets/DVWebNodeDetail/components/episodeList/strings.ts"),N=s("./src/widgets/DVWebNodeDetail/components/giftCard/strings.ts"),P=s("./src/widgets/DVWebNodeDetail/components/tabs/strings.ts"),k=s("./src/widgets/DVWebNodeDetail/components/watchPartyLink/strings.ts"),S=s("./src/widgets/DVWebNodeDetail/components/uiBanner/strings.ts"),V=s("./src/widgets/DVWebNodeDetail/components/playback/strings.ts"),W=s("./src/widgets/DVWebNodeDetail/components/acquisition/strings.ts"),A=s("./src/widgets/DVWebNodeDetail/components/customerReviews/strings.ts"),R=s("./src/widgets/DVWebNodeDetail/components/chartPosition/strings.ts"),L=s("./src/widgets/DVWebNodeDetail/components/channelLogo/strings.ts"),B=s("./src/widgets/DVWebNodeDetail/components/downloadUpsellBanner/strings.ts"),M=s("./src/widgets/DVWebNodeLive/components/contactOptions/strings.ts"),O=s("./src/widgets/DVWebNodeDetail/widgets/Btf/strings.ts"),j=s("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),F=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const H=[r.j,o.j,c.j,d.j,u.j,m.j,f.j,w.j,_.j,T.j,x.j,I.j,N.j,P.j,k.j,p.j,g.j,h.j,D.j,l.j,y.j,E.j,C.j,v.j,S.j,V.j,W.j,A.j,R.j,L.j,B.j,M.j,b.j,O.j],U=e=>[].concat(...H.filter((t=>t.bundles.includes(e))).map((e=>e.strings))),Z=(e,t)=>({context:e,ids:U(t)}),z=({stringID:e,replace:t,dvStringAttrs:s,shouldDecode:r=!1,dir:o,className:l=""})=>{const{getString:c}=a.useContext(F.h),d=c(e,t),u=(0,n.e6)(d,s||{}),m=r?a.createElement(j.v,{string:u.string}):a.createElement(i.Text,{string:u,className:l});return o?a.createElement("span",{dir:o}," ",m," "):m}},"./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts":(e,t,s)=>{"use strict";s.d(t,{R:()=>a});var a={ATF:0,BTF:1}},"./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/btfMorePurchaseOptions.tsx":(e,t,s)=>{"use strict";s.d(t,{TA:()=>E,to:()=>T});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s("./node_modules/@amzn/dvui/dist/Link.js"),r=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),o=s("./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx"),l=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),c=s("./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/btfMorePurchaseOptions.module.scss"),d=s("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),u=s("./src/widgets/DVWebNodeDetail/components/acquisition/defaultMoreWaysToWatchModal.tsx"),m=s("./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.tsx"),p=s("./node_modules/@amzn/dv-web-node-reftags/index.js"),g=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),h=s("./node_modules/@amzn/dvui/dist/Button.js"),v=s.n(h),b=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),D=s("./src/widgets/DVWebNodeDetail/context/modalContext.tsx"),y=s("./src/shared/CS/components/Modal/Modal.tsx"),f=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");const E=e=>!!e&&(e.children||[]).length>0,w=(0,o.Y)((({moreWaysToWatch:e,sequenceNumber:t,titleId:s,toggleGiftCardModal:o,componentClassName:m,linkClassName:h})=>{if(!E(e)||!s)return null;const v=e&&e.metadata&&e.metadata.refMarker||(0,p.i)("atv_dp_mpo_el");return a.createElement("div",{className:n(l.Z.stretchHeight,m)},a.createElement(d.i,{size:"m",modalId:"dvui-close-overlay-btf-mwtw",modalContent:({closeModal:s})=>a.createElement(u.C,{closeModal:s,moreWaysToWatch:e,sequenceNumber:t,toggleGiftCardModal:o}),toggle:({openModalClickHandler:e})=>a.createElement(g._,{refTag:v},a.createElement(i.Link,{className:n(c.Z.trigger,h),"data-ux-click":!0,onClick:e},a.createElement(r.H1,{stringID:"DV_MWTW_TITLE"})))}))})),_=(0,o.Y)((({moreWaysToWatch:e,sequenceNumber:t,titleId:s,toggleGiftCardModal:i,componentClassName:o})=>{const{rootElement:l,onModalClose:d,onModalOpen:u}=a.useContext(D.t),{getString:h}=a.useContext(f.h),[b,w]=a.useState(!1);if(!E(e)||!s)return null;const _=e&&e.metadata&&e.metadata.refMarker||(0,p.i)("atv_dp_mpo_el"),T=()=>{d&&d(),w(!1)};return a.createElement("div",{className:n(c.Z.morePurchaseButton,o)},a.createElement(g._,{refTag:_},a.createElement(v(),{onClick:()=>{u&&u(),w(!0)}},a.createElement(r.H1,{stringID:"DV_MWTW_TITLE"}))),a.createElement(y.u,{titleText:h("DV_MWTW_TITLE"),body:a.createElement(m.C,{closeModal:T,moreWaysToWatch:e,sequenceNumber:t,toggleGiftCardModal:i}),isVisible:b,onRequestClose:()=>T(),disableFooter:!0,size:"m",rootElement:l,testID:"btf-more-purchase-options-modal"}))})),T=(0,b.QI)(w,_)},"./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const n={bundles:[a.R.ATF,a.R.BTF],strings:["DV_MWTW_TITLE","DV_MWTW_TITLE_MAIN"]}},"./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormats.tsx":(e,t,s)=>{"use strict";s.d(t,{D:()=>v});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Text.js"),r=s("./node_modules/@amzn/dvui/dist/Button.js"),o=s("./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormatsDefault.module.scss"),l=s("./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormats.module.scss"),c=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),d=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),u=s("./node_modules/@amzn/dvui/dist/Container.js"),m=s("./node_modules/@amzn/dvui/dist/DvuiContainer.js"),p=s("./src/widgets/DVWebNodeDetail/selectors/otherFormats.ts"),g=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),h=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx");const v=(0,n.$j)((e=>({showOtherFormats:(0,p.$)(e),otherFormats:g.mZ.otherFormats(e)})))((({otherFormats:e,showOtherFormats:t})=>{const{getString:s}=a.useContext(d.h),{detailPageTheme:n}=a.useContext(h.kw),p=n===h.wS.Default;if(!t||!e)return null;const g=a.createElement(u.Container,{className:c.Z.pageSection},a.createElement("div",{"data-automation-id":"other-formats"},a.createElement("h1",{className:o.Z.header}," ",s("DV_DP_CL_other_formats_title")," "),e.actions.map(((e,t)=>a.createElement("div",{className:o.Z.otherFormats,key:`other-format-${t}`},a.createElement(r.PrimaryButton,{href:e.link,forceDoubleHeight:!0},a.createElement(i.Text,{tag:"span",string:e.text}))))))),v=a.createElement(m.DvuiContainer,{className:l.Z.container},a.createElement("div",{"data-automation-id":"other-formats"},a.createElement("h3",{className:l.Z.header}," ",s("DV_DP_CL_other_formats_title")," "),e.actions.map(((e,t)=>a.createElement("div",{className:l.Z.otherFormats,key:`other-format-${t}`},a.createElement(r.Button,{href:e.link,forceDoubleHeight:!0,className:l.Z.formatButton},a.createElement(i.Text,{tag:"span",string:e.text})))))));return p?g:v}))},"./src/widgets/DVWebNodeDetail/components/otherFormats/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_CL_other_formats_title"]}},"./src/widgets/DVWebNodeDetail/components/pageClearance/pageClearance.tsx":(e,t,s)=>{"use strict";s.d(t,{B:()=>a});s("./node_modules/react/index.js");const a=({paddingBottom:e})=>null},"./src/widgets/DVWebNodeDetail/components/pageUnavailable/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_DP_unavailable_page_message","DV_DP_unavailable_live_page_message","DV_DP_only_playback_available_in_gen4_message"]}},"./src/widgets/DVWebNodeDetail/components/playAction/playAction.tsx":(e,t,s)=>{"use strict";s.d(t,{_:()=>c});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),i=s("./src/shared/player/integration/playbackArea.tsx"),r=s("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts"),o=s("./node_modules/@amzn/dvui/dist/PlayButton.js"),l=s("./src/widgets/DVWebNodeDetail/components/playAction/playAction.module.scss");const c=({playbackActions:e,sequenceNumber:t,isBonus:s=!1,isMShop:c,className:d})=>{const u=(0,n.MG)(e);if(!u)return null;const m=u.playbackID,p=(0,r.D)(u),g={signInUrl:u.signInURL,playbackUrl:u.playbackURL,fallbackUrl:u.fallbackURL,sequenceNumber:t,isBonus:s,contentConfig:{asin:m,trailer:!1,position:u.resumeTime,ref:u.playerRefMarker,videoType:u.videoMaterialType,useFullView:!0,playbackEnvelope:p},subscriptionName:u.subscriptionName,triggerLocation:"EpisodeList",refMarker:u.refMarker};return a.createElement(i.ET.Consumer,null,(({onPlay:e})=>a.createElement("div",{className:d},a.createElement(o.PlayButton,{"data-automation-id":"episodes-playbutton",size:o.PlayButtonSize.small,ariaLabel:u.label,onClick:t=>{e(g),t.preventDefault()},href:c?void 0:u.playbackURL,className:l.Z.playButton}))))}},"./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.tsx":(e,t,s)=>{"use strict";s.d(t,{eP:()=>y,n7:()=>D,oe:()=>h});var a=s("./node_modules/@amzn/dvui/dist/Button.js"),n=s("./node_modules/@amzn/dvui/dist/Icon.js"),i=s("./node_modules/react/index.js"),r=s("./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.module.scss"),o=s("./node_modules/classnames/index.js"),l=s("./node_modules/@amzn/dvui/dist/Icons/PlayArrow.js"),c=s.n(l),d=s("./node_modules/@amzn/dvui/dist/Tooltip.js"),u=s("./node_modules/@amzn/dvui/dist/Icons/Trailer.js"),m=s.n(u);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},p.apply(this,arguments)}const g="34px",h=({progress:e=0,isLarge:t=!1,isStartOver:s=!1,isSeeThrough:a=!1,ariaLabel:l,onClick:c,onKeyDown:d,href:u,className:m,children:g})=>{const h=o(r.Z.playbox,{[r.Z.largePlaybox]:!0===t},t?r.Z.largePlaybox:r.Z.smallPlaybox,m);return i.createElement("a",p({href:u,onClick:c,"aria-label":l,className:h,tabIndex:0},d&&{onKeyDown:d}),i.createElement("span",{className:o(r.Z.circle,a?r.Z.seeThrough:r.Z.opaque)},i.createElement(n.Icon,{use:s?n.IconType.START_OVER:n.IconType.PLAY_BUTTON_ARROW,className:o(r.Z.icon,{[r.Z.startOverIcon]:s})})),i.createElement("span",{className:r.Z.playButtonRightContent},g,i.createElement(v,{progress:e})))};h.displayName="PlayButton";const v=({progress:e=0})=>e>0?i.createElement("span",{className:r.Z.progress,"data-automation-id":"progress-bar"},i.createElement("span",{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":e,className:r.Z.progressBar,role:"progressbar",style:{width:`${e}%`}})):null,b=i.createElement("span",{className:r.Z.blackPlayArrow},i.createElement(c(),{height:g,width:g})),D=({progress:e=0,isStartOver:t,className:s,children:l,useFreeButton:c,...d})=>i.createElement(a.Button,p({},d,{use:t?a.Default:c?a.Free:a.Playback},c?{icon:b}:{useIcon:t?n.IconType.START_OVER:n.IconType.PLAY_ARROW},{className:o(r.Z.squareButton,{[s]:Boolean(s)},{[r.Z.freeButton]:c})}),i.createElement("span",null,l),i.createElement(v,{progress:e}));D.displayName="SquarePlayButton";const y=({isPrimaryButton:e=!1,...t})=>e?i.createElement(a.Button,p({role:"button",useIcon:n.IconType.TRAILER,testID:"trailer-button"},t)):i.createElement(d.Tooltip,{position:"top",size:"s",content:t.tooltipText||"",className:r.Z.trailerTooltip,id:"dv-dp-node-trailer-tooltip",containerRef:t.containerRef},i.createElement(a.Button,p({role:"button",testID:"trailer-button",className:r.Z.circularButton},t),i.createElement("span",{className:r.Z.icon},i.createElement(m(),null))));y.displayName="TrailerButton"},"./src/widgets/DVWebNodeDetail/components/playback/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_DP_trailer__AV","DV_WEB_TRAILER_LABEL"]}},"./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.tsx":(e,t,s)=>{"use strict";s.d(t,{Kr:()=>l,y7:()=>o});var a=s("./node_modules/react/index.js"),n=(s("./node_modules/@amzn/dvui/dist/Alert.js"),s("./node_modules/@amzn/dvui/dist/Icon.js"),s("./node_modules/@amzn/dvui/dist/Text.js")),i=s("./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.module.scss"),r=(s("./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx"),s("./src/widgets/DVWebNodeDetail/components/images/responsiveImage.tsx"),s("./src/shared/imageUtils/imageUtils.ts"),s("./node_modules/classnames/index.js"),s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),s("./node_modules/@amzn/dvui/dist/Icons/Clock.js"));const o=35,l=({messages:e})=>a.createElement(a.Fragment,null,null==e?void 0:e.map((e=>a.createElement("span",{className:i.Z.comingSoonMessageWrapper},a.createElement(r.Clock,null),a.createElement(n.Text,{className:i.Z.comingSoonMessage,string:e})))))},"./src/widgets/DVWebNodeDetail/components/playbackMessaging/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_DP_COMING_SOON_MESSAGE","DV_DP_COMING_SOON_TBC_DATE","DV_DP_COMING_IN_YEAR_MESSAGE"]}},"./src/widgets/DVWebNodeDetail/components/player/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_WEB_LIVE_NOT_SUPPORTED_BODY","DV_DP_PLAYER_TIMEOUT_BODY","DV_DP_PLAYER_TIMEOUT_HEADING"]}},"./src/widgets/DVWebNodeDetail/components/productMetaInfo/btfProductMetaInfo.tsx":(e,t,s)=>{"use strict";s.d(t,{W:()=>D});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.tsx"),r=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),o=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),l=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),c=s("./node_modules/@amzn/dvui/dist/Container.js"),d=s("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),u=s("./src/widgets/DVWebNodeDetail/selectors/metadataFragment.ts"),m=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),p=s("./node_modules/@amzn/dvui/dist/DvuiContainer.js");function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},g.apply(this,arguments)}const h=e=>[...e?[i.sr.Directors]:[],i.sr.Actors,i.sr.Producers,i.sr.ReleaseYear,i.sr.Studios,i.sr.RegRating,i.sr.ContentDescriptors,i.sr.PurchaseRights,i.sr.Format,i.sr.Devices],v=e=>[...e?[i.sr.Directors]:[],i.sr.Producers,i.sr.Studios,i.sr.Amr,i.sr.ContentDescriptors,i.sr.Actors],b=()=>[i.sr.ContentDescriptors,i.sr.AudioTracks,i.sr.Subtitles,i.sr.Directors,i.sr.Producers,i.sr.Starring],D=(0,n.$j)((e=>({productDetails:o.mZ.moreDetails(e),contentDescriptors:(0,u._6)(e),maturityRating:(0,u.BK)(e),requestContext:(0,r.Iz)(e)})))((0,m.eB)((({productDetails:e,contentDescriptors:t,maturityRating:s,requestContext:n,hasDefaultTheme:r})=>{if(e){const o=(0,d.xw)(e);return a.createElement(a.Fragment,null,r?a.createElement(c.Container,{className:l.Z.pageSection},a.createElement(i.rB,g({},e,{ratingBadge:s||e.ratingBadge,contentDescriptors:t||e.contentDescriptors,fields:r?n.isRetail?h(o):v(o):b(),showHeader:!0,expandedItemsCount:5,id:"btf-product-details"}))):a.createElement(p.DvuiContainer,{className:l.Z.pageSectionNextGen},a.createElement(i.rB,g({},e,{ratingBadge:s||e.ratingBadge,contentDescriptors:t||e.contentDescriptors,fields:r?n.isRetail?h(o):v(o):b(),showHeader:!0,expandedItemsCount:5,id:"btf-product-details"}))))}return null})))},"./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.tsx":(e,t,s)=>{"use strict";s.d(t,{rB:()=>Q,sr:()=>I});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/classnames/index.js"),r=s("./node_modules/@amzn/dvui/dist/Link.js"),o=s("./node_modules/@amzn/dvui/dist/MoreContent.js"),l=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),c=s("./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts"),d=s("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),u=s("./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfoDefault.module.scss"),m=s("./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.module.scss"),p=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),g=s("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),h=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),v=s("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),b=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),D=s("./src/shared/utils/utils.ts"),y=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),f=s("./src/util/utils/marketplace.ts"),E=s("./src/widgets/DVWebNodeDetail/selectors/productDetails.ts"),w=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),_=s("./node_modules/@amzn/dvui/dist/Text.js"),T=s("./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormats.tsx"),C=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const x=3;let I=function(e){return e[e.Directors=0]="Directors",e[e.Starring=1]="Starring",e[e.Genres=2]="Genres",e[e.Subtitles=3]="Subtitles",e[e.AudioTracks=4]="AudioTracks",e[e.Actors=5]="Actors",e[e.Producers=6]="Producers",e[e.ReleaseYear=7]="ReleaseYear",e[e.Studios=8]="Studios",e[e.RegRating=9]="RegRating",e[e.ContentDescriptors=10]="ContentDescriptors",e[e.PurchaseRights=11]="PurchaseRights",e[e.Format=12]="Format",e[e.Amr=13]="Amr",e[e.Devices=14]="Devices",e}({});const N={[I.Subtitles]:2,[I.AudioTracks]:2},P=(e,t,s)=>[a.createElement(r.Link,{key:`type-content-link-${s}`,text:e,href:t})],k=(e,t)=>[a.createElement(a.Fragment,{key:`type-content-text-${t}`},e)];function S(e){switch(e&&e.toUpperCase()){case"US":return a.createElement(l.H1,{stringID:"DV_TW_title_mpaarating"});case"UK":return a.createElement(l.H1,{stringID:"DV_TW_title_bbfcrating"});case"DE":return a.createElement(l.H1,{stringID:"DV_TW_title_fskrating"});default:return a.createElement(l.H1,{stringID:"DV_TW_title_eirinrating"})}}function V(e,t,s,a){return{header:e,items:s&&s.length>0?s.map(((e,s)=>t(e,s))):null,stylingClasses:a}}function W(e,t,s){return{header:e,items:t&&t.length>0?[t]:null,stylingClasses:s}}const A=(e,t)=>P(a.createElement(g.v,{string:e.name}),e.searchLink,t),R=(e,t)=>k(a.createElement(g.v,{string:e.name}),t),L=(e,t)=>P(a.createElement(g.v,{string:e.text}),e.searchLink,t),B=(e,t)=>k(a.createElement(g.v,{string:e.text}),t),M=(e,t)=>e.link?P(a.createElement(g.v,{string:e.text}),e.link,t):k(a.createElement(g.v,{string:e.text}),t),O=(e,t)=>k(a.createElement(g.v,{string:e.text}),t),j=(e,t)=>{const s=0===t?`${e.charAt(0).toUpperCase()}${e.slice(1)}`:e;return k(a.createElement(g.v,{string:s}),t)},F=(e,t)=>k(a.createElement(g.v,{string:e}),t),H=e=>{return[[a.createElement(l.H1,{stringID:"DV_TW_data_purchaserights_streaming",key:0})," ",(t=a.createElement("div",{className:`${u.Z.modalWrapper}`},a.createElement(l.H1,{stringID:"DV_WEB_DP_popover_purchase_rights",dvStringAttrs:{compatibleDeviceLink:{href:e("/ontv/devices",{refTag:"atv_dp_hd_dev"})},touLink:{href:e("/dv/tou",{refTag:"atv_dp_tou",isShortUrl:!0})},learnDownloading:{href:e("/dv/learn/download",{refTag:"atv_dp_learn_download",isShortUrl:!0})}}})),s=a.createElement(l.H1,{stringID:"DV_TW_Detail_text"}),n=1,a.createElement(v.i,{modalContent:t,toggle:({openModalClickHandler:e})=>a.createElement(r.Link,{onClick:e},s),key:`type-content-modal-${n}`}))]];var t,s,n},U=e=>[[k(a.createElement(l.H1,{stringID:"DV_TW_data_available_to_watch_devices",dvStringAttrs:{supportedDevicesLink:{href:e("/watchAnywhere",{refTag:"atv_dp_watch_anywhere",isShortUrl:!0})}}}),0)]],Z=({ratingBadge:e,titleType:t,contributors:s,genres:n,subtitles:i,enhancedSubtitles:o,audioTracks:u,studios:p,releaseYear:g,isPurchaseRestricted:h,contentDescriptors:v,entityType:b,requestContext:{makeUrl:y,rawContext:E},isCerberusChild:w,questLinksEnabled:_},T)=>{const C=(0,c.j9)(e)&&e,x=(0,c.nn)(e)&&e,N=t&&"MOVIE"===t.toUpperCase(),P=T("DV_brand_av"),Z=T("DV_DP_ARIA_learn_more_amr"),z=T("DV_DP_none_available"),q=(0,D.xb)(i)&&!(0,f.D1)(E.marketplaceID)?[z]:i,$=(0,D.xb)(o)&&!(0,f.D1)(E.marketplaceID)?[{text:z}]:o,G=w?R:A,Q=w?B:L,Y=w?O:M;return{[I.Directors]:V(a.createElement(l.H1,{stringID:"DV_TW_title_directors"}),G,s&&s.directors),[I.Producers]:V(a.createElement(l.H1,{stringID:"DV_TW_title_producers"}),G,s&&s.producers),[I.Actors]:V(a.createElement(l.H1,{stringID:"DV_TW_title_actors"}),G,s&&s.supportingActors),[I.Starring]:V(a.createElement(l.H1,{stringID:"DV_TW_title_starring"}),G,s&&s.starringActors),[I.Genres]:V(a.createElement(l.H1,{stringID:"DV_TW_title_genres"}),Q,n),[I.Subtitles]:_?V(a.createElement(l.H1,{stringID:"DV_TW_title_subtitles"}),Y,$,[m.Z.breakWords]):V(a.createElement(l.H1,{stringID:"DV_TW_title_subtitles"}),F,q,[m.Z.breakWords]),[I.AudioTracks]:V(a.createElement(l.H1,{stringID:"DV_TW_title_languages"}),F,u,[m.Z.breakWords]),[I.Studios]:V(N?a.createElement(l.H1,{stringID:"DV_TW_title_studio"}):a.createElement(l.H1,{stringID:"DV_TW_title_network"}),F,p),[I.Amr]:W(a.createElement(l.H1,{stringID:"DV_TW_title_amr"}),C&&(K=C&&C.displayText,X=C&&(0,c.jF)(C)&&C.description||"",J=a.createElement(l.H1,{stringID:"DV_DP_learn_more"}),ee="/amr/ref=atv_hp_dp_amr",te=0,se=Z,[a.createElement("span",{key:`amr-span-${te}`,dir:"ltr"},K)," ",X," ",a.createElement(r.Link,{key:`amr-link-${te}`,text:J,href:ee,ariaLabel:se})])||[]),[I.RegRating]:W(x&&S(x.countryCode),N&&x&&x.description&&k(x.description,0)||[]),[I.ContentDescriptors]:V(a.createElement(l.H1,{stringID:"DV_TW_title_content_descriptors"}),j,v,[m.Z.breakWords]),[I.ReleaseYear]:W(a.createElement(l.H1,{stringID:"DV_TW_title_seasonyear"}),!N&&g&&k(g,0)||[]),[I.PurchaseRights]:W(a.createElement(l.H1,{stringID:"DV_TW_title_purchaserights"}),!h&&H(y)||[]),[I.Format]:W(a.createElement(l.H1,{stringID:"DV_TW_title_format"}),k(a.createElement(l.H1,{stringID:"DV_TW_data_format_streaming",replace:{brand:P}}),0)),[I.Devices]:W(a.createElement(l.H1,{stringID:"DV_TW_title_devices"}),b&&!h&&!(0,d.Z4)(b)&&U(y)||[])};var K,X,J,ee,te,se},z=e=>{const[t,...s]=e;return[t,...s.reduce(((e,t,s)=>[...e,a.createElement("span",{"aria-hidden":!0,key:`separator-${s}`},a.createElement(l.H1,{stringID:"DV_comma_separator"})),...t]),[])]},q=({header:e,items:t,moreString:s,type:n,expandedItemsCount:r,stylingClasses:l})=>{let c=z(t);const d=2*r;if(c.length>d){const e=c.slice(0,d),t=c.slice(d);c=[a.createElement(o.MoreContent,{visible:e,hidden:t,key:"more-content",moreString:s,index:n})]}const u=l?i(l):void 0;return a.createElement("dl",{key:`dl-${n}`,className:u},a.createElement("dt",null,e),a.createElement("dd",null,c))},$=({header:e,items:t,type:s,stylingClasses:n})=>{let r=z(t);const o=n?i(n):void 0;return a.createElement("dl",{key:`dl-${s}`,className:o},a.createElement("dt",{className:m.Z.subHeader},e),a.createElement("dd",{className:m.Z.description},r))},G=({termsText:e})=>a.createElement("div",{className:`${m.Z.termsAndConditions}`},a.createElement(_.Text,{string:e})),Q=(0,n.$j)((e=>({requestContext:(0,h.Iz)(e),isPurchaseRestricted:(0,b.Tr)(e),isCerberusChild:(0,b.Io)(e),questLinksEnabled:(0,E._)(e),termsText:C.bS.termsText(e)})))((0,w.QI)((e=>{const{getString:t}=a.useContext(y.h),{fields:s,showHeader:n=!1,expandedItemsCount:r=x,id:o}=e,c=t("DV_DP_more_items"),d=Z(e,t),m=s.map(((e,t)=>{const s=N[e]||r,n=d[e];return n&&n.items&&n.items.length>0&&a.createElement(q,{key:`row-${o}-${t}`,header:n.header,items:n.items,moreString:c,type:e,expandedItemsCount:s,stylingClasses:n.stylingClasses})})),g=n&&m&&m.filter(Boolean).length?a.createElement(l.H1,{stringID:"DV_DP_more_details"}):null;return a.createElement("div",{className:i(p.Z.fullWidth,u.Z.productMetaInfo),id:o,"data-automation-id":o},g&&a.createElement("h1",null," ",g," "),a.createElement("div",{className:u.Z.info},m))}),(e=>{const{getString:t}=a.useContext(y.h),{fields:s,showHeader:n=!1,id:r}=e,o=e.termsText,c=Z(e,t),d=s.map(((e,t)=>{const s=c[e];return s&&s.items&&s.items.length>0&&a.createElement($,{key:`row-${r}-${t}`,header:s.header,items:s.items,type:e,stylingClasses:s.stylingClasses})})),u=n&&d&&d.filter(Boolean).length?a.createElement(l.H1,{stringID:"DV_DP_more_info"}):null;return a.createElement("div",{className:i(p.Z.fullWidth,m.Z.productMetaInfo),id:r,"data-automation-id":r},u&&a.createElement("h3",null," ",u," "),a.createElement("div",{className:m.Z.info},d),a.createElement(T.D,null),a.createElement("div",{className:m.Z.terms},o&&0!==Object.keys(o).length&&a.createElement(G,{termsText:o})))})))},"./src/widgets/DVWebNodeDetail/components/productMetaInfo/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const n={bundles:[a.R.ATF,a.R.BTF],strings:["DV_TW_title_starring","DV_TW_title_actors","DV_TW_title_producers","DV_TW_title_genres","DV_TW_title_subtitles","DV_TW_title_languages","DV_TW_title_directors","DV_TW_title_studio","DV_TW_title_network","DV_TW_title_seasonyear","DV_TW_title_amr","DV_TW_title_content_descriptors","DV_DP_learn_more","DV_DP_ARIA_learn_more_amr","DV_comma_separator","DV_TW_title_purchaserights","DV_TW_title_devices","DV_TW_data_available_to_watch_devices","DV_TW_data_purchaserights_streaming","DV_TW_Detail_text","DV_TW_title_format","DV_TW_data_format_streaming","DV_TW_title_mpaarating","DV_TW_title_bbfcrating","DV_TW_title_fskrating","DV_TW_title_eirinrating","DV_DP_more_details","DV_DP_more_info","DV_DP_more_items","DV_brand_av","DV_WEB_DP_popover_purchase_rights","DV_DP_none_available"]}},"./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.tsx":(e,t,s)=>{"use strict";s.d(t,{h:()=>h});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Link.js"),r=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),o=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),l=s("./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/btfMorePurchaseOptions.tsx"),c=s("./src/widgets/DVWebNodeDetail/selectors/component/actionBoxComponentSelectors.ts"),d=s("./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.tsx"),u=s("./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.module.scss"),m=s("./node_modules/classnames/index.js");const p=({titleID:e,parameters:t,originalURI:s,isRetail:n})=>{const l=(0,o.P_)({parameters:t,originalURI:s,isRetail:n},e,"dv_dp_gc_sign_in"),c=(0,o.Md)({parameters:t,originalURI:s,isRetail:n},"dv_dp_gc_sign_in",l);return a.createElement(i.Link,{href:c},a.createElement(r.H1,{stringID:"AVOD_DP_redeem_gift_card_or_promotion"}))},g=(...e)=>{e.forEach((e=>e&&e()))},h=(0,n.$j)((e=>(0,c.KL)(e)))((({isRedeemAndPromoRestricted:e,hasTvodWinnerOffer:t,titleID:s,isLiveEvent:n,moreWaysToWatch:i,placement:r,closeModal:o,requestContext:{isRecognizedCustomer:c,queryParameters:h,originalURI:v,isRetail:b},toggleGiftCardModal:D})=>!b||e||n||"ActionBox"===r&&(!t||(0,l.TA)(i))?null:a.createElement("div",{className:m(u.Z.redeemAndPromoLink,"dv-gift-card-wrapper")},c?a.createElement(d.yv,{openModal:()=>g(o,D)}):a.createElement(p,{titleID:s,parameters:h,originalURI:v,isRetail:b}))))},"./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const n={bundles:[a.R.ATF,a.R.BTF],strings:["AVOD_DP_redeem_gift_card_or_promotion"]}},"./src/widgets/DVWebNodeDetail/components/refund/refund.tsx":(e,t,s)=>{"use strict";s.d(t,{N:()=>I});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Alert.js"),r=s("./node_modules/@amzn/dvui/dist/Text.js"),o=s("./src/widgets/DVWebNodeDetail/components/refund/refund.module.scss"),l=s("./src/widgets/DVWebNodeDetail/components/refund/refundDefault.module.scss"),c=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),d=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),u=s("./src/widgets/DVWebNodeDetail/actions/refund.ts"),m=s("./src/shared/utils/modalTrigger/ModalTrigger.tsx"),p=s("./node_modules/@amzn/dvui/dist/Button.js"),g=s("./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx"),h=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),v=s("./node_modules/classnames/index.js"),b=s("./node_modules/@amzn/dvui/dist/Link.js"),D=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),y=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),f=s("./src/shared/CS/components/Modal/Modal.tsx");function E(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w="av-atf-multiple-refund",_=(e,t,s)=>({string:t("DV_AB_CANCEL_ACCIDENTAL_PURCHASE"),attrs:{cancelLink:{href:e,...s}}});class T extends a.Component{constructor(e){super(e),E(this,"updateSelected",((e,t)=>{this.setState({selectedLink:e,selectedIdx:t})})),E(this,"convertRefundOrdersToLinks",(e=>e.map(((e,t)=>({text:e.description,isHighlighted:this.state.selectedIdx===t,href:`#${t}`,onClick:s=>{this.updateSelected(e.singleRefundLink,t),s.preventDefault()}}))))),E(this,"addReturnUrl",(e=>`${e}&return_to=/dp/${this.props.pageTitleId}`)),this.state={selectedIdx:0,selectedLink:e.refundableOrders[0].singleRefundLink}}render(){const{refundableOrders:e,getString:t}=this.props;if(1===e.length)return a.createElement(r.Text,{string:_(e[0].singleRefundLink,t)});{const s=a.createElement("strong",null," ",t("DV_RBB_CANCEL_PURCH_MODAL_HEADER")," "),n=a.createElement(a.Fragment,null,a.createElement("div",{className:`${l.Z.content}`}," ",t("DV_DP_you_multiple_orders_for_this_title")," "),a.createElement("div",null," ",t("DV_DP_choose_order_to_cancel")," "),a.createElement("div",{className:`${l.Z.dropList}`,"data-automation-id":"refund-drop-list"},a.createElement(g.x,{links:this.convertRefundOrdersToLinks(e),customDropListID:w})),a.createElement(p.PrimeButton,{href:this.addReturnUrl(this.state.selectedLink),className:l.Z.submitButton,"data-automation-id":"refund-submit-button"},t("DV_RBB_CANCEL_PURCH_MODAL_SUBMIT")));return a.createElement(m.i,{size:"xs",className:`${l.Z.modal}`,modalHeader:s,modalContent:n,toggle:({openModalClickHandler:e})=>a.createElement(x,{onClick:e,getString:t})})}}}const C=({refundableOrders:e,pageTitleId:t,getString:s})=>{const[n,i]=a.useState(0),[l,c]=a.useState(e[0].singleRefundLink),[d,u]=a.useState(!1);if(1===e.length)return a.createElement(r.Text,{string:_(e[0].singleRefundLink,s),className:o.Z.refundMessage});{const r=s("DV_RBB_CANCEL_PURCH_MODAL_HEADER"),v=a.createElement(a.Fragment,null,a.createElement("div",{className:`${o.Z.content}`},a.createElement("p",null,s("DV_DP_you_multiple_orders_for_this_title")),a.createElement("p",null,s("DV_DP_choose_order_to_cancel"))),a.createElement("div",{className:`${o.Z.dropList}`,"data-automation-id":"refund-drop-list"},a.createElement(g.x,{links:(h=e,h.map(((e,t)=>({text:e.description,isHighlighted:n===t,href:`#${t}`,onClick:s=>{c(e.singleRefundLink),i(t),s.preventDefault()}})))),customDropListID:w,className:o.Z.dropList})),a.createElement("div",null,a.createElement(p.PrimeButton,{href:(m=l,`${m}&return_to=/dp/${t}`),className:o.Z.submitButton,"data-automation-id":"refund-submit-button"},s("DV_RBB_CANCEL_PURCH_MODAL_SUBMIT"))));return a.createElement(a.Fragment,null,a.createElement(x,{onClick:()=>u(!0),getString:s,className:o.Z.refundMessage}),a.createElement(f.u,{titleText:r,body:v,isVisible:d,onRequestClose:()=>u(!1),disableFooter:!0,size:"s",testID:"atf-multiple-refund-model"}))}var m,h},x=({onClick:e,getString:t,className:s})=>{const n=t("DV_AB_CANCEL_ACCIDENTAL_PURCHASE"),i="{link|cancelLink}",r="{end}",o=n.indexOf(i),l=n.indexOf(r),c=n.substring(0,o),d=n.substring(o+i.length,l),u=n.substring(l+r.length);return a.createElement("span",{className:s},c&&a.createElement("span",null,c),a.createElement(b.Link,{href:"#",onClick:t=>e(t)},d),u&&a.createElement("span",null,u))},I=(0,h.n)((0,n.$j)(((e,{titleId:t})=>({refundFragment:e.refund.fragments[t],isRetail:(0,d.Iz)(e).isRetail,pageTitleId:t})),((e,{logger:t,titleId:s})=>({triggerRefund:()=>(0,u.YV)(e,t,s)})))((0,y.eB)((({refundFragment:e,isRetail:t,pageTitleId:s,triggerRefund:n,hasNextGenTheme:r})=>{const{getString:d}=a.useContext(D.h);if(!e||!e.refundableOrders||0===e.refundableOrders.length)return null;const u=r?a.Fragment:i.InfoAlert;return a.createElement("div",{className:v(r?void 0:l.Z.refundLink,c.Z.fullWidth,"refund-alert")},a.createElement(u,null,a.createElement("span",{className:c.Z.enablePointerEvents},t&&!r&&a.createElement(T,{refundableOrders:e.refundableOrders,pageTitleId:s,getString:d}),t&&r&&a.createElement(C,{refundableOrders:e.refundableOrders,pageTitleId:s,getString:d}),!t&&a.createElement(x,{onClick:n,getString:d,className:v(r?o.Z.refundMessage:void 0)}))))}))))},"./src/widgets/DVWebNodeDetail/components/refund/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const n={bundles:[a.R.ATF,a.R.BTF],strings:["DV_RBB_CANCEL_PURCH_MODAL_HEADER","DV_RBB_CANCEL_PURCH_MODAL_SUBMIT","DV_AB_CANCEL_ACCIDENTAL_PURCHASE","DV_DP_you_multiple_orders_for_this_title","DV_DP_choose_order_to_cancel"]}},"./src/widgets/DVWebNodeDetail/components/schedule/schedule.tsx":(e,t,s)=>{"use strict";s.d(t,{P:()=>d});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/components/error/withFatalCheck.tsx"),i=s("./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx"),r=s("./src/widgets/DVWebNodeDetail/components/schedule/schedule.module.scss"),o=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),l=s("./src/widgets/DVWebNodeDetail/components/schedule/scheduleItem.tsx");const c=(0,i.Y)((e=>{const{header:t,cardTitleIds:s,totalEpisodeSize:n,collectionType:i}=e;return 0===(s||[]).length?null:a.createElement("div",{className:o.Z.pageSection},t&&a.createElement("h1",{className:r.Z.header}," ",t," (",n,")"," "),a.createElement("ol",{className:r.Z.avScheduleList},s.map(((e,t)=>a.createElement(a.Fragment,{key:`schedule-fragment-${e}-${t}`},a.createElement(l.N,{idx:t,key:`schedule-item-${e}-${t}`,collectionType:i,titleId:e}))))))})),d=(0,n.O3)(c)},"./src/widgets/DVWebNodeDetail/components/schedule/scheduleItem.tsx":(e,t,s)=>{"use strict";s.d(t,{N:()=>D});var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/@amzn/dvui/dist/Badge.js"),r=s("./src/widgets/DVWebNodeDetail/components/episodePlayback/episodePlayback.tsx"),o=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),l=s("./src/widgets/DVWebNodeDetail/components/schedule/schedule.module.scss"),c=s("./src/widgets/DVWebNodeDetail/utils/widgetNameClasses.ts"),d=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),u=s("./src/widgets/DVWebNodeDetail/reducers/action.ts"),m=s("./src/widgets/DVWebNodeDetail/utils/liveState.ts"),p=s("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),g=s("./src/widgets/DVWebNodeDetail/selectors/player.ts"),h=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");const v=({idx:e,detail:t,action:s,titleId:n,playerConfigData:i,isMShop:l})=>{if(d=s,!Boolean(d&&(0,o.MG)(d.playbackActions)))return a.createElement(a.Fragment,null,t.title);var d;const u={title:t.title,playbackActions:s&&s.playbackActions,entityType:t.entityType,playerConfigData:i,titleId:n,purchaseDetails:null,isRefunding:!1,isMShop:l};return a.createElement("div",{className:"js-sch-ep-playback-wrapper"},a.createElement("div",{"data-automation-id":`sch-ep-title-${e}`,className:`${c.t.playback} js-schedule-episode schedule-playback-wrapper`},a.createElement(r.s,u)))},b=({startTime:e,liveState:t})=>t?(0,m.Zz)(t.id)?a.createElement(a.Fragment,null,e):t.isLive?a.createElement("div",null," ",a.createElement(i.Badge,{use:i.badges.LIVE}," ",t.text," ")," "):(0,m.dn)(t.id)?a.createElement("div",null," ",a.createElement(i.Badge,{use:i.badges.CRITICAL}," ",t.text," ")," "):a.createElement("div",null," ",a.createElement(i.Badge,{use:i.badges.TEXT}," ",t.text," ")," "):null,D=(0,n.$j)(((e,t)=>({action:e.action[u.L5][t.titleId],playerConfigData:(0,g.UH)(e),detail:e.detail[p.Xt][t.titleId],requestContext:(0,d.Iz)(e),isMShop:(0,h.gK)(e)})))((({requestContext:{sessionID:e},playerConfigData:t,collectionType:s,idx:n,action:i,detail:r,titleId:o,isMShop:c})=>{const{liveState:d,startDate:u="",startTime:m=""}=r,p={sessionID:e,idx:n,detail:r,playerConfigData:t,action:i,titleId:o,isMShop:c},g=(e=>{var t,s;return null==e||null===(t=e.notificationActions)||void 0===t||null===(s=t.find((e=>"CRITICAL"===e.severity)))||void 0===s?void 0:s.shortMessage})(i);return a.createElement("li",{id:`av-ep-${s}${n}`,className:l.Z.avScheduleItem},a.createElement("div",{className:l.Z.avScheduleItemCol},a.createElement(v,p)),g?a.createElement("div",{className:`${l.Z.avScheduleItemCol} ${l.Z.scheduleRestrictedMessage}`},g):a.createElement(a.Fragment,null,a.createElement("div",{className:`${l.Z.avScheduleItemCol} ${l.Z.scheduleDateBadge}`},u),a.createElement("div",{className:`${l.Z.avScheduleItemCol} ${l.Z.scheduleTimeBadge}`},a.createElement(b,{startTime:m,liveState:d}))))}))},"./src/widgets/DVWebNodeDetail/components/schedule/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_live_badge_text"]}},"./src/widgets/DVWebNodeDetail/components/seasonSelector/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["AVOD_DP_season_selector","DV_DP_ARIA_season_selector"]}},"./src/widgets/DVWebNodeDetail/components/stack/stack.tsx":(e,t,s)=>{"use strict";s.d(t,{E:()=>c,K:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s("./src/widgets/DVWebNodeDetail/components/stack/stack.module.scss");const r={100:"s100",200:"s200",300:"s300",400:"s400",500:"s500",600:"s600",700:"s700",800:"s800"},o={100:"padding-s100",200:"padding-s200",300:"padding-s300",400:"padding-s400",500:"padding-s500",600:"padding-s600",700:"padding-s700",800:"padding-s800"},l=({children:e,className:t,padding:s=0,spacing:l=400})=>{const c=n(i.Z.stack,i.Z[r[l]],t,{[i.Z[o[s]]]:!!o[s]});return a.createElement("div",{className:c},e)},c=({children:e,className:t,padding:s=0,spacing:l=400})=>{const c=n(i.Z.stackHorizontal,i.Z[r[l]],t,{[i.Z[o[s]]]:!!o[s]});return a.createElement("div",{className:c},e)}},"./src/widgets/DVWebNodeDetail/components/synopsis/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_DP_see_more"]}},"./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.tsx":(e,t,s)=>{"use strict";s.d(t,{GR:()=>u,Lx:()=>m});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Expander.js"),i=s("./src/widgets/DVWebNodeDetail/components/decodedText/decodedText.tsx"),r=s("./node_modules/@amzn/dvui/dist/Modal.js"),o=s("./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.module.scss"),l=s("./node_modules/classnames/index.js"),c=s.n(l),d=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");const u=({synopsis:e,numOfLines:t=3,expanderId:s="synopsisExpander",className:r,isExpanded:l})=>e?a.createElement("div",{className:`${d.Z.fullWidth} ${o.Z.btfSynopsis}`,"data-automation-id":s},a.createElement(n.Expander,{className:c()(o.Z.synopsis,r),numOfLines:t,uniqueId:s,isExpanded:l},a.createElement(i.v,{string:e,dir:"auto"}))):null,m=({synopsis:e,modalId:t,header:s})=>{if(!e)return null;const n=a.createRef();return a.createElement(a.Fragment,null,a.createElement("div",{className:o.Z.synopsisModalWrapper,onClick:()=>{var e;null===(e=n.current)||void 0===e||e.open()}},a.createElement("p",{className:o.Z.synopsisContent},e)),a.createElement(r.Modal,{className:o.Z.synopsisModal,ref:n,header:a.createElement("h2",{className:o.Z.synopsisModalHeading},s),modalId:t},a.createElement("p",null,e)))}},"./src/widgets/DVWebNodeDetail/components/tabs/btfTabsDefault.tsx":(e,t,s)=>{"use strict";var a=s("./node_modules/react/index.js"),n=s("./node_modules/react-redux/es/index.js"),i=s("./src/widgets/DVWebNodeDetail/components/tabs/btfTabsDefault.module.scss"),r=s("./node_modules/@amzn/dv-web-node-reftags/index.js"),o=s("./node_modules/@amzn/dvui/dist/Container.js"),l=s("./node_modules/classnames/index.js"),c=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),d=s("./src/shared/utils/utils.ts"),u=s("./src/widgets/DVWebNodeDetail/components/collectionTabs/collectionTabs.tsx"),m=s("./src/widgets/DVWebNodeDetail/components/carousel/carousel.tsx"),p=s("./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormats.tsx"),g=s("./src/widgets/DVWebNodeDetail/components/castAndCrew/castAndCrew.tsx"),h=s("./src/widgets/DVWebNodeDetail/components/productMetaInfo/btfProductMetaInfo.tsx"),v=s("./src/widgets/DVWebNodeDetail/components/extrasTab/extrasTab.tsx"),b=s("./src/widgets/DVWebNodeDetail/selectors/collections.ts"),D=s("./src/widgets/DVWebNodeDetail/selectors/carousel.ts"),y=s("./src/widgets/DVWebNodeDetail/selectors/otherFormats.ts"),f=s("./src/widgets/DVWebNodeDetail/selectors/castAndCrew.ts"),E=s("./src/widgets/DVWebNodeDetail/selectors/productDetails.ts"),w=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),_=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),T=s("./src/widgets/DVWebNodeDetail/selectors/extrasTab.ts"),C=s("./src/widgets/DVWebNodeDetail/components/exploreTab/exploreTab.tsx"),x=s("./src/widgets/DVWebNodeDetail/selectors/exploreTab.ts"),I=s("./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx"),N=s("./src/widgets/DVWebNodeDetail/selectors/reviews.ts"),P=s("./src/widgets/Explore/Nav/RetailNav/utils.ts"),k=s("./src/widgets/DVWebNodeDetail/components/tabs/lazyTab.tsx"),S=s("./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviews.tsx");function V(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let W=function(e){return e.EPISODES_TAB_ID="episodes",e.EXPLORE_TAB_ID="explore",e.RELATED_TAB_ID="related",e.DETAILS_TAB_ID="details",e.EXTRAS_TAB_ID="extras",e}({});const A=[W.EPISODES_TAB_ID,W.EXPLORE_TAB_ID,W.EXTRAS_TAB_ID,W.RELATED_TAB_ID,W.DETAILS_TAB_ID];class R extends a.Component{constructor(e){var t,s;super(e),V(this,"navHeight",void 0),V(this,"navIo",void 0),V(this,"navRef",void 0),V(this,"tabEnabledMap",(({showTabCollections:e,showCarousels:t,showOtherFormats:s,showCastAndCrew:a,showProductDetails:n,showExploreTab:i,showReviews:r,showExtras:o})=>({[W.EPISODES_TAB_ID]:e,[W.EXPLORE_TAB_ID]:i,[W.EXTRAS_TAB_ID]:o,[W.RELATED_TAB_ID]:t||a,[W.DETAILS_TAB_ID]:n||s||r}))(this.props)),V(this,"queryTabId",(e=>{const t=e.tab?e.tab[0]:void 0;return Object.values(W).includes(t)?t:void 0})(this.props.queryParameters)),V(this,"defaultTabId",(t=this.tabEnabledMap,(s=this.queryTabId)&&t[s]?s:t[W.EXPLORE_TAB_ID]?W.EXPLORE_TAB_ID:A.find((e=>t[e]))||"")),V(this,"defaultTab",`${k.$}${this.defaultTabId}`),this.navRef=a.createRef(),this.state={selectedTab:this.defaultTab,navIsActive:!1,pvNavSticky:!1}}componentDidMount(){if(!this.props.disableStickyBtfTab){var e,t;const s=document.getElementById("pv-nav"),a=this.props.isPhablet?0:60;this.navHeight=s&&s.getBoundingClientRect()&&s.getBoundingClientRect().height||a,this.navIo=new IntersectionObserver((([e])=>{const t=Boolean(s)||!this.props.isPhablet&&(0,P.n)();this.setState({navIsActive:!e.isIntersecting,pvNavSticky:t})}),{rootMargin:`-${this.navHeight}px`,threshold:1}),null!=this&&null!==(e=this.navIo)&&void 0!==e&&e.observe&&null!=this&&null!==(t=this.navRef)&&void 0!==t&&t.current&&this.navIo.observe(this.navRef.current)}this.navRef&&this.navRef.current&&this.queryTabId&&this.tabEnabledMap[this.queryTabId]&&this.moveToSelected()}componentWillUnmount(){var e,t;null!=this&&null!==(e=this.navIo)&&void 0!==e&&e.unobserve&&null!=this&&null!==(t=this.navRef)&&void 0!==t&&t.current&&this.navIo.unobserve(this.navRef.current)}moveToSelected(){const e=this.navRef.current.getBoundingClientRect().top-this.navHeight+5;window.scrollBy({top:Math.ceil(e),behavior:"smooth"})}setSelectedAndScroll(e){const t=`${k.$}${e}`;this.moveToSelected(),this.setState({selectedTab:t})}getTabs(){const e="hor",t=a.createElement(a.Fragment,null,a.createElement(h.W,null),a.createElement(p.D,null),this.props.showReviews&&a.createElement(S.G,null)),s=this.tabEnabledMap[W.EPISODES_TAB_ID]&&{header:a.createElement(c.H1,{stringID:"DV_DP_TAB_episodes"}),content:a.createElement(u.c,null),refTag:(0,r.i)("atv_dp_btf_tab_{tabType}_ep",{tabType:e}),automationId:"btf-episodes-tab",tabId:W.EPISODES_TAB_ID},n=this.tabEnabledMap[W.EXPLORE_TAB_ID]&&{header:a.createElement(c.H1,{stringID:"DV_DP_TAB_explore"}),content:a.createElement(C.g,null),refTag:(0,r.i)("atv_dp_btf_tab_{tabType}_exp",{tabType:e}),automationId:"btf-explore-tab",tabId:W.EXPLORE_TAB_ID},o=this.tabEnabledMap[W.RELATED_TAB_ID]&&{header:a.createElement(c.H1,{stringID:"DV_DP_TAB_related"}),content:a.createElement("div",{className:l({[i.Z.relatedTabWrapper]:!this.props.isRetail})},a.createElement(m.B,null),a.createElement(g.B,null)),refTag:(0,r.i)("atv_dp_btf_tab_{tabType}_rel",{tabType:e}),automationId:"btf-related-tab",tabId:W.RELATED_TAB_ID},d=this.tabEnabledMap[W.DETAILS_TAB_ID]&&{header:a.createElement(c.H1,{stringID:"DV_DP_TAB_details"}),content:t,refTag:(0,r.i)("atv_dp_btf_tab_{tabType}_det",{tabType:e}),automationId:"btf-details-tab",tabId:W.DETAILS_TAB_ID};return[s,n,this.tabEnabledMap[W.EXTRAS_TAB_ID]&&{header:a.createElement(c.H1,{stringID:"DV_DP_TAB_extras"}),content:a.createElement(v.d,null),refTag:(0,r.i)("atv_dp_btf_tab_{tabType}_ext",{tabType:e}),automationId:"btf-extras-tab",tabId:W.EXTRAS_TAB_ID},o,d].filter(Boolean)}render(){const e=this.getTabs(),{selectedTab:t}=this.state;if((0,d.xb)(e))return null;const s=e.map(((e,s)=>{const n=`${k.$}${e.tabId}`===t;return a.createElement(a.Fragment,{key:`btf-content-${s}`},a.createElement("input",{id:`tab-selector-${e.tabId}`,name:"btf-content-selector",className:i.Z.tabSelector,type:"radio",defaultChecked:n,onClick:()=>this.setSelectedAndScroll(e.tabId)}),a.createElement(k.j,{tabId:e.tabId,isVisible:n,isLazy:!1},e.content))})),n=a.createElement("div",{className:l(i.Z.nav,{[i.Z.stickyNav]:this.state.navIsActive&&this.navRef.current.getBoundingClientRect().top-this.navHeight<0,[i.Z.isPVNavNotSticky]:!this.state.pvNavSticky,[i.Z.isWinApp]:!1})},a.createElement(o.Container,null,a.createElement("div",{className:i.Z.headers},e.map(((e,t)=>a.createElement("h2",{key:`btf-nav-${t}`,className:i.Z.headerWrapper},a.createElement(I._,{refTag:e.refTag},a.createElement("label",{className:l(i.Z.header,{[i.Z.isSelected]:this.state.selectedTab===`${k.$}${e.tabId}`}),htmlFor:`tab-selector-${e.tabId}`,"data-automation-id":e.automationId},e.header))))))));return a.createElement("div",null,a.createElement("div",{ref:this.navRef}),n,a.createElement("div",{className:i.Z.contentWrapperTabbed},s))}}(0,n.$j)((e=>({showTabCollections:(0,b.gy)(e),showCarousels:(0,D.i)(e),showOtherFormats:(0,y.$)(e),showCastAndCrew:(0,f.s)(e),showProductDetails:(0,E.W)(e),showExploreTab:(0,x.E)(e),showReviews:(0,N.M)(e),showExtras:(0,T.C)(e),isPhablet:(0,w.G_)(e),isRetail:(0,_.T_)(e),disableStickyBtfTab:(0,w.Fk)(e),queryParameters:(0,_.$s)(e)})))(R)},"./src/widgets/DVWebNodeDetail/components/tabs/lazyTab.tsx":(e,t,s)=>{"use strict";s.d(t,{$:()=>l,j:()=>c});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),i=s("./src/widgets/DVWebNodeDetail/components/tabs/btfTabs.module.scss"),r=s("./src/widgets/DVWebNodeDetail/components/tabs/btfTabsDefault.module.scss"),o=s("./node_modules/classnames/index.js");const l="tab-content-",c=({tabId:e,isVisible:t,isLazy:s,children:c,tabClassName:d})=>{const{detailPageTheme:u}=a.useContext(n.kw),m=u===n.wS.Default,[p,g]=a.useState(t||!s);return t&&!p&&g(!0),a.createElement("div",{className:o(m?r.Z.tab:i.Z.tab,d),id:`${l}${e}`},p&&c)}},"./src/widgets/DVWebNodeDetail/components/tabs/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_TAB_episodes","DV_DP_TAB_explore","DV_DP_TAB_extras","DV_DP_TAB_related","DV_DP_TAB_details","DV_DP_ARIA_next_tab"]}},"./src/widgets/DVWebNodeDetail/components/uiBanner/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["DV_DP_WP_ERROR_HEADING","DV_DP_WP_ERROR","DV_DP_WP_END_HEADING","DV_DP_WP_END","DV_DP_WP_STREAM_ENDED","DV_DP_WP_CREATE_INELIGIBLE_HEADING","DV_DP_WP_CREATE_INELIGIBLE","DV_DP_WP_CREATE_INELIGIBLE_TVOD","DV_DP_WP_CREATE_INELIGIBLE_SVOD_TVOD","DV_DP_WP_JOIN_INELIGIBLE_HEADING","DV_DP_WP_JOIN_INELIGIBLE","DV_DP_WP_JOIN_INELIGIBLE_TVOD","DV_DP_WP_JOIN_INELIGIBLE_SVOD_TVOD","DV_DP_WP_GEO_RESTRICTION_HEADING","DV_DP_WP_GEO_RESTRICTION","DV_DP_WP_UNSUPPORTED_BROWSER_HEADING","DV_DP_WP_UNSUPPORTED_BROWSER","DV_DP_WP_UNSUPPORTED_CHAT_HEADING","DV_DP_WP_UNSUPPORTED_CHAT","DV_DP_WP_BANNED_SPECIFIC_CHAT_HEADING","DV_DP_WP_BANNED_SPECIFIC_CHAT","DV_DP_WP_SAFARI_MAC_UNSUPPORTED_HEADING","DV_DP_WP_SAFARI_MAC_UNSUPPORTED_BODY","DV_CR_review_submission_processing","DV_CR_review_submission_success"]}},"./src/widgets/DVWebNodeDetail/components/watchPartyLink/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>n});var a=s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts");const n={bundles:[a.R.ATF,a.R.BTF],strings:["DV_DP_CREATE_WATCH_PARTY","DV_DP_WATCH_PARTY_TOOLTIP","DV_DP_WATCH_PARTY_FTUE_HEADER","DV_DP_WATCH_PARTY_FTUE_BODY","DV_WEB_WATCHPARTY_LABEL"]}},"./src/widgets/DVWebNodeDetail/components/watchPartyLink/watchPartyLink.tsx":(e,t,s)=>{"use strict";s.d(t,{vY:()=>_});var a=s("./node_modules/react/index.js"),n=s("./node_modules/classnames/index.js"),i=s("./node_modules/@amzn/dvui/dist/Button.js"),r=s("./node_modules/@amzn/dvui/dist/Text.js"),o=s("./node_modules/@amzn/dvui/dist/Tooltip.js"),l=s("./node_modules/@amzn/dvui/dist/Callout.js"),c=s("./node_modules/@amzn/dvui/dist/Icons/WatchParty.js"),d=s("./src/widgets/DVWebNodeDetail/components/watchPartyLink/watchPartyLink.module.scss"),u=s("./src/widgets/DVWebNodeDetail/utils/actionForm.tsx"),m=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),p=s("./src/util/wrappers/ArgsContext.tsx"),g=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts"),h=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss"),v=s("./src/widgets/DVWebNodeDetail/context/themeContext.tsx"),b=s("./node_modules/@amzn/dvui/dist/IconButton.js");function D(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const y=({isButton:e,buttonClassName:t})=>{const{getString:s}=a.useContext(g.h);return e?a.createElement(i.Button,{className:d.Z.circularButton,"aria-label":s("DV_DP_CREATE_WATCH_PARTY"),testID:"watch-party-link",type:"submit"},a.createElement("span",{className:d.Z.icon},a.createElement(c.WatchParty,null))):a.createElement("button",{className:n(d.Z.submit,t),"data-automation-id":"watch-party-link"},a.createElement(m.H1,{stringID:"DV_DP_CREATE_WATCH_PARTY"}))};class f extends a.PureComponent{constructor(...e){super(...e),D(this,"state",{showFTUE:!1}),D(this,"onFTUEDismiss",(()=>{localStorage.setItem(f.WP_FTUE_DISMISSED,f.WP_FTUE_DISMISSED_VALUE)}))}componentDidMount(){const{queryParameters:e}=this.props.context,t=localStorage.getItem(f.WP_FTUE_DISMISSED)===f.WP_FTUE_DISMISSED_VALUE||!1,s=localStorage.getItem(f.WP_FTUE_SHOWN_COUNTER),a=s?parseInt(s):0,n=e.ref_&&e.ref_[0]||"";if(!t&&a<f.WP_FTUE_MAX_TIMES_SHOWN||n.startsWith(f.WP_FTUE_REFTAG_PREFIX)){const e=a+1;localStorage.setItem(f.WP_FTUE_SHOWN_COUNTER,e.toString()),this.setState({showFTUE:!0})}}render(){const{header:e,body:t}=this.props;return this.state.showFTUE?a.createElement("div",{className:`${d.Z.ftueContainer} ${h.Z.enablePointerEvents}`},a.createElement(l.Callout,{position:"bottom",size:"m",use:"info",className:n(d.Z.tooltip,"wp-ftue-tooltip"),content:a.createElement(w,{header:e,body:t}),startOpen:!0,onDismiss:this.onFTUEDismiss})):null}}D(f,"WP_FTUE_SHOWN_COUNTER","dvWebWPFtueShownCounter"),D(f,"WP_FTUE_DISMISSED","dvWebWPFtueDismissed"),D(f,"WP_FTUE_REFTAG_PREFIX","atv_wp_merch_"),D(f,"WP_FTUE_DISMISSED_VALUE","true"),D(f,"WP_FTUE_MAX_TIMES_SHOWN",3);const E=(0,p.s6)(f),w=({header:e,body:t})=>a.createElement(a.Fragment,null,a.createElement(r.Text,{tag:"h3",className:d.Z.ftueHeader,string:e}),a.createElement(r.Text,{tag:"p",className:d.Z.ftueBody,string:t})),_=(0,v.eB)((({watchPartyAction:e,withFTUETooltip:t,buttonOrLinkProps:s,containerRef:i,hasDefaultTheme:r})=>{const{getString:l}=a.useContext(g.h);if(!e)return null;const{endpoint:{partialURL:p,query:v}}=e,D=p;return a.createElement(u.y,{action:D,method:"POST",hiddenInputs:v,className:n(h.Z.enablePointerEvents,d.Z.buttonFormWrapper,r?d.Z.formSpacing:"","dv-dp-node-watchparty")},r?a.createElement(a.Fragment,null,a.createElement(o.Tooltip,{position:"top",size:"s",className:n(d.Z.tooltip,"wp-hover-tooltip",d.Z.watchPartyTooltip),content:l("DV_DP_WATCH_PARTY_TOOLTIP"),id:s&&s.isButton?"dv-dp-node-watchparty-button-tooltip":void 0,containerRef:i},a.createElement(y,s)),t&&a.createElement(E,{header:l("DV_DP_WATCH_PARTY_FTUE_HEADER"),body:l("DV_DP_WATCH_PARTY_FTUE_BODY")}),a.createElement("span",{className:d.Z.buttonLabel},a.createElement(m.H1,{stringID:"DV_DP_CREATE_WATCH_PARTY"}))):a.createElement(b.IconButton,{icon:a.createElement(c.WatchParty,null),ariaLabel:l("DV_DP_WATCH_PARTY_TOOLTIP"),label:l("DV_WEB_WATCHPARTY_LABEL"),showLabelOnTouchDevices:!0}))}))},"./src/widgets/DVWebNodeDetail/components/watchlist/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.ATF],strings:["AVOD_DP_season_selector","DV_DP_Watchlist_toggle_label","DV_DP_WL_removeMovie","DV_DP_WL_removeTv","DV_DP_WL_addMovie","DV_DP_WL_addTv","DV_DP_WL_addTvProcessing","DV_DP_WL_removeTvProcessing","AVOD_WL_error_msg","DV_DP_WL_watchlist","DV_WEB_WATCHLIST_LABEL"]}},"./src/widgets/DVWebNodeDetail/context/modalContext.tsx":(e,t,s)=>{"use strict";s.d(t,{t:()=>a});const a=s("./node_modules/react/index.js").createContext({})},"./src/widgets/DVWebNodeDetail/context/themeContext.tsx":(e,t,s)=>{"use strict";s.d(t,{QI:()=>c,eB:()=>l,kw:()=>o,wS:()=>i});var a=s("./node_modules/react/index.js");function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},n.apply(this,arguments)}let i=function(e){return e.Default="Default",e.NextGen="NextGen",e}({});const r={detailPageTheme:i.Default},o=a.createContext(r),l=e=>t=>a.createElement(o.Consumer,null,(s=>{const r=!s.detailPageTheme||s.detailPageTheme===i.Default,o=s.detailPageTheme===i.NextGen;return a.createElement(e,n({},t,{detailPageTheme:s.detailPageTheme,hasDefaultTheme:r,hasNextGenTheme:o}))})),c=(e,t)=>s=>a.createElement(o.Consumer,null,(({detailPageTheme:n})=>n===i.Default?a.createElement(e,s):a.createElement(t,s)))},"./src/widgets/DVWebNodeDetail/context/withLogger.tsx":(e,t,s)=>{"use strict";s.d(t,{n:()=>r});var a=s("./node_modules/react/index.js"),n=s("./src/util/wrappers/LoggersContext.tsx");function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},i.apply(this,arguments)}const r=e=>t=>a.createElement(n.jW,null,(({logger:s})=>a.createElement(e,i({},t,{logger:s}))))},"./src/widgets/DVWebNodeDetail/data/bannerMessages.ts":(e,t,s)=>{"use strict";s.d(t,{Y:()=>l});var a=s("./node_modules/@amzn/dvui/dist/Block.js"),n=s("./node_modules/@amzn/dv-web-node-reftags/index.js"),i=s("./src/shared/DetailPage/banner/messageCodes.ts");const r=e=>({learnMore:{href:`/watchpartylearn/ref=${e}`}}),o={learnMore:{href:`/help/watchparty/communityguidelines/ref=${(0,n.i)("atv_dp_wp_guid")}`}},l={[i.q.WP_ERROR]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_ERROR_HEADING",body:"DV_DP_WP_ERROR",automationId:"wp-error-banner"},[i.q.WP_END]:{type:a.MessageTypes.info,heading:"DV_DP_WP_END_HEADING",body:"DV_DP_WP_END",automationId:"wp-end-banner"},[i.q.WP_STREAM_ENDED]:{type:a.MessageTypes.info,heading:"DV_DP_WP_END_HEADING",body:"DV_DP_WP_STREAM_ENDED",automationId:"wp-stream-end-banner"},[i.q.WP_CREATE_INELIGIBLE]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE",dvStringAttrs:r("atv_dp_wp_cr_in_learn"),automationId:"wp-create-ineligible-banner"},[i.q.WP_JOIN_INELIGIBLE]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE",dvStringAttrs:r("atv_dp_wp_jn_in_learn"),automationId:"wp-join-ineligible-banner"},[i.q.WP_GEO_RESTRICTION]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_GEO_RESTRICTION_HEADING",body:"DV_DP_WP_GEO_RESTRICTION",automationId:"wp-geo-restriction-banner"},[i.q.WP_UNSUPPORTED_BROWSER]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_UNSUPPORTED_BROWSER_HEADING",body:"DV_DP_WP_UNSUPPORTED_BROWSER",dvStringAttrs:r("atv_dp_wp_ub_learn"),automationId:"wp-unsupported-browser-banner"},[i.q.WP_UNSUPPORTED_CHAT]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_UNSUPPORTED_CHAT_HEADING",body:"DV_DP_WP_UNSUPPORTED_CHAT",automationId:"wp-unsupported-chat-banner"},[i.q.WP_CREATE_INELIGIBLE_TVOD]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE_TVOD",dvStringAttrs:r("atv_dp_wp_cr_in_learn_t"),automationId:"wp-create-ineligible-banner"},[i.q.WP_JOIN_INELIGIBLE_TVOD]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE_TVOD",dvStringAttrs:r("atv_dp_wp_jn_in_learn_t"),automationId:"wp-join-ineligible-banner"},[i.q.WP_CREATE_INELIGIBLE_SVOD_TVOD]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_CREATE_INELIGIBLE_HEADING",body:"DV_DP_WP_CREATE_INELIGIBLE_SVOD_TVOD",dvStringAttrs:r("atv_dp_wp_cr_in_learn_st"),automationId:"wp-create-ineligible-banner"},[i.q.WP_JOIN_INELIGIBLE_SVOD_TVOD]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_JOIN_INELIGIBLE_HEADING",body:"DV_DP_WP_JOIN_INELIGIBLE_SVOD_TVOD",dvStringAttrs:r("atv_dp_wp_jn_in_learn_st"),automationId:"wp-join-ineligible-banner"},[i.q.WP_BANNED_SPECIFIC_CHAT]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_BANNED_SPECIFIC_CHAT_HEADING",body:"DV_DP_WP_BANNED_SPECIFIC_CHAT",dvStringAttrs:o,automationId:"wp-banned-specific-chat"},[i.q.WP_SAFARI_MAC_UNSUPPORTED]:{type:a.MessageTypes.warning,heading:"DV_DP_WP_SAFARI_MAC_UNSUPPORTED_HEADING",body:"DV_DP_WP_SAFARI_MAC_UNSUPPORTED_BODY",dvStringAttrs:r("atv_dp_wp_ub_learn"),automationId:"wp-mac-safai-unsupported"}}},"./src/widgets/DVWebNodeDetail/data/getDetailPageInputs.ts":(e,t,s)=>{"use strict";s.d(t,{F_:()=>l,eQ:()=>c,pV:()=>o});var a=s("./src/widgets/DVWebNodeDetail/components/collection/pagination.tsx"),n=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),i=s("./src/widgets/DVWebNodeDetail/components/episodeList/episodeList.tsx"),r=s("./src/widgets/DVWebNodeDetail/reducers/collections.ts");const o=({titleID:e,atfWidgets:t,isElcano:s})=>{const a={titleID:e,sections:["Atf"],isElcano:s};return t&&(a.widgets=(0,n.Dv)({atf:t})),a},l=e=>{const t=d();return c(e,t,i.mO,(e=>{const t=e&&e.episodeListSize&&e.episodeListSize[0];return t?(0,n.e$)(t):void 0})(e.context.queryParameters)||r.Wq)},c=(e,t,s,i)=>({...e,sections:["Btf"],widgets:(0,n.Dv)({btf:t}),widgetsConfig:(0,n.Dv)({episodes:{startIndex:s,pageSize:i},bonus:{startIndex:(0,a.Z_)(e.context.queryParameters,"bonus"),pageSize:a.L8}})}),d=()=>["Episodes","Bonus","Schedule","Highlights","Restrictions","ProductDetails","CastAndCrew","Restrictions","OtherFormats","Carousels"]},"./src/widgets/DVWebNodeDetail/data/normalize.ts":(e,t,s)=>{"use strict";s.d(t,{O7:()=>se,OS:()=>ie,cg:()=>ne,hV:()=>re});var a=s("./src/widgets/DVWebNodeDetail/reducers/action.ts"),n=s("./src/widgets/DVWebNodeDetail/reducers/detail.ts"),i=s("./src/util/logger/logger.ts"),r=s("./src/util/utils/htmlEncode.ts"),o=s("./src/util/types/wps/settings.ts"),l=s("./src/widgets/DVWebNodeDetail/reducers/devices.ts"),c=s("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts"),d=s("./node_modules/@amzn/av-experiment-token-js-library/index.js"),u=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),m=s("./src/widgets/DVWebNodeDetail/data/bannerMessages.ts"),p=s("./src/shared/DetailPage/queryParameters.ts"),g=s("./src/shared/DetailPage/banner/messageCodes.ts"),h=s("./src/widgets/DVWebNodeWatchParty/util/offerType.ts");const v=new i.Oc("DVWebNode:detail"),b=(e,t)=>{var s,a,i;return{[n.Xt]:(i={...D(t.widgets.titleContent),...D(t.widgets.carousel),...D(t.widgets.extras),...((null===(s=t.widgets.castAndCrew)||void 0===s?void 0:s.castAndCrews)||[]).reduce(((e,t)=>{var s;return null===(s=t.titleCollections)||void 0===s||s.cards.forEach((t=>f(t.titleID,t.detail,e))),e}),{}),...y(t.widgets.seasonSelector),...y(null===(a=t.widgets.bundleCarousel)||void 0===a?void 0:a.cards)},Object.entries(i).reduce(((e,[t,s])=>{const{catalogId:a,contributors:n,genres:i,enhancedSubtitles:r,images:o,isStarlightEnhanced:l,studios:c,...d}=s;return e[t]={...d,images:o&&{packshot:o.packshot,covershot:o.covershot}},e}),{})),[n.B6]:t.widgets.header?f(e,t.widgets.header.detail):{},[n.k5]:{...t.widgets.productDetails?f(e,t.widgets.productDetails.detail):{}}}},D=e=>(e||[]).reduce(((e,t)=>(t.cards.forEach((t=>f(t.titleID,t.detail,e))),e)),{}),y=e=>(e||[]).reduce(((e,t)=>f(t.titleID,t.detail,e)),{}),f=(e,{title:t,synopsis:s,...a},n={})=>(n[e]={title:(0,r.l_)(t),synopsis:s?(0,r.l_)(s):void 0,...a},n),E=(e,t)=>({...t.widgets.self?{[e]:t.widgets.self}:{},...(t.widgets.seasonSelector||[]).reduce(((e,t)=>(e[t.titleID]=t.self,e)),{}),...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.filter((e=>e.self)).forEach((t=>{e[t.titleID]=t.self})),e)),{}),...t.widgets.buybox&&t.widgets.buybox.bestTitleID&&t.widgets.buybox.bestSelf?{[t.widgets.buybox.bestTitleID]:t.widgets.buybox.bestSelf}:{}}),w=(e,t)=>({...t.widgets.header?{[e]:t.widgets.header.imdb}:{}}),_=(e,t)=>({...t.widgets.notification?{[e]:t.widgets.notification}:{}}),T=(e,t)=>({...t.widgets.seasonSelector?{[e]:t.widgets.seasonSelector.map((e=>({seasonId:e.titleID,seasonLink:e.seasonLink,seasonSelectorIcon:e.seasonSelectorIcon})))}:{}}),C=(e,t)=>({...t.widgets.buybox?{[e]:t.widgets.buybox.titleID}:{}}),x=(e,t)=>({...t.widgets.creative?{[e]:t.widgets.creative}:{}}),I=e=>e.widgets.pageContext,N=(e,t)=>({...t.widgets.restrictions?{[e]:t.widgets.restrictions}:{}}),P=(e,t)=>({...t.widgets.trailer?{[e]:t.widgets.trailer}:{}}),k=(e,t)=>({...t.widgets.watchlist?{[e]:t.widgets.watchlist}:{}}),S=e=>{var t;return{...(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),e)),{}),...(e.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),e)),{}),...((null===(t=e.widgets.castAndCrew)||void 0===t?void 0:t.castAndCrews)||[]).reduce(((e,t)=>{var s,a;return null===(s=t.titleCollections)||void 0===s||s.cards.filter((e=>e.watchlist)).forEach((t=>{e[t.titleID]=t.watchlist})),null===(a=t.castMemberContainer)||void 0===a||a.entities.filter((e=>e.titleID&&e.watchlistAction)).forEach((t=>{e[t.titleID]=t.watchlistAction})),e}),{}),...e.widgets.bundleCarousel&&e.widgets.bundleCarousel.cards||[].filter((e=>e.watchlist)).reduce(((e,t)=>(e[t.titleID]=t.watchlist,e)),{})}},V=(e,t)=>({[a.L5]:[...t.widgets.titleContent||[],...t.widgets.extras||[]].reduce(((e,t)=>(t.cards.forEach((t=>{t.action&&(e[t.titleID]=t.action)})),e)),{}),[a.t1]:t.widgets.buybox?{[e]:t.widgets.buybox.action}:{}}),W=(e,t)=>({fragments:{...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{t.refund&&(e[t.titleID]=t.refund)})),e)),{}),...(t.widgets.extras||[]).reduce(((e,t)=>(t.cards.forEach((t=>{t.refund&&(e[t.titleID]=t.refund)})),e)),{}),...t.widgets.buybox?{[e]:t.widgets.buybox.refund}:{}},refunding:null}),A=e=>{return{header:e.text,collectionType:(t=e.collectionType,t&&t.toLowerCase()||""),totalCardSize:e.totalCardSize,titleIds:e.cards.map((e=>e.titleID)),impressionData:e.impressionData};var t},R=(e,t)=>{var s,a,n;return null!==(s=t.widgets)&&void 0!==s&&s.titleContent&&(null===(a=t.widgets)||void 0===a||null===(n=a.titleContent)||void 0===n?void 0:n.length)>0?{[e]:t.widgets.titleContent.map((e=>A(e)))}:{}},L=(e,t)=>{var s,a,n;return null!==(s=t.widgets)&&void 0!==s&&s.extras&&(null===(a=t.widgets)||void 0===a||null===(n=a.extras)||void 0===n?void 0:n.length)>0?{[e]:t.widgets.extras.map((e=>A(e)))}:{}},B=(e,t)=>{var s,a,n;return null!==(s=t.widgets)&&void 0!==s&&s.carousel&&(null===(a=t.widgets)||void 0===a||null===(n=a.carousel)||void 0===n?void 0:n.length)>0?{[e]:t.widgets.carousel.map((e=>A(e)))}:{}},M=e=>(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.reduce(((e,t)=>(t.impressionAnalytics&&(e[t.titleID]=t.impressionAnalytics),e)),e),e)),{}),O=e=>(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.reduce(((e,t)=>(t.entitlementCue&&(e[t.titleID]=t.entitlementCue),e)),e),e)),{}),j=(e,t)=>t.widgets.bundleCarousel?{[e]:A(t.widgets.bundleCarousel)}:{},F=(e,t,s)=>{const{widgets:{banner:a,buybox:n}}=t;return{crow:a?{[e]:a}:{},ui:H(s,n&&n.action&&n.action.watchPartyAction&&n.action.watchPartyAction.watchPartyOfferType||h.m.SVOD)}},H=(e,t)=>{const s=(e.queryParameters[p.pN]||[]).join("").toUpperCase();let a;switch(s){case g.q.WP_CREATE_INELIGIBLE:a=t===h.m.TVOD?g.q.WP_CREATE_INELIGIBLE_TVOD:t===h.m.SVOD_TVOD?g.q.WP_CREATE_INELIGIBLE_SVOD_TVOD:g.q.WP_CREATE_INELIGIBLE;break;case g.q.WP_JOIN_INELIGIBLE_SVOD_TVOD:a=g.q.WP_JOIN_INELIGIBLE_SVOD_TVOD;break;case g.q.WP_JOIN_INELIGIBLE:case g.q.WP_JOIN_INELIGIBLE_TVOD:default:a=s}const n=m.Y[a];return n?{type:n.type,headingStringId:n.heading,stringId:n.body,dvStringAttrs:n.dvStringAttrs,automationId:n.automationId}:null},U=e=>{var t;return{...(e.widgets.carousel||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{}),...(e.widgets.extras||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{}),...((null===(t=e.widgets.castAndCrew)||void 0===t?void 0:t.castAndCrews)||[]).reduce(((e,t)=>{var s,a;return null===(s=t.titleCollections)||void 0===s||s.cards.filter((e=>e.pageLink)).forEach((t=>{e[t.titleID]=t.pageLink})),null===(a=t.castMemberContainer)||void 0===a||a.entities.filter((e=>{var t;return e.titleID&&(null===(t=e.link)||void 0===t?void 0:t.url)})).forEach((t=>{var s;e[t.titleID]=null===(s=t.link)||void 0===s?void 0:s.url})),e}),{}),...(e.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.pageLink})),e)),{})}},Z=(e,t)=>({...t.widgets.castAndCrew?{[e]:{...t.widgets.castAndCrew,castAndCrews:t.widgets.castAndCrew.castAndCrews.map((({cast:e,titleCollections:t,castMemberContainer:s})=>({cast:e,titles:[...(null==t?void 0:t.cards)||(null==s?void 0:s.entities)||[]].map((({titleID:e})=>e)),container:s})))}}:{}}),z=(e,t)=>({...t.widgets.containers&&t.widgets.containers.length>0?{[e]:t.widgets.containers}:{}}),q=(e,t)=>({...t.widgets.otherFormats?{[e]:t.widgets.otherFormats}:{}}),$=e=>e.widgets.bottomBar,G=(e,t)=>t.widgets.buybox&&t.widgets.buybox.action&&t.widgets.buybox.action.experimentToken?K(t.widgets.buybox.action.experimentToken,e):{},Q=(e,t)=>({...t.widgets.buybox?{[e]:Boolean(t.widgets.buybox.isComingSoon)}:{}}),Y=(e,t)=>t.widgets.productDetails?{[e]:t.widgets.productDetails.metadata,...(t.widgets.titleContent||[]).reduce(((e,t)=>(t.cards.forEach((t=>{e[t.titleID]=t.metadata})),e)),{})}:{...t.widgets.metadata?{[e]:t.widgets.metadata}:{}},K=(e,t)=>{const s=new d.ExperimentTokenHelper,a=(()=>{try{return s.decode(e)}catch(e){return void v.count(`${u.EZ}::ExperimentTokenCallFailure`,1,!1)}})();return a?{[t]:{...X(a.pvCinemaToken),...J(a.cancellationWinbackToken)}}:{}},X=e=>{const t=e&&e.brandingMessage,s=e&&e.logoUrl;return e?{pvCinemaToken:{message:(0,c.e6)(t),logoUrl:s}}:{}},J=e=>{const t=e&&e.cancellationWinbackStringInfo;return t?{cancellationWinbackToken:{cancellationWinbackStringInfo:{label:t.label,confirmationLabel:t.confirmationLabel,cancellationLabel:t.cancellationLabel,playbackLabel:t.playbackLabel,modalMessage:t.modalMessage},enrollmentId:e.enrollmentId,csrfToken:e.csrfToken}}:{}},ee=(e,t)=>({...t.widgets.autoplayHero?{[e]:t.widgets.autoplayHero}:{}}),te=e=>e.widgets.playbackIntegration?e.widgets.playbackIntegration:{},se=(e,t)=>{const s=ae(e);return{pageTitleId:s,detail:b(s,e),action:V(s,e),refund:W(s,e),imdb:w(s,e),bundleCarousel:j(s,e),buyboxTitleId:C(s,e),creative:x(s,e),banner:F(s,e,t),notification:_(s,e),seasons:T(s,e),self:E(s,e),trailer:P(s,e),watchlist:k(s,e),hoverWatchlist:S(e),restriction:N(s,e),collections:R(s,e),extras:L(s,e),carousel:B(s,e),pageLink:U(e),castAndCrew:Z(s,e),containers:z(s,e),otherFormats:q(s,e),pageContext:I(e),bottomBar:$(e),entitlementCue:O(e),tapsExperimentToken:G(s,e),autoplayHero:ee(s,e),playbackIntegration:te(e),comingSoon:Q(s,e),impressionAnalytics:M(e),metadata:Y(s,e),widgets:{[s]:e.sections},termsText:oe(e),bottomMenu:le(e)}},ae=e=>e&&e.widgets&&e.widgets.pageContext.pageTitleId,ne=e=>Object.keys(e.results).reduce(((t,s)=>{const{action:n,refund:i}=e.results[s];return t.action[a.L5][s]=n,t.refund.fragments[s]=i,t}),{action:{[a.t1]:{},[a.L5]:{}},refund:{fragments:{}}}),ie=(e,t)=>({watchlist:{...t.watchlistAction?{[e]:t.watchlistAction}:{}}}),re=e=>{let t=l.V;if(e&&e.widgets){const s=e.widgets.find((e=>e.widgetType===o.dV.DevicesWidget&&e.content));s&&(t=s.content.devices)}return{deviceEntries:t}},oe=e=>{var t;return null===(t=e.widgets.productDetails)||void 0===t?void 0:t.termsText},le=e=>{var t,s;return{feedbackSignInUrl:null===(t=e.widgets.productDetails)||void 0===t?void 0:t.feedbackSignInUrl,helpText:null===(s=e.widgets.productDetails)||void 0===s?void 0:s.helpText}}},"./src/widgets/DVWebNodeDetail/reducers/action.ts":(e,t,s)=>{"use strict";s.d(t,{I6:()=>m,L5:()=>l,t1:()=>o});var a=s("./src/widgets/DVWebNodeDetail/utils/reducer.ts"),n=s("./src/widgets/DVWebNodeDetail/actions/index.ts"),i=s("./node_modules/redux/es/redux.js"),r=s("./src/widgets/DVWebNodeDetail/utils/utils.ts");const o="atf",l="btf",c=(0,r.bc)([o,l]),d={},u=e=>(0,a.V)((t=>t.action&&t.action[e]),d,(e=>(t=d,s)=>{switch(s.type){case n.k.RefreshAtfActionBox:case n.k.RefreshBtfActionBoxes:case n.k.RefreshEpisode:return s.output&&s.output.action&&s.output.action[e]&&{...t,...s.output.action[e]}||t;default:return t}})(e)),m=(0,i.UY)(c.reduce(((e,t)=>(e[t]=u(t),e)),{}))},"./src/widgets/DVWebNodeDetail/reducers/collections.ts":(e,t,s)=>{"use strict";s.d(t,{I6:()=>c,Wq:()=>n});var a=s("./src/widgets/DVWebNodeDetail/actions/index.ts");const n=25,i={},r=["episodes","bonus"],o=(e,t)=>{t.reduce(((e,t)=>{if(t.collectionType)if(e[t.collectionType]){const s=e[t.collectionType].titleIds,a=(t.titleIds||[]).filter((e=>!(s||[]).includes(e)));e[t.collectionType]={...e[t.collectionType],titleIds:[...s,...a]}}else e[t.collectionType]={...t};return e}),e||{})},l=(e,t)=>{const s=Object.keys(e).reduce(((t,s)=>(t[s]=[...e[s]],t)),{});return Object.keys(t).reduce(((e,s)=>{if(e[s]){const a={};o(a,e[s]),o(a,t[s]);const n=new Set(Object.keys(a));e[s]=r.filter((e=>n.has(e))).map((e=>a[e]))}else e[s]=[...t[s]];return e}),s)},c=(e=i,t)=>{switch(t.type){case a.k.STORE_MERGE:return t.payload.collections?l(e,t.payload.collections):e;case a.k.CHANGE_PAGE:return t.payload.collections?l({},t.payload.collections):{};default:return e}}},"./src/widgets/DVWebNodeDetail/reducers/detail.ts":(e,t,s)=>{"use strict";s.d(t,{B6:()=>i,I6:()=>l,Xt:()=>o,k5:()=>r});var a=s("./src/widgets/DVWebNodeDetail/utils/reducer.ts"),n=s("./node_modules/redux/es/redux.js");const i="headerDetail",r="btfMoreDetails",o="detail",l=(0,n.UY)({[i]:(0,a.V)((e=>e.detail&&e.detail[i]),{}),[r]:(0,a.V)((e=>e.detail&&e.detail[r]),{}),[o]:(0,a.V)((e=>e.detail&&e.detail[o]),{})})},"./src/widgets/DVWebNodeDetail/reducers/devices.ts":(e,t,s)=>{"use strict";s.d(t,{I:()=>r,V:()=>n});var a=s("./src/widgets/DVWebNodeDetail/actions/index.ts");const n=void 0,i={deviceEntries:n},r=(e=i,t)=>t.type===a.k.GetDevices?t.output:e},"./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts":(e,t,s)=>{"use strict";s.d(t,{$0:()=>c,$c:()=>o,RE:()=>i,YD:()=>r,c0:()=>l});var a=s("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),n=s("./src/widgets/DVWebNodeDetail/utils/utils.ts");const i=e=>(0,a.s8)(e)&&e.metadata&&e.metadata.messages||[],r=e=>(0,a.s8)(e)&&e.children||[],o=e=>(0,a.Ic)(e)&&e.children||[],l=e=>{const t=(0,a.t5)(e)&&e.children||[];return(0,n.VF)(t.map((e=>(0,a.u3)(e)&&e.children||[])))},c=e=>((0,a.t5)(e)&&e.children||[]).map((e=>(0,a.u3)(e)&&e)).filter(n.yb)},"./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts":(e,t,s)=>{"use strict";s.d(t,{AI:()=>g,As:()=>f,Br:()=>R,C9:()=>C,Gg:()=>q,IB:()=>p,J2:()=>S,Li:()=>O,Lu:()=>E,MZ:()=>w,Ot:()=>y,PC:()=>Z,SX:()=>h,UT:()=>V,VD:()=>W,VM:()=>z,ZA:()=>x,ZM:()=>N,a1:()=>H,aQ:()=>B,c9:()=>M,cD:()=>A,eP:()=>_,l7:()=>k,lO:()=>D,pL:()=>T,rp:()=>j,tW:()=>F,u5:()=>L});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/utils/isType.ts"),i=s("./src/widgets/DVWebNodeDetail/utils/utils.ts"),r=s("./src/shared/utils/utils.ts"),o=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),l=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),c=s("./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts"),d=s("./src/widgets/DVWebNodeDetail/reducers/collections.ts"),u=s("./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts"),m=s("./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts");const p=(0,a.P)([o.bS.actionBtf,o.mZ.collections,o.mZ.extras],((e,t=[],s=[])=>Array.from(new Set((0,i.VF)([...t,...s].map((e=>e.titleIds))))).reduce(((t,s)=>{const a=e[s];return a&&(t[s]=a),t}),{}))),g=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.acquisitionActions)),h=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.viewRefMarker)),v=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.playbackActions)),b=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.downloadActions)),D=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.notificationActions)),y=(0,a.P)(D,(e=>(0,m.O)(e))),f=(0,a.P)(D,(e=>(0,m.X)(e))),E=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.disneyAction)),w=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.watchPartyAction)),_=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.membershipAction)),T=(0,a.P)(o.mZ.actionAtf,(e=>e&&e.messages)),C=(0,a.P)([o.bS.actionBtf,o.mZ.collections],((e,t=[])=>(0,i.VF)(t.filter((e=>"episodes"===e.collectionType)).map((e=>e.titleIds))).slice(0,d.Wq).reduce(((t,s)=>{const a=e[s];if(!a||!a.playbackActions)return t;const n=(0,l.MG)(a.playbackActions);return n&&(0,u.Nw)(n.progress)?t+1:t}),0))),x=(0,a.P)([o.bS.actionBtf,o.mZ.collections],((e,t=[])=>(0,i.VF)(t.filter((e=>"episodes"===e.collectionType)).map((e=>e.titleIds))).reduce(((t,s)=>{const a=e[s];return t[s]=!(!a||!a.playbackActions)&&void 0!==(0,l.MG)(a.playbackActions),t}),{}))),I=(0,a.P)(g,(e=>{const t=e&&e.svodWinners;return(e=>(0,n.P)(e,"atv.wps#SubscribeActionTreeRight"))(t)?t:void 0})),N=(0,a.P)(I,(e=>e&&e.children)),P=(0,a.P)(N,(e=>e&&(0,i.VF)(e.map((e=>e.problems))))),k=(0,a.P)(P,(e=>e&&e.map((e=>e.message)))),S=(0,a.P)(I,(e=>e&&e.metadata)),V=(0,a.P)(S,(e=>e&&e.behaviour)),W=(0,a.P)(g,(e=>{return e&&(t=e.tvodWinners,(0,n.P)(t,"atv.wps#PurchaseActionTreeRight"))?e.tvodWinners:void 0;var t})),A=(0,a.P)(W,(e=>e&&e.children)),R=(0,a.P)(W,(e=>e&&e.metadata)),L=(0,a.P)(R,(e=>e&&e.messages)),B=(0,a.P)(A,(e=>e&&(0,i.VF)(e.filter((e=>!(0,r.xb)(e.displayMessages))).map((e=>e.displayMessages))))),M=(0,a.P)(g,(e=>e&&e.moreWaysToWatch)),O=(0,a.P)(g,(e=>e&&e.acceptedPreorder)),j=(0,a.P)(v,(e=>e&&e.main&&(0,l.cn)(e.main)&&e.main.metadata||void 0)),F=(0,a.P)(v,(e=>e&&e.main&&(0,l.cn)(e.main)&&e.main.children||void 0)),H=(0,a.P)(F,(e=>e&&e[0]||void 0)),U=((0,a.P)([o.bS.self,H],((e,t)=>({playbackActionData:t,self:t&&e[t.playbackID]}))),(0,a.P)(b,(e=>e&&e.main&&(0,c.mH)(e.main)&&e.main.children||void 0))),Z=(0,a.P)(U,(e=>e&&e[0])),z=(0,a.P)([o.bS.actionBtf,o.mZ.collections],((e,t=[])=>(0,i.VF)(t.map((e=>"episodes"===e.collectionType?e.titleIds:[]))).filter((t=>{var s,a;return t&&(null===(s=e[t])||void 0===s||null===(a=s.downloadActions)||void 0===a?void 0:a.main)})))),q=(0,a.P)([o.bS.actionBtf,z],((e,t)=>null==t?void 0:t.map((t=>{var s,a;return t&&(null===(s=e[t])||void 0===s||null===(a=s.downloadActions)||void 0===a?void 0:a.main)||void 0})).map((e=>e&&(0,c.mH)(e)&&e.children&&e.children[0]||void 0)).filter((e=>e))))},"./src/widgets/DVWebNodeDetail/selectors/basicState.ts":(e,t,s)=>{"use strict";s.d(t,{bS:()=>r,mZ:()=>l});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/reducers/action.ts"),i=s("./src/widgets/DVWebNodeDetail/reducers/detail.ts");const r={context:e=>e.requestContext,features:e=>e.features,pageTitleId:e=>e.pageTitleId,bundleCarousel:e=>e.bundleCarousel,collections:e=>e.collections,carousel:e=>e.carousel,extras:e=>e.extras,pageLink:e=>e.pageLink,actionAtf:e=>e.action[n.t1],actionBtf:e=>e.action[n.L5],seasons:e=>e.seasons,buyboxTitleId:e=>e.buyboxTitleId,crowBanner:e=>e.banner.crow,creative:e=>e.creative,headerDetail:e=>e.detail[i.B6],moreDetails:e=>e.detail[i.k5],detail:e=>e.detail[i.Xt],self:e=>e.self,imdb:e=>e.imdb,notification:e=>e.notification,refund:e=>e.refund.fragments,refunding:e=>e.refund.refunding,restriction:e=>e.restriction,trailer:e=>e.trailer,watchlist:e=>e.watchlist,hoverWatchlist:e=>e.hoverWatchlist,purchase:e=>e.purchase,pageContext:e=>e.pageContext,bottomBar:e=>e.bottomBar,exploreTabContent:e=>e.exploreTabContent,devices:e=>e.devices,otherFormats:e=>e.otherFormats,castAndCrew:e=>e.castAndCrew,containers:e=>e.containers,player:e=>e.player,atfTapsExperimentToken:e=>e.tapsExperimentToken[e.pageTitleId],autoplayHero:e=>e.autoplayHero,reviews:e=>e.reviews,comingSoon:e=>e.comingSoon,metadata:e=>e.metadata,reviewSubmission:e=>e.reviewSubmission,widgets:e=>e.widgets,impressionAnalytics:e=>e.impressionAnalytics,termsText:e=>e.termsText,bottomMenu:e=>e.bottomMenu},o=e=>(0,a.P)([r.pageTitleId,e],((e,t)=>null==t?void 0:t[e])),l={actionAtf:o(r.actionAtf),collections:o(r.collections),extras:o(r.extras),seasons:o(r.seasons),bundleCarousel:o(r.bundleCarousel),buyboxTitleId:o(r.buyboxTitleId),creative:o(r.creative),headerDetail:o(r.headerDetail),moreDetails:o(r.moreDetails),self:o(r.self),imdb:o(r.imdb),notification:o(r.notification),refund:o(r.refund),restriction:o(r.restriction),trailer:o(r.trailer),watchlist:o(r.watchlist),crowBanner:o(r.crowBanner),otherFormats:o(r.otherFormats),castAndCrew:o(r.castAndCrew),containers:o(r.containers),autoplayHero:o(r.autoplayHero),comingSoon:o(r.comingSoon),reviews:o(r.reviews),metadata:o(r.metadata),reviewSubmission:o(r.reviewSubmission),widgets:o(r.widgets)}},"./src/widgets/DVWebNodeDetail/selectors/carousel.ts":(e,t,s)=>{"use strict";s.d(t,{b:()=>r,i:()=>o});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/collections.ts");const r=(0,a.P)(n.bS.pageTitleId,n.bS.carousel,((e,t)=>(0,i.KN)(t[e]))),o=(0,a.P)(r,(e=>Boolean(null==e?void 0:e.length)))},"./src/widgets/DVWebNodeDetail/selectors/castAndCrew.ts":(e,t,s)=>{"use strict";s.d(t,{s:()=>i});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const i=(0,a.P)(n.mZ.castAndCrew,(e=>Boolean(e&&e.castAndCrews.length>0)))},"./src/widgets/DVWebNodeDetail/selectors/collections.ts":(e,t,s)=>{"use strict";s.d(t,{KN:()=>o,gy:()=>c,s6:()=>l});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/components/collection/collectionTypes.tsx"),i=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const r=(0,a.P)(i.bS.pageTitleId,i.bS.collections,((e,t)=>o(t[e]))),o=e=>e?e.map((({collectionType:e,titleIds:t,header:s,totalCardSize:a,impressionData:i},r)=>{const o=(e||"").toLowerCase();return(0,n.gK)(o)&&0!==(t||[]).length?{header:s,collectionType:o,totalEpisodeSize:a||0,cardTitleIds:t,index:r,impressionData:i}:null})).filter(Boolean):[],l=(0,a.P)(r,(e=>e&&e.map((e=>e&&e.collectionType&&(0,n.or)(e.collectionType)?e:null)).filter(Boolean))),c=(0,a.P)(l,(e=>Boolean(e&&e.length>0)))},"./src/widgets/DVWebNodeDetail/selectors/component/actionBoxComponentSelectors.ts":(e,t,s)=>{"use strict";s.d(t,{A$:()=>k,DG:()=>N,KL:()=>A,Q$:()=>L,QH:()=>P,Uc:()=>W,V0:()=>R,bS:()=>I,bn:()=>S,kx:()=>f,m7:()=>y,wW:()=>E});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/notificationFragment.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),r=s("./src/widgets/DVWebNodeDetail/selectors/detailFragment.ts"),o=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),l=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts"),c=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),d=s("./src/widgets/DVWebNodeDetail/utils/domainUtils.ts"),u=s("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts"),m=s("./src/widgets/DVWebNodeDetail/selectors/player.ts"),p=s("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts"),g=s("./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts");const h=(0,a.P)([i.l7,i.aQ,i.u5,i.Li],((e,t,s,a)=>({subProblemMessages:e,offerMessages:t,topLevelTvodMessages:s,acceptedPreorder:a}))),v=(0,a.P)(i.ZM,(e=>e&&e.map((e=>e.message&&{text:(0,u.bJ)(e.message),logo:e.image,channelLogoURL:e.channelLink})).filter(Boolean)||[])),b=(0,a.P)(i.J2,(e=>e&&e.label&&{text:(0,u.bJ)(e.label),logo:e.imageLink}||void 0)),D=(0,a.P)(i.lO,(e=>e&&e.map((e=>({text:(0,u.bJ)(e.header),logo:e.logo}))).filter(Boolean)||[])),y=((0,a.P)(i.lO,(e=>({messages:(e||[]).reduce(((e,t)=>{const s=(0,u.bJ)(t.message);return t.severity&&!["CRITICAL","ERROR"].includes(t.severity)||!s.string||e.some((e=>e.string===s.string))||e.push(s),e}),[])}))),(0,a.P)([i.pL],(e=>null==e?void 0:e.focusMessage))),f=(0,a.P)([i.pL],(e=>null==e?void 0:e.informationalMessage)),E=(0,a.P)([i.pL],(e=>null==e?void 0:e.buyBoxMessage)),w=(0,a.P)([i.tW,i.rp],((e,t)=>{const s=t&&t.imageLink,a=t&&t.messages&&t.messages[0]&&t.messages[0].string,n=e&&e.filter((e=>"FREE"===e.entitlementType))||[];return a&&0===n.length&&s&&{text:(0,u.bJ)(a),logo:s}||void 0})),_=(0,a.P)(i.tW,(e=>e&&e.map((e=>"FREE"!==e.entitlementType&&e.heading&&e.logo&&{text:(0,u.bJ)(e.heading),logo:e.logo,channelLogoURL:e.channelLink})).filter(Boolean)||void 0)),T=(0,a.P)([v,D,_,w,b,i.UT],((e,t,s,a,n,i)=>[...s||[],a,...t,...i&&"Collapsed"===i?[]:[n,...e]].filter((e=>Boolean(e&&e.text.string))))),C=(0,a.P)([i.tW,i.rp],((e,t)=>{const s=t&&t.imageLink,a=t&&t.messages;return 0===(e&&e.filter((e=>"FREE"===e.entitlementType))||[]).length&&!s&&a||void 0})),x=(0,a.P)(i.tW,(e=>e&&e.map((e=>"FREE"!==e.entitlementType&&!e.logo&&e.heading&&(0,u.e6)(e.heading))).filter(Boolean)||void 0)),I=((0,a.P)([h,i.Ot,i.As,n.l,T,o.mZ.restriction,C,x,n.E,o.mZ.headerDetail],((e,t,s,a,n,i,r,o,l,c)=>{const d=l&&l.filter((e=>"Default"===e.notificationType)).map((e=>(0,u.e6)(e.message))),m=c&&!(0,p.Z4)(c.entityType)&&l&&l.filter((e=>"ComingSoon"===e.notificationType)).map((e=>(0,u.e6)(e.message)))||[],g=s.length>0?s:m,h=[...e.offerMessages||[],...r||[],...o||[],...d||[]].filter(Boolean);return{notificationWarnings:[...(a||[]).map((e=>(0,u.e6)(e.message))),...t],subProblemMessages:e.subProblemMessages,messagesWithLogo:n,infoAlertMessages:h,topLevelTvodMessages:e.topLevelTvodMessages,comingLeavingSoonMessages:g,acceptedPreorder:e.acceptedPreorder,maturityLockText:i&&i.maturityLockText}})),(0,a.P)([c.c9,o.bS.pageTitleId,m.UH,i.a1,c.fE],((e,t,s,a,n)=>a&&{playbackData:a,sessionId:e,pageTitleId:t,playerConfigData:s,isRetail:n&&(0,d.o)(n)}||void 0)),(0,a.P)([i.PC,o.bS.self,i.VM,i.Gg,r.CK],((e,t,s,a,n)=>{const i=t&&e&&t[e.titleID],r=(0,g.Tg)(e,a);return e&&{episodeIds:s,seasonNumber:n,label:e.label,downloadURL:e.downloadURL,fallbackURL:e.fallbackURL,titleID:e.titleID,episodeNumber:i&&"episode"===i.titleType.toLocaleLowerCase()?i.sequenceNumber:void 0,refMarker:e.refMarker,titlesRentalMetadata:r}}))),N=(0,a.P)([c.c9,o.bS.pageTitleId,l.Rp,m.UH,l.gK,o.bS.self,i.tW,c.fE],((e,t,s,a,n,i,r,o)=>r&&r.length>0&&{playbackDataList:r.map((e=>({playbackActionData:e,self:e&&i[e.playbackID]}))),sessionId:e,pageTitleId:t,isRetail:o&&(0,d.o)(o),playerConfigData:a,isOfferClarityEnabled:s,isMShop:n}||void 0)),P=(0,a.P)([c.c9,o.bS.pageTitleId,m.UH,o.mZ.trailer],((e,t,s,a)=>a&&{playbackData:a,playerConfigData:s,sessionId:e,pageTitleId:t}||void 0)),k=(0,a.P)([i.AI,o.mZ.buyboxTitleId],((e,t)=>e&&{acquisitionActions:e,titleId:t,forceDoubleHeight:!0})),S=(0,a.P)(i.Lu,(e=>e&&{message:e.message,returnLink:e.returnLink})),V=(0,a.P)(i.c9,(e=>!!e&&Boolean((e.children||[]).length>0))),W=(0,a.P)([V,i.c9,o.mZ.buyboxTitleId],((e,t,s)=>({shouldShowMoreWaysToWatch:e,moreWaysToWatch:t,titleId:s}))),A=(0,a.P)([l.Tr,c.Iz,o.bS.pageTitleId,l.lK,i.c9,i.cD],((e,t,s,a,n,i)=>({isRedeemAndPromoRestricted:e,requestContext:t,titleID:s,isLiveEvent:a,moreWaysToWatch:n,hasTvodWinnerOffer:Boolean(i&&i.length>0)}))),R=(0,a.P)([i.J2,i.Br],((e,t)=>({messages:[...e&&e.secondaryMessages||[],...t&&t.secondaryMessages||[]]}))),L=(0,a.P)(o.mZ.headerDetail,(e=>e&&e.duration||void 0))},"./src/widgets/DVWebNodeDetail/selectors/detailFragment.ts":(e,t,s)=>{"use strict";s.d(t,{A2:()=>r,CK:()=>c,NE:()=>o,S6:()=>l});var a=s("./src/util/utils/titleType.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const r=(0,n.P)(i.mZ.headerDetail,(e=>e&&e.images)),o=(0,n.P)(i.mZ.headerDetail,(e=>(0,a.ee)(e&&e.titleType))),l=(0,n.P)(o,(e=>e?"Movie":"TVSeason")),c=(0,n.P)(i.mZ.headerDetail,(e=>e&&e.seasonNumber))},"./src/widgets/DVWebNodeDetail/selectors/exploreTab.ts":(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/shared.ts"),r=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");const o=(0,a.P)([i.k7,r.op,n.bS.exploreTabContent],((e,t,s)=>"true"!==t.disableExploreTab&&Boolean(e&&s&&s.staticPageContent)))},"./src/widgets/DVWebNodeDetail/selectors/extrasTab.ts":(e,t,s)=>{"use strict";s.d(t,{C:()=>o,J:()=>r});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/collections.ts");const r=(0,a.P)(n.bS.pageTitleId,n.bS.extras,((e,t)=>(0,i.KN)(t[e]))),o=(0,a.P)(r,(e=>Boolean(null==e?void 0:e.length)))},"./src/widgets/DVWebNodeDetail/selectors/metadataFragment.ts":(e,t,s)=>{"use strict";s.d(t,{BK:()=>o,_6:()=>r,yl:()=>i});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const i=(0,a.P)(n.mZ.metadata,(e=>null==e?void 0:e.chartPosition)),r=(0,a.P)(n.mZ.metadata,(e=>null==e?void 0:e.contentDescriptors)),o=(0,a.P)(n.mZ.metadata,(e=>null==e?void 0:e.maturityRating))},"./src/widgets/DVWebNodeDetail/selectors/notificationFragment.ts":(e,t,s)=>{"use strict";s.d(t,{E:()=>r,l:()=>i});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const i=(0,a.P)(n.mZ.notification,(e=>e&&e.warnings)),r=(0,a.P)(n.mZ.notification,(e=>e&&e.alerts))},"./src/widgets/DVWebNodeDetail/selectors/otherFormats.ts":(e,t,s)=>{"use strict";s.d(t,{$:()=>i});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const i=(0,a.P)(n.mZ.otherFormats,(e=>Boolean(e&&e.actions&&e.actions.length)))},"./src/widgets/DVWebNodeDetail/selectors/pageContext.ts":(e,t,s)=>{"use strict";s.d(t,{Fk:()=>E,G_:()=>c,HV:()=>f,Hu:()=>l,Ig:()=>T,Io:()=>r,Rp:()=>b,Tr:()=>o,VL:()=>D,_n:()=>u,d5:()=>w,gK:()=>d,hu:()=>g,j$:()=>_,lK:()=>p,nV:()=>y,op:()=>m});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),i=s("./src/widgets/DVWebNodeDetail/utils/deviceUtils.ts");const r=(0,a.P)([n.bS.pageContext],(e=>e.isCerberusChild)),o=(0,a.P)(n.bS.pageContext,(e=>{const t=e.purchaseRestricted;return"boolean"==typeof t?t:Boolean("MShop"===e.app&&("IOS"===e.os||"MacOS"===e.os||"Android"===e.os))})),l=(0,a.P)(n.bS.pageContext,(e=>(0,i.t)(e))),c=(0,a.P)(n.bS.pageContext,(e=>(0,i.$)(e))),d=(0,a.P)(n.bS.pageContext,(e=>"MShop"===e.app)),u=((0,a.P)(n.bS.pageContext,(e=>"InternetExplorer"===e.app)),(0,a.P)(n.bS.pageContext,(e=>"Safari"===e.app))),m=((0,a.P)(n.bS.pageContext,(e=>e.subPageType)),(0,a.P)(n.bS.pageContext,(e=>e.features))),p=(0,a.P)(n.bS.pageContext,(e=>"Event"===e.subPageType)),g=(0,a.P)(n.bS.pageContext,(e=>"Event"!==e.subPageType)),h=(e,t="true")=>(0,a.P)(n.bS.pageContext,(s=>v(s.features,e,t))),v=(e,t,s="true")=>Boolean(e)&&e[t]===s,b=h("offerClarityEnabled"),D=h("activateAutoPlayingInHovers"),y=h("isReviewsSubmissionEnabled"),f=h("isDownloadUpsellEnabled"),E=h("disableStickyBtfTab"),w=(h("isBroadcastSubscriptionEnabled"),h("isJicEnrichmentEnabled")),_=h("hideStarRatings"),T=h("isPassingIsAVODToWebPlayer")},"./src/widgets/DVWebNodeDetail/selectors/player.ts":(e,t,s)=>{"use strict";s.d(t,{E5:()=>y,IR:()=>E,KO:()=>m,KQ:()=>f,UH:()=>h,vU:()=>v});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),i=s("./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts"),r=s("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts"),o=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),l=s("./src/widgets/DVWebNodeDetail/selectors/shared.ts"),c=s("./src/util/utils/titleType.ts"),d=s("./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts"),u=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");const m="atv_dp_watch_trailer";let p=function(e){return e.ENTITLED="Entitled",e.UNENTITLED="Unentitled",e.FREEWITHADS="FreeWithAds",e}({});const g=(0,a.P)([u.Ig,r.pL],((e,t)=>{if(e)return null!=t&&t.entitlementType?(null==t?void 0:t.entitlementType)===p.FREEWITHADS:void 0})),h=(0,a.P)([n.bS.context,n.bS.pageContext,l.Ng],(({sessionID:e,marketplaceID:t,customerID:s,locale:a,deviceID:n,isInternal:i},r,o)=>{let l;return l=o?"Live":"Android"===r.os?"MShop"===r.app?"DetailAndroidMShop":"DetailAndroid":"Detail",{sessionId:e,marketplaceId:t,customerId:s,locale:a,playerBeta:!1,useDefaultView:!0,pageType:l,deviceId:n,isInternal:i}})),v=(0,a.P)([n.bS.player,g],((e,t)=>e.playbackLinkData?{...e.playbackLinkData,contentConfig:{...e.playbackLinkData.contentConfig,isAVOD:t}}:void 0)),b=(0,a.P)([n.bS.self,r.a1,g],((e,t,s)=>{var a,n,i;return t?{playbackUrl:t.playbackURL,signInUrl:t.signInURL,contentConfig:{asin:t.playbackID,trailer:!1,position:t.resumeTime||0,ref:t.playerRefMarker,videoType:t.videoMaterialType,playbackEnvelope:(0,d.D)(t),isAVOD:s},sequenceNumber:null===(a=e[t.playbackID])||void 0===a?void 0:a.sequenceNumber,isBonus:(0,c.Hv)(null===(n=e[t.playbackID])||void 0===n?void 0:n.titleType,null===(i=e[t.playbackID])||void 0===i?void 0:i.sequenceNumber)}:void 0})),D=(0,a.P)([n.mZ.trailer,g],((e,t)=>e?{playbackUrl:e.playbackURL,signInUrl:e.signInURL,contentConfig:{asin:e.playbackID,trailer:!0,position:0,ref:e.refMarker||m,videoType:e.videoMaterialType,isAVOD:t}}:void 0)),y=(0,a.P)([o.$s,b,D,n.mZ.restriction],((e,t,s,a)=>{if(a&&a.blockedPageModel)return;const n=e.autoplay&&e.autoplay[0],i="trailer"===n?s:"1"===n?t:void 0;return i&&e.t&&(i.contentConfig.position=parseInt(e.t[0],10)||0),i})),f=(0,a.P)([n.bS.pageContext,b,D],((e,t,s)=>{const a="EMBEDDED"===e.playbackLaunchType&&t||"EMBEDDED"===e.playbackTrailerLaunchType&&s;return a&&!a.signInUrl?a.contentConfig:void 0})),E=(0,a.P)([n.bS.pageTitleId,n.mZ.actionAtf,r.IB],((e,t,s)=>{const a={};return Object.entries({[e]:t,...s}).filter((([,e])=>Boolean(e))).forEach((([e,t])=>{const{playbackActions:s}=t,n=(0,i.fi)(s);n&&n.forEach((t=>{a[t]=e}))})),a}))},"./src/widgets/DVWebNodeDetail/selectors/productDetails.ts":(e,t,s)=>{"use strict";s.d(t,{W:()=>o,_:()=>l});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),r=s("./src/util/utils/marketplace.ts");const o=(0,a.P)([i.T_,n.mZ.moreDetails],((e,t)=>Boolean(e&&t)||Boolean(t&&t.ratingBadge))),l=(0,a.P)([n.bS.context],(e=>e.marketplaceID===r.HZ.UK))},"./src/widgets/DVWebNodeDetail/selectors/purchase.ts":(e,t,s)=>{"use strict";s.d(t,{G:()=>u,n:()=>d});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/acquisitionActions.ts"),r=s("./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts"),o=s("./src/widgets/DVWebNodeDetail/selectors/actionFragment.ts");const l=e=>(0,i.c0)(e&&e.moreWaysToWatch).filter(r.E2),c=e=>(0,i.YD)(e&&e.tvodWinners).filter(r.E2),d=(0,a.P)([n.bS.pageTitleId,n.mZ.actionAtf,n.bS.self,o.IB],((e,t,s,a)=>{const n={},i=e=>{Object.entries(e).forEach((([e,t])=>{if(!t)return;const a=s[e],i=a?a.gti:void 0,{acquisitionActions:r}=t;[...c(r),...l(r)].forEach((t=>{n[t.offerToken]={canonicalId:e,offer:t,gti:i}}))}))};return i({[e]:t}),i(a),n})),u=(0,a.P)([d,n.bS.purchase],((e,t)=>t&&{...t,details:e[t.offerToken]}))},"./src/widgets/DVWebNodeDetail/selectors/requestContext.ts":(e,t,s)=>{"use strict";s.d(t,{$s:()=>h,C2:()=>b,Iz:()=>f,T_:()=>D,c9:()=>l,fE:()=>o,vD:()=>y});var a=s("./src/widgets/DVWebNodeDetail/utils/domainUtils.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=s("./src/widgets/DVWebNodeDetail/utils/url/index.ts"),r=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts");const o=(0,n.P)(r.bS.context,(e=>e.domain||"Fogg")),l=(0,n.P)(r.bS.context,(e=>e.sessionID)),c=(0,n.P)(r.bS.context,(e=>e.requestID)),d=(0,n.P)(r.bS.context,(e=>e.customerID)),u=(0,n.P)(r.bS.context,(e=>e.appName)),m=(0,n.P)(r.bS.context,(e=>e.locale||"en_US")),p=(0,n.P)(m,(e=>e.replace("_","-"))),g=(0,n.P)(r.bS.context,(e=>e.isInternal)),h=(0,n.P)(r.bS.context,(e=>"object"==typeof e?e.queryParameters:{})),v=(0,n.P)(r.bS.context,(e=>e.originalURI||"")),b=(0,n.P)(r.bS.context,(e=>e.marketplaceID)),D=(0,n.P)(o,(e=>(0,a.o)(e))),y=(0,n.P)([D,v,h],((e,t,s)=>(a,n)=>(0,i.bf)(a,{urlData:{isRetail:e,originalURI:t,parameters:s},...n}))),f=(0,n.P)([r.bS.context,D,v,h,g,l,c,p,y,d,u],((e,t,s,a,n,i,r,o,l,c,d)=>({rawContext:e,isRetail:t,originalURI:s,queryParameters:a,isInternal:n,makeUrl:l,sessionID:i,isRecognizedCustomer:Boolean(c),requestID:r,locale:o,appName:d})))},"./src/widgets/DVWebNodeDetail/selectors/reviews.ts":(e,t,s)=>{"use strict";s.d(t,{G:()=>l,M:()=>o});var a=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),r=s("./src/widgets/DVWebNodeDetail/selectors/pageContext.ts");const o=(0,a.P)([n.T_,r.Io,r.lK,i.mZ.comingSoon],((e,t,s,a)=>e&&!Boolean(a)&&!t&&!s)),l=(0,a.P)([r.hu,i.mZ.reviewSubmission],((e,t)=>e&&void 0!==(null==t?void 0:t.isEligible)&&!t.isEligible))},"./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts":(e,t,s)=>{"use strict";s.d(t,{P:()=>a});const a=s("./node_modules/reselect/es/index.js").P1},"./src/widgets/DVWebNodeDetail/selectors/shared.ts":(e,t,s)=>{"use strict";s.d(t,{Ng:()=>l,be:()=>o,k7:()=>c});var a=s("./src/util/utils/titleType.ts"),n=s("./src/widgets/DVWebNodeDetail/selectors/selectorWrapper.ts"),i=s("./src/widgets/DVWebNodeDetail/selectors/basicState.ts"),r=s("./src/widgets/DVWebNodeDetail/utils/entityTypes.ts");const o=(0,n.P)(i.mZ.headerDetail,r.xw),l=(0,n.P)(i.mZ.self,(e=>Boolean(e&&(0,a.g2)(e.titleType)))),c=((0,n.P)(i.mZ.moreDetails,(e=>(0,r.Z4)(e&&e.entityType))),(0,n.P)([i.mZ.moreDetails,i.mZ.headerDetail],((e,t)=>Boolean(e&&Boolean(e.explorePanelURL)||t&&Boolean(t.explorePanelURL)))))},"./src/widgets/DVWebNodeDetail/utils/AdjustHeightForContent.tsx":(e,t,s)=>{"use strict";s.d(t,{_:()=>i});var a=s("./node_modules/react/index.js");function n(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i extends a.Component{constructor(...e){super(...e),n(this,"elRef",a.createRef()),n(this,"timer",void 0)}getSnapshotBeforeUpdate(){const e=this.elRef.current;if(!e)return null;return{currentHeight:e.clientHeight}}componentDidUpdate(e,t,s){const a=s&&s.currentHeight,n=this.elRef.current;if(!n)return;n.removeAttribute("style");const i=n.clientHeight;if(i===a)return;const r=150+1.5*Math.abs(i-a);((e,t)=>{const s=Object.keys(t).reduce(((e,s)=>`${e} ${s}: ${t[s]};`),"");e.setAttribute("style",s)})(n,{height:`${a}px`,overflow:"hidden",transition:`height ${r}ms ease-out`}),setTimeout((()=>{n.style.height=`${i}px`}),1),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{n.removeAttribute("style")}),r)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){return a.createElement("div",{className:this.props.className,ref:this.elRef},this.props.children)}}},"./src/widgets/DVWebNodeDetail/utils/DPRecordRefTag.tsx":(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var a=s("./node_modules/react/index.js"),n=s("./src/shared/utils/analytics/recordReftag.tsx"),i=s("./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts");function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},r.apply(this,arguments)}const o=e=>{const{clickStreamPageType:t,clickStreamSubPageType:s,refTagTitleId:o}=a.useContext(i.h);return a.createElement(n.J,r({},e,{pageType:t,subPageType:s,titleId:o}))}},"./src/widgets/DVWebNodeDetail/utils/actionBoxUtils.ts":(e,t,s)=>{"use strict";s.d(t,{O:()=>n,X:()=>i});var a=s("./src/widgets/DVWebNodeDetail/utils/stringUtils.ts");const n=e=>(e||[]).filter((({severity:e,messageSource:t})=>"RELEVANT"===e&&"ACCESS_CHANGE"!==t&&"LEAVING_SOON"!==t)).map((e=>(0,a.bJ)(e.message))),i=e=>(e||[]).filter((({severity:e,messageSource:t})=>"RELEVANT"===e&&("ACCESS_CHANGE"===t||"LEAVING_SOON"===t))).map((e=>(0,a.bJ)(e.message)))},"./src/widgets/DVWebNodeDetail/utils/actionForm.tsx":(e,t,s)=>{"use strict";s.d(t,{y:()=>i});var a=s("./node_modules/react/index.js");function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},n.apply(this,arguments)}const i=({hiddenInputs:e={},method:t="POST",children:s,...i})=>a.createElement("form",n({},i,{method:t}),s,Object.keys(e).map((t=>a.createElement("input",{key:t,type:"hidden",name:t,value:e[t]}))))},"./src/widgets/DVWebNodeDetail/utils/closeableDropList.tsx":(e,t,s)=>{"use strict";s.d(t,{x:()=>i});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/DropList.js");const i=e=>{const t=e.links&&e.links.map((t=>({...t,onClick:s=>{const a=document.getElementById(`av-droplist-${e.customDropListID}`);a&&a.checked&&(a.checked=!1),t.onClick(s)}}))),s={...e,links:t};return a.createElement(n.DropList,s)}},"./src/widgets/DVWebNodeDetail/utils/conditionalText.tsx":(e,t,s)=>{"use strict";s.d(t,{y:()=>l});var a=s("./node_modules/react/index.js"),n=s("./node_modules/@amzn/dvui/dist/Text.js"),i=s("./src/shared/utils/utils.ts"),r=s("./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss");const o=({Tag:e,className:t,message:s})=>s?a.createElement(e,{className:t},a.createElement(n.Text,{className:r.Z.enablePointerEvents,string:s})):null,l=({Tag:e,messages:t,className:s})=>(0,i.xb)(t)?null:a.createElement(a.Fragment,null,t.map(((t,n)=>a.createElement(o,{Tag:e,message:t,className:s,key:`conditional-text-${n}`}))))},"./src/widgets/DVWebNodeDetail/utils/deviceUtils.ts":(e,t,s)=>{"use strict";s.d(t,{$:()=>n,t:()=>a});const a=e=>Boolean("Phone"===(null==e?void 0:e.formFactor)),n=e=>Boolean("Desktop"!==(null==e?void 0:e.formFactor))},"./src/widgets/DVWebNodeDetail/utils/domainUtils.ts":(e,t,s)=>{"use strict";s.d(t,{V:()=>n,o:()=>a});const a=e=>"Retail"===e,n=e=>a(e)?"retail-web-episode-list":"global-web-episode-list"},"./src/widgets/DVWebNodeDetail/utils/downloadActionHelper.ts":(e,t,s)=>{"use strict";s.d(t,{Lu:()=>i,Tg:()=>r,mH:()=>n});var a=s("./src/widgets/DVWebNodeDetail/utils/isType.ts");const n=e=>(0,a.P)(e,"atv.wps#DownloadActionTreeRight"),i=e=>{const t=(e=>e&&e.main&&n(e.main)&&e.main)(e);return t&&t.children&&t.children[0]||void 0},r=(e,t)=>{const s={};return e&&(s[e.titleID]={entitlementType:e.entitlementType,isRentalClockStarted:e.isRentalClockStarted,rentalTermHoursToStart:e.rentalTermHoursToStart,rentalTermHoursToPlaybackDuration:e.rentalTermHoursToPlaybackDuration}),null==t||t.forEach((e=>{s[e.titleID]={entitlementType:e.entitlementType,isRentalClockStarted:e.isRentalClockStarted,rentalTermHoursToStart:e.rentalTermHoursToStart,rentalTermHoursToPlaybackDuration:e.rentalTermHoursToPlaybackDuration}})),s}},"./src/widgets/DVWebNodeDetail/utils/dpWidgetContext.ts":(e,t,s)=>{"use strict";s.d(t,{N:()=>n,h:()=>a});const a=s("./node_modules/react/index.js").createContext({}),n=(e,t)=>{var s;return null!=t&&t.asins&&(null==t||null===(s=t.asins)||void 0===s?void 0:s.length)>0?t.asins[0]:e}},"./src/widgets/DVWebNodeDetail/utils/entityTypes.ts":(e,t,s)=>{"use strict";s.d(t,{Z4:()=>l,xw:()=>c});const a="Live Event Default UX",n="Live Sporting Event UX 1",i="Live Sporting Event UX 2",r="Live Sporting Event UX 3",o="EVENT",l=e=>!!e&&[a,n,i,r,o].includes(e),c=e=>Boolean(e&&"TV Show"==e.entityType)},"./src/widgets/DVWebNodeDetail/utils/getAcquisitionActionChildren.ts":(e,t,s)=>{"use strict";s.d(t,{E2:()=>c,Ic:()=>i,bd:()=>l,ok:()=>d,s8:()=>n,t5:()=>r,u3:()=>o});var a=s("./src/widgets/DVWebNodeDetail/utils/isType.ts");const n=e=>(0,a.P)(e,"atv.wps#PurchaseActionTreeRight"),i=e=>(0,a.P)(e,"atv.wps#SubscribeActionTreeRight"),r=e=>(0,a.P)(e,"atv.wps#AcquisitionActionTreeLeft"),o=e=>(0,a.P)(e,"atv.wps#AcquisitionActionTreeRight"),l=e=>(0,a.P)(e,"atv.wps#TvodAction"),c=e=>l(e)||(e=>(0,a.P)(e,"atv.wps#PreorderAction"))(e),d=e=>(0,a.P)(e,"atv.wps#SubscribeAction")||Boolean(e&&"SUBSCRIPTION"===e.sType)},"./src/widgets/DVWebNodeDetail/utils/getPlaybackProgress.ts":(e,t,s)=>{"use strict";s.d(t,{Nw:()=>i,_y:()=>a,fZ:()=>n});const a=e=>e?Math.round(100*e):0,n=(e,t,s)=>{const a=e&&e[t];if(!a)return 0;const n=a.ResumeTime;return(0===n?100:s&&n>0?100*n/(1e3*s):0)||0},i=e=>1===e},"./src/widgets/DVWebNodeDetail/utils/isType.ts":(e,t,s)=>{"use strict";function a(e,t){return Boolean(e&&e.__type===t)}s.d(t,{P:()=>a})},"./src/widgets/DVWebNodeDetail/utils/linkWrapper.tsx":(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var a=s("./node_modules/react/index.js");const n=e=>e.url?a.createElement("a",{href:e.url,className:e.className,"aria-label":e.ariaLabel,"data-automation-id":e.automationId,target:e.target},e.children):a.createElement("span",{"aria-label":e.ariaLabel,className:e.className,"data-automation-id":e.automationId,role:"img"},e.children)},"./src/widgets/DVWebNodeDetail/utils/liveState.ts":(e,t,s)=>{"use strict";s.d(t,{Zz:()=>l,dn:()=>o});const a="cancelled",n="delayed",i="suspended",r="postponed",o=e=>!!e&&[a,n,i,r].includes(e.toLowerCase()),l=e=>e&&Boolean("upcoming"===e.toLowerCase())},"./src/widgets/DVWebNodeDetail/utils/paginator.ts":(e,t,s)=>{"use strict";s.d(t,{g:()=>n});var a=s("./src/widgets/DVWebNodeDetail/utils/utils.ts");const n=({currentOffset:e=0,totalItems:t,linkMaker:s,pageSize:n=10,paginationHardLimit:i=1e3,contextSize:r=1,strings:o})=>{const l=Math.floor((Math.min(t,i)-1)/n),c=e<0?0:e>=t?l*n:e;if(!(t>=0&&c>=0&&n>0&&i>0&&r>=0))return;if(t<=n)return;const d=Math.floor(c/n),u=(e,t)=>s(n*e,t),m=(e,t=!0)=>{const s=`${e+1}`;return{href:d===e?"":u(e,`pg_${s}`),title:o.page(s),type:"PaginatorPageNo",text:s,isOptional:t&&d!==e}},p=d>0&&{type:"PaginatorPrevious",href:u(d-1,"prv"),title:o.previous},g=d<l&&{type:"PaginatorNext",href:u(d+1,"nxt"),title:o.next},h=m(0,!1),[v,b]=d<=r?[1,1+2*r]:d>=l-r?[l-2*r,l]:[d-r,d+r],D=Math.max(1,v),y=Math.min(b,l),f=[p,h,D>1&&{type:"PaginatorGap"},...(0,a.w6)(D,y).map((e=>m(e))),g].filter(Boolean);return f.length<=6?f.map((e=>("PaginatorPageNo"===e.type&&(e.isOptional=!1),e))):f}},"./src/widgets/DVWebNodeDetail/utils/playbackActionHelper.ts":(e,t,s)=>{"use strict";s.d(t,{D8:()=>l,MG:()=>r,cn:()=>n,fi:()=>o});var a=s("./src/widgets/DVWebNodeDetail/utils/isType.ts");const n=e=>(0,a.P)(e,"atv.wps#PlaybackActionTreeRight"),i=e=>null!=e&&e.main&&n(e.main)?e.main:void 0,r=e=>{const t=i(e);return(null==t?void 0:t.children)&&t.children[0]||void 0},o=e=>{const t=i(e);return(null==t?void 0:t.children)&&t.children.map((e=>e.playbackID))||void 0},l=e=>{const t=i(e);return(null==t?void 0:t.metadata)&&t.metadata.secondaryMessages||void 0}},"./src/widgets/DVWebNodeDetail/utils/playbackEnvelope.ts":(e,t,s)=>{"use strict";s.d(t,{D:()=>a});const a=e=>null!=e&&e.playbackEnvelope?{envelope:e.playbackEnvelope,correlationId:e.correlationId,expiration:e.expiryTime}:void 0},"./src/widgets/DVWebNodeDetail/utils/ratingBadgeHelper.ts":(e,t,s)=>{"use strict";s.d(t,{j9:()=>n,jF:()=>o,nn:()=>i,ws:()=>r});var a=s("./src/widgets/DVWebNodeDetail/utils/isType.ts");const n=e=>(0,a.P)(e,"atv.wps#AmazonMaturityRatingBadge"),i=e=>(0,a.P)(e,"atv.wps#RegulatoryRatingBadge"),r=e=>(0,a.P)(e,"atv.wps#LocalRatingBadge"),o=e=>"all"!==e.id},"./src/widgets/DVWebNodeDetail/utils/reducer.ts":(e,t,s)=>{"use strict";s.d(t,{V:()=>n});var a=s("./src/widgets/DVWebNodeDetail/actions/constants.ts");const n=(e,t,s,n=((e,t)=>({...t,...e})))=>(i=t,r)=>{switch(r.type){case a.k.STORE_MERGE:return e(r.payload)?n(e(r.payload),i):i;case a.k.CHANGE_PAGE:return e(r.payload)||t;default:return s?s(i,r):i}}},"./src/widgets/DVWebNodeDetail/utils/requestServiceData.ts":(e,t,s)=>{"use strict";s.d(t,{D:()=>r});var a=s("./src/util/api/WPSClient.ts"),n=s("./src/widgets/DVWebNodeDetail/components/localizer/localizer.tsx"),i=s("./src/widgets/DVWebNodeDetail/utils/utils.ts");const r=async({context:e,api:t,operation:s,stringBundle:r,logger:o,shouldFetchStarlightContent:l=!1,degradationsReporter:c})=>{const d=new a.e(t);let u;if(void 0!==r){(0,n.xU)(e,r);u=()=>d.GetStrings((0,n.xU)(e,r)).then((e=>e.results))}else u=()=>Promise.resolve(void 0);const[m,p]=await Promise.all([u(),s(d)]);let g;if(l){var h,v;const e=p,t=null==e?void 0:e.widgets,s=null==t||null===(h=t.productDetails)||void 0===h?void 0:h.detail,a="true"===(null==t||null===(v=t.pageContext)||void 0===v?void 0:v.features.disableExploreTab),n=null==s?void 0:s.explorePanelURL;g=Boolean(n&&!a)?await(async e=>{const t=(new Date).getTime(),s=await fetch(e,{method:"GET"}).then((async t=>{const s=await t.text();return{staticPageContent:`<script>if (window) window.exploreTab="${e}"<\/script>${s}`}})).catch((e=>{const t=`${i.EZ}::Starlight::Fetch::Failed`;null==o||o.error(e).count(t,1,!1),null==c||c.reportDegradation({level:"Degraded",scope:"StarlightExplore"})})),a=(new Date).getTime()-t,n=`Starlight Fetch took ${a} MS`,r=`${i.EZ}::Starlight::Fetch::Latency`;return null==o||o.info(n).count(r,a,!1),s})(n):void 0}return{operationResponse:p,stringMap:m,stringBundle:r,starlightResponse:g}}},"./src/widgets/DVWebNodeDetail/utils/stringUtils.ts":(e,t,s)=>{"use strict";s.d(t,{bJ:()=>r,e6:()=>i,qY:()=>n});var a=s("./src/util/utils/strings.ts");const n=(e,t,s)=>{let n=0;return(i,r)=>{const o=e[i];return o?(0,a.VJ)(o,r,t):(0===n&&t.error(`Missing string ${i}`),n+=1,s.isInternal?`MISSING STRING ${i}`:"")}},i=(e,t={})=>({string:e,attrs:t}),r=e=>"string"==typeof e?i(e.trim()):e},"./src/widgets/DVWebNodeDetail/utils/tryCatch.tsx":(e,t,s)=>{"use strict";s.d(t,{Y:()=>l});var a=s("./node_modules/react/index.js"),n=s("./src/widgets/DVWebNodeDetail/selectors/requestContext.ts"),i=s("./src/widgets/DVWebNodeDetail/context/withLogger.tsx"),r=s("./node_modules/react-redux/es/index.js");const o=(0,i.n)((0,r.$j)((e=>({requestContext:(0,n.Iz)(e)})))((({requestContext:{isInternal:e},logger:t,error:s,children:n})=>(t.error(s),e?a.createElement("p",null,null==s?void 0:s.stack):a.createElement(a.Fragment,null,n))))),l=(e,t)=>function(s){try{return e(s)}catch(e){return a.createElement(o,{error:e},t)}}},"./src/widgets/DVWebNodeDetail/utils/url/index.ts":(e,t,s)=>{"use strict";s.d(t,{K1:()=>r,Md:()=>i,P_:()=>o,Z$:()=>l,bf:()=>a.b});var a=s("./src/widgets/DVWebNodeDetail/utils/url/urlGen.ts"),n=s("./node_modules/@amzn/dv-web-node-reftags/index.js");function i(e,t,s){return(0,a.b)("/auth-redirect",{urlData:e,refTag:t,get:{returnUrl:s,signin:"1"}})}const r=e=>`/detail/${e}`;function o(e,t,s){return(0,a.b)(r(t),{urlData:e,refTag:s})}const l=(e,t,s,a)=>{const{queryParameters:r,originalURI:l}=e,c={parameters:{...r,tab:["details"]},originalURI:l,isRetail:"Retail"===e.domain},d=o(c,t,(0,n.i)(a));return i(c,(0,n.i)(s),d)}},"./src/widgets/DVWebNodeDetail/utils/url/urlGen.ts":(e,t,s)=>{"use strict";s.d(t,{b:()=>o});const a=new Set(["aivDebug","appDebug","auiDebug","avClientAddress","avCurrentTerritory","avMarketplace","avRecordTerritory","avRegion","avGeoToken","csTools","debug","experiment","forceAV","isDebug","language","pfDisableCache","pfShowFeatures","serviceDebug","inspector","stringDebug","keepSubscription","tab"]),n=new RegExp("/region/(na|eu|fe|local)"),i=(e,t)=>e.isRetail?(e=>e?"":"/gp/video")(t):(({originalURI:e})=>{const t=e&&e.match(n);return t&&t[0]||""})(e),r=(e,t)=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`,o=(e,{urlData:t,get:s,refTag:n,isShortUrl:o=!1})=>{if(!t)return"";const l=i(t,o),c=((e,t={})=>{return{...(s=e,Object.keys(s).reduce(((e,t)=>a.has(t)?{...e,[t]:s[t]}:e),{})),...t};var s})(t.parameters||{},s),d=Object.keys(c).reduce(((e,t)=>{const s=c[t];if(Array.isArray(s)){const a=s.map((e=>r(t,e)));e.push(...a)}else e.push(r(t,s));return e}),[]).join("&"),u=d?`?${d}`:"",m=n?`/ref=${n}`:"";return`${l}/${(e=>e.replace(/^\//,""))(e)}${m}${u}`}},"./src/widgets/DVWebNodeDetail/utils/utils.ts":(e,t,s)=>{"use strict";s.d(t,{Db:()=>n,Dv:()=>d,EZ:()=>u,VF:()=>c,bc:()=>l,e$:()=>r,w6:()=>i,yb:()=>o});var a=s("./src/shared/utils/utils.ts");const n=e=>!(0,a.xb)(e),i=(e,t)=>Array.from({length:t-e+1},((t,s)=>s+e)),r=e=>parseInt(e,10)||0,o=e=>Boolean(e),l=e=>e,c=e=>e.reduce(((e,t)=>e.concat(t)),[]),d=e=>e&&JSON.stringify(e),u="DVWebNodeDetail"},"./src/widgets/DVWebNodeDetail/utils/widgetNameClasses.ts":(e,t,s)=>{"use strict";s.d(t,{t:()=>a});var a={playback:"js-episode-playback",offers:"js-episode-offers"}},"./src/widgets/DVWebNodeDetail/utils/wps.ts":(e,t,s)=>{"use strict";s.d(t,{Gy:()=>D,Hh:()=>f,P_:()=>_,Qk:()=>v,_E:()=>w,mx:()=>T,py:()=>g});var a=s("./src/util/logger/logger.ts"),n=s("./src/util/api/WPSClient.ts"),i=s("./src/util/api/APIClient.ts"),r=s("./src/util/csm/csm.tsx"),o=s("./src/util/api/util.ts"),l=s("./src/widgets/DVWebNodeDetail/data/normalize.ts"),c=s("./src/widgets/DVWebNodeDetail/actions/index.ts"),d=s("./src/widgets/DVWebNodeDetail/data/getDetailPageInputs.ts"),u=s("./src/widgets/DVWebNodeDetail/utils/requestServiceData.ts");let m=function(e){return e.GetDetailPage="GetDetailPage",e.GetTitles="GetTitles",e.WatchlistToggle="WatchlistToggle",e.GetYourDevicesSettingsPage="GetYourDevicesSettingsPage",e.FetchReviewEligibility="FetchReviewEligibility",e}({});const p=new a.Oc("DVWebNode_detail"),g=new n.e(new i.l(p)),h=async({operation:e,input:t})=>{const s=await g.GetDetailPage(t);return(0,r.v5)(e,!0),(0,l.O7)(s,t.context)},v=(e,t)=>C({input:e,operation:m.GetDetailPage},h,t),b=async({operation:e,input:t})=>{const s=await g.GetTitles(t);return(0,r.v5)(e,!0),(0,l.cg)(s)},D=(e,t)=>C({input:e,operation:m.GetTitles},b,t),y=async({operation:e,input:t})=>{const s=await g.WatchlistToggle(t);return(0,r.v5)(e,!0),s},f=(e,t)=>C({input:e,operation:m.WatchlistToggle},y,t),E=async({operation:e,input:t},s)=>{const a=await g.GetYourDevicesSettingsPage(t,s);return(0,r.v5)(e,!0),a},w=(e,t,s,a)=>C({input:e,operation:m.GetYourDevicesSettingsPage},E,t,s,a),_=(e,t,s,a,n)=>async i=>{const r=await(0,u.D)({context:e,api:g.api,operation:i=>i.GetDetailPage((0,d.eQ)({context:e,titleID:t,isElcano:s},["Episodes","Bonus"],a,n))});i({type:c.k.STORE_MERGE,payload:{...(0,l.O7)(r.operationResponse,e)}})},T=async(e,t,s)=>{const a={context:e,titleID:t,token:s};return await g.FetchReviewEligibility(a)},C=({input:e,operation:t},s,a,n,i)=>async(l,c)=>{const d=e=>{const t=a(e);l(t)};try{(0,r._D)(t),(0,r.NZ)(t);const a={...e,context:c().requestContext},i=await s({input:a,operation:t},n);(0,r.rm)(t,!0),(0,r.QS)(t,!0),d(i)}catch(e){e instanceof o.yM?p.info(e):p.fatal(e),d(null),"function"==typeof i&&i(e)}}},"./src/widgets/DVWebNodeDetail/widgets/Btf/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_WEB_WATCHLIST_TOOLTIP","DV_WEB_DETAILS_TOOLTIP","DV_WEB_OVERFLOW_MENU_TOOLTIP","DV_WEB_ARIA_PREVIOUS_TITLE","DV_WEB_ARIA_NEXT_TITLE","DV_WEB_ARIA_PREVIOUS_N_TITLES","DV_WEB_ARIA_NEXT_N_TITLES","DV_WEB_MORE_DETAILS"]}},"./src/widgets/DVWebNodeLive/components/contactOptions/strings.ts":(e,t,s)=>{"use strict";s.d(t,{j:()=>a});const a={bundles:[s("./src/widgets/DVWebNodeDetail/components/localizer/stringBundle.ts").R.BTF],strings:["DV_DP_prioritize_chat_header"]}},"./src/widgets/DVWebNodeWatchParty/util/offerType.ts":(e,t,s)=>{"use strict";s.d(t,{m:()=>a});s("./src/widgets/DVWebNodeWatchParty/util/types.ts");let a=function(e){return e.SVOD="s",e.TVOD="t",e.SVOD_TVOD="st",e}({})},"./src/widgets/DVWebNodeWatchParty/util/types.ts":(e,t,s)=>{"use strict";let a=function(e){return e[e.ALLOW=0]="ALLOW",e[e.DENY_WITH_UPSELL=1]="DENY_WITH_UPSELL",e[e.DENY=2]="DENY",e[e.NOT_APPLICABLE=3]="NOT_APPLICABLE",e}({});a.ALLOW,a.DENY_WITH_UPSELL,a.DENY,a.NOT_APPLICABLE},"./src/widgets/Explore/Hover/utils.ts":(e,t,s)=>{"use strict";s.d(t,{AK:()=>r,Dy:()=>n,Sy:()=>l,Wx:()=>o,Xe:()=>i,j8:()=>d,o6:()=>a});const a=e=>{var t;const s=null!=e&&e.playbackAction?null==e?void 0:e.playbackAction:null==e?void 0:e.playbackActions[0];if(!s)return;const a=null==e||null===(t=e.progress)||void 0===t?void 0:t.percentage;return{...s,progress:a}},n=e=>{var t;return null==e||null===(t=e.playbackActions)||void 0===t?void 0:t.slice(1)},i=e=>{const t=e&&e.endpoint&&e.endpoint.query&&e.endpoint.query.titleType;if(t){const e=t.toLowerCase();if("season"==e)return"SEASON";if("event"==e)return"LIVEEVENT"}return"UNKNOWN"},r=e=>e&&e.endpoint&&e.endpoint.query&&e.endpoint.query.titleID,o=e=>({onMouseOver:()=>e(!0),onMouseLeave:()=>e(!1),onFocus:()=>e(!0),onBlur:()=>e(!1)}),l=(e,t=0)=>{if(!e)return;const s=(new Date).getTime(),a=e&&e.schedule.sort(((e,t)=>e.start-t.start))||[],n=a.findIndex((e=>e.start<s&&e.end>s));return n>-1?a[n+t]:void 0},c="DVWeb::Hover2019::",d={enrichAttempt:c+"Enrich::Attempt",enrichAttemptInitial:c+"Enrich::Attempt::Initial",enrichComplete:c+"Enrich::Complete",enrichCompleteInitial:c+"Enrich::Complete::Initial",hoverNoEnrich:c+"Hover::NoEnrich",hover:c+"Hover",playerOpened:c+"Playback",mountToFirstEnrich:c+"ToFirstEnrich",fatal:c+"JSFATAL"}},"./src/widgets/Explore/Nav/RetailNav/utils.ts":(e,t,s)=>{"use strict";s.d(t,{n:()=>a});const a=()=>{const e=document.querySelector(".av-retail-m-nav-container");return e&&void 0!==e&&void 0!==e.dataset&&"true"===e.dataset.stickinessready}},"./src/shared/CS/components/BuyBoxMessage/BuyBoxMessage.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={buyboxMessage:"cqF7Dt",noColumnWidth:"Lbk72-"}},"./src/shared/CS/components/CallToActionButton/CallToActionButton.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={callToActionButton:"cngOQC",inverted:"TVlaNW",notInvertedOnHover:"xi3ydU"}},"./src/shared/CS/components/EntitlementMessage/EntitlementMessage.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={entitlementMessage:"_8w2yV3",hide:"V33oTZ",message:"w1sRPC",icon:"U34Qq7",entitledIcon:"Le7hMb",offerIcon:"x5HxKQ",adsIcon:"xe-Hy+"}},"./src/shared/CS/components/LazyImage/LazyImage.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={imageContainer:"om7nme",image:"u2YE+F",imageWithNoAspectRatio:"KLNBWL",imageWithAspectRatio:"Ah1hNY"}},"./src/shared/CS/components/Modal/Modal.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={backgroundOverlay:"_1DR110",modalWrapper:"rvJd8n",fadeInFrames:"r9gEB4",modalContent:"t3E74H",xsModalSize:"fHwPje",sModalSize:"CGno9b",mModalSize:"tow9o1",lModalSize:"oAUzdo",headerWrapper:"_4CeEyk",closeButton:"q2lvVN",bodyWrapper:"UV6HKC",footerWrapper:"kZXeoZ",actionButton:"fuSZLL"}},"./src/shared/CS/components/SecondaryButton/SecondaryButton.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={actionButton:"BM30T6",actionButtonIcon:"gWrHlr",actionButtonLabel:"wZ3MPH",actionButtonTransparent:"nK721o",smallIconVariant:"OLz56u",actionButtonInverted:"_0tLEHl",actionButtonLabelInverted:"p7TDYn",actionButtonLabelTransparent:"_308gAz"}},"./src/shared/CS/components/Text/Text.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={metadataBadge:"d5QfMo",metadata:"bhwVNI",actionButton:"ybdh+2",marker:"oCjIRU",body:"lA7kc2",subHeader:"xn14PB",header:"+eW92P",super:"WqE8n+",mega:"ZFKxPY"}},"./src/shared/Explore/components/DraperPlayer/DraperPlayer.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={preRollPlayer:"_0r6cJW",superhero:"nQnwnT",standardHero:"U7TB9C",packshot:"VSsT7g",packshotWithEntitlementCue:"WTxGCk",standardMiniDetails:"ESUyK5",detailHero:"ir0qzn",intermissionHero:"_4TmRYM",fullScreen:"RR3G1W",chartsCarousel:"+LFxJa",tentpoleHero:"+DtcwT",videoFadeOverlay:"rC0Coh",useDefaultBackground:"sVB4J4",hide:"OTNFD1",show:"g2IzQA"}},"./src/shared/Explore/components/DraperPlayer/DraperPlayer/Controls.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={playerControls:"l-Wis8",packshot:"ExYz7n",standardMiniDetails:"g4YeUe"}},"./src/shared/SPA/downloadButton/DownloadButton.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={button:"mkVcMR",activeSvg:"rEHxtM",circle:"vwS1tQ",stroke:"e1yzVO",withLabelButton:"HbmgXw",simplifiedBuyboxButtonIcon:"xqIcWm",downloadAction:"O1K3Xs",downloadActionInList:"_02AWEW",downloadActionsButtons:"LwbTnQ",downloadActionOverlay:"bY0C+C",downloadActionOpen:"rkWJx6",leftAlignedTooltip:"_7SQI-z",leftAlignedTooltipArrow:"TiSCtc",downloadActionsButton:"qLSu52",downloadActionButtonTrigger:"rq-XpQ",dropListLabel:"P+CYVq",error:"x-LvUz",spin:"VHG7aH",redesignButtonIcon:"k4bKZp",simplifiedBuyBox:"_4H7Jt2",circularButton:"_3XzGJY",idleIcon:"bLS3xD",downloadingIcon:"DgGjmu",completedIcon:"Q6oSgL",disabledIcon:"_20xbDz",seasonCompletedIcon:"vmY6Vv",downloadTooltip:"h58dtm",dropButtonLabel:"zTIuHz",dropListWarningIcon:"_4vq+u7",dropDownButton:"gWk6V8"}},"./src/shared/SPA/downloadButton/DownloadIcons.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={progressIcon:"V5lK-1",progressCircle:"J8mc+U",pauseIcon:"_39DAkm",baseCircle:"lt7bG8"}},"./src/shared/person/toggleFollowingButton/toggleFollowingButton.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={toggleFollowingButton:"kvXYWp",lightButton:"_0LPnds",darkButton:"P9TswE",linkButton:"a9Upan"}},"./src/shared/utils/modalTrigger/ModalTrigger.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={modalFooter:"_1EbNgT"}},"./src/widgets/DVWebNodeDetail/components/acquisition/acquisition.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={buttonFormWrapper:"jwANf3"}},"./src/widgets/DVWebNodeDetail/components/acquisition/defaultMoreWaysToWatchModal.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={groupLabel:"o-jm65",subMessage:"Z1CjPw",subsButton:"yb1qUd",modalWrapper:"uVvxwV",purchaseGroup:"gUV6HA",subsGroup:"_0EAXIv",subsOffer:"mqHsG-",purchaseOffer:"_2pr1z3",purchaseMessageButtonMax:"jCVtsm",purchaseMessageButtonNormal:"_84Jzdc",logo:"+U71YQ"}},"./src/widgets/DVWebNodeDetail/components/acquisition/keepSubscriptionModal.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={keepSubscriptionModal:"art4sK",keepSubscriptionModalContent:"zsoNmS",keepSubscriptionModalHeader:"_9e0CyC",keepSubscriptionModalErrorMessage:"w4D5dD",keepSubscriptionModalLoading:"QKChyZ",keepSubscriptionModalLoadingMessage:"b99HXD"}},"./src/widgets/DVWebNodeDetail/components/acquisition/moreWaysToWatchModal.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={modalWrapper:"jWQ7t4",metadataMessages:"cdL1b5",entitlementMessage:"d-3naa",purchaseGroup:"DZMauP",subsGroup:"T6R+TB",groupLabel:"p7+4uQ",subsOffer:"dYh03I",subscribeImage:"JNM4+t"}},"./src/widgets/DVWebNodeDetail/components/actionBox/actionBox.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={actionBox:"gY9LdC",acquisition:"MTaSUg",buttonContainer:"AHyvzC",disableOverlay:"q3kqym",spinnerWrapper:"MET8-H",smallSpinnerWrapper:"yeOiSk",messageWrapper:"hSHjel",wrapper:"x-raAF",linkWrapper:"jjvyf0",linkWrapperTarget:"WGW6BX",isProcessingTransaction:"zHN5iD",watchParty:"Lw6x+3",purchaseFailedModal:"uvQ0Of",primaryActions:"qREtdJ",secondaryActions:"JDOdwm",simplifiedBuyBoxDownload:"L3PWb-",buttonLabel:"ht8c0U",spinnerNextGen:"B4AhNr",messageWrapperNextGen:"_0thjdQ",actionButtons:"JBdyB4",options:"kLWjrV",watchPartyContainer:"cGVQYZ",entitlementMessage:"_6P9APu",infoMessage:"vZSQsh",buyBoxMessage:"vhfUZR"}},"./src/widgets/DVWebNodeDetail/components/badges/ad.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={adLogo:"Yc3iks"}},"./src/widgets/DVWebNodeDetail/components/badges/amazonRating.module.scss":()=>{"use strict"},"./src/widgets/DVWebNodeDetail/components/badges/rating.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={rating:"SGh88h",logoBadge:"_6V8W9M"}},"./src/widgets/DVWebNodeDetail/components/badges/subtitles-default.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={subtitlesLogo:"ydOgE7"}},"./src/widgets/DVWebNodeDetail/components/carousel/carouselCollectionItem.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={collection:"JP1PW9",title:"MPmA7a",imageWrapper:"OkMOea",packshot:"wsM2jE",image:"SZpUKa",carouselWrapper:"_51iRLy",fallbackPackshot:"NOHCyu",hover:"rFSxvn",hideScroll:"MVRINy",packshotBadges:"YrFwR9",packshotBadge:"Xsj3j8",singleItemCarousel:"rJJen6",focusedCarousel:"I4tMVq",scrollButton:"JBzv0i",isLast:"QovQkl",carouselCollectionItemWrapper:"_0JGrwi"}},"./src/widgets/DVWebNodeDetail/components/castAndCrew/castAndCrew.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={collection:"Y8A2VH",title:"tZRXDP",imageWrapper:"No2kw6",packshot:"Bk4HaQ",image:"vRK1dR",carouselWrapper:"GSTAfw",fallbackPackshot:"jiQSJM",hover:"_0EP7WD",hideScroll:"MnWq-a",packshotBadges:"_2BqDEL",packshotBadge:"+Ijku7",singleItemCarousel:"uhb7-n",focusedCarousel:"up1vUI",scrollButton:"qwLjP7",isLast:"yceHTa",carouselCollectionItemWrapper:"qpSDTg",name:"B9cJeJ",nameRow:"jZQC5t",personPageLink:"VcU6gy",imageRow:"xColpE",showCastImage:"RE+thT",castImage:"WC1T0C",castImageWrapper:"H+ofU5",noImage:"_8-x6Yh",followingButtonWrapper:"r-Ib6n",poweredBy:"oqzGDt"}},"./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviews.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={reviewsContainer:"LdPKTS"}},"./src/widgets/DVWebNodeDetail/components/customerReviews/customerReviewsDefault.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={reviewsContainer:"fg-jlI",mainReviewSection:"fZR40e",fallbackView:"_80k3sc",fallbackImage:"KbubaX",fallbackMessage:"WMdiz0",sortingHeaderText:"wnytsL",otherCountriesHeader:"_54OsLO",sortingDropList:"gLpPGV",boldText:"-Ia2qy",reviewItem:"OSM+i2",userSubmittedReview:"_8ndtbk",reviewHeading:"DF3Uzg",reviewRating:"Fo7DNQ",reviewExpander:"LyW4cl",verifiedPurchaseText:"wa9uKU",helpfulText:"_6S9bGH",customerAvatar:"QD5-og",customerNameUrl:"Tm4tX-",customerName:"GxXLtF",submittedOnText:"nDnHI8",iconAndName:"F+qeZF",seeAllReviews:"-oLe4t",reviewsSpinner:"-UP00y",firstToReviewButton:"urfxg5",fallbackViewMessage:"ju09Bb",translationLink:"Xd0KQK",pendingApproval:"JeiqnT"}},"./src/widgets/DVWebNodeDetail/components/customerReviews/reviewsHistogram.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={histogramContainer:"-u9wyh",reviewsHeader:"zxg5WK",reviewRating:"k6gAQL",averageRatingLabel:"_0dtNqJ",totalReviewCountText:"OfdhY9",histogramRows:"Jqx1Dk",histogramRowWrapper:"fgMBHJ",histogramRow:"AQdt0N",ratingDisplayLabel:"unc626",percentageDisplay:"q93Slh",histogramBar:"qsqi9v",reviewButtons:"_7nbB59",readReviewButton:"dg8uVH",writeReviewButton:"aATZBr",ratingsExplanation:"J55FqN",explanationText:"noAPp6",explanationHeader:"h-MIIj",explanationBody:"KdZFkO",expanderIcon:"S2gfEe"}},"./src/widgets/DVWebNodeDetail/components/customerReviews/reviewsHistogramDefault.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={histogramContainer:"FAU8ES",reviewsHeader:"GrY6bg",reviewRating:"PHQ+M6",averageRatingLabel:"xNr09u",totalReviewCountText:"xnGYm0",histogramRows:"Rz9DP+",histogramRowWrapper:"q15-oy",histogramRow:"_27GxsF",ratingDisplayLabel:"EMdySk",percentageDisplay:"rfARWB",histogramBar:"_29fVVe",writeReviewButton:"dApeOA",readReviewButton:"PyGPM9",reviewButtons:"+IjKts",ratingsExplanation:"b2cNgt",explanationText:"l-v4Vd",explanationHeader:"DdYFKD",explanationBody:"QN896o",expanderIcon:"ozEv9l"}},"./src/widgets/DVWebNodeDetail/components/customerReviews/submissionModal.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={modal:"Q3Lf+1",modalContent:"RSpaQK",collapsedContent:"hwgtZW",expandedContentHidden:"_4Qz4Uu",expandedContent:"_3ZPyok",submissionModalHeader:"AFrhoU",submissionButtonContainer:"JOwt2g",packshot:"e1z9bh",titleAndRating:"augrmr",titleText:"gOBzB5",addMoreText:"lwMdUi",baseInput:"JMbuhv",headlineInput:"fbsbzL",bodyInput:"qeW8RB",inputError:"NeTNG4",submitButton:"VpIGV7",textWithOptional:"_8IbXPz",optionalText:"DzVWQT",errorMessage:"_3qNpH4",eligibilitySpinner:"OQYs+4"}},"./src/widgets/DVWebNodeDetail/components/episode/episode.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={base:"c5qQpO",episode:"_2MB5uV",expanderToggle:"lzsdji",expanderToggleInput:"_6tpIy4",packshotContainer:"st02Fe",header:"dCocJw",playActionContainer:"IPL4PS",titleContainer:"wfjdyJ",actionBox:"xy8xpL",tags:"_1wFEYz",synopsisContainer:"_1+KXv2",synopsis:"hjuloM",entitlementContainer:"I00Zqz",hover:"GMyJNy",expandable:"ci7S35",comingSoonLeavingSoonWarnings:"tLqhA2",relevantWarnings:"fC5OsB"}},"./src/widgets/DVWebNodeDetail/components/episode/episodeDefault.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={episode:"e3d2i5",expanderToggleInput:"EnXR1X",chevron:"_2YGyIt",expanderToggleChevron:"gm7vx+",expanderToggle:"oJY8TB",packshot:"zhnjdM",fallbackPackshot:"RGLViM",packshotDimmed:"Dp9B8g",synopsis:"_5QPFYF",episodeTitle:"LgLaPt",tags:"_6RL-Qk",regulatoryRatingContainer:"_0obM27",subtitles:"_9y9vXZ",languages:"_3joRZO",tooltipTitle:"m3qQrK",tooltipContent:"eVENaQ",episodeWithPlayback:"VipO9S",episodeWithDownload:"_2l-KdV",expandable:"bldI+6",actionBox:"_9gOmvb",comingSoonLeavingSoonWarnings:"ZK2eBF",relevantWarnings:"PZ8bxq"}},"./src/widgets/DVWebNodeDetail/components/episodeList/episodeList.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={pageSection:"qZcOin",episodeList:"GG33WY",hidden:"QiXUWp",expanderLink:"DwgwxH",episodeSpinner:"xTufxU",episodeListHeader:"jhLna6",headerWithDropListDefault:"z0leGf",headerWithDropList:"PpE56C",sortDropList:"KZyJV+",boldText:"k3tzF8"}},"./src/widgets/DVWebNodeDetail/components/episodePackshot/episodePackshot.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={packshotBase:"_2WUZp7",packshot:"Ypm4jh",packshotDimmed:"ma7+IK",fallbackPackshot:"zHj9w1"}},"./src/widgets/DVWebNodeDetail/components/episodePlayback/episodePlayback.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={title:"z0YOMS",inProgress:"Vg+dns",purchasing:"GmaVqx",progressWrapper:"zsmOOS",playboxUnavailable:"_5L0aCS",playbackNotifications:"mdPKXL",playbackMessage:"EGO1cm",playbox:"SCrBxN",playboxActionLabel:"_7A5zP2"}},"./src/widgets/DVWebNodeDetail/components/episodeProgress/episodeProgress.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={resumeTimeContainer:"Hz5hRx",progressBarBackground:"RRMK9M",progressBar:"jSpSqT",progressContainer:"Jpdla8"}},"./src/widgets/DVWebNodeDetail/components/episodeTitle/episodeTitle.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={title:"izvPPq",divider:"Z7ThIH",name:"P1uAb6",messageContainer:"Pol9sO",notificationMessage:"qgPoVW"}},"./src/widgets/DVWebNodeDetail/components/error/withFatalCheck.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={error:"GQ48Qw"}},"./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasCarouselItem.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={collection:"MALhoE",title:"ELsiFX",imageWrapper:"_7jPJfN",packshot:"iqjZGR",image:"Co2OBz",gridBeardInfo:"_5DR289",beardInfoContainer:"_8LF9av",actionBox:"Q+QNVn",carouselWrapper:"CK1dNe",secondLine:"bMAJNr",synopsis:"ZLbCaU",progressWrapper:"_6Ot8FR",purchaseButtonsShown:"ub6ccH",beard:"U+1Xaw",fallbackPackshot:"_9GgJJJ",hideScroll:"TVsfSx"}},"./src/widgets/DVWebNodeDetail/components/extrasCarousel/extrasPlayButton.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={playButton:"LNSL4k"}},"./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasCollection.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={collection:"_4fOMiL",title:"Dsc37Q",collectionContainer:"cU2qwd"}},"./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasCollectionItem.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={extrasCollectionItemContainer:"_1z3n6o",metadata:"YVsKwy",detailsModalContainer:"mlz2Ng",expandedDetailsContainer:"QCukp1",moreIcon:"WoBc4f",showMoreSysnopsis:"_8S0ovV",synopsisContainer:"ZgLWZL",detailsHoverContainer:"uUshGS",hovering:"OpEEDk",fadeInFrames:"-6qRiX",title:"lTKTFD",extrasCollectionHoveredItem:"_6R2T0w","fade-in":"tdPx0P",imageWrapper:"_01XR4J",packshot:"_8eIApy",image:"OcuQZi",fallbackPackshot:"L86J3T",extrasItemDetailsContainer:"FP4jFw",synopsis:"CUIQci",synopsisModalWrapper:"rPtVMq",synopsisModal:"WZ0-4O",synopsisModalHeading:"GcQo4B",progressWrapper:"I-4xyr"}},"./src/widgets/DVWebNodeDetail/components/extrasCollection/extrasPlayButton.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={playButtonContainer:"w2AeFG",playButton:"Yp4+mK",hidePlayButton:"_0a9PyO",showPlayButton:"Uwlsa4",fadeInFrames:"xFp6xA"}},"./src/widgets/DVWebNodeDetail/components/giftCard/giftCardModal.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={giftCardModal:"bUGVJ1",giftCardModalHeader:"-X42Zt",giftCardButton:"Yyg-jy",promotionMessage:"EWihtr",balancesTitle:"MD2LwN",balancesExplanation:"oFN3Qh",balancesTable:"YLzhFm",giftCardModalMessageBlock:"E9J--q",giftCardModalContentStatusBlock:"dwkp2r",codeSubmissionForm:"_9+Fgpg",codeSubmissionFormInput:"_9AZ4uv",codeSubmissionFormButton:"kuX0sP",codeSubmissionFormLabel:"dOVrWU",codeSubmissionFormMessageBlock:"GPW0YT"}},"./src/widgets/DVWebNodeDetail/components/images/responsiveImage.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={imageContainer:"LM5DPa",full:"_9uLKMo",showLoaded:"shKs6e",thumb:"_4p1P+M"}},"./src/widgets/DVWebNodeDetail/components/morePurchaseOptions/btfMorePurchaseOptions.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={trigger:"KtQONK",morePurchaseButton:"j+JIca"}},"./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormats.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={container:"_6Cfqrx",header:"P8edBK",otherFormats:"jSaLON",formatButton:"K83y25"}},"./src/widgets/DVWebNodeDetail/components/otherFormats/otherFormatsDefault.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={header:"Bl20JL",otherFormats:"DotyDp"}},"./src/widgets/DVWebNodeDetail/components/playAction/playAction.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={playButton:"Czys2H"}},"./src/widgets/DVWebNodeDetail/components/playButton/PlayButton.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={circle:"y-lHDT",opaque:"gyqrCC",focus:"DKGa7J",active:"Hatocq",seeThrough:"CRqeJ+",icon:"xnG7jf",startOverIcon:"jX8-lv",packshotButton:"_0L2mF-",squareButton:"nfIZKu",progress:"dQWRpV",freeButton:"lrv9D8",progressBar:"Cm9l9Q",playbox:"yuYCCB",smallPlaybox:"xZxyzr",largePlaybox:"sHn4c8",playButtonRightContent:"NEgBmE",blackPlayArrow:"m27DjZ",circularButton:"_3ZfJY6",trailerTooltip:"dL1gwP"}},"./src/widgets/DVWebNodeDetail/components/playbackMessaging/playbackMessaging.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={wrapper:"vzk7VW",messages:"Qu-pPM",maturityLockMessage:"F7Mqup",icon:"Nwfvke",logo:"p0DVjq",acceptedPreorder:"nF+RrX",logoMessage:"kxO77E",keepSubscriptionPlaybackMessage:"xq0vmz",comingSoonMessage:"_1tpdIT",comingSoonMessageWrapper:"_1ogLuo"}},"./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfo.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={info:"+AZpnL",subHeader:"_5HWLFr",description:"_3k277F",atfInfo:"FxLIkd",terms:"Bt0lXf",breakWords:"iU-0Wi",productMetaInfo:"YOiaJT",termsAndConditions:"e+z1sp"}},"./src/widgets/DVWebNodeDetail/components/productMetaInfo/productMetaInfoDefault.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={info:"MEhfGB",atfInfo:"YpfFsS",breakWords:"vgA2W1",modalWrapper:"sA7YUP",productMetaInfo:"eYHJv8"}},"./src/widgets/DVWebNodeDetail/components/redeemAndPromoLink/redeemAndPromoLink.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={redeemAndPromoLink:"UNAQwZ"}},"./src/widgets/DVWebNodeDetail/components/refund/refund.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={refundMessage:"J2IboU",content:"LuFiFm",dropList:"IycAQ7",submitButton:"b8lPsL"}},"./src/widgets/DVWebNodeDetail/components/refund/refundDefault.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={refundLink:"-cJMXV",content:"iuSRnR",dropList:"gcxFCS",modal:"_0Q6LwB",submitButton:"LbEySo"}},"./src/widgets/DVWebNodeDetail/components/schedule/schedule.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={avScheduleItem:"WZt+l7",avScheduleItemCol:"zbEXUa",scheduleRestrictedMessage:"WaScZU",scheduleDateBadge:"rgs+8j",scheduleTimeBadge:"pUHo6f",avScheduleList:"_6Nt94l",header:"aZ92AY"}},"./src/widgets/DVWebNodeDetail/components/stack/stack.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={stack:"_3TpUE3",s100:"h6u6Oq","padding-s100":"F2ZvMI",s200:"B2FHQm","padding-s200":"qrf5Ly",s300:"JRTz81","padding-s300":"Rl520k",s400:"u+3gZF","padding-s400":"_1Rs30L",s500:"xMaCmZ","padding-s500":"iEBiKb",s600:"yvbyrd","padding-s600":"AKsAT5",s700:"_0kLzxk","padding-s700":"UPJLw0",s800:"v8T+lH","padding-s800":"wSsTRx",stackHorizontal:"z4Sr3s"}},"./src/widgets/DVWebNodeDetail/components/synopsis/synopsis.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={synopsis:"-12Ln6",atfSynopsis:"_8PDXAv",btfSynopsis:"_1zr6Jb",synopsisModal:"P81lki",synopsisModalWrapper:"sTZ2hV",synopsisContent:"rUmpDK",synopsisModalHeading:"n5qv6M"}},"./src/widgets/DVWebNodeDetail/components/tabs/btfTabs.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={relatedTabContainer:"-6z7z1",contentWrapperTabbed:"erfMat",tab:"KlgOyj",isSelectedTab:"_8RrAYN",headers:"+cUdBP",headerButton:"ofo4B0",relatedTabWrapper:"_9A7-O+",isSelected:"MH6gd4",headerText:"G4HmBR",nav:"lHvVmE",btfProductMetaInfo:"RAY532",customerReviews:"FGE6d6",detailsTabContainer:"_5AqAeh",staticNav:"bYwFEE",stickyNav:"D9Eg0q",focusIn:"dfkJCU","fade-in":"up6UR4",isFocused:"FHzAq8",hideStickyNav:"lFrG8T",hideStaticTabs:"UqjI0e",hide:"GF0D-Z"}},"./src/widgets/DVWebNodeDetail/components/tabs/btfTabsDefault.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={contentWrapperTabbed:"Jk-+kP",tab:"xk7HhS",tabSelector:"d3aQ+v",headers:"h1sAiy",headerWrapper:"M0fbHX",header:"P2ShoC",relatedTabWrapper:"OCdoyg",isSelected:"NUh+RK",nav:"-Z+tsn",isPVNavNotSticky:"eOPxeQ",isWinApp:"IXp6Ue",stickyNav:"CbFirP",btfProductMetaInfo:"_8-vart",customerReviews:"_00OIti"}},"./src/widgets/DVWebNodeDetail/components/utilityClasses.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={fullWidth:"p-jAFk",alwaysInline:"keDd12",fullWidthPhablet:"dFF2zC",fullWidthMobile:"CJkm-9",stretchHeight:"N1lwE5",pageSection:"Xd04qv",pageSectionNextGen:"dLtvAP",disablePointerEvents:"_2Z6WqH",enablePointerEvents:"seuE37"}},"./src/widgets/DVWebNodeDetail/components/watchPartyLink/watchPartyLink.module.scss":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});const a={submit:"bWvmGD",tooltip:"Ox-Ksg",ftueContainer:"pQHqx4",ftueHeader:"wSdtUR",ftueBody:"_7zkuAh",buttonFormWrapper:"TdSLJ3",formSpacing:"_1fytEU",circularButton:"she2NV",icon:"VEKyeK",buttonLabel:"nhs2Tm",watchPartyTooltip:"LZitTd"}},"./node_modules/@amzn/dvui/dist/Icons/AdsBadge.css":(e,t,s)=>{"use strict";s.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Email.css":(e,t,s)=>{"use strict";s.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Facebook.css":(e,t,s)=>{"use strict";s.r(t)},"./node_modules/@amzn/dvui/dist/Icons/FullscreenEnter.css":(e,t,s)=>{"use strict";s.r(t)},"./node_modules/@amzn/dvui/dist/Icons/FullscreenExit.css":(e,t,s)=>{"use strict";s.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Pinterest.css":(e,t,s)=>{"use strict";s.r(t)},"./node_modules/@amzn/dvui/dist/Icons/Twitter.css":(e,t,s)=>{"use strict";s.r(t)}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return a[e].call(s.exports,s,s.exports,i),s.exports}i.m=a,e=[],i.O=(t,s,a,n)=>{if(!s){var r=1/0;for(d=0;d<e.length;d++){for(var[s,a,n]=e[d],o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(i.O).every((e=>i.O[e](s[l])))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,a,n]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,s)=>(i.f[s](e,t),t)),[])),i.u=e=>(({8355:"detail-purchase",8584:"detail-hover",8918:"detail-entitlement"}[e]||e)+"."+{6745:"a3ff22dacccebf7170a0",8355:"c4531f4171d098cec71e",8584:"9dc51a955bb146792182",8918:"09649d9b7b3f4577c105"}[e]+".js"),i.miniCssF=e=>({8584:"detail-hover",8918:"detail-entitlement"}[e]+"."+{8584:"8618186ba144afa8e610",8918:"120320a2e7f6c99f790b"}[e]+".css"),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},s="@amzn/dvwebnode:",i.l=(e,a,n,r)=>{if(t[e])t[e].push(a);else{var o,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==s+n){o=u;break}}if(!o){l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",s+n),o.src=e;var m=o.src.split("/"),p=m[m.length-1].split("."),g=window.DVWEBNODE_MANIFESTS[p[0]+".js"],h=g||window.DVWEBNODE_MANIFESTS[m[m.length-1]],v=i.p+h+(g?"?DVWebNode_"+p[0]:"");o.src=v,o.crossOrigin="anonymous"}t[e]=[a];var b=(s,a)=>{o.onerror=o.onload=null,clearTimeout(D);var n=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(a))),s)return s(a)},D=setTimeout(b.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=b.bind(null,o.onerror),o.onload=b.bind(null,o.onload),l&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=2167,i.p="https://m.media-amazon.com/images/I/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,s)=>{var a=i.miniCssF(e),n=i.p+a;if(((e,t)=>{for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var n=(r=s[a]).getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(n===e||n===t))return r}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){var r;if((n=(r=i[a]).getAttribute("data-href"))===e||n===t)return r}})(a,n))return t();((e,t,s,a,n)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=s=>{if(r.onerror=r.onload=null,"load"===s.type)a();else{var i=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=o,r.parentNode.removeChild(r),n(l)}},r.href=t,function(e){if(e.href){var t=e.href.match(/I\/(.*?)\./)[1]+".css",s=e.href.match(/I\/(.*)\./)[1]+".css";return(window.DVWEBNODE_MANIFESTS[t]||window.DVWEBNODE_MANIFESTS[s])&&(e.href=i.p+(window.DVWEBNODE_MANIFESTS[t]||window.DVWEBNODE_MANIFESTS[s])),document.head.appendChild(e)}document.head.appendChild(e)}(r)})(e,n,0,t,s)})),t={2167:0,6745:0};i.f.miniCss=(s,a)=>{t[s]?a.push(t[s]):0!==t[s]&&{8584:1,8918:1}[s]&&a.push(t[s]=e(s).then((()=>{t[s]=0}),(e=>{throw delete t[s],e})))}}})(),(()=>{var e={2167:0,6745:0};i.f.j=(t,s)=>{var a=i.o(e,t)?e[t]:void 0;if(0!==a)if(a)s.push(a[2]);else{var n=new Promise(((s,n)=>a=e[t]=[s,n]));s.push(a[2]=n);var r=i.p+i.u(t),o=new Error;i.l(r,(s=>{if(i.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var n=s&&("load"===s.type?"missing":s.type),r=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,a[1](o)}}),"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,s)=>{var a,n,[r,o,l]=s,c=0;if(r.some((t=>0!==e[t]))){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(l)var d=l(i)}for(t&&t(s);c<r.length;c++)n=r[c],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(d)},s=self.webpackChunk_amzn_dvwebnode=self.webpackChunk_amzn_dvwebnode||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var r=i.O(void 0,[1216,9351],(()=>i("./src/entrypoints/hydration/detail.tsx")));r=i.O(r)})();
//# sourceMappingURL=http://sourcemaps.aka.amazon.com/0a2a9d784edf8e47e24761ff684ed3fcac665a961a27fed64146cc382b781f3f623b758f334e78a9753ee50203ce3d8bef1208c6240cec9178592bfae396b33da1c717e18e93b9d983321dfe62b5a7be16356d2723d2613654cd4d4aaa5b6e3c8f9047baa552e24b6ffd13640d72271cde1b282ccee591d90eb4a37421cc66a491cc102c9c3f9eb15f8ec91ab4837e93eabc17bd5de0ffdac870839a2e84ff4c5b4828cab02b3658681aee3733bda9d50cc9b30478d07d94a663aede2b9dd798341260a7a5e43cd88d4f0b0a16f919829544d9da325c5161859d67de9d875a907da2db25cb329024fb5b13370e50425e19740198a8a8f91d87402178f37d49e1?np=1